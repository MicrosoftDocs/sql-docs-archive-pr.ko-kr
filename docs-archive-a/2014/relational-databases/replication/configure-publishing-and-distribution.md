---
title: 게시 및 배포 구성 | Microsoft 문서
ms.custom: ''
ms.date: 06/30/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- replication [SQL Server], distribution
- distribution configuration [SQL Server replication]
- publishing [SQL Server replication], configuring
ms.assetid: 3cfc8966-833e-42fa-80cb-09175d1feed7
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: afd1544b5412c6ce2d83a9a1e9a50ddf662b3056
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87646384"
---
# <a name="configure-publishing-and-distribution"></a><span data-ttu-id="33087-102">게시 및 배포 구성</span><span class="sxs-lookup"><span data-stu-id="33087-102">Configure Publishing and Distribution</span></span>
  <span data-ttu-id="33087-103">이 항목에서는 [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] , [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]또는 RMO(복제 관리 개체)를 사용하여 [!INCLUDE[tsql](../../includes/tsql-md.md)]에서 게시 및 배포를 구성하는 방법에 대해 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="33087-103">This topic describes how to configure publishing and distribution in [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] by using [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], [!INCLUDE[tsql](../../includes/tsql-md.md)], or Replication Management Objects (RMO).</span></span>  
  
  
##  <a name="before-you-begin"></a><a name="BeforeYouBegin"></a> <span data-ttu-id="33087-104">시작하기 전에</span><span class="sxs-lookup"><span data-stu-id="33087-104">Before You Begin</span></span>  
  
###  <a name="security"></a><a name="Security"></a> <span data-ttu-id="33087-105">보안</span><span class="sxs-lookup"><span data-stu-id="33087-105">Security</span></span>  
 <span data-ttu-id="33087-106">자세한 내용은 [보안 복제 배포](security/view-and-modify-replication-security-settings.md)를 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="33087-106">For more information, see [Secure Replication Deployment](security/view-and-modify-replication-security-settings.md).</span></span>  
  
##  <a name="using-sql-server-management-studio"></a><a name="SSMSProcedure"></a> <span data-ttu-id="33087-107">SQL Server Management Studio 사용</span><span class="sxs-lookup"><span data-stu-id="33087-107">Using SQL Server Management Studio</span></span>  
 <span data-ttu-id="33087-108">새 게시 마법사나 배포 구성 마법사를 사용하여 배포를 구성합니다.</span><span class="sxs-lookup"><span data-stu-id="33087-108">Configure distribution using the New Publication Wizard or the Configure Distribution Wizard.</span></span> <span data-ttu-id="33087-109">배포자를 구성한 다음 **배포자 속성 - \<Distributor>** 대화 상자에서 속성을 확인하고 수정합니다.</span><span class="sxs-lookup"><span data-stu-id="33087-109">After the Distributor is configured, view and modify properties in the **Distributor Properties - \<Distributor>** dialog box.</span></span> <span data-ttu-id="33087-110">**db_owner** 고정 데이터베이스 역할의 멤버가 게시를 만들 수 있도록 배포자를 구성하려는 경우 또는 게시자가 아닌 원격 배포자를 구성하려는 경우 배포 구성 마법사를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="33087-110">Use the Configure Distribution Wizard if you want to configure a Distributor so that members of the **db_owner** fixed database roles can create publications, or because you want to configure a remote Distributor that is not a Publisher.</span></span>  
  
#### <a name="to-configure-distribution"></a><span data-ttu-id="33087-111">배포를 구성하려면</span><span class="sxs-lookup"><span data-stu-id="33087-111">To configure distribution</span></span>  
  
1.  <span data-ttu-id="33087-112">[!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]에서 배포자가 될 서버에 연결한 다음 서버 노드를 확장합니다. 게시자와 배포자가 같은 서버인 경우가 많습니다.</span><span class="sxs-lookup"><span data-stu-id="33087-112">In [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], connect to the server that will be the Distributor (in many cases, the Publisher and Distributor are the same server), and then expand the server node.</span></span>  
  
2.  <span data-ttu-id="33087-113">**복제** 폴더를 마우스 오른쪽 단추로 클릭한 다음 **배포 구성**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="33087-113">Right-click the **Replication** folder, and then click **Configure Distribution**.</span></span>  
  
3.  <span data-ttu-id="33087-114">배포 구성 마법사에 따라 다음을 수행하세요.</span><span class="sxs-lookup"><span data-stu-id="33087-114">Follow the Configure Distribution Wizard to:</span></span>  
  
    -   <span data-ttu-id="33087-115">배포자를 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="33087-115">Select a Distributor.</span></span> <span data-ttu-id="33087-116">로컬 배포자를 사용 하려면 ' '을 (를 **) \<ServerName> 자체 배포자로 사용 합니다 .를 선택 합니다. SQL Server는 배포 데이터베이스와 로그를 만듭니다**.</span><span class="sxs-lookup"><span data-stu-id="33087-116">To use a local Distributor, select **'\<ServerName>' will act as its own Distributor; SQL Server will create a distribution database and log**.</span></span> <span data-ttu-id="33087-117">원격 배포자를 사용하려면 **다음 서버를 배포자로 사용**을 선택한 다음 서버를 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="33087-117">To use a remote Distributor, select **Use the following server as the Distributor**, and then select a server.</span></span> <span data-ttu-id="33087-118">서버는 미리 배포자로 구성되어 있어야 하며 해당 배포자를 사용하도록 게시자를 설정해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="33087-118">The server must already be configured as a Distributor, and the Publisher must be enabled to use the Distributor.</span></span> <span data-ttu-id="33087-119">자세한 내용은 [배포자에서 원격 게시자 설정&#40;SQL Server Management Studio&#41;](enable-a-remote-publisher-at-a-distributor-sql-server-management-studio.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="33087-119">For more information, see [Enable a Remote Publisher at a Distributor &#40;SQL Server Management Studio&#41;](enable-a-remote-publisher-at-a-distributor-sql-server-management-studio.md).</span></span>  
  
         <span data-ttu-id="33087-120">원격 배포자를 선택할 경우 **관리 암호** 페이지에서 게시자에서 배포자로 연결할 때 사용될 암호를 입력합니다.</span><span class="sxs-lookup"><span data-stu-id="33087-120">If you select a remote Distributor, you must enter a password on the **Administrative Password** page for connections made from the Publisher to the Distributor.</span></span> <span data-ttu-id="33087-121">이 암호는 원격 배포자에서 게시자를 설정할 때 지정한 암호와 일치해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="33087-121">This password must match the password specified when the Publisher was enabled at the remote Distributor.</span></span>  
  
    -   <span data-ttu-id="33087-122">로컬 배포자에 대해 루트 스냅샷 폴더를 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="33087-122">Specify a root snapshot folder (for a local Distributor).</span></span> <span data-ttu-id="33087-123">스냅샷 폴더는 공유하도록 지정된 디렉터리일 뿐이며 이 폴더에 읽기/쓰기 작업을 수행하려면 에이전트에게 충분한 액세스 권한이 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="33087-123">The snapshot folder is simply a directory that you have designated as a share; agents that read from and write to this folder must have sufficient permissions to access it.</span></span> <span data-ttu-id="33087-124">이 배포자를 사용하는 각 게시자는 루트 폴더 아래에 폴더를 만들고, 각 게시는 스냅샷 파일을 저장할 게시자 폴더 아래에 폴더를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="33087-124">Each Publisher that uses this Distributor creates a folder under the root folder, and each publication creates folders under the Publisher folder in which to store snapshot files.</span></span> <span data-ttu-id="33087-125">폴더의 적절한 보안 유지 방법은 [스냅샷 폴더 보안 설정](security/secure-the-snapshot-folder.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="33087-125">For more information on securing the folder appropriately, see [Secure the Snapshot Folder](security/secure-the-snapshot-folder.md).</span></span>  
  
    -   <span data-ttu-id="33087-126">로컬 배포자에 대해 배포 데이터베이스를 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="33087-126">Specify the distribution database (for a local Distributor).</span></span> <span data-ttu-id="33087-127">배포 데이터베이스는 트랜잭션 복제에 대한 모든 유형의 복제 및 트랜잭션에 대한 메타데이터와 기록 데이터를 저장합니다.</span><span class="sxs-lookup"><span data-stu-id="33087-127">The distribution database stores metadata and history data for all types of replication and transactions for transactional replication.</span></span>  
  
    -   <span data-ttu-id="33087-128">필요에 따라 배포자를 사용할 수 있도록 다른 게시자를 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="33087-128">Optionally enable other Publishers to use the Distributor.</span></span> <span data-ttu-id="33087-129">배포자를 사용할 수 있도록 다른 게시자를 설정한 경우 **배포자 암호** 페이지에서 이러한 게시자에서 배포자로 연결할 때 사용될 암호를 입력해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="33087-129">If other Publishers are enabled to use the Distributor, you must enter a password on the **Distributor Password** page for connections made from these Publishers to the Distributor.</span></span>  
  
    -   <span data-ttu-id="33087-130">필요에 따라 구성 설정을 스크립팅합니다.</span><span class="sxs-lookup"><span data-stu-id="33087-130">Optionally script configuration settings.</span></span> <span data-ttu-id="33087-131">자세한 내용은 [Scripting Replication](scripting-replication.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="33087-131">For more information, see [Scripting Replication](scripting-replication.md).</span></span>  
  
##  <a name="using-transact-sql"></a><a name="TsqlProcedure"></a> <span data-ttu-id="33087-132">Transact-SQL 사용</span><span class="sxs-lookup"><span data-stu-id="33087-132">Using Transact-SQL</span></span>  
 <span data-ttu-id="33087-133">복제 저장 프로시저를 사용하여 복제 게시 및 배포를 프로그래밍 방식으로 구성할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="33087-133">Replication publishing and distribution can be configured programmatically using replication stored procedures.</span></span>  
  
#### <a name="to-configure-publishing-using-a-local-distributor"></a><span data-ttu-id="33087-134">로컬 배포자를 사용하여 게시를 구성하려면</span><span class="sxs-lookup"><span data-stu-id="33087-134">To configure publishing using a local distributor</span></span>  
  
1.  <span data-ttu-id="33087-135">[sp_get_distributor&#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-get-distributor-transact-sql)를 실행하여 서버가 이미 배포자로 구성되어 있는지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="33087-135">Execute [sp_get_distributor &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-get-distributor-transact-sql) to determine if the server is already configured as a Distributor.</span></span>  
  
    -   <span data-ttu-id="33087-136">결과 집합의 **installed** 값이 **0**인 경우 master 데이터베이스의 배포자에서 [sp_adddistributor&#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-adddistributor-transact-sql)를 실행합니다.</span><span class="sxs-lookup"><span data-stu-id="33087-136">If the value of **installed** in the result set is **0**, execute [sp_adddistributor &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-adddistributor-transact-sql) at the Distributor on the master database.</span></span>  
  
    -   <span data-ttu-id="33087-137">결과 집합의 **distribution db installed** 값이 **0**인 경우 master 데이터베이스의 배포자에서 [sp_adddistributiondb&#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-adddistributiondb-transact-sql)를 실행합니다.</span><span class="sxs-lookup"><span data-stu-id="33087-137">If the value of **distribution db installed** in the result set is **0**, execute [sp_adddistributiondb &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-adddistributiondb-transact-sql) at the Distributor on the master database.</span></span> <span data-ttu-id="33087-138">\*\* \@ 데이터베이스\*\*에 대 한 배포 데이터베이스의 이름을 지정 합니다.</span><span class="sxs-lookup"><span data-stu-id="33087-138">Specify the name of the distribution database for **\@database**.</span></span> <span data-ttu-id="33087-139">필요에 따라 \*\* \@ max_distretention\*\* 에 대 한 최대 트랜잭션 보존 기간 및 \*\* \@ history_retention\*\*에 대 한 기록 보존 기간을 지정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="33087-139">Optionally, you can specify the maximum transactional retention period for **\@max_distretention** and the history retention period for **\@history_retention**.</span></span> <span data-ttu-id="33087-140">새 데이터베이스를 만드는 경우 원하는 데이터베이스 속성 매개 변수를 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="33087-140">If a new database is being created, specify the desired database property parameters.</span></span>  
  
2.  <span data-ttu-id="33087-141">게시자 이기도 한 배포자에서 \*\* \@ working_directory\*\*에 대 한 기본 스냅숏 폴더로 사용할 UNC 공유를 지정 하 [sp_adddistpublisher &#40;transact-sql&#41;](/sql/relational-databases/system-stored-procedures/sp-adddistpublisher-transact-sql)를 실행 합니다.</span><span class="sxs-lookup"><span data-stu-id="33087-141">At the Distributor, which is also the Publisher, execute [sp_adddistpublisher &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-adddistpublisher-transact-sql), specifying the UNC share that will be used as default snapshot folder for **\@working_directory**.</span></span>  
  
3.  <span data-ttu-id="33087-142">게시자에서 [sp_replicationdboption&#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-replicationdboption-transact-sql)을 실행합니다.</span><span class="sxs-lookup"><span data-stu-id="33087-142">At the Publisher, execute [sp_replicationdboption &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-replicationdboption-transact-sql).</span></span> <span data-ttu-id="33087-143">\*\* \@ Dbname**에 대해 게시할 데이터베이스를 지정 하 고 \*\* \@ optname**에 대 한 복제 유형을 지정 하 고 `true` \*\* \@ value\*\*에 값을 지정 합니다.</span><span class="sxs-lookup"><span data-stu-id="33087-143">Specify the database being published for **\@dbname**, the type of replication for **\@optname**, and a value of `true` for **\@value**.</span></span>  
  
#### <a name="to-configure-publishing-using-a-remote-distributor"></a><span data-ttu-id="33087-144">원격 배포자를 사용하여 게시를 구성하려면</span><span class="sxs-lookup"><span data-stu-id="33087-144">To configure publishing using a remote distributor</span></span>  
  
1.  <span data-ttu-id="33087-145">[sp_get_distributor&#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-get-distributor-transact-sql)를 실행하여 서버가 이미 배포자로 구성되어 있는지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="33087-145">Execute [sp_get_distributor &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-get-distributor-transact-sql) to determine if the server is already configured as a Distributor.</span></span>  
  
    -   <span data-ttu-id="33087-146">결과 집합의 **installed** 값이 **0**인 경우 master 데이터베이스의 배포자에서 [sp_adddistributor&#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-adddistributor-transact-sql)를 실행합니다.</span><span class="sxs-lookup"><span data-stu-id="33087-146">If the value of **installed** in the result set is **0**, execute [sp_adddistributor &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-adddistributor-transact-sql) at the Distributor on the master database.</span></span> <span data-ttu-id="33087-147">\*\* \@ 암호\*\*에 대 한 강력한 암호를 지정 합니다.</span><span class="sxs-lookup"><span data-stu-id="33087-147">Specify a strong password for **\@password**.</span></span> <span data-ttu-id="33087-148">이는 **distributor_admin** 계정의 암호로 배포자에 연결할 때 게시자에서 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="33087-148">This password for the **distributor_admin** account will be used by the Publisher when connecting to the Distributor.</span></span>  
  
    -   <span data-ttu-id="33087-149">결과 집합의 **distribution db installed** 값이 **0**인 경우 master 데이터베이스의 배포자에서 [sp_adddistributiondb&#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-adddistributiondb-transact-sql)를 실행합니다.</span><span class="sxs-lookup"><span data-stu-id="33087-149">If the value of **distribution db installed** in the result set is **0**, execute [sp_adddistributiondb &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-adddistributiondb-transact-sql) at the Distributor on the master database.</span></span> <span data-ttu-id="33087-150">\*\* \@ 데이터베이스\*\*에 대 한 배포 데이터베이스의 이름을 지정 합니다.</span><span class="sxs-lookup"><span data-stu-id="33087-150">Specify the name of the distribution database for **\@database**.</span></span> <span data-ttu-id="33087-151">필요에 따라 \*\* \@ max_distretention\*\* 에 대 한 최대 트랜잭션 보존 기간 및 \*\* \@ history_retention\*\*에 대 한 기록 보존 기간을 지정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="33087-151">Optionally, you can specify the maximum transactional retention period for **\@max_distretention** and the history retention period for **\@history_retention**.</span></span> <span data-ttu-id="33087-152">새 데이터베이스를 만드는 경우 원하는 데이터베이스 속성 매개 변수를 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="33087-152">If a new database is being created, specify the desired database property parameters.</span></span>  
  
2.  <span data-ttu-id="33087-153">배포자에서 \*\* \@ working_directory\*\*에 대 한 기본 스냅숏 폴더로 사용할 UNC 공유를 지정 하 [sp_adddistpublisher &#40;transact-sql&#41;](/sql/relational-databases/system-stored-procedures/sp-adddistpublisher-transact-sql)를 실행 합니다.</span><span class="sxs-lookup"><span data-stu-id="33087-153">At the Distributor, execute [sp_adddistpublisher &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-adddistpublisher-transact-sql), specifying the UNC share that will be used as default snapshot folder for **\@working_directory**.</span></span> <span data-ttu-id="33087-154">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]게시자에 연결할 때 배포자가 인증을 사용 하는 경우 \*\* \@ security_mode\*\* 값으로 **0** 을 지정 하 고 [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] \*\* \@ 로그인\*\* 및 \*\* \@ 암호\*\*에 대 한 로그인 정보를 지정 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="33087-154">If the Distributor will use [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Authentication when connecting to the Publisher, you must also specify a value of **0** for **\@security_mode** and the [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] login information for **\@login** and **\@password**.</span></span>  
  
3.  <span data-ttu-id="33087-155">master 데이터베이스의 게시자에서 [sp_adddistributor&#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-adddistributor-transact-sql)를 실행합니다.</span><span class="sxs-lookup"><span data-stu-id="33087-155">At the Publisher on the master database, execute [sp_adddistributor &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-adddistributor-transact-sql).</span></span> <span data-ttu-id="33087-156">\*\* \@ 암호\*\*에 대해 1 단계에서 사용한 강력한 암호를 지정 합니다.</span><span class="sxs-lookup"><span data-stu-id="33087-156">Specify the strong password used in step 1 for **\@password**.</span></span> <span data-ttu-id="33087-157">이 암호는 배포자에 연결할 때 게시자에서 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="33087-157">This password will be used by the Publisher when connecting to the Distributor.</span></span>  
  
4.  <span data-ttu-id="33087-158">게시자에서 [sp_replicationdboption&#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-replicationdboption-transact-sql)을 실행합니다.</span><span class="sxs-lookup"><span data-stu-id="33087-158">At the Publisher, execute [sp_replicationdboption &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-replicationdboption-transact-sql).</span></span> <span data-ttu-id="33087-159">\*\* \@ Dbname**에 대해 게시할 데이터베이스를 지정 하 고, \*\* \@ optname**에 대 한 복제 유형을 지정 하 고, \*\* \@ value\*\*에 true 값을 지정 합니다.</span><span class="sxs-lookup"><span data-stu-id="33087-159">Specify the database being published for **\@dbname**, the type of replication for **\@optname**, and a value of true for **\@value**.</span></span>  
  
###  <a name="example-transact-sql"></a><a name="TsqlExample"></a> <span data-ttu-id="33087-160">예(Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="33087-160">Example (Transact-SQL)</span></span>  
 <span data-ttu-id="33087-161">다음 예제에서는 게시 및 배포를 프로그래밍 방식으로 구성하는 방법을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="33087-161">The following example demonstrates how to configure publishing and distribution programmatically.</span></span> <span data-ttu-id="33087-162">이 예제에서 게시자 및 로컬 배포자로 구성할 서버의 이름은 스크립팅 변수를 사용하여 제공됩니다.</span><span class="sxs-lookup"><span data-stu-id="33087-162">In this example, the name of the server that is being configured as a publisher and a local distributor is supplied using scripting variables.</span></span> <span data-ttu-id="33087-163">복제 저장 프로시저를 사용하여 복제 게시 및 배포를 프로그래밍 방식으로 구성할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="33087-163">Replication publishing and distribution can be configured programmatically using replication stored procedures.</span></span>  
  
 [!code-sql[HowTo#AddDistPub](../../snippets/tsql/SQL15/replication/howto/tsql/adddistpub.sql#adddistpub)]  
  
##  <a name="using-replication-management-objects-rmo"></a><a name="RMOProcedure"></a> <span data-ttu-id="33087-164">RMO(복제 관리 개체) 사용</span><span class="sxs-lookup"><span data-stu-id="33087-164">Using Replication Management Objects (RMO)</span></span>  
  
#### <a name="to-configure-publishing-and-distribution-on-a-single-server"></a><span data-ttu-id="33087-165">단일 서버에서 게시 및 배포를 구성하려면</span><span class="sxs-lookup"><span data-stu-id="33087-165">To configure publishing and distribution on a single server</span></span>  
  
1.  <span data-ttu-id="33087-166"><xref:Microsoft.SqlServer.Management.Common.ServerConnection> 클래스를 사용하여 서버 연결을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="33087-166">Create a connection to the server by using the <xref:Microsoft.SqlServer.Management.Common.ServerConnection> class.</span></span>  
  
2.  <span data-ttu-id="33087-167"><xref:Microsoft.SqlServer.Replication.ReplicationServer> 클래스의 인스턴스를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="33087-167">Create an instance of the <xref:Microsoft.SqlServer.Replication.ReplicationServer> class.</span></span> <span data-ttu-id="33087-168">1단계에서 만든 <xref:Microsoft.SqlServer.Management.Common.ServerConnection> 을 전달합니다.</span><span class="sxs-lookup"><span data-stu-id="33087-168">Pass the <xref:Microsoft.SqlServer.Management.Common.ServerConnection> from step 1.</span></span>  
  
3.  <span data-ttu-id="33087-169"><xref:Microsoft.SqlServer.Replication.DistributionDatabase> 클래스의 인스턴스를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="33087-169">Create an instance of the <xref:Microsoft.SqlServer.Replication.DistributionDatabase> class.</span></span>  
  
4.  <span data-ttu-id="33087-170"><xref:Microsoft.SqlServer.Replication.DistributionDatabase.Name%2A> 속성을 데이터베이스 이름으로 설정하고 <xref:Microsoft.SqlServer.Replication.ReplicationObject.ConnectionContext%2A> 속성을 1단계에서 만든 <xref:Microsoft.SqlServer.Management.Common.ServerConnection> 으로 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="33087-170">Set the <xref:Microsoft.SqlServer.Replication.DistributionDatabase.Name%2A> property to the database name and set the <xref:Microsoft.SqlServer.Replication.ReplicationObject.ConnectionContext%2A> property to the <xref:Microsoft.SqlServer.Management.Common.ServerConnection> from step 1.</span></span>  
  
5.  <span data-ttu-id="33087-171"><xref:Microsoft.SqlServer.Replication.ReplicationServer.InstallDistributor%2A> 메서드를 호출하여 배포자를 설치합니다.</span><span class="sxs-lookup"><span data-stu-id="33087-171">Install the Distributor by calling the <xref:Microsoft.SqlServer.Replication.ReplicationServer.InstallDistributor%2A> method.</span></span> <span data-ttu-id="33087-172">3단계에서 만든 <xref:Microsoft.SqlServer.Replication.DistributionDatabase> 개체를 전달합니다.</span><span class="sxs-lookup"><span data-stu-id="33087-172">Pass the <xref:Microsoft.SqlServer.Replication.DistributionDatabase> object from step 3.</span></span>  
  
6.  <span data-ttu-id="33087-173"><xref:Microsoft.SqlServer.Replication.DistributionPublisher> 클래스의 인스턴스를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="33087-173">Create an instance of the <xref:Microsoft.SqlServer.Replication.DistributionPublisher> class.</span></span>  
  
7.  <span data-ttu-id="33087-174"><xref:Microsoft.SqlServer.Replication.DistributionPublisher>의 다음 속성을 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="33087-174">Set the following properties of <xref:Microsoft.SqlServer.Replication.DistributionPublisher>:</span></span>  
  
    -   <span data-ttu-id="33087-175"><xref:Microsoft.SqlServer.Replication.DistributionPublisher.Name%2A> - 게시자의 이름</span><span class="sxs-lookup"><span data-stu-id="33087-175"><xref:Microsoft.SqlServer.Replication.DistributionPublisher.Name%2A> - name of the Publisher.</span></span>  
  
    -   <span data-ttu-id="33087-176"><xref:Microsoft.SqlServer.Replication.ReplicationObject.ConnectionContext%2A> - 1단계에서 만든 <xref:Microsoft.SqlServer.Management.Common.ServerConnection></span><span class="sxs-lookup"><span data-stu-id="33087-176"><xref:Microsoft.SqlServer.Replication.ReplicationObject.ConnectionContext%2A> - the <xref:Microsoft.SqlServer.Management.Common.ServerConnection> from step 1.</span></span>  
  
    -   <span data-ttu-id="33087-177"><xref:Microsoft.SqlServer.Replication.DistributionPublisher.DistributionDatabase%2A> - 5단계에서 만든 데이터베이스 이름</span><span class="sxs-lookup"><span data-stu-id="33087-177"><xref:Microsoft.SqlServer.Replication.DistributionPublisher.DistributionDatabase%2A> - the name of the database created in step 5.</span></span>  
  
    -   <span data-ttu-id="33087-178"><xref:Microsoft.SqlServer.Replication.DistributionPublisher.WorkingDirectory%2A> - 스냅샷 파일에 액세스하는 데 사용되는 공유</span><span class="sxs-lookup"><span data-stu-id="33087-178"><xref:Microsoft.SqlServer.Replication.DistributionPublisher.WorkingDirectory%2A> - the share used to access snapshot files.</span></span>  
  
    -   <span data-ttu-id="33087-179"><xref:Microsoft.SqlServer.Replication.DistributionPublisher.PublisherSecurity%2A> - 게시자에 연결할 때 사용되는 보안 모드입니다.</span><span class="sxs-lookup"><span data-stu-id="33087-179"><xref:Microsoft.SqlServer.Replication.DistributionPublisher.PublisherSecurity%2A> - the security mode used when connecting to the Publisher.</span></span> <span data-ttu-id="33087-180"><xref:Microsoft.SqlServer.Replication.ConnectionSecurityContext.WindowsAuthentication%2A> 을 사용하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="33087-180"><xref:Microsoft.SqlServer.Replication.ConnectionSecurityContext.WindowsAuthentication%2A> is recommended.</span></span>  
  
8.  <span data-ttu-id="33087-181"><xref:Microsoft.SqlServer.Replication.DistributionPublisher.Create%2A> 메서드를 호출합니다.</span><span class="sxs-lookup"><span data-stu-id="33087-181">Call the <xref:Microsoft.SqlServer.Replication.DistributionPublisher.Create%2A> method.</span></span>  
  
#### <a name="to-configure-publishing-and-distribution-using-a-remote-distributor"></a><span data-ttu-id="33087-182">원격 배포자를 사용하여 게시 및 배포를 구성하려면</span><span class="sxs-lookup"><span data-stu-id="33087-182">To configure publishing and distribution using a remote Distributor</span></span>  
  
1.  <span data-ttu-id="33087-183"><xref:Microsoft.SqlServer.Management.Common.ServerConnection> 클래스를 사용하여 원격 배포자 서버에 대한 연결을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="33087-183">Create a connection to the remote Distributor server by using the <xref:Microsoft.SqlServer.Management.Common.ServerConnection> class.</span></span>  
  
2.  <span data-ttu-id="33087-184"><xref:Microsoft.SqlServer.Replication.ReplicationServer> 클래스의 인스턴스를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="33087-184">Create an instance of the <xref:Microsoft.SqlServer.Replication.ReplicationServer> class.</span></span> <span data-ttu-id="33087-185">1단계에서 만든 <xref:Microsoft.SqlServer.Management.Common.ServerConnection> 을 전달합니다.</span><span class="sxs-lookup"><span data-stu-id="33087-185">Pass the <xref:Microsoft.SqlServer.Management.Common.ServerConnection> from step 1.</span></span>  
  
3.  <span data-ttu-id="33087-186"><xref:Microsoft.SqlServer.Replication.DistributionDatabase> 클래스의 인스턴스를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="33087-186">Create an instance of the <xref:Microsoft.SqlServer.Replication.DistributionDatabase> class.</span></span>  
  
4.  <span data-ttu-id="33087-187"><xref:Microsoft.SqlServer.Replication.DistributionDatabase.Name%2A> 속성을 데이터베이스 이름으로 설정하고 <xref:Microsoft.SqlServer.Replication.ReplicationObject.ConnectionContext%2A> 속성을 1단계에서 만든 <xref:Microsoft.SqlServer.Management.Common.ServerConnection> 으로 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="33087-187">Set the <xref:Microsoft.SqlServer.Replication.DistributionDatabase.Name%2A> property to the database name, and set the <xref:Microsoft.SqlServer.Replication.ReplicationObject.ConnectionContext%2A> property to the <xref:Microsoft.SqlServer.Management.Common.ServerConnection> from step 1.</span></span>  
  
5.  <span data-ttu-id="33087-188"><xref:Microsoft.SqlServer.Replication.ReplicationServer.InstallDistributor%2A> 메서드를 호출하여 배포자를 설치합니다.</span><span class="sxs-lookup"><span data-stu-id="33087-188">Install the Distributor by calling the <xref:Microsoft.SqlServer.Replication.ReplicationServer.InstallDistributor%2A> method.</span></span> <span data-ttu-id="33087-189">원격 배포자에 연결할 때 게시자에서 사용되는 보안 암호 및 3단계에서 만든 <xref:Microsoft.SqlServer.Replication.DistributionDatabase> 개체를 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="33087-189">Specify a secure password (used by the Publisher when connecting to the remote Distributor) and the <xref:Microsoft.SqlServer.Replication.DistributionDatabase> object from step 3.</span></span> <span data-ttu-id="33087-190">자세한 내용은 [배포자 보안 설정](security/secure-the-distributor.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="33087-190">For more information, see [Secure the Distributor](security/secure-the-distributor.md).</span></span>  
  
    > [!IMPORTANT]  
    >  <span data-ttu-id="33087-191">가능한 경우 런타임 시 사용자에게 보안 자격 증명을 입력하라는 메시지가 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="33087-191">When possible, prompt users to enter security credentials at runtime.</span></span> <span data-ttu-id="33087-192">자격 증명을 저장해야 하는 경우 [Windows .NET Framework에서 제공하는](https://go.microsoft.com/fwlink/?LinkId=34733) 암호화 서비스 [!INCLUDE[msCoName](../../includes/msconame-md.md)] 를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="33087-192">If you must store credentials, use the [cryptographic services](https://go.microsoft.com/fwlink/?LinkId=34733) provided by the [!INCLUDE[msCoName](../../includes/msconame-md.md)] Windows .NET Framework.</span></span>  
  
6.  <span data-ttu-id="33087-193"><xref:Microsoft.SqlServer.Replication.DistributionPublisher> 클래스의 인스턴스를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="33087-193">Create an instance of the <xref:Microsoft.SqlServer.Replication.DistributionPublisher> class.</span></span>  
  
7.  <span data-ttu-id="33087-194"><xref:Microsoft.SqlServer.Replication.DistributionPublisher>의 다음 속성을 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="33087-194">Set the following properties of <xref:Microsoft.SqlServer.Replication.DistributionPublisher>:</span></span>  
  
    -   <span data-ttu-id="33087-195"><xref:Microsoft.SqlServer.Replication.DistributionPublisher.Name%2A> - 로컬 게시자 서버 이름</span><span class="sxs-lookup"><span data-stu-id="33087-195"><xref:Microsoft.SqlServer.Replication.DistributionPublisher.Name%2A> - name of the local Publisher server.</span></span>  
  
    -   <span data-ttu-id="33087-196"><xref:Microsoft.SqlServer.Replication.ReplicationObject.ConnectionContext%2A> - 1단계에서 만든 <xref:Microsoft.SqlServer.Management.Common.ServerConnection></span><span class="sxs-lookup"><span data-stu-id="33087-196"><xref:Microsoft.SqlServer.Replication.ReplicationObject.ConnectionContext%2A> - the <xref:Microsoft.SqlServer.Management.Common.ServerConnection> from step 1.</span></span>  
  
    -   <span data-ttu-id="33087-197"><xref:Microsoft.SqlServer.Replication.DistributionPublisher.DistributionDatabase%2A> - 5단계에서 만든 데이터베이스 이름</span><span class="sxs-lookup"><span data-stu-id="33087-197"><xref:Microsoft.SqlServer.Replication.DistributionPublisher.DistributionDatabase%2A> - the name of the database created in step 5.</span></span>  
  
    -   <span data-ttu-id="33087-198"><xref:Microsoft.SqlServer.Replication.DistributionPublisher.WorkingDirectory%2A> - 스냅샷 파일에 액세스하는 데 사용되는 공유</span><span class="sxs-lookup"><span data-stu-id="33087-198"><xref:Microsoft.SqlServer.Replication.DistributionPublisher.WorkingDirectory%2A> - the share used to access snapshot files.</span></span>  
  
    -   <span data-ttu-id="33087-199"><xref:Microsoft.SqlServer.Replication.DistributionPublisher.PublisherSecurity%2A> - 게시자에 연결할 때 사용되는 보안 모드입니다.</span><span class="sxs-lookup"><span data-stu-id="33087-199"><xref:Microsoft.SqlServer.Replication.DistributionPublisher.PublisherSecurity%2A> - the security mode used when connecting to the Publisher.</span></span> <span data-ttu-id="33087-200"><xref:Microsoft.SqlServer.Replication.ConnectionSecurityContext.WindowsAuthentication%2A> 을 사용하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="33087-200"><xref:Microsoft.SqlServer.Replication.ConnectionSecurityContext.WindowsAuthentication%2A> is recommended.</span></span>  
  
8.  <span data-ttu-id="33087-201"><xref:Microsoft.SqlServer.Replication.DistributionPublisher.Create%2A> 메서드를 호출합니다.</span><span class="sxs-lookup"><span data-stu-id="33087-201">Call the <xref:Microsoft.SqlServer.Replication.DistributionPublisher.Create%2A> method.</span></span>  
  
9. <span data-ttu-id="33087-202"><xref:Microsoft.SqlServer.Management.Common.ServerConnection> 클래스를 사용하여 로컬 게시자 서버에 대한 연결을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="33087-202">Create a connection to the local Publisher server by using the <xref:Microsoft.SqlServer.Management.Common.ServerConnection> class.</span></span>  
  
10. <span data-ttu-id="33087-203"><xref:Microsoft.SqlServer.Replication.ReplicationServer> 클래스의 인스턴스를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="33087-203">Create an instance of the <xref:Microsoft.SqlServer.Replication.ReplicationServer> class.</span></span> <span data-ttu-id="33087-204">9단계에서 만든 <xref:Microsoft.SqlServer.Management.Common.ServerConnection> 을 전달합니다.</span><span class="sxs-lookup"><span data-stu-id="33087-204">Pass the <xref:Microsoft.SqlServer.Management.Common.ServerConnection> from step 9.</span></span>  
  
11. <span data-ttu-id="33087-205"><xref:Microsoft.SqlServer.Replication.ReplicationServer.InstallDistributor%2A> 메서드를 호출합니다.</span><span class="sxs-lookup"><span data-stu-id="33087-205">Call the <xref:Microsoft.SqlServer.Replication.ReplicationServer.InstallDistributor%2A> method.</span></span> <span data-ttu-id="33087-206">5단계에서 지정된 원격 배포자 이름 및 원격 배포자 암호를 전달합니다.</span><span class="sxs-lookup"><span data-stu-id="33087-206">Pass the name of the remote Distributor and the password for the remote Distributor specified in step 5.</span></span>  
  
    > [!IMPORTANT]  
    >  <span data-ttu-id="33087-207">가능한 경우 런타임 시 사용자에게 보안 자격 증명을 입력하라는 메시지가 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="33087-207">When possible, prompt users to enter security credentials at runtime.</span></span> <span data-ttu-id="33087-208">자격 증명을 저장해야 하는 경우 Windows .NET Framework에서 제공하는 [암호화 서비스](https://go.microsoft.com/fwlink/?LinkId=34733) 를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="33087-208">If you must store credentials, use the [cryptographic services](https://go.microsoft.com/fwlink/?LinkId=34733) provided by the Windows .NET Framework.</span></span>  
  
###  <a name="example-rmo"></a><a name="PShellExample"></a> <span data-ttu-id="33087-209">예(RMO)</span><span class="sxs-lookup"><span data-stu-id="33087-209">Example (RMO)</span></span>  
 <span data-ttu-id="33087-210">RMO(복제 관리 개체)를 사용하여 프로그래밍 방식으로 복제 게시 및 배포를 구성할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="33087-210">You can programmatically configure replication publishing and distribution by using Replication Management Objects (RMO).</span></span>  
  
 [!code-csharp[HowTo#rmo_AddDistPub](../../snippets/csharp/SQL15/replication/howto/cs/rmotestevelope.cs#rmo_adddistpub)]  
  
 [!code-vb[HowTo#rmo_vb_AddDistPub](../../snippets/visualbasic/SQL15/replication/howto/vb/rmotestenv.vb#rmo_vb_adddistpub)]  
  
## <a name="see-also"></a><span data-ttu-id="33087-211">참고 항목</span><span class="sxs-lookup"><span data-stu-id="33087-211">See Also</span></span>  
 <span data-ttu-id="33087-212">[배포자 및 게시자 속성 보기 및 수정](view-and-modify-distributor-and-publisher-properties.md) </span><span class="sxs-lookup"><span data-stu-id="33087-212">[View and Modify Distributor and Publisher Properties](view-and-modify-distributor-and-publisher-properties.md) </span></span>  
 <span data-ttu-id="33087-213">[Replication System Stored Procedures Concepts](concepts/replication-system-stored-procedures-concepts.md) </span><span class="sxs-lookup"><span data-stu-id="33087-213">[Replication System Stored Procedures Concepts](concepts/replication-system-stored-procedures-concepts.md) </span></span>  
 <span data-ttu-id="33087-214">[배포 구성](configure-distribution.md) </span><span class="sxs-lookup"><span data-stu-id="33087-214">[Configure Distribution](configure-distribution.md) </span></span>  
 <span data-ttu-id="33087-215">[Replication Management Objects Concepts](concepts/replication-management-objects-concepts.md) </span><span class="sxs-lookup"><span data-stu-id="33087-215">[Replication Management Objects Concepts](concepts/replication-management-objects-concepts.md) </span></span>  
 [<span data-ttu-id="33087-216">AlwaysOn 가용성 그룹 &#40;SQL Server에 대 한 복제 구성&#41;</span><span class="sxs-lookup"><span data-stu-id="33087-216">Configure Replication for AlwaysOn Availability Groups &#40;SQL Server&#41;</span></span>](../../database-engine/availability-groups/windows/always-on-availability-groups-sql-server.md) 
  
  
