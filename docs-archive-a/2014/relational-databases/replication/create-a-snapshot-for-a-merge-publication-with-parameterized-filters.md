---
title: 매개 변수가 있는 필터로 병합 게시에 대한 스냅샷 만들기 | Microsoft 문서
ms.custom: ''
ms.date: 06/30/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- parameterized filters [SQL Server replication], snapshots
- snapshots [SQL Server replication], parameterized filters and
- filters [SQL Server replication], parameterized
ms.assetid: 00dfb229-f1de-4d33-90b0-d7c99ab52dcb
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: dad6f1648cba44b38e37720f7e395687f769d91e
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87730527"
---
# <a name="create-a-snapshot-for-a-merge-publication-with-parameterized-filters"></a><span data-ttu-id="c4772-102">Create a Snapshot for a Merge Publication with Parameterized Filters</span><span class="sxs-lookup"><span data-stu-id="c4772-102">Create a Snapshot for a Merge Publication with Parameterized Filters</span></span>
  <span data-ttu-id="c4772-103">이 항목에서는 [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] , [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]또는 RMO(복제 관리 개체)를 사용하여 [!INCLUDE[tsql](../../includes/tsql-md.md)]에서 매개 변수가 있는 필터로 병합 게시에 대한 스냅샷을 만드는 방법에 대해 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-103">This topic describes how to create a snapshot for a merge publication with parameterized filters in [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] by using [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)], [!INCLUDE[tsql](../../includes/tsql-md.md)], or Replication Management Objects (RMO).</span></span>  
  
  
##  <a name="before-you-begin"></a><a name="BeforeYouBegin"></a> <span data-ttu-id="c4772-104">시작하기 전에</span><span class="sxs-lookup"><span data-stu-id="c4772-104">Before You Begin</span></span>  
  
###  <a name="recommendations"></a><a name="Recommendations"></a> <span data-ttu-id="c4772-105">권장 사항</span><span class="sxs-lookup"><span data-stu-id="c4772-105">Recommendations</span></span>  
  
-   <span data-ttu-id="c4772-106">매개 변수가 있는 필터를 사용하여 병합 게시에 대한 스냅샷을 만들 때는 게시된 데이터 및 구독에 대한 구독자 메타데이터를 모두 포함하는 표준(스키마) 스냅샷을 먼저 생성해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-106">When generating a snapshot for a merge publication using parameterized filters, you must first generate a standard (schema) snapshot that contains all of the published data and Subscriber metadata for the subscription.</span></span> <span data-ttu-id="c4772-107">자세한 내용은 [Create and Apply the Initial Snapshot](create-and-apply-the-initial-snapshot.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="c4772-107">For more information, see [Create and Apply the Initial Snapshot](create-and-apply-the-initial-snapshot.md).</span></span> <span data-ttu-id="c4772-108">스키마 스냅샷을 만든 다음에는 게시된 데이터의 구독자별 파티션을 포함하는 스냅샷을 만들 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-108">After you have created the schema snapshot, you can generate the snapshot that contains the Subscriber-specific partition of the published data.</span></span>  
  
-   <span data-ttu-id="c4772-109">게시에 있는 여러 아티클에 대한 필터링 시 각 구독에 고유하면서도 겹치지 않는 파티션이 생성될 경우 메타데이터는 병합 에이전트가 실행될 때마다 정리됩니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-109">If the filtering for one or more articles in the publication yields non-overlapping partitions that are unique for each subscription, metadata is cleaned up whenever the Merge Agent runs.</span></span> <span data-ttu-id="c4772-110">따라서 분할된 스냅샷은 더 빨리 만료됩니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-110">This means that the partitioned snapshot expires more quickly.</span></span> <span data-ttu-id="c4772-111">이 옵션을 사용할 경우 구독자가 스냅샷 생성 및 배달을 시작하도록 허용하는 것을 고려해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-111">When using this option, you should consider allowing Subscribers to initiate snapshot generation and delivery.</span></span> <span data-ttu-id="c4772-112">필터링 옵션에 대한 자세한 내용은 [매개 변수가 있는 필터를 사용하는 병합 게시의 스냅샷](snapshots-for-merge-publications-with-parameterized-filters.md)에서 "'partition options' 설정" 섹션을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="c4772-112">For more information about filtering options, see the "Setting 'partition options'" section of [Snapshots for Merge Publications with Parameterized Filters](snapshots-for-merge-publications-with-parameterized-filters.md).</span></span>  
  
##  <a name="using-sql-server-management-studio"></a><a name="SSMSProcedure"></a> <span data-ttu-id="c4772-113">SQL Server Management Studio 사용</span><span class="sxs-lookup"><span data-stu-id="c4772-113">Using SQL Server Management Studio</span></span>  
 <span data-ttu-id="c4772-114">**게시 속성 - \<Publication>** 대화 상자의 **데이터 파티션** 페이지에서 파티션 스냅샷을 생성합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-114">Generate snapshots for partitions on the **Data Partitions** page of the **Publication Properties - \<Publication>** dialog box.</span></span> <span data-ttu-id="c4772-115">이 대화 상자에 액세스하는 방법은 [게시 속성 보기 및 수정](publish/view-and-modify-publication-properties.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="c4772-115">For more information about accessing this dialog box, see [View and Modify Publication Properties](publish/view-and-modify-publication-properties.md).</span></span> <span data-ttu-id="c4772-116">구독자가 스냅샷 생성 및 배달을 시작하고 스냅샷을 생성하도록 허용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-116">You can allow Subscribers to initiate snapshot generation and delivery and/or generate snapshots.</span></span>  
  
 <span data-ttu-id="c4772-117">하나 이상의 파티션에 대한 스냅샷을 생성하기 전에 다음을 수행해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-117">Before generating snapshots for one or more partitions, you must:</span></span>  
  
1.  <span data-ttu-id="c4772-118">새 게시 마법사를 사용하여 병합 게시를 만들고 마법사의 **필터 추가** 페이지에서 매개 변수가 있는 행 필터를 하나 이상 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-118">Create a merge publication with the New Publication Wizard, and specify one or more parameterized row filters on the **Add Filter** page of the wizard.</span></span> <span data-ttu-id="c4772-119">자세한 내용은 [병합 아티클에 대한 매개 변수가 있는 행 필터 정의 및 수정](publish/define-and-modify-a-parameterized-row-filter-for-a-merge-article.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="c4772-119">For more information, see [Define and Modify a Parameterized Row Filter for a Merge Article](publish/define-and-modify-a-parameterized-row-filter-for-a-merge-article.md).</span></span>  
  
2.  <span data-ttu-id="c4772-120">게시에 대한 스키마 스냅샷을 생성합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-120">Generate a schema snapshot for the publication.</span></span> <span data-ttu-id="c4772-121">기본적으로 스키마 스냅샷은 새 게시 마법사를 완료할 때 생성됩니다. [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]에서 스키마 스냅샷을 생성할 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-121">By default, a schema snapshot is generated when you complete the New Publication Wizard; you can also generate a schema snapshot from [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)].</span></span>  
  
#### <a name="to-generate-a-schema-snapshot"></a><span data-ttu-id="c4772-122">스키마 스냅샷을 생성하려면</span><span class="sxs-lookup"><span data-stu-id="c4772-122">To generate a schema snapshot</span></span>  
  
1.  <span data-ttu-id="c4772-123">[!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)]에서 게시자에 연결한 다음 해당 서버 노드를 확장합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-123">Connect to the Publisher in [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)], and then expand the server node.</span></span>  
  
2.  <span data-ttu-id="c4772-124">**복제** 폴더를 확장한 다음 **게시** 폴더를 확장합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-124">Expand the **Replication** folder, and then expand the **Publications** folder.</span></span>  
  
3.  <span data-ttu-id="c4772-125">스냅샷을 생성할 게시를 마우스 오른쪽 단추로 클릭한 다음 **스냅샷 에이전트 상태 보기**를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-125">Right-click the publication for which you want to create a snapshot, and then click **View Snapshot Agent Status**.</span></span>  
  
4.  <span data-ttu-id="c4772-126">**스냅샷 에이전트 상태 보기 - \<Publication>** 대화 상자에서 **시작**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-126">In the **View Snapshot Agent Status - \<Publication>** dialog box, click **Start**.</span></span>  
  
     <span data-ttu-id="c4772-127">스냅샷 에이전트에서 스냅샷 생성을 마치면 "[100%] 17개 아티클의 스냅샷이 생성되었습니다"라는 메시지가 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-127">When the Snapshot Agent finishes generating the snapshot, a message will be displayed, such as "[100%] A snapshot of 17 article(s) was generated."</span></span>  
  
#### <a name="to-allow-subscribers-to-initiate-snapshot-generation-and-delivery"></a><span data-ttu-id="c4772-128">구독자가 스냅샷 생성 및 배달을 시작하도록 허용하려면</span><span class="sxs-lookup"><span data-stu-id="c4772-128">To allow Subscribers to initiate snapshot generation and delivery</span></span>  
  
1.  <span data-ttu-id="c4772-129">**게시 속성 - \<Publication>** 대화 상자의 **데이터 파티션** 페이지에서 **새 구독자가 동기화할 때 필요한 경우 자동으로 파티션 정의 및 스냅샷 생성**을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-129">On the **Data Partitions** page of the **Publication Properties - \<Publication>** dialog box, select **Automatically define a partition and generate a snapshot if needed when a new Subscriber tries to synchronize**.</span></span>  
  
2.  [!INCLUDE[clickOK](../../includes/clickok-md.md)]  
  
#### <a name="to-generate-and-refresh-snapshots"></a><span data-ttu-id="c4772-130">스냅샷을 생성하고 새로 고치려면</span><span class="sxs-lookup"><span data-stu-id="c4772-130">To generate and refresh snapshots</span></span>  
  
1.  <span data-ttu-id="c4772-131">**게시 속성 - \<Publication>** 대화 상자의 **데이터 파티션** 페이지에서 **추가**를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-131">On the **Data Partitions** page of the **Publication Properties - \<Publication>** dialog box, click **Add**.</span></span>  
  
2.  <span data-ttu-id="c4772-132">스냅샷을 만들 파티션과 연결된 **HOST_NAME()** 및/또는 **SUSER_SNAME()** 값을 입력합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-132">Enter a value for the **HOST_NAME()** and/or **SUSER_SNAME()** value associated with the partition for which you want to create a snapshot.</span></span>  
  
3.  <span data-ttu-id="c4772-133">선택적으로 스냅샷을 새로 고칠 일정을 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-133">Optionally specify a schedule for refreshing snapshots:</span></span>  
  
    1.  <span data-ttu-id="c4772-134">**이 파티션에 대한 스냅샷 에이전트의 실행 시간을 다음 시간으로 예약**을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-134">Select **Schedule the Snapshot Agent for this partition to run at the following time(s)**</span></span>  
  
    2.  <span data-ttu-id="c4772-135">기본으로 제공되는 스냅샷 새로 고침 일정을 그대로 적용하거나 **변경** 을 클릭하여 다른 일정을 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-135">Accept the default schedule for refreshing snapshots, or click **Change** to specify a different schedule.</span></span>  
  
4.  <span data-ttu-id="c4772-136">**확인**을 클릭합니다. 그러면 **게시 속성 - \<Publication>** 대화 상자로 돌아갑니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-136">Click **OK**, which returns you to the **Publication Properties - \<Publication>** dialog box.</span></span>  
  
5.  <span data-ttu-id="c4772-137">속성 표에서 파티션을 선택한 다음 **선택한 스냅샷 지금 생성**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-137">Select the partition in the property grid, and then click **Generate the selected snapshots now**.</span></span>  
  
6.  [!INCLUDE[clickOK](../../includes/clickok-md.md)]  
  
##  <a name="using-transact-sql"></a><a name="TsqlProcedure"></a> <span data-ttu-id="c4772-138">Transact-SQL 사용</span><span class="sxs-lookup"><span data-stu-id="c4772-138">Using Transact-SQL</span></span>  
 <span data-ttu-id="c4772-139">저장 프로시저 및 스냅샷 에이전트를 사용하여 다음을 수행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-139">Using stored procedures and the Snapshot Agent, you can perform the following:</span></span>  
  
-   <span data-ttu-id="c4772-140">구독자가 처음 동기화될 때 스냅샷 생성 및 적용을 요청하도록 허용합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-140">Allow Subscribers to request snapshot generation and application the first time they synchronize.</span></span>  
  
-   <span data-ttu-id="c4772-141">각 파티션에 대한 스냅샷을 미리 생성합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-141">Pre-generate snapshots for each partition.</span></span>  
  
-   <span data-ttu-id="c4772-142">각 구독자에 대한 스냅샷을 수동으로 생성합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-142">Manually generate a snapshot for each Subscriber.</span></span>  
  
    > [!IMPORTANT]  
    >  <span data-ttu-id="c4772-143">가능한 경우 런타임 시 사용자에게 보안 자격 증명을 입력하라는 메시지가 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-143">When possible, prompt users to enter security credentials at runtime.</span></span> <span data-ttu-id="c4772-144">자격 증명을 스크립트 파일에 저장해야 하는 경우에는 파일에 무단으로 액세스하지 못하도록 보안을 설정해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-144">If you must store credentials in a script file, you must secure the file to prevent unauthorized access.</span></span>  
  
#### <a name="to-create-a-publication-that-allows-subscribers-to-initiate-snapshot-generation-and-delivery"></a><span data-ttu-id="c4772-145">구독자가 스냅샷 생성 및 배달을 시작하도록 허용하는 게시를 만들려면</span><span class="sxs-lookup"><span data-stu-id="c4772-145">To create a publication that allows Subscribers to initiate snapshot generation and delivery</span></span>  
  
1.  <span data-ttu-id="c4772-146">게시 데이터베이스의 게시자에서 [sp_addmergepublication&#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergepublication-transact-sql)을 실행합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-146">At the Publisher on the publication database, execute [sp_addmergepublication &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergepublication-transact-sql).</span></span> <span data-ttu-id="c4772-147">다음 매개 변수를 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-147">Specify the following parameters:</span></span>  
  
    -   <span data-ttu-id="c4772-148">**\@publication**에 게시의 이름을 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-148">The name of the publication for **\@publication**.</span></span>  
  
    -   <span data-ttu-id="c4772-149">`true`구독자가 스냅숏 프로세스를 시작할 수 있도록 하는 \*\* \@ allow_subscriber_initiated_snapshot\*\*에 대 한 값입니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-149">A value of `true` for **\@allow_subscriber_initiated_snapshot**, which enables Subscribers to initiate the snapshot process.</span></span>  
  
    -   <span data-ttu-id="c4772-150">(옵션) **\@max_concurrent_dynamic_snapshots**에 동시 실행이 가능한 동적 스냅샷 프로세스의 수를 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-150">(Optional) The number of dynamic snapshot processes that can run concurrently for **\@max_concurrent_dynamic_snapshots**.</span></span> <span data-ttu-id="c4772-151">최대 수의 프로세스가 실행 중인 상태에서 구독자가 스냅샷 생성을 시도하면 이 프로세스는 큐에 배치됩니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-151">If the maximum number of processes is running and a Subscriber attempts to generate a snapshot, the process is placed in a queue.</span></span> <span data-ttu-id="c4772-152">기본적으로 동시 프로세스의 수에는 제한이 없습니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-152">By default there is no limit to the number of concurrent processes.</span></span>  
  
2.  <span data-ttu-id="c4772-153">게시자에서 [sp_addpublication_snapshot&#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addpublication-snapshot-transact-sql)을 실행합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-153">At the Publisher, execute [sp_addpublication_snapshot &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addpublication-snapshot-transact-sql).</span></span> <span data-ttu-id="c4772-154">\*\* \@ 게시\*\* 에 1 단계에서 사용 된 게시 이름과 [!INCLUDE[msCoName](../../includes/msconame-md.md)] [복제 스냅숏 에이전트](agents/replication-snapshot-agent.md) 인증을 사용 하 여 게시자에 연결할 때 사용 되는 Windows 자격 증명을 지정 합니다. 또한 \*\* \@ publisher_security_mode\*\* 에 대해 값 **0** 을 지정 하 고 [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] \*\* \@ publisher_login\*\* 및 \*\* \@ publisher_password\*\*에 대해 로그인 정보를 지정 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-154">Specify the publication name used in step 1 for **\@publication** and the [!INCLUDE[msCoName](../../includes/msconame-md.md)] Windows credentials under which the [Replication Snapshot Agent](agents/replication-snapshot-agent.md) Authentication when connecting to the Publisher, you must also specify a value of **0** for **\@publisher_security_mode** and the [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] login information for **\@publisher_login** and **\@publisher_password**.</span></span> <span data-ttu-id="c4772-155">이렇게 하면 게시에 대해 스냅샷 에이전트 작업이 만들어집니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-155">This creates a Snapshot Agent job for the publication.</span></span> <span data-ttu-id="c4772-156">초기 스냅샷을 생성하고 스냅샷 에이전트에 대한 사용자 지정 일정을 정의하는 방법은 [Create and Apply the Initial Snapshot](create-and-apply-the-initial-snapshot.md)를 참조하십시오.</span><span class="sxs-lookup"><span data-stu-id="c4772-156">For more information about generating an initial snapshot and defining a custom schedule for the Snapshot Agent, see [Create and Apply the Initial Snapshot](create-and-apply-the-initial-snapshot.md).</span></span>  
  
    > [!IMPORTANT]  
    >  <span data-ttu-id="c4772-157">게시자를 원격 배포자로 구성할 경우 *job_login* 및 *job_password*를 비롯한 모든 매개 변수에 제공된 값이 일반 텍스트로 배포자에게 전송됩니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-157">When configuring a Publisher with a remote Distributor, the values supplied for all parameters, including *job_login* and *job_password*, are sent to the Distributor as plain text.</span></span> <span data-ttu-id="c4772-158">이 저장 프로시저를 실행하기 전에 게시자와 해당 원격 배포자 간 연결을 암호화해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-158">You should encrypt the connection between the Publisher and its remote Distributor before executing this stored procedure.</span></span> <span data-ttu-id="c4772-159">자세한 내용은 [데이터베이스 엔진에 암호화 연결 사용&#40;SQL Server 구성 관리자&#41;](../../database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="c4772-159">For more information, see [Enable Encrypted Connections to the Database Engine &#40;SQL Server Configuration Manager&#41;](../../database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine.md).</span></span>  
  
3.  <span data-ttu-id="c4772-160">[sp_addmergearticle&#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql)을 실행하여 게시에 아티클을 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-160">Execute [sp_addmergearticle &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql) to add articles to the publication.</span></span> <span data-ttu-id="c4772-161">이 저장 프로시저는 게시의 각 아티클에 대해 한 번씩만 실행해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-161">This stored procedure must be executed once for each article in the publication.</span></span> <span data-ttu-id="c4772-162">매개 변수가 있는 필터를 사용할 경우 **\@subset_filterclause** 매개 변수를 사용하여 하나 이상의 아티클에 대해 매개 변수가 있는 행 필터를 지정해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-162">When using parameterized filters, you must specify a parameterized row filter for one or more articles using the **\@subset_filterclause** parameter.</span></span> <span data-ttu-id="c4772-163">자세한 내용은 [병합 아티클에 대한 매개 변수가 있는 행 필터 정의 및 수정](publish/define-and-modify-a-parameterized-row-filter-for-a-merge-article.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="c4772-163">For more information, see [Define and Modify a Parameterized Row Filter for a Merge Article](publish/define-and-modify-a-parameterized-row-filter-for-a-merge-article.md).</span></span>  
  
4.  <span data-ttu-id="c4772-164">다른 아티클이 매개 변수가 있는 행 필터에 따라 필터링되면 [sp_addmergefilter&#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergefilter-transact-sql)를 실행하여 아티클 간의 조인 또는 논리 레코드 관계를 정의합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-164">If other articles will be filtered based on the parameterized row filter, execute [sp_addmergefilter &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergefilter-transact-sql) to define the join or logical record relationships between articles.</span></span> <span data-ttu-id="c4772-165">이 저장 프로시저는 정의되는 각 관계에 대해 한 번씩만 실행해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-165">This stored procedure must be executed once for each relationship being defined.</span></span> <span data-ttu-id="c4772-166">자세한 내용은 [병합 아티클 사이에서 조인 필터 정의 및 수정](publish/define-and-modify-a-join-filter-between-merge-articles.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="c4772-166">For more information, see [Define and Modify a Join Filter Between Merge Articles](publish/define-and-modify-a-join-filter-between-merge-articles.md).</span></span>  
  
5.  <span data-ttu-id="c4772-167">병합 에이전트가 구독자를 초기화하기 위해 스냅샷을 요청하면 구독의 파티션을 요청하기 위한 스냅샷이 자동으로 생성됩니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-167">When the Merge Agent requests the snapshot to initialize the Subscriber, the snapshot for the requesting subscription's partition is automatically generated.</span></span>  
  
#### <a name="to-create-a-publication-and-pre-generate-or-automatically-refresh-snapshots"></a><span data-ttu-id="c4772-168">게시를 만들고 스냅샷을 미리 생성하거나 자동으로 새로 고치려면</span><span class="sxs-lookup"><span data-stu-id="c4772-168">To create a publication and pre-generate or automatically refresh snapshots</span></span>  
  
1.  <span data-ttu-id="c4772-169">[sp_addmergepublication&#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergepublication-transact-sql)을 실행하여 게시를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-169">Execute [sp_addmergepublication &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergepublication-transact-sql) to create the publication.</span></span> <span data-ttu-id="c4772-170">자세한 내용은 [게시 만들기](publish/create-a-publication.md)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="c4772-170">For more information, see [Create a Publication](publish/create-a-publication.md).</span></span>  
  
2.  <span data-ttu-id="c4772-171">게시자에서 [sp_addpublication_snapshot&#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addpublication-snapshot-transact-sql)을 실행합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-171">At the Publisher, execute [sp_addpublication_snapshot &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addpublication-snapshot-transact-sql).</span></span> <span data-ttu-id="c4772-172">**\@publication**에 1단계에서 사용된 게시 이름, **\@job_login** 및 **\@password**에 스냅샷 에이전트가 실행되는 Windows 자격 증명을 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-172">Specify the publication name used in step 1 for **\@publication** and the Windows credentials under which the Snapshot Agent runs for **\@job_login** and **\@password**.</span></span> <span data-ttu-id="c4772-173">게시자에 연결할 때 에이전트가 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 인증을 사용하면 **\@publisher_security_mode**에 대해 값 **0**을 지정하고 **\@publisher_login** 및 **\@publisher_password**에 대해 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 로그인 정보를 지정해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-173">If the agent will use [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Authentication when connecting to the Publisher, you must also specify a value of **0** for **\@publisher_security_mode** and the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] login information for **\@publisher_login** and **\@publisher_password**.</span></span> <span data-ttu-id="c4772-174">이렇게 하면 게시에 대해 스냅샷 에이전트 작업이 만들어집니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-174">This creates a Snapshot Agent job for the publication.</span></span> <span data-ttu-id="c4772-175">초기 스냅샷을 생성하고 스냅샷 에이전트에 대한 사용자 지정 일정을 정의하는 방법은 [Create and Apply the Initial Snapshot](create-and-apply-the-initial-snapshot.md)를 참조하십시오.</span><span class="sxs-lookup"><span data-stu-id="c4772-175">For more information about generating an initial snapshot and defining a custom schedule for the Snapshot Agent, see [Create and Apply the Initial Snapshot](create-and-apply-the-initial-snapshot.md).</span></span>  
  
    > [!IMPORTANT]  
    >  <span data-ttu-id="c4772-176">게시자를 원격 배포자로 구성할 경우 *job_login* 및 *job_password*를 비롯한 모든 매개 변수에 제공된 값이 일반 텍스트로 배포자에게 전송됩니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-176">When configuring a Publisher with a remote Distributor, the values supplied for all parameters, including *job_login* and *job_password*, are sent to the Distributor as plain text.</span></span> <span data-ttu-id="c4772-177">이 저장 프로시저를 실행하기 전에 게시자와 해당 원격 배포자 간 연결을 암호화해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-177">You should encrypt the connection between the Publisher and its remote Distributor before executing this stored procedure.</span></span> <span data-ttu-id="c4772-178">자세한 내용은 [데이터베이스 엔진에 암호화 연결 사용&#40;SQL Server 구성 관리자&#41;](../../database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="c4772-178">For more information, see [Enable Encrypted Connections to the Database Engine &#40;SQL Server Configuration Manager&#41;](../../database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine.md).</span></span>  
  
3.  <span data-ttu-id="c4772-179">[sp_addmergearticle&#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql)을 실행하여 게시에 아티클을 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-179">Execute [sp_addmergearticle &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql) to add articles to the publication.</span></span> <span data-ttu-id="c4772-180">이 저장 프로시저는 게시의 각 아티클에 대해 한 번씩만 실행해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-180">This stored procedure must be executed once for each article in the publication.</span></span> <span data-ttu-id="c4772-181">매개 변수가 있는 필터를 사용할 경우 **\@subset_filterclause** 매개 변수를 사용하여 하나의 아티클에 대해 매개 변수가 있는 행 필터를 지정해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-181">When using parameterized filters, you must specify a parameterized row filter for one article using the **\@subset_filterclause** parameter.</span></span> <span data-ttu-id="c4772-182">자세한 내용은 [병합 아티클에 대한 매개 변수가 있는 행 필터 정의 및 수정](publish/define-and-modify-a-parameterized-row-filter-for-a-merge-article.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="c4772-182">For more information, see [Define and Modify a Parameterized Row Filter for a Merge Article](publish/define-and-modify-a-parameterized-row-filter-for-a-merge-article.md).</span></span>  
  
4.  <span data-ttu-id="c4772-183">다른 아티클이 매개 변수가 있는 행 필터에 따라 필터링되면 [sp_addmergefilter&#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergefilter-transact-sql)를 실행하여 아티클 간의 조인 또는 논리 레코드 관계를 정의합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-183">If other articles will be filtered based on the parameterized row filter, execute [sp_addmergefilter &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergefilter-transact-sql) to define the join or logical record relationships between articles.</span></span> <span data-ttu-id="c4772-184">이 저장 프로시저는 정의되는 각 관계에 대해 한 번씩만 실행해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-184">This stored procedure must be executed once for each relationship being defined.</span></span> <span data-ttu-id="c4772-185">자세한 내용은 [병합 아티클 사이에서 조인 필터 정의 및 수정](publish/define-and-modify-a-join-filter-between-merge-articles.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="c4772-185">For more information, see [Define and Modify a Join Filter Between Merge Articles](publish/define-and-modify-a-join-filter-between-merge-articles.md).</span></span>  
  
5.  <span data-ttu-id="c4772-186">게시 데이터베이스의 게시자에서 1단계의 **\@publication** 값을 지정하여 [sp_helpmergepublication&#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-helpmergepublication-transact-sql)을 실행합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-186">At the Publisher on the publication database, execute [sp_helpmergepublication &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-helpmergepublication-transact-sql), specifying the value of **\@publication** from step 1.</span></span> <span data-ttu-id="c4772-187">결과 집합에서 **snapshot_jobid** 값을 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-187">Note the value of the **snapshot_jobid** in the result set.</span></span>  
  
6.  <span data-ttu-id="c4772-188">5단계에서 얻은 **snapshot_jobid** 의 값을 **uniqueidentifier**로 변환합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-188">Convert the value of the **snapshot_jobid** obtained in step 5 to **uniqueidentifier**.</span></span>  
  
7.  <span data-ttu-id="c4772-189">**msdb** 데이터베이스의 게시자에서 **\@job_id**에 6단계에서 얻은 변환된 값을 지정하고 [sp_start_job &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-start-job-transact-sql)을 실행합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-189">At the Publisher on the **msdb** database, execute [sp_start_job &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-start-job-transact-sql), specifying the converted value obtained in step 6 for **\@job_id**.</span></span>  
  
8.  <span data-ttu-id="c4772-190">게시 데이터베이스의 게시자에서 [sp_addmergepartition&#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergepartition-transact-sql)을 실행합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-190">At the Publisher on the publication database, execute [sp_addmergepartition &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergepartition-transact-sql).</span></span> <span data-ttu-id="c4772-191">**\@publication**에 1단계의 게시 이름을, **\@suser_sname**([SUSER_SNAME &#40;Transact-SQL&#41;](/sql/t-sql/functions/suser-sname-transact-sql)이 필터 절에 사용된 경우) 또는 **\@host_name**([HOST_NAME &#40;Transact-SQL&#41;](/sql/t-sql/functions/host-name-transact-sql)이 필터 절에 사용된 경우)에 파티션을 정의하는 데 사용되는 값을 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-191">Specify the name of the publication from step 1 for **\@publication** and the value used to define the partition for **\@suser_sname** if [SUSER_SNAME &#40;Transact-SQL&#41;](/sql/t-sql/functions/suser-sname-transact-sql) is used in the filter clause or for **\@host_name** if [HOST_NAME &#40;Transact-SQL&#41;](/sql/t-sql/functions/host-name-transact-sql) is used in the filter clause.</span></span>  
  
9. <span data-ttu-id="c4772-192">게시 데이터베이스의 게시자에서 [sp_adddynamicsnapshot_job&#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-adddynamicsnapshot-job-transact-sql)을 실행합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-192">At the publisher on the publication database, execute [sp_adddynamicsnapshot_job &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-adddynamicsnapshot-job-transact-sql).</span></span> <span data-ttu-id="c4772-193">**\@publication**에 1단계의 게시 이름을 지정하고 8단계의 **\@suser_sname** 또는 **\@host_name** 값, 그리고 작업의 일정을 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-193">Specify the name of the publication from step 1 for **\@publication**, the value of **\@suser_sname** or **\@host_name** from step 8, and a schedule for the job.</span></span> <span data-ttu-id="c4772-194">이렇게 하면 지정된 파티션에 대해 매개 변수가 있는 스냅샷을 생성하는 작업이 만들어집니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-194">This creates the job that generates the parameterized snapshot for the specified partition.</span></span> <span data-ttu-id="c4772-195">자세한 내용은 [Specify Synchronization Schedules](specify-synchronization-schedules.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="c4772-195">For more information, see [Specify Synchronization Schedules](specify-synchronization-schedules.md).</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="c4772-196">이 작업은 2단계에서 정의한 초기 스냅샷 작업과 동일한 Windows 계정을 사용하여 실행됩니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-196">This job runs using the same Windows account as the initial snapshot job defined in step 2.</span></span> <span data-ttu-id="c4772-197">매개 변수가 있는 스냅샷 작업과 관련 데이터 파티션을 제거하려면 [sp_dropdynamicsnapshot_job&#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-dropdynamicsnapshot-job-transact-sql)을 실행합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-197">To remove the parameterized snapshot job and its related data partition, execute [sp_dropdynamicsnapshot_job &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-dropdynamicsnapshot-job-transact-sql).</span></span>  
  
10. <span data-ttu-id="c4772-198">게시 데이터베이스의 게시자에서 1단계의 **\@publication** 값을 지정하고 8단계의 **\@suser_sname** 또는 **\@host_name** 값을 지정하여 [sp_helpmergepartition &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-helpmergepartition-transact-sql)을 실행합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-198">At the Publisher on the publication database, execute [sp_helpmergepartition &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-helpmergepartition-transact-sql), specifying the value of **\@publication** from step 1 and the value of **\@suser_sname** or **\@host_name** from step 8.</span></span> <span data-ttu-id="c4772-199">결과 집합에서 **dynamic_snapshot_jobid** 값을 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-199">Note the value of the **dynamic_snapshot_jobid** in the result set.</span></span>  
  
11. <span data-ttu-id="c4772-200">**msdb** 데이터베이스의 배포자에서 **\@job_id**에 9단계에서 얻은 값을 지정하여 [sp_start_job&#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-start-job-transact-sql)을 실행합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-200">At the Distributor on the **msdb** database, execute [sp_start_job &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-start-job-transact-sql), specifying the value obtained in step 9 for **\@job_id**.</span></span> <span data-ttu-id="c4772-201">이렇게 하면 파티션에 대한 매개 변수가 있는 스냅샷 작업이 시작됩니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-201">This starts the parameterized snapshot job for the partition.</span></span>  
  
12. <span data-ttu-id="c4772-202">8-11단계를 반복하여 각 구독에 대해 분할된 스냅샷을 생성합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-202">Repeat steps 8-11 to generate a partitioned snapshot for each subscription.</span></span>  
  
#### <a name="to-create-a-publication-and-manually-create-snapshots-for-each-partition"></a><span data-ttu-id="c4772-203">게시를 만들고 각 파티션에 대한 스냅샷을 수동으로 만들려면</span><span class="sxs-lookup"><span data-stu-id="c4772-203">To create a publication and manually create snapshots for each partition</span></span>  
  
1.  <span data-ttu-id="c4772-204">[sp_addmergepublication&#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergepublication-transact-sql)을 실행하여 게시를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-204">Execute [sp_addmergepublication &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergepublication-transact-sql) to create the publication.</span></span> <span data-ttu-id="c4772-205">자세한 내용은 [게시 만들기](publish/create-a-publication.md)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="c4772-205">For more information, see [Create a Publication](publish/create-a-publication.md).</span></span>  
  
2.  <span data-ttu-id="c4772-206">게시자에서 [sp_addpublication_snapshot&#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addpublication-snapshot-transact-sql)을 실행합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-206">At the Publisher, execute [sp_addpublication_snapshot &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addpublication-snapshot-transact-sql).</span></span> <span data-ttu-id="c4772-207">**\@publication**에 1단계에서 사용된 게시 이름, **\@job_login** 및 **\@password**에 스냅샷 에이전트가 실행되는 Windows 자격 증명을 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-207">Specify the publication name used in step 1 for **\@publication** and the Windows credentials under which the Snapshot Agent runs for **\@job_login** and **\@password**.</span></span> <span data-ttu-id="c4772-208">게시자에 연결할 때 에이전트가 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 인증을 사용하면 **\@publisher_security_mode**에 대해 값 **0**을 지정하고 **\@publisher_login** 및 **\@publisher_password**에 대해 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 로그인 정보를 지정해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-208">If the agent will use [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] Authentication when connecting to the Publisher, you must also specify a value of **0** for **\@publisher_security_mode** and the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] login information for **\@publisher_login** and **\@publisher_password**.</span></span> <span data-ttu-id="c4772-209">이렇게 하면 게시에 대해 스냅샷 에이전트 작업이 만들어집니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-209">This creates a Snapshot Agent job for the publication.</span></span> <span data-ttu-id="c4772-210">초기 스냅샷을 생성하고 스냅샷 에이전트에 대한 사용자 지정 일정을 정의하는 방법은 [Create and Apply the Initial Snapshot](create-and-apply-the-initial-snapshot.md)를 참조하십시오.</span><span class="sxs-lookup"><span data-stu-id="c4772-210">For more information about generating an initial snapshot and defining a custom schedule for the Snapshot Agent, see [Create and Apply the Initial Snapshot](create-and-apply-the-initial-snapshot.md).</span></span>  
  
    > [!IMPORTANT]  
    >  <span data-ttu-id="c4772-211">게시자를 원격 배포자로 구성할 경우 *job_login* 및 *job_password*를 비롯한 모든 매개 변수에 제공된 값이 일반 텍스트로 배포자에게 전송됩니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-211">When configuring a Publisher with a remote Distributor, the values supplied for all parameters, including *job_login* and *job_password*, are sent to the Distributor as plain text.</span></span> <span data-ttu-id="c4772-212">이 저장 프로시저를 실행하기 전에 게시자와 해당 원격 배포자 간 연결을 암호화해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-212">You should encrypt the connection between the Publisher and its remote Distributor before executing this stored procedure.</span></span> <span data-ttu-id="c4772-213">자세한 내용은 [데이터베이스 엔진에 암호화 연결 사용&#40;SQL Server 구성 관리자&#41;](../../database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="c4772-213">For more information, see [Enable Encrypted Connections to the Database Engine &#40;SQL Server Configuration Manager&#41;](../../database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine.md).</span></span>  
  
3.  <span data-ttu-id="c4772-214">[sp_addmergearticle&#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql)을 실행하여 게시에 아티클을 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-214">Execute [sp_addmergearticle &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergearticle-transact-sql) to add articles to the publication.</span></span> <span data-ttu-id="c4772-215">이 저장 프로시저는 게시의 각 아티클에 대해 한 번씩만 실행해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-215">This stored procedure must be executed once for each article in the publication.</span></span> <span data-ttu-id="c4772-216">매개 변수가 있는 필터를 사용할 경우 **\@subset_filterclause** 매개 변수를 사용하여 적어도 하나의 아티클에 대해 매개 변수가 있는 행 필터를 지정해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-216">When using parameterized filters, you must specify a parameterized row filter for at least one article using the **\@subset_filterclause** parameter.</span></span> <span data-ttu-id="c4772-217">자세한 내용은 [병합 아티클에 대한 매개 변수가 있는 행 필터 정의 및 수정](publish/define-and-modify-a-parameterized-row-filter-for-a-merge-article.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="c4772-217">For more information, see [Define and Modify a Parameterized Row Filter for a Merge Article](publish/define-and-modify-a-parameterized-row-filter-for-a-merge-article.md).</span></span>  
  
4.  <span data-ttu-id="c4772-218">다른 아티클이 매개 변수가 있는 행 필터에 따라 필터링되면 [sp_addmergefilter&#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergefilter-transact-sql)를 실행하여 아티클 간의 조인 또는 논리 레코드 관계를 정의합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-218">If other articles will be filtered based on the parameterized row filter, execute [sp_addmergefilter &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addmergefilter-transact-sql) to define the join or logical record relationships between articles.</span></span> <span data-ttu-id="c4772-219">이 저장 프로시저는 정의되는 각 관계에 대해 한 번씩만 실행해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-219">This stored procedure must be executed once for each relationship being defined.</span></span> <span data-ttu-id="c4772-220">자세한 내용은 [병합 아티클 사이에서 조인 필터 정의 및 수정](publish/define-and-modify-a-join-filter-between-merge-articles.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="c4772-220">For more information, see [Define and Modify a Join Filter Between Merge Articles](publish/define-and-modify-a-join-filter-between-merge-articles.md).</span></span>  
  
5.  <span data-ttu-id="c4772-221">스냅샷 작업을 시작하거나 명령 프롬프트에서 복제 스냅샷 에이전트를 실행하여 표준 스냅샷 스키마 및 그 밖의 파일을 생성합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-221">Start the snapshot job or run the Replication Snapshot Agent from the command prompt to generate the standard snapshot schema and other files.</span></span> <span data-ttu-id="c4772-222">자세한 내용은 [Create and Apply the Initial Snapshot](create-and-apply-the-initial-snapshot.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="c4772-222">For more information, see [Create and Apply the Initial Snapshot](create-and-apply-the-initial-snapshot.md).</span></span>  
  
6.  <span data-ttu-id="c4772-223">명령 프롬프트에서 **-DynamicSnapshotLocation** 에 분할된 스냅샷의 위치를 지정하고 파티션을 정의하는 다음 속성을 하나 또는 모두 지정하고 복제 스냅샷 에이전트를 다시 실행하여 대량 복사(.bcp) 파일을 생성합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-223">Run the Replication Snapshot Agent again from the command prompt to generate bulk copy (.bcp) files, specifying the location of the partitioned snapshot for **-DynamicSnapshotLocation** and one or both of the following properties that defines the partition:</span></span>  
  
    -   <span data-ttu-id="c4772-224">**-DynamicFilterHostName** - [HOST_NAME&#40;Transact-SQL&#41;](/sql/t-sql/functions/host-name-transact-sql)이 사용되는 경우의 값</span><span class="sxs-lookup"><span data-stu-id="c4772-224">**-DynamicFilterHostName** - the value if [HOST_NAME &#40;Transact-SQL&#41;](/sql/t-sql/functions/host-name-transact-sql) is used.</span></span>  
  
    -   <span data-ttu-id="c4772-225">**-DynamicFilterLogin** - [SUSER_SNAME&#40;Transact-SQL&#41;](/sql/t-sql/functions/suser-sname-transact-sql)이 사용되는 경우의 값</span><span class="sxs-lookup"><span data-stu-id="c4772-225">**-DynamicFilterLogin** - the value if [SUSER_SNAME &#40;Transact-SQL&#41;](/sql/t-sql/functions/suser-sname-transact-sql) is used.</span></span>  
  
7.  <span data-ttu-id="c4772-226">6단계를 반복하여 각 구독에 대해 분할된 스냅샷을 생성합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-226">Repeat step 6 to generate a partitioned snapshot for each subscription.</span></span>  
  
8.  <span data-ttu-id="c4772-227">다음 속성을 지정하고 각 구독에 대해 병합 에이전트를 실행하여 구독자에서 초기 분할된 스냅샷을 적용합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-227">Run the Merge Agent for each subscription to apply the initial partitioned snapshot at the Subscribers, specifying the following properties:</span></span>  
  
    -   <span data-ttu-id="c4772-228">**-Hostname** - HOST_NAME의 실제 값이 재정의되는 경우 파티션을 정의하는 데 사용되는 값</span><span class="sxs-lookup"><span data-stu-id="c4772-228">**-Hostname** - the value used to define the partition if the actual value of HOST_NAME is being overridden.</span></span>  
  
    -   <span data-ttu-id="c4772-229">**-DynamicSnapshotLocation** - 이 파티션에 대한 동적 스냅샷의 위치</span><span class="sxs-lookup"><span data-stu-id="c4772-229">**-DynamicSnapshotLocation** - the location of the dynamic snapshot for this partition.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="c4772-230">복제 에이전트를 프로그래밍하는 방법에 대한 자세한 내용은 [복제 에이전트 실행 파일 개념](concepts/replication-agent-executables-concepts.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="c4772-230">For more information about programming replication agents, see [Replication Agent Executables Concepts](concepts/replication-agent-executables-concepts.md).</span></span>  
  
###  <a name="examples-transact-sql"></a><a name="TsqlExample"></a> <span data-ttu-id="c4772-231">예(Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="c4772-231">Examples (Transact-SQL)</span></span>  
 <span data-ttu-id="c4772-232">이 예에서는 매개 변수가 있는 필터를 사용하여 구독자가 스냅샷 생성 프로세스를 시작하는 병합 게시를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-232">This example creates a merge publication with parameterized filters where Subscribers initiate the snapshot generation process.</span></span> <span data-ttu-id="c4772-233">**\@job_login** 및 **\@job_password**에 대한 값은 스크립팅 변수를 사용하여 전달됩니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-233">Values for **\@job_login** and **\@job_password** are passed in using scripting variables.</span></span>  
  
 [!code-sql[HowTo#sp_MergeDynamicPub1](../../snippets/tsql/SQL15/replication/howto/tsql/createmergepubdynamic1.sql#sp_mergedynamicpub1)]  
  
 <span data-ttu-id="c4772-234">이 예에서는 매개 변수가 있는 필터를 사용하여 각 구독자가 [sp_addmergepartition](/sql/relational-databases/system-stored-procedures/sp-addmergepartition-transact-sql) 을 실행하여 파티션을 정의하고 [sp_adddynamicsnapshot_job](/sql/relational-databases/system-stored-procedures/sp-adddynamicsnapshot-job-transact-sql) 을 실행하여 필터링된 스냅샷 작업을 만들고 분할 정보를 전달하는 게시를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-234">This example creates a publication using a parameterized filter where each Subscriber has its partition defined by executing [sp_addmergepartition](/sql/relational-databases/system-stored-procedures/sp-addmergepartition-transact-sql) and the filtered snapshot job created by executing [sp_adddynamicsnapshot_job](/sql/relational-databases/system-stored-procedures/sp-adddynamicsnapshot-job-transact-sql) passing the partitioning information.</span></span> <span data-ttu-id="c4772-235">**\@job_login** 및 **\@job_password**에 대한 값은 스크립팅 변수를 사용하여 전달됩니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-235">Values for **\@job_login** and **\@job_password** are passed in using scripting variables.</span></span>  
  
 [!code-sql[HowTo#sp_MergeDynamicPubPlusPartition](../../snippets/tsql/SQL15/replication/howto/tsql/createmergepubdynamic2.sql#sp_mergedynamicpubpluspartition)]  
  
 <span data-ttu-id="c4772-236">이 예에서는 매개 변수가 있는 필터를 사용하여 각 구독자가 분할 정보를 제공함으로써 데이터 파티션과 필터링된 스냅샷 작업을 만들어야 하는 게시를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-236">This example creates a publication using a parameterized filter where each Subscriber must have its data partition and filtered snapshot job created by supplying the partitioning information.</span></span> <span data-ttu-id="c4772-237">구독자는 복제 에이전트를 수동으로 실행할 때 구독자가 명령줄 매개 변수를 사용하여 분할 정보를 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-237">A Subscriber supplies partitioning information using command-line parameters when manually running the replication agents.</span></span> <span data-ttu-id="c4772-238">이 예에서는 이 게시에 대한 구독도 만들어졌다고 가정합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-238">This example assumes that a subscription to the publication has also been created.</span></span>  
  
 [!code-sql[HowTo#sp_MergeDynamicPubPartitionManual](../../snippets/tsql/SQL15/replication/howto/tsql/createmergepubdynamic3.sql#sp_mergedynamicpubpartitionmanual)]  
  
 
```
REM Line breaks are added to improve readability.   
REM In a batch file, commands must be made in a single line.  
REM Run the Snapshot agent from the command line to generate the standard snapshot   
REM schema and other files.   
SET DistPub=%computername%  
SET PubDB=AdventureWorks2012   
SET PubName=AdvWorksSalesPersonMerge  
  
"C:\Program Files\Microsoft SQL Server\120\COM\SNAPSHOT.EXE" -Publication %PubName%    
-Publisher %DistPub% -Distributor  %DistPub%  -PublisherDB %PubDB%  -ReplicationType 2    
-OutputVerboseLevel 1  -DistributorSecurityMode 1  
  
PAUSE  
```

```
REM Run the Snapshot agent from the command line, this time to generate   
REM the bulk copy (.bcp) data for each Subscriber partition.    
SET DistPub=%computername%  
SET PubDB=AdventureWorks2012   
SET PubName=AdvWorksSalesPersonMerge  
SET SnapshotDir=\\%DistPub%\repldata\unc\fernando  
  
MD %SnapshotDir%  
  
"C:\Program Files\Microsoft SQL Server\120\COM\SNAPSHOT.EXE" -Publication %PubName%    
-Publisher %DistPub%  -Distributor  %DistPub%  -PublisherDB %PubDB%  -ReplicationType 2    
-OutputVerboseLevel 1  -DistributorSecurityMode 1  -DynamicFilterHostName "adventure-works\Fernando"    
-DynamicSnapshotLocation %SnapshotDir%  
  
PAUSE  
```

```
REM Run the Merge Agent for each subscription to apply the partitioned   
REM snapshot for each Subscriber.    
SET Publisher = %computername%  
SET Subscriber = %computername%  
SET PubDB = AdventureWorks2012   
SET SubDB = AdventureWorks2012Replica   
SET PubName = AdvWorksSalesPersonMerge   
SET SnapshotDir=\\%DistPub%\repldata\unc\fernando  
  
"C:\Program Files\Microsoft SQL Server\120\COM\REPLMERG.EXE" -Publisher  %Publisher%    
-Subscriber  %Subscriber%  -Distributor %Publisher%  -PublisherDB %PubDB%    
-SubscriberDB %SubDB% -Publication %PubName%  -PublisherSecurityMode 1  -OutputVerboseLevel 3    
-Output -SubscriberSecurityMode 1  -SubscriptionType 3 -DistributorSecurityMode 1    
-Hostname "adventure-works\Fernando"  -DynamicSnapshotLocation %SnapshotDir%  
  
PAUSE
```
  
  
##  <a name="using-replication-management-objects-rmo"></a><a name="RMOProcedure"></a> <span data-ttu-id="c4772-239">RMO(복제 관리 개체) 사용</span><span class="sxs-lookup"><span data-stu-id="c4772-239">Using Replication Management Objects (RMO)</span></span>  
 <span data-ttu-id="c4772-240">다음과 같이 RMO(복제 관리 개체)를 사용하여 프로그래밍 방식으로 분할된 스냅샷을 만들 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-240">You can use Replication Management Objects (RMO) to generate partitioned snapshots programmatically in the following ways:</span></span>  
  
-   <span data-ttu-id="c4772-241">구독자가 처음 동기화될 때 스냅샷 생성 및 적용을 요청하도록 허용합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-241">Allow Subscribers to request snapshot generation and application the first time they synchronize.</span></span>  
  
-   <span data-ttu-id="c4772-242">각 파티션에 대한 스냅샷을 미리 생성합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-242">Pre-generate snapshots for each partition.</span></span>  
  
-   <span data-ttu-id="c4772-243">스냅샷 에이전트를 실행하여 각 구독자에 대한 스냅샷을 수동으로 생성합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-243">Manually generate a snapshot for each Subscriber by running the Snapshot Agent.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="c4772-244">병합 아티클을 만들 때 <xref:Microsoft.SqlServer.Replication.PartitionOptions.NonOverlappingSingleSubscription>에 <xref:Microsoft.SqlServer.Replication.MergeArticle.PartitionOption%2A> 값을 지정하여 아티클을 필터링함으로써 구독별로 고유한 겹치지 않는 파티션을 생성하면 병합 에이전트를 실행할 때마다 메타데이터가 정리됩니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-244">When filtering for an article yields non-overlapping partitions that are unique for each subscription (by specifying a value of <xref:Microsoft.SqlServer.Replication.PartitionOptions.NonOverlappingSingleSubscription> for <xref:Microsoft.SqlServer.Replication.MergeArticle.PartitionOption%2A> when creating a merge article), metadata is cleaned up whenever the Merge Agent runs.</span></span> <span data-ttu-id="c4772-245">따라서 분할된 스냅샷은 더 빨리 만료됩니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-245">This means that the partitioned snapshot expires more quickly.</span></span> <span data-ttu-id="c4772-246">이 옵션을 사용할 경우 구독자가 스냅샷 생성을 요청하도록 허용하는 것을 고려해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-246">When you use this option, you should consider allowing Subscribers to request snapshot generation.</span></span> <span data-ttu-id="c4772-247">자세한 내용은 [Parameterized Row Filters](merge/parameterized-filters-parameterized-row-filters.md)항목의 "적절한 필터링 옵션 사용" 섹션을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="c4772-247">For more information, see the section Using the Appropriate Filtering Options in the topic [Parameterized Row Filters](merge/parameterized-filters-parameterized-row-filters.md).</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="c4772-248">가능한 경우 런타임 시 사용자에게 보안 자격 증명을 입력하라는 메시지가 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-248">When possible, prompt users to enter security credentials at runtime.</span></span> <span data-ttu-id="c4772-249">자격 증명을 저장해야 하는 경우 [Windows .NET Framework에서 제공하는](https://go.microsoft.com/fwlink/?LinkId=34733) 암호화 서비스 [!INCLUDE[msCoName](../../includes/msconame-md.md)] 를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-249">If you must store credentials, use the [cryptographic services](https://go.microsoft.com/fwlink/?LinkId=34733) provided by the [!INCLUDE[msCoName](../../includes/msconame-md.md)] Windows .NET Framework.</span></span>  
  
#### <a name="to-create-a-publication-that-allows-subscribers-to-initiate-snapshot-generation-and-delivery"></a><span data-ttu-id="c4772-250">구독자가 스냅샷 생성 및 배달을 시작하도록 허용하는 게시를 만들려면</span><span class="sxs-lookup"><span data-stu-id="c4772-250">To create a publication that allows Subscribers to initiate snapshot generation and delivery</span></span>  
  
1.  <span data-ttu-id="c4772-251"><xref:Microsoft.SqlServer.Management.Common.ServerConnection> 클래스를 사용하여 게시자 연결을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-251">Create a connection to the Publisher by using the <xref:Microsoft.SqlServer.Management.Common.ServerConnection> class.</span></span>  
  
2.  <span data-ttu-id="c4772-252">게시 데이터베이스에 대해 <xref:Microsoft.SqlServer.Replication.ReplicationDatabase> 클래스의 인스턴스를 만들고, 1단계에서 만든 <xref:Microsoft.SqlServer.Replication.ReplicationObject.ConnectionContext%2A> 인스턴스에 <xref:Microsoft.SqlServer.Management.Common.ServerConnection> 속성을 설정한 다음 <xref:Microsoft.SqlServer.Replication.ReplicationObject.LoadProperties%2A> 메서드를 호출합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-252">Create an instance of the <xref:Microsoft.SqlServer.Replication.ReplicationDatabase> class for the publication database, set the <xref:Microsoft.SqlServer.Replication.ReplicationObject.ConnectionContext%2A> property to the instance of <xref:Microsoft.SqlServer.Management.Common.ServerConnection> from step 1, and call the <xref:Microsoft.SqlServer.Replication.ReplicationObject.LoadProperties%2A> method.</span></span> <span data-ttu-id="c4772-253"><xref:Microsoft.SqlServer.Replication.ReplicationObject.LoadProperties%2A>에서 `false`를 반환하면 데이터베이스가 있는지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-253">If <xref:Microsoft.SqlServer.Replication.ReplicationObject.LoadProperties%2A> returns `false`, confirm that the database exists.</span></span>  
  
3.  <span data-ttu-id="c4772-254"><xref:Microsoft.SqlServer.Replication.ReplicationDatabase.EnabledMergePublishing%2A> 속성이 `false`이면 `true`로 설정한 후 <xref:Microsoft.SqlServer.Replication.ReplicationObject.CommitPropertyChanges%2A>를 호출합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-254">If <xref:Microsoft.SqlServer.Replication.ReplicationDatabase.EnabledMergePublishing%2A> property is `false`, set it to `true` and call <xref:Microsoft.SqlServer.Replication.ReplicationObject.CommitPropertyChanges%2A>.</span></span>  
  
4.  <span data-ttu-id="c4772-255"><xref:Microsoft.SqlServer.Replication.MergePublication> 클래스의 인스턴스를 만들고 이 개체에 대해 다음 속성을 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-255">Create an instance of the <xref:Microsoft.SqlServer.Replication.MergePublication> class, and set the following properties for this object:</span></span>  
  
    -   <span data-ttu-id="c4772-256"><xref:Microsoft.SqlServer.Management.Common.ServerConnection> 에서 1단계에서 만든 <xref:Microsoft.SqlServer.Replication.ReplicationObject.ConnectionContext%2A>.</span><span class="sxs-lookup"><span data-stu-id="c4772-256">The <xref:Microsoft.SqlServer.Management.Common.ServerConnection> from step 1 for <xref:Microsoft.SqlServer.Replication.ReplicationObject.ConnectionContext%2A>.</span></span>  
  
    -   <span data-ttu-id="c4772-257"><xref:Microsoft.SqlServer.Replication.Publication.DatabaseName%2A>에 대한 게시 데이터베이스의 이름</span><span class="sxs-lookup"><span data-stu-id="c4772-257">The name of the published database for <xref:Microsoft.SqlServer.Replication.Publication.DatabaseName%2A>.</span></span>  
  
    -   <span data-ttu-id="c4772-258"><xref:Microsoft.SqlServer.Replication.Publication.Name%2A>에 대한 게시의 이름</span><span class="sxs-lookup"><span data-stu-id="c4772-258">A name for the publication for <xref:Microsoft.SqlServer.Replication.Publication.Name%2A>.</span></span>  
  
    -   <span data-ttu-id="c4772-259"><xref:Microsoft.SqlServer.Replication.MergePublication.MaxConcurrentDynamicSnapshots%2A>에 대해 실행할 최대 동적 스냅샷 작업 수.</span><span class="sxs-lookup"><span data-stu-id="c4772-259">The maximum number of dynamic snapshot jobs to run for <xref:Microsoft.SqlServer.Replication.MergePublication.MaxConcurrentDynamicSnapshots%2A>.</span></span> <span data-ttu-id="c4772-260">구독자가 스냅샷 요청을 언제든지 시작할 수 있으므로 이 속성은 여러 구독자가 분할된 스냅샷을 동시에 요청할 경우 동시에 실행 가능한 스냅샷 에이전트 작업 수를 제한합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-260">Because Subscriber initiated snapshot requests can occur at any time, this property limits the number of Snapshot Agent jobs that can run simultaneously when multiple Subscribers request their partitioned snapshot at the same time.</span></span> <span data-ttu-id="c4772-261">최대 작업 수가 실행되고 있으면 새로 추가된 분할된 스냅샷 요청은 실행 중인 작업 중 하나가 완료될 때까지 지연됩니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-261">When the maximum number of jobs are running, additional partitioned snapshot requests are queued until one of the running jobs is completed.</span></span>  
  
    -   <span data-ttu-id="c4772-262">비트 논리 OR 연산자(Visual C#의 경우 `|`, Visual Basic의 경우 `Or`)를 사용하여 <xref:Microsoft.SqlServer.Replication.PublicationAttributes.AllowSubscriberInitiatedSnapshot>에 값 <xref:Microsoft.SqlServer.Replication.Publication.Attributes%2A>을 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-262">Use the bitwise logical OR (`|` in Visual C# and `Or` in Visual Basic) operator to add the value <xref:Microsoft.SqlServer.Replication.PublicationAttributes.AllowSubscriberInitiatedSnapshot> to <xref:Microsoft.SqlServer.Replication.Publication.Attributes%2A>.</span></span>  
  
    -   <span data-ttu-id="c4772-263">스냅샷 에이전트가 실행되는 <xref:Microsoft.SqlServer.Replication.IProcessSecurityContext.Login%2A> Windows 계정에 대한 자격 증명을 제공하는 <xref:Microsoft.SqlServer.Replication.IProcessSecurityContext.Password%2A> 의 <xref:Microsoft.SqlServer.Replication.Publication.SnapshotGenerationAgentProcessSecurity%2A> 및 [!INCLUDE[msCoName](../../includes/msconame-md.md)] 필드.</span><span class="sxs-lookup"><span data-stu-id="c4772-263">The <xref:Microsoft.SqlServer.Replication.IProcessSecurityContext.Login%2A> and <xref:Microsoft.SqlServer.Replication.IProcessSecurityContext.Password%2A> fields of <xref:Microsoft.SqlServer.Replication.Publication.SnapshotGenerationAgentProcessSecurity%2A> to provide the credentials for the [!INCLUDE[msCoName](../../includes/msconame-md.md)] Windows account under which the Snapshot Agent job runs.</span></span>  
  
        > [!NOTE]  
        >  <span data-ttu-id="c4772-264">`sysadmin` 고정 서버 역할의 멤버가 게시를 만들 때는 <xref:Microsoft.SqlServer.Replication.Publication.SnapshotGenerationAgentProcessSecurity%2A>를 설정하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-264">Setting <xref:Microsoft.SqlServer.Replication.Publication.SnapshotGenerationAgentProcessSecurity%2A> is recommended when the publication is created by a member of the `sysadmin` fixed server role.</span></span> <span data-ttu-id="c4772-265">자세한 내용은 [복제 에이전트 보안 모델](security/replication-agent-security-model.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="c4772-265">For more information, see [Replication Agent Security Model](security/replication-agent-security-model.md).</span></span>  
  
5.  <span data-ttu-id="c4772-266"><xref:Microsoft.SqlServer.Replication.Publication.Create%2A> 메서드를 호출하여 게시를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-266">Call the <xref:Microsoft.SqlServer.Replication.Publication.Create%2A> method to create the publication.</span></span>  
  
    > [!IMPORTANT]  
    >  <span data-ttu-id="c4772-267">원격 배포자로 게시자를 구성할 경우 <xref:Microsoft.SqlServer.Replication.Publication.SnapshotGenerationAgentProcessSecurity%2A>를 포함하여 모든 속성에 제공된 값이 일반 텍스트로 배포자에게 보내집니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-267">When configuring a Publisher with a remote Distributor, the values supplied for all properties, including <xref:Microsoft.SqlServer.Replication.Publication.SnapshotGenerationAgentProcessSecurity%2A>, are sent to the Distributor as plain text.</span></span> <span data-ttu-id="c4772-268"><xref:Microsoft.SqlServer.Replication.Publication.Create%2A> 메서드를 호출하기 전에 게시자와 해당 원격 배포자 간 연결을 암호화해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-268">You should encrypt the connection between the Publisher and its remote Distributor before calling the <xref:Microsoft.SqlServer.Replication.Publication.Create%2A> method.</span></span> <span data-ttu-id="c4772-269">자세한 내용은 [데이터베이스 엔진에 암호화 연결 사용&#40;SQL Server 구성 관리자&#41;](../../database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="c4772-269">For more information, see [Enable Encrypted Connections to the Database Engine &#40;SQL Server Configuration Manager&#41;](../../database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine.md).</span></span>  
  
6.  <span data-ttu-id="c4772-270"><xref:Microsoft.SqlServer.Replication.MergeArticle> 속성을 사용하여 게시에 아티클을 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-270">Use the <xref:Microsoft.SqlServer.Replication.MergeArticle> property to add articles to the publication.</span></span> <span data-ttu-id="c4772-271">매개 변수가 있는 필터를 정의하는 하나 이상의 아티클에 대해 <xref:Microsoft.SqlServer.Replication.MergeArticle.FilterClause%2A> 속성을 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-271">Specify the <xref:Microsoft.SqlServer.Replication.MergeArticle.FilterClause%2A> property for at least one article that defines the parameterized filter.</span></span> <span data-ttu-id="c4772-272">필요한 경우 아티클 간 조인 필터를 정의하는 <xref:Microsoft.SqlServer.Replication.MergeJoinFilter> 개체를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-272">(Optional) Create <xref:Microsoft.SqlServer.Replication.MergeJoinFilter> objects that define join filters between articles.</span></span> <span data-ttu-id="c4772-273">자세한 내용은 [아티클을 정의](publish/define-an-article.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="c4772-273">For more information, see [Define an Article](publish/define-an-article.md).</span></span>  
  
7.  <span data-ttu-id="c4772-274"><xref:Microsoft.SqlServer.Replication.Publication.SnapshotAgentExists%2A> 값이 `false`이면 <xref:Microsoft.SqlServer.Replication.Publication.CreateSnapshotAgent%2A>를 호출하여 이 게시에 대한 초기 스냅샷 에이전트 작업을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-274">If the value of <xref:Microsoft.SqlServer.Replication.Publication.SnapshotAgentExists%2A> is `false`, call <xref:Microsoft.SqlServer.Replication.Publication.CreateSnapshotAgent%2A> to create the initial Snapshot Agent job for this publication.</span></span>  
  
8.  <span data-ttu-id="c4772-275">4단계에서 만든 <xref:Microsoft.SqlServer.Replication.Publication.StartSnapshotGenerationAgentJob%2A> 개체의 <xref:Microsoft.SqlServer.Replication.MergePublication> 메서드를 호출합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-275">Call the <xref:Microsoft.SqlServer.Replication.Publication.StartSnapshotGenerationAgentJob%2A> method of the <xref:Microsoft.SqlServer.Replication.MergePublication> object created in step 4.</span></span> <span data-ttu-id="c4772-276">그러면 초기 스냅샷을 생성하는 에이전트 작업이 시작됩니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-276">This starts the agent job that generates the initial snapshot.</span></span> <span data-ttu-id="c4772-277">초기 스냅샷을 생성하고 스냅샷 에이전트에 대한 사용자 지정 일정을 정의하는 방법은 [Create and Apply the Initial Snapshot](create-and-apply-the-initial-snapshot.md)를 참조하십시오.</span><span class="sxs-lookup"><span data-stu-id="c4772-277">For more information about generating an initial snapshot and defining a custom schedule for the Snapshot Agent, see [Create and Apply the Initial Snapshot](create-and-apply-the-initial-snapshot.md).</span></span>  
  
9. <span data-ttu-id="c4772-278">(옵션) <xref:Microsoft.SqlServer.Replication.MergePublication.SnapshotAvailable%2A> 속성이 `true` 값인지 확인하여 초기 스냅샷을 사용할 준비가 되었는지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-278">(Optional) Check for a value of `true` for the <xref:Microsoft.SqlServer.Replication.MergePublication.SnapshotAvailable%2A> property to determine when the initial snapshot is ready for use.</span></span>  
  
10. <span data-ttu-id="c4772-279">구독자가 병합 에이전트에 처음으로 연결하는 경우에는 분할된 스냅샷이 자동으로 생성됩니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-279">When the Merge Agent for a Subscriber connects for the first time, a partitioned snapshot is generated automatically.</span></span>  
  
#### <a name="to-create-a-publication-and-pregenerate-or-automatically-refresh-snapshots"></a><span data-ttu-id="c4772-280">게시를 만들고 스냅샷을 미리 생성하거나 자동으로 새로 고치려면</span><span class="sxs-lookup"><span data-stu-id="c4772-280">To create a publication and pregenerate or automatically refresh snapshots</span></span>  
  
1.  <span data-ttu-id="c4772-281"><xref:Microsoft.SqlServer.Replication.MergePublication> 클래스의 인스턴스를 사용하여 병합 게시를 정의합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-281">Use an instance of the <xref:Microsoft.SqlServer.Replication.MergePublication> class to define a merge publication.</span></span> <span data-ttu-id="c4772-282">자세한 내용은 [게시 만들기](publish/create-a-publication.md)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="c4772-282">For more information, see [Create a Publication](publish/create-a-publication.md).</span></span>  
  
2.  <span data-ttu-id="c4772-283"><xref:Microsoft.SqlServer.Replication.MergeArticle> 속성을 사용하여 게시에 아티클을 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-283">Use the <xref:Microsoft.SqlServer.Replication.MergeArticle> property to add articles to the publication.</span></span> <span data-ttu-id="c4772-284">매개 변수가 있는 필터를 정의하는 하나 이상의 아티클에 대해 <xref:Microsoft.SqlServer.Replication.MergeArticle.FilterClause%2A> 속성을 지정하고 아티클 간 조인 필터를 정의하는 <xref:Microsoft.SqlServer.Replication.MergeJoinFilter> 개체를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-284">Specify the <xref:Microsoft.SqlServer.Replication.MergeArticle.FilterClause%2A> property for at least one article that defines the parameterized filter, and create any <xref:Microsoft.SqlServer.Replication.MergeJoinFilter> objects that define join filters between articles.</span></span> <span data-ttu-id="c4772-285">자세한 내용은 [아티클을 정의](publish/define-an-article.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="c4772-285">For more information, see [Define an Article](publish/define-an-article.md).</span></span>  
  
3.  <span data-ttu-id="c4772-286"><xref:Microsoft.SqlServer.Replication.Publication.SnapshotAgentExists%2A>의 값이 `false`이면 <xref:Microsoft.SqlServer.Replication.Publication.CreateSnapshotAgent%2A>를 호출하여 이 게시에 대한 스냅샷 에이전트 작업을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-286">If the value of <xref:Microsoft.SqlServer.Replication.Publication.SnapshotAgentExists%2A> is `false`, call <xref:Microsoft.SqlServer.Replication.Publication.CreateSnapshotAgent%2A> to create the snapshot agent job for this publication.</span></span>  
  
4.  <span data-ttu-id="c4772-287">4단계에서 만든 <xref:Microsoft.SqlServer.Replication.Publication.StartSnapshotGenerationAgentJob%2A> 개체의 <xref:Microsoft.SqlServer.Replication.MergePublication> 메서드를 호출합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-287">Call the <xref:Microsoft.SqlServer.Replication.Publication.StartSnapshotGenerationAgentJob%2A> method of the <xref:Microsoft.SqlServer.Replication.MergePublication> object created in step 1.</span></span> <span data-ttu-id="c4772-288">그러면 초기 스냅샷을 생성하는 에이전트 작업이 시작됩니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-288">This method starts the agent job that generates the initial snapshot.</span></span> <span data-ttu-id="c4772-289">초기 스냅샷을 생성하고 스냅샷 에이전트에 대한 사용자 지정 일정을 정의하는 방법은 [Create and Apply the Initial Snapshot](create-and-apply-the-initial-snapshot.md)를 참조하십시오.</span><span class="sxs-lookup"><span data-stu-id="c4772-289">For more information on generating an initial snapshot and defining a custom schedule for the Snapshot Agent, see [Create and Apply the Initial Snapshot](create-and-apply-the-initial-snapshot.md).</span></span>  
  
5.  <span data-ttu-id="c4772-290"><xref:Microsoft.SqlServer.Replication.MergePublication.SnapshotAvailable%2A> 속성이 `true` 값인지 확인하여 초기 스냅샷을 사용할 준비가 되었는지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-290">Check for a value of `true` for the <xref:Microsoft.SqlServer.Replication.MergePublication.SnapshotAvailable%2A> property to determine when the initial snapshot is ready for use.</span></span>  
  
6.  <span data-ttu-id="c4772-291"><xref:Microsoft.SqlServer.Replication.MergePartition> 클래스의 인스턴스를 만들고 다음 두 속성 중 하나 또는 모두를 사용하여 구독자에 대한 매개 변수가 있는 필터링 조건을 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-291">Create an instance of the <xref:Microsoft.SqlServer.Replication.MergePartition> class, and set the parameterized filtering criteria for the Subscriber by using one or both of the following properties:</span></span>  
  
    -   <span data-ttu-id="c4772-292">구독자의 파티션이 [SUSER_SNAME&#40;Transact-SQL&#41;](/sql/t-sql/functions/suser-sname-transact-sql) 결과로 정의되는 경우 <xref:Microsoft.SqlServer.Replication.MergePartition.DynamicFilterLogin%2A>을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-292">If the Subscriber's partition is defined by the result of [SUSER_SNAME &#40;Transact-SQL&#41;](/sql/t-sql/functions/suser-sname-transact-sql), use <xref:Microsoft.SqlServer.Replication.MergePartition.DynamicFilterLogin%2A>.</span></span>  
  
    -   <span data-ttu-id="c4772-293">구독자의 파티션이 [HOST_NAME&#40;Transact-SQL&#41;](/sql/t-sql/functions/host-name-transact-sql) 결과 또는 이 함수의 오버로드 결과로 정의되는 경우 <xref:Microsoft.SqlServer.Replication.MergePartition.DynamicFilterHostName%2A>을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-293">If the Subscriber's partition is defined by the result of [HOST_NAME &#40;Transact-SQL&#41;](/sql/t-sql/functions/host-name-transact-sql) or an overload of this function, use <xref:Microsoft.SqlServer.Replication.MergePartition.DynamicFilterHostName%2A>.</span></span>  
  
7.  <span data-ttu-id="c4772-294"><xref:Microsoft.SqlServer.Replication.MergeDynamicSnapshotJob> 클래스의 인스턴스를 만들고 6단계와 동일한 속성을 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-294">Create an instance of the <xref:Microsoft.SqlServer.Replication.MergeDynamicSnapshotJob> class, and set the same property as in step 6.</span></span>  
  
8.  <span data-ttu-id="c4772-295"><xref:Microsoft.SqlServer.Replication.ReplicationAgentSchedule> 클래스를 사용하여 구독자 파티션에 대한 필터링된 스냅샷을 생성할 일정을 정의합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-295">Use the <xref:Microsoft.SqlServer.Replication.ReplicationAgentSchedule> class to define a schedule for generating the filtered snapshot for the Subscriber partition.</span></span>  
  
9. <span data-ttu-id="c4772-296">1단계에서 만든 <xref:Microsoft.SqlServer.Replication.MergePublication> 의 인스턴스를 사용하여 <xref:Microsoft.SqlServer.Replication.MergePublication.AddMergePartition%2A>을 호출합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-296">Using the instance of <xref:Microsoft.SqlServer.Replication.MergePublication> from step 1, call <xref:Microsoft.SqlServer.Replication.MergePublication.AddMergePartition%2A>.</span></span> <span data-ttu-id="c4772-297">6단계에서 만든 <xref:Microsoft.SqlServer.Replication.MergePartition> 개체를 전달합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-297">Pass the <xref:Microsoft.SqlServer.Replication.MergePartition> object from step 6.</span></span>  
  
10. <span data-ttu-id="c4772-298">1단계에서 만든 <xref:Microsoft.SqlServer.Replication.MergePublication> 의 인스턴스를 사용하여 <xref:Microsoft.SqlServer.Replication.MergePublication.AddMergeDynamicSnapshotJob%2A> 메서드를 호출합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-298">Using the instance of <xref:Microsoft.SqlServer.Replication.MergePublication> from step 1, call the <xref:Microsoft.SqlServer.Replication.MergePublication.AddMergeDynamicSnapshotJob%2A> method.</span></span> <span data-ttu-id="c4772-299">7단계에서 만든 <xref:Microsoft.SqlServer.Replication.MergeDynamicSnapshotJob> 개체 및 8단계에서 만든 <xref:Microsoft.SqlServer.Replication.ReplicationAgentSchedule> 개체를 전달합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-299">Pass the <xref:Microsoft.SqlServer.Replication.MergeDynamicSnapshotJob> object from step 7 and the <xref:Microsoft.SqlServer.Replication.ReplicationAgentSchedule> object from step 8.</span></span>  
  
11. <span data-ttu-id="c4772-300"><xref:Microsoft.SqlServer.Replication.MergePublication.EnumMergeDynamicSnapshotJobs%2A>를 호출하고 반환된 배열의 새로 추가된 분할된 스냅샷 작업에서 <xref:Microsoft.SqlServer.Replication.MergeDynamicSnapshotJob> 개체를 찾습니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-300">Call <xref:Microsoft.SqlServer.Replication.MergePublication.EnumMergeDynamicSnapshotJobs%2A>, and locate the <xref:Microsoft.SqlServer.Replication.MergeDynamicSnapshotJob> object for the newly added partitioned snapshot job in the returned array.</span></span>  
  
12. <span data-ttu-id="c4772-301">작업의 <xref:Microsoft.SqlServer.Replication.MergeDynamicSnapshotJob.Name%2A> 속성을 가져옵니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-301">Get the <xref:Microsoft.SqlServer.Replication.MergeDynamicSnapshotJob.Name%2A> property for the job.</span></span>  
  
13. <span data-ttu-id="c4772-302"><xref:Microsoft.SqlServer.Management.Common.ServerConnection> 클래스를 사용하여 배포자 연결을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-302">Create a connection to the Distributor by using the <xref:Microsoft.SqlServer.Management.Common.ServerConnection> class.</span></span>  
  
14. <span data-ttu-id="c4772-303">13단계에서 만든 <xref:Microsoft.SqlServer.Management.Smo.Server> 개체를 전달하여 SMO(SQL Server 관리 개체) <xref:Microsoft.SqlServer.Management.Common.ServerConnection> 클래스의 인스턴스를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-303">Create an instance of the SQL Server Management Objects (SMO) <xref:Microsoft.SqlServer.Management.Smo.Server> class, passing the <xref:Microsoft.SqlServer.Management.Common.ServerConnection> object from step 13.</span></span>  
  
15. <span data-ttu-id="c4772-304">14단계에서 만든 <xref:Microsoft.SqlServer.Management.Smo.Agent.Job> 개체의 <xref:Microsoft.SqlServer.Management.Smo.Server.JobServer%2A> 속성 및 12단계에서 가져온 작업 이름을 전달하여 <xref:Microsoft.SqlServer.Management.Smo.Server> 클래스의 인스턴스를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-304">Create an instance of the <xref:Microsoft.SqlServer.Management.Smo.Agent.Job> class, passing the <xref:Microsoft.SqlServer.Management.Smo.Server.JobServer%2A> property of the <xref:Microsoft.SqlServer.Management.Smo.Server> object from step 14 and the job name from step 12.</span></span>  
  
16. <span data-ttu-id="c4772-305"><xref:Microsoft.SqlServer.Management.Smo.Agent.Job.Start%2A> 메서드를 호출하여 분할된 스냅샷 작업을 시작합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-305">Call the <xref:Microsoft.SqlServer.Management.Smo.Agent.Job.Start%2A> method to start the partitioned snapshot job.</span></span>  
  
17. <span data-ttu-id="c4772-306">구독자별로 6단계에서 16단계까지 반복합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-306">Repeat steps 6-16 for each Subscriber.</span></span>  
  
#### <a name="to-create-a-publication-and-manually-create-snapshots-for-each-partition"></a><span data-ttu-id="c4772-307">게시를 만들고 각 파티션에 대한 스냅샷을 수동으로 만들려면</span><span class="sxs-lookup"><span data-stu-id="c4772-307">To create a publication and manually create snapshots for each partition</span></span>  
  
1.  <span data-ttu-id="c4772-308"><xref:Microsoft.SqlServer.Replication.MergePublication> 클래스의 인스턴스를 사용하여 병합 게시를 정의합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-308">Use an instance of the <xref:Microsoft.SqlServer.Replication.MergePublication> class to define a merge publication.</span></span> <span data-ttu-id="c4772-309">자세한 내용은 [게시 만들기](publish/create-a-publication.md)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="c4772-309">For more information, see [Create a Publication](publish/create-a-publication.md).</span></span>  
  
2.  <span data-ttu-id="c4772-310"><xref:Microsoft.SqlServer.Replication.MergeArticle> 속성을 사용하여 게시에 아티클을 추가합니다. 매개 변수가 있는 필터를 정의하는 하나 이상의 아티클에 대해 <xref:Microsoft.SqlServer.Replication.MergeArticle.FilterClause%2A> 속성을 지정하고 아티클 간 조인 필터를 정의하는 <xref:Microsoft.SqlServer.Replication.MergeJoinFilter> 개체를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-310">Use the <xref:Microsoft.SqlServer.Replication.MergeArticle> property to add articles to the publication Specify the <xref:Microsoft.SqlServer.Replication.MergeArticle.FilterClause%2A> property for at least one article that defines the parameterized filter, and create any <xref:Microsoft.SqlServer.Replication.MergeJoinFilter> objects that define join filters between articles.</span></span> <span data-ttu-id="c4772-311">자세한 내용은 [아티클을 정의](publish/define-an-article.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="c4772-311">For more information, see [Define an Article](publish/define-an-article.md).</span></span>  
  
3.  <span data-ttu-id="c4772-312">초기 스냅샷을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-312">Generate the initial snapshot.</span></span> <span data-ttu-id="c4772-313">자세한 내용은 [Create and Apply the Initial Snapshot](create-and-apply-the-initial-snapshot.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="c4772-313">For more information, see [Create and Apply the Initial Snapshot](create-and-apply-the-initial-snapshot.md).</span></span>  
  
4.  <span data-ttu-id="c4772-314"><xref:Microsoft.SqlServer.Replication.SnapshotGenerationAgent> 클래스의 인스턴스를 만들고 다음 필수 속성을 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-314">Create an instance of the <xref:Microsoft.SqlServer.Replication.SnapshotGenerationAgent> class, and set the following required properties:</span></span>  
  
    -   <span data-ttu-id="c4772-315"><xref:Microsoft.SqlServer.Replication.SnapshotGenerationAgent.Publisher%2A> - 게시자의 이름</span><span class="sxs-lookup"><span data-stu-id="c4772-315"><xref:Microsoft.SqlServer.Replication.SnapshotGenerationAgent.Publisher%2A> - name of the Publisher</span></span>  
  
    -   <span data-ttu-id="c4772-316"><xref:Microsoft.SqlServer.Replication.SnapshotGenerationAgent.PublisherDatabase%2A> - 게시 데이터베이스의 이름</span><span class="sxs-lookup"><span data-stu-id="c4772-316"><xref:Microsoft.SqlServer.Replication.SnapshotGenerationAgent.PublisherDatabase%2A> - name of the publication database</span></span>  
  
    -   <span data-ttu-id="c4772-317"><xref:Microsoft.SqlServer.Replication.SnapshotGenerationAgent.Publication%2A> - 게시의 이름</span><span class="sxs-lookup"><span data-stu-id="c4772-317"><xref:Microsoft.SqlServer.Replication.SnapshotGenerationAgent.Publication%2A> - name of the publication</span></span>  
  
    -   <span data-ttu-id="c4772-318"><xref:Microsoft.SqlServer.Replication.SnapshotGenerationAgent.Distributor%2A> - 배포자의 이름</span><span class="sxs-lookup"><span data-stu-id="c4772-318"><xref:Microsoft.SqlServer.Replication.SnapshotGenerationAgent.Distributor%2A> - name of the Distributor</span></span>  
  
    -   <span data-ttu-id="c4772-319"><xref:Microsoft.SqlServer.Replication.SnapshotGenerationAgent.PublisherSecurityMode%2A> - Windows 통합 인증을 사용하는 경우 <xref:Microsoft.SqlServer.Replication.SecurityMode.Integrated> 값 또는 SQL Server 인증을 사용하는 경우 <xref:Microsoft.SqlServer.Replication.SecurityMode.Standard> 값</span><span class="sxs-lookup"><span data-stu-id="c4772-319"><xref:Microsoft.SqlServer.Replication.SnapshotGenerationAgent.PublisherSecurityMode%2A> - a value of <xref:Microsoft.SqlServer.Replication.SecurityMode.Integrated> to used Windows Integrated Authentication or a value of <xref:Microsoft.SqlServer.Replication.SecurityMode.Standard> to use SQL Server Authentication.</span></span>  
  
    -   <span data-ttu-id="c4772-320"><xref:Microsoft.SqlServer.Replication.SnapshotGenerationAgent.DistributorSecurityMode%2A> - Windows 통합 인증을 사용하는 경우 <xref:Microsoft.SqlServer.Replication.SecurityMode.Integrated> 값 또는 SQL Server 인증을 사용하는 경우 <xref:Microsoft.SqlServer.Replication.SecurityMode.Standard> 값</span><span class="sxs-lookup"><span data-stu-id="c4772-320"><xref:Microsoft.SqlServer.Replication.SnapshotGenerationAgent.DistributorSecurityMode%2A> - a value of <xref:Microsoft.SqlServer.Replication.SecurityMode.Integrated> to used Windows Integrated Authentication or a value of <xref:Microsoft.SqlServer.Replication.SecurityMode.Standard> to use SQL Server Authentication.</span></span>  
  
5.  <span data-ttu-id="c4772-321"><xref:Microsoft.SqlServer.Replication.ReplicationType.Merge> 에 <xref:Microsoft.SqlServer.Replication.SnapshotGenerationAgent.ReplicationType%2A>값을 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-321">Set a value of <xref:Microsoft.SqlServer.Replication.ReplicationType.Merge> for <xref:Microsoft.SqlServer.Replication.SnapshotGenerationAgent.ReplicationType%2A>.</span></span>  
  
6.  <span data-ttu-id="c4772-322">다음 속성 중 하나 이상을 설정하여 분할 매개 변수를 정의합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-322">Set one or more of the following properties to define the partitioning parameters:</span></span>  
  
    -   <span data-ttu-id="c4772-323">구독자의 파티션이 [SUSER_SNAME&#40;Transact-SQL&#41;](/sql/t-sql/functions/suser-sname-transact-sql) 결과로 정의되는 경우 <xref:Microsoft.SqlServer.Replication.SnapshotGenerationAgent.DynamicFilterLogin%2A>을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-323">If the Subscriber's partition is defined by the result of [SUSER_SNAME &#40;Transact-SQL&#41;](/sql/t-sql/functions/suser-sname-transact-sql), use <xref:Microsoft.SqlServer.Replication.SnapshotGenerationAgent.DynamicFilterLogin%2A>.</span></span>  
  
    -   <span data-ttu-id="c4772-324">구독자의 파티션이 [HOST_NAME&#40;Transact-SQL&#41;](/sql/t-sql/functions/host-name-transact-sql) 결과 또는 이 함수의 오버로드 결과로 정의되는 경우 <xref:Microsoft.SqlServer.Replication.SnapshotGenerationAgent.DynamicFilterHostName%2A>을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-324">If the Subscriber's partition is defined by the result of [HOST_NAME &#40;Transact-SQL&#41;](/sql/t-sql/functions/host-name-transact-sql) or an overload of this function, use <xref:Microsoft.SqlServer.Replication.SnapshotGenerationAgent.DynamicFilterHostName%2A>.</span></span>  
  
7.  <span data-ttu-id="c4772-325"><xref:Microsoft.SqlServer.Replication.SnapshotGenerationAgent.GenerateSnapshot%2A> 메서드를 호출합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-325">Call the <xref:Microsoft.SqlServer.Replication.SnapshotGenerationAgent.GenerateSnapshot%2A> method.</span></span>  
  
8.  <span data-ttu-id="c4772-326">구독자별로 4단계에서 7단계까지 반복합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-326">Repeat steps 4-7 for each Subscriber.</span></span>  
  
###  <a name="examples-rmo"></a><a name="PShellExample"></a> <span data-ttu-id="c4772-327">예(RMO)</span><span class="sxs-lookup"><span data-stu-id="c4772-327">Examples (RMO)</span></span>  
 <span data-ttu-id="c4772-328">이 예제에서는 구독자에게 스냅샷 생성 요청을 허용하는 병합 게시를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-328">This example creates a merge publication that allows Subscribers to requested snapshot generation.</span></span>  
  
 [!code-csharp[HowTo#rmo_CreateMergePub](../../snippets/csharp/SQL15/replication/howto/cs/rmotestevelope.cs#rmo_createmergepub)]  
  
 [!code-vb[HowTo#rmo_vb_CreateMergePub](../../snippets/visualbasic/SQL15/replication/howto/vb/rmotestenv.vb#rmo_vb_createmergepub)]  
  
 <span data-ttu-id="c4772-329">이 예제에서는 매개 변수가 있는 행 필터를 사용하여 병합 게시에 대한 구독자 파티션 및 필터링된 스냅샷을 수동으로 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-329">This example manually creates the Subscriber partition and the filtered snapshot for a merge publication with parameterized row filters.</span></span>  
  
 [!code-csharp[HowTo#rmo_CreateMergePartition](../../snippets/csharp/SQL15/replication/howto/cs/rmotestevelope.cs#rmo_createmergepartition)]  
  
 [!code-vb[HowTo#rmo_vb_CreateMergePartition](../../snippets/visualbasic/SQL15/replication/howto/vb/rmotestenv.vb#rmo_vb_createmergepartition)]  
  
 <span data-ttu-id="c4772-330">이 예제에서는 매개 변수가 있는 행 필터를 사용하여 병합 게시에 구독자에 대한 필터링된 데이터 스냅샷을 만들기 위해 수동으로 스냅샷 에이전트를 시작합니다.</span><span class="sxs-lookup"><span data-stu-id="c4772-330">This example manually starts the Snapshot Agent to generate the filtered data snapshot for a Subscriber to a merge publication with parameterized row filters.</span></span>  
  
 [!code-csharp[HowTo#rmo_GenerateFilteredSnapshot](../../snippets/csharp/SQL15/replication/howto/cs/rmotestevelope.cs#rmo_generatefilteredsnapshot)]  
  
 [!code-vb[HowTo#rmo_vb_GenerateFilteredSnapshot](../../snippets/visualbasic/SQL15/replication/howto/vb/rmotestenv.vb#rmo_vb_generatefilteredsnapshot)]  
  
## <a name="see-also"></a><span data-ttu-id="c4772-331">참고 항목</span><span class="sxs-lookup"><span data-stu-id="c4772-331">See Also</span></span>  
 <span data-ttu-id="c4772-332">[매개 변수가 있는 행 필터](merge/parameterized-filters-parameterized-row-filters.md) </span><span class="sxs-lookup"><span data-stu-id="c4772-332">[Parameterized Row Filters](merge/parameterized-filters-parameterized-row-filters.md) </span></span>  
 <span data-ttu-id="c4772-333">[Replication System Stored Procedures Concepts](concepts/replication-system-stored-procedures-concepts.md) </span><span class="sxs-lookup"><span data-stu-id="c4772-333">[Replication System Stored Procedures Concepts](concepts/replication-system-stored-procedures-concepts.md) </span></span>  
 <span data-ttu-id="c4772-334">[매개 변수가 있는 필터를 사용 하는 병합 게시에 대 한 스냅숏](snapshots-for-merge-publications-with-parameterized-filters.md) </span><span class="sxs-lookup"><span data-stu-id="c4772-334">[Snapshots for Merge Publications with Parameterized Filters](snapshots-for-merge-publications-with-parameterized-filters.md) </span></span>  
 [<span data-ttu-id="c4772-335">복제 보안을 위한 최선의 구현 방법</span><span class="sxs-lookup"><span data-stu-id="c4772-335">Replication Security Best Practices</span></span>](security/replication-security-best-practices.md)  
  
  
