---
title: FTP를 통해 스냅샷 배달 | Microsoft 문서
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- snapshots [SQL Server replication], FTP snapshots
- FTP snapshots [SQL Server replication]
- snapshot replication [SQL Server], FTP
ms.assetid: 99872c4f-40ce-4405-8fd4-44052d3bd827
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 2e6700e6989a5a7e32202a0710bc663978a136cf
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87647612"
---
# <a name="deliver-a-snapshot-through-ftp"></a><span data-ttu-id="7eadb-102">FTP를 통해 스냅샷 배달</span><span class="sxs-lookup"><span data-stu-id="7eadb-102">Deliver a Snapshot Through FTP</span></span>
  <span data-ttu-id="7eadb-103">이 항목에서는 [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] 또는 [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)] 을 사용하여 [!INCLUDE[tsql](../../../includes/tsql-md.md)]에서 FTP를 통해 스냅샷을 배달하는 방법에 대해 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-103">This topic describes how to deliver a snapshot through FTP in [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] by using [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)] or [!INCLUDE[tsql](../../../includes/tsql-md.md)].</span></span>  
  
##  <a name="limitations-and-restrictions"></a><a name="Restrictions"></a> <span data-ttu-id="7eadb-104">제한 사항</span><span class="sxs-lookup"><span data-stu-id="7eadb-104">Limitations and Restrictions</span></span>  
  
-   <span data-ttu-id="7eadb-105">스냅샷 에이전트는 지정한 디렉터리에 대해 쓰기 권한이 있어야 하며 배포 에이전트 또는 병합 에이전트는 읽기 권한이 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-105">The Snapshot Agent must have write permissions for the directory you specify, and the Distribution Agent or Merge Agent must have read permissions.</span></span> <span data-ttu-id="7eadb-106">끌어오기 구독을 사용하는 경우 공유 디렉터리를 \\\ftpserver\home\snapshots과 같이 UNC(Universal Naming Convention) 경로로 지정해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-106">If pull subscriptions are used, you must specify a shared directory as a universal naming convention (UNC) path, such as \\\ftpserver\home\snapshots.</span></span> <span data-ttu-id="7eadb-107">자세한 내용은 [스냅샷 폴더 보안 설정](../security/secure-the-snapshot-folder.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="7eadb-107">For more information, see [Secure the Snapshot Folder](../security/secure-the-snapshot-folder.md).</span></span>  
  
###  <a name="prerequisites"></a><a name="Prerequisites"></a> <span data-ttu-id="7eadb-108">필수 조건</span><span class="sxs-lookup"><span data-stu-id="7eadb-108">Prerequisites</span></span>  
  
-   <span data-ttu-id="7eadb-109">FTP(파일 전송 프로토콜)를 사용하여 스냅샷 파일을 전송하려면 먼저 FTP 서버를 구성해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-109">To transfer snapshot files using File Transfer Protocol (FTP), you must first configure an FTP server.</span></span> <span data-ttu-id="7eadb-110">자세한 내용은 [!INCLUDE[msCoName](../../../includes/msconame-md.md)] 인터넷 정보 서비스(IIS) 설명서를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="7eadb-110">For more information, see the [!INCLUDE[msCoName](../../../includes/msconame-md.md)] Internet Information Services (IIS) documentation.</span></span>  
  
###  <a name="security"></a><a name="Security"></a> <span data-ttu-id="7eadb-111">보안</span><span class="sxs-lookup"><span data-stu-id="7eadb-111">Security</span></span>  
 <span data-ttu-id="7eadb-112">인터넷을 통해 FTP 스냅샷 배달을 사용하는 경우에는 보안 향상을 위해 VPN(가상 프라이빗 네트워크)을 구현하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-112">To help improve security, we recommend that you implement a virtual private network (VPN) when using FTP snapshot delivery over the Internet.</span></span> <span data-ttu-id="7eadb-113">자세한 내용은 [VPN을 사용하여 인터넷을 통해 데이터 게시](../publish-data-over-the-internet-using-vpn.md)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="7eadb-113">For more information, see [Publish Data over the Internet Using VPN](../publish-data-over-the-internet-using-vpn.md).</span></span>  
  
 <span data-ttu-id="7eadb-114">FTP 서버에 익명 로그인을 허용하지 않는 것이 가장 좋은 보안 방법입니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-114">As a security best practice, do not allow anonymous logins to the FTP server.</span></span> <span data-ttu-id="7eadb-115">스냅샷 에이전트는 지정한 디렉터리에 대해 쓰기 권한이 있어야 하며 배포 에이전트 또는 병합 에이전트는 읽기 권한이 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-115">The Snapshot Agent must have write permissions for the directory you specify, and the Distribution Agent or Merge Agent must have read permissions.</span></span> <span data-ttu-id="7eadb-116">끌어오기 구독을 사용하는 경우 공유 디렉터리를 \\\ftpserver\home\snapshots과 같이 UNC(Universal Naming Convention) 경로로 지정해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-116">If pull subscriptions are used, you must specify a shared directory as a universal naming convention (UNC) path, such as \\\ftpserver\home\snapshots.</span></span> <span data-ttu-id="7eadb-117">자세한 내용은 [스냅샷 폴더 보안 설정](../security/secure-the-snapshot-folder.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="7eadb-117">For more information, see [Secure the Snapshot Folder](../security/secure-the-snapshot-folder.md).</span></span>  
  
 <span data-ttu-id="7eadb-118">가능한 경우 런타임에 사용자에게 자격 증명을 입력하라는 메시지를 표시합니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-118">When possible, prompt users to enter their credentials at runtime.</span></span> <span data-ttu-id="7eadb-119">스크립트 파일에 자격 증명을 저장하는 경우에는 이 파일에 보안을 설정해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-119">If you store credentials in a script file, you must secure the file.</span></span>  
  
##  <a name="using-sql-server-management-studio"></a><a name="SSMSProcedure"></a> <span data-ttu-id="7eadb-120">SQL Server Management Studio 사용</span><span class="sxs-lookup"><span data-stu-id="7eadb-120">Using SQL Server Management Studio</span></span>  
 <span data-ttu-id="7eadb-121">FTP 서버를 구성한 후 **게시 속성 \<Publication>** 대화 상자에서 이 서버에 대한 디렉터리 및 보안 정보를 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-121">After the FTP server is configured, specify directory and security information for this server in the **Publication Properties \<Publication>** dialog box.</span></span> <span data-ttu-id="7eadb-122">이 대화 상자에 액세스하는 방법은 [게시 속성 보기 및 수정](view-and-modify-publication-properties.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="7eadb-122">For more information about accessing this dialog box, see [View and Modify Publication Properties](view-and-modify-publication-properties.md).</span></span>  
  
#### <a name="to-specify-ftp-information"></a><span data-ttu-id="7eadb-123">FTP 정보를 지정하려면</span><span class="sxs-lookup"><span data-stu-id="7eadb-123">To specify FTP information</span></span>  
  
1.  <span data-ttu-id="7eadb-124">**게시 속성 - \<Publication>** 대화 상자의 다음 두 페이지 중 하나에서 **구독자가 FTP(파일 전송 프로토콜)를 사용하여 스냅숏 파일을 다운로드하도록 허용**을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-124">In the **Publication Properties - \<Publication>** dialog box, select **Allow Subscribers to download snapshot files using FTP** from one of the following pages:</span></span>   
    -   <span data-ttu-id="7eadb-125">**FTP 스냅샷** 페이지 - [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] 이전 버전을 실행하는 구독자에 대한 병합 게시와 스냅샷 및 트랜잭션 게시의 경우</span><span class="sxs-lookup"><span data-stu-id="7eadb-125">The **FTP Snapshot** page, for snapshot and transactional publications, and merge publications for Publishers running versions prior to [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)].</span></span>    
    -   <span data-ttu-id="7eadb-126">**FTP 스냅샷 및 인터넷** 페이지 - [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] 이후 버전을 실행하는 게시자의 병합 게시의 경우</span><span class="sxs-lookup"><span data-stu-id="7eadb-126">The **FTP Snapshot and Internet** page, for merge publications from Publishers running [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] or later.</span></span>    
2.  <span data-ttu-id="7eadb-127">**FTP 서버 이름**, **포트 번호**, **FTP 루트 폴더에서의 경로**, **로그인**및 **암호**에 대한 값을 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-127">Specify values for **FTP server name**, **Port number**, **Path from the FTP root folder**, **Login**, and **Password**.</span></span>    
     <span data-ttu-id="7eadb-128">예를 들어 FTP 서버 루트가 \\\ftpserver\home이고 스냅샷을 \\\ftpserver\home\snapshots에 저장하려면 **FTP 루트 폴더에서의 경로** 속성에 대해 \snapshots\ftp를 지정합니다. 복제는 스냅샷 파일을 만들 때 스냅샷 폴더 경로에 'ftp'를 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-128">For example, if the FTP server root is \\\ftpserver\home and you want snapshots to be stored at \\\ftpserver\home\snapshots, specify \snapshots\ftp for the property **Path from the FTP root folder** (replication appends 'ftp' to the snapshot folder path when it creates snapshot files).</span></span>    
3.  <span data-ttu-id="7eadb-129">스냅샷 에이전트가 스냅샷 파일을 2단계에서 지정한 디렉터리에 쓰도록 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-129">Specify that the Snapshot Agent should write the snapshot files to the directory specified in step 2.</span></span> <span data-ttu-id="7eadb-130">예를 들어 스냅샷 에이전트가 스냅샷 파일을 \\\ftpserver\home\snapshots\ftp에 쓰도록 하려면 다음 두 위치 중 하나에 \\\ftpserver\home\snapshots 경로를 지정해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-130">For example, to have the Snapshot Agent write the snapshot files to \\\ftpserver\home\snapshots\ftp, you must specify the path \\\ftpserver\home\snapshots in one of two places:</span></span>    
    -   <span data-ttu-id="7eadb-131">이 게시와 연결된 배포자의 기본 스냅샷 위치</span><span class="sxs-lookup"><span data-stu-id="7eadb-131">The default snapshot location for the Distributor associated with this publication.</span></span>    
         <span data-ttu-id="7eadb-132">기본 스냅숏 위치를 지정 하는 방법에 대 한 자세한 내용은 [기본 스냅숏 위치 지정](../snapshot-options.md#snapshot-folder-locations)을 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="7eadb-132">For more information about specifying the default snapshot location, see [Specify the Default Snapshot Location](../snapshot-options.md#snapshot-folder-locations).</span></span>    
    -   <span data-ttu-id="7eadb-133">이 게시의 대체 스냅샷 폴더 위치.</span><span class="sxs-lookup"><span data-stu-id="7eadb-133">An alternate snapshot folder location for this publication.</span></span> <span data-ttu-id="7eadb-134">대체 위치는 스냅샷이 압축된 경우에 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-134">An alternate location is required if the snapshot is compressed.</span></span>    
         <span data-ttu-id="7eadb-135">\*\*게시 속성- \<Publication> \*\* 대화 상자의 스냅숏 페이지에 있는 **다음 폴더에 파일 저장** 텍스트 상자에 경로를 입력 합니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-135">Enter the path in the **Put files in the following folder** textbox on the Snapshot page of the **Publication Properties - \<Publication>** dialog box.</span></span>   
4.  [!INCLUDE[clickOK](../../../includes/clickok-md.md)]  
  
##  <a name="using-transact-sql"></a><a name="TsqlProcedure"></a> <span data-ttu-id="7eadb-136">Transact-SQL 사용</span><span class="sxs-lookup"><span data-stu-id="7eadb-136">Using Transact-SQL</span></span>  
 <span data-ttu-id="7eadb-137">FTP 서버에서 스냅샷 파일을 사용할 수 있게 해주는 옵션을 설정할 수 있으며, 이러한 FTP 설정은 복제 저장 프로시저를 사용하여 프로그래밍 방식으로 수정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-137">The option to make snapshot files available on an FTP server can be set and these FTP settings can be modified programmatically using replication stored procedures.</span></span> <span data-ttu-id="7eadb-138">사용되는 절차는 게시 유형에 따라 달라집니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-138">The procedure used depends on the type of publication.</span></span> <span data-ttu-id="7eadb-139">FTP 스냅샷 배달은 끌어오기 구독에만 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-139">FTP snapshot delivery is only used with pull subscriptions.</span></span>  
  
#### <a name="to-enable-ftp-snapshot-delivery-for-a-snapshot-or-transactional-publication"></a><span data-ttu-id="7eadb-140">스냅샷 또는 트랜잭션 게시에 대한 FTP 스냅샷 배달을 설정하려면</span><span class="sxs-lookup"><span data-stu-id="7eadb-140">To enable FTP snapshot delivery for a snapshot or transactional publication</span></span>  
  
1.  <span data-ttu-id="7eadb-141">게시 데이터베이스의 게시자에서 [sp_addpublication](/sql/relational-databases/system-stored-procedures/sp-addpublication-transact-sql)을 실행합니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-141">At the Publisher on the publication database, execute [sp_addpublication](/sql/relational-databases/system-stored-procedures/sp-addpublication-transact-sql).</span></span> <span data-ttu-id="7eadb-142">을 지정 하 **@publication** `true` 고에 값을 **@enabled_for_internet** , 다음 매개 변수에 적절 한 값을 지정 합니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-142">Specify **@publication**, a value of `true` for **@enabled_for_internet**, and appropriate values for the following parameters:</span></span>    
    -   <span data-ttu-id="7eadb-143">**@ftp_address**-스냅숏을 배달 하는 데 사용 되는 FTP 서버의 주소입니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-143">**@ftp_address** - the address of the FTP server used to deliver the snapshot.</span></span>    
    -   <span data-ttu-id="7eadb-144">(선택 사항) **@ftp_port** -FTP 서버에서 사용 하는 포트입니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-144">(Optional) **@ftp_port** - the port used by the FTP server.</span></span>    
    -   <span data-ttu-id="7eadb-145">(선택 사항) **@ftp_subdirectory** -FTP 로그인에 할당 된 기본 FTP 디렉터리의 하위 디렉터리입니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-145">(Optional) **@ftp_subdirectory** - the subdirectory of the default FTP directory assigned to an FTP login.</span></span> <span data-ttu-id="7eadb-146">예를 들어 FTP 서버 루트가 \\ \ftpserver\home이 고 스냅숏을 \ftpserver\home\snapshots에 저장 하려는 경우 \\ 에는 **\snapshots\ftp** 를 지정 **@ftp_subdirectory** 합니다. 복제는 스냅숏 파일을 만들 때 스냅숏 폴더 경로에 ' FTP '를 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-146">For example, if the FTP server root is \\\ftpserver\home and you want snapshots to be stored at \\\ftpserver\home\snapshots, specify **\snapshots\ftp** for **@ftp_subdirectory** (replication appends 'ftp' to the snapshot folder path when it creates snapshot files).</span></span>    
    -   <span data-ttu-id="7eadb-147">(선택 사항) **@ftp_login** -FTP 서버에 연결할 때 사용 되는 로그인 계정입니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-147">(Optional) **@ftp_login** - a login account used when connecting to the FTP server.</span></span>    
    -   <span data-ttu-id="7eadb-148">(선택 사항) **@ftp_password** -FTP 로그인에 대 한 암호입니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-148">(Optional) **@ftp_password** - the password for the FTP login.</span></span>  
  
     <span data-ttu-id="7eadb-149">이렇게 하면 FTP를 사용하는 게시가 만들어집니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-149">This creates a publication that uses FTP.</span></span> <span data-ttu-id="7eadb-150">자세한 내용은 [게시 만들기](create-a-publication.md)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="7eadb-150">For more information, see [Create a Publication](create-a-publication.md).</span></span>  
  
#### <a name="to-enable-ftp-snapshot-delivery-for-a-merge-publication"></a><span data-ttu-id="7eadb-151">병합 게시에 대한 FTP 스냅샷 배달을 설정하려면</span><span class="sxs-lookup"><span data-stu-id="7eadb-151">To enable FTP snapshot delivery for a merge publication</span></span>  
  
1.  <span data-ttu-id="7eadb-152">게시 데이터베이스의 게시자에서 [sp_addmergepublication](/sql/relational-databases/system-stored-procedures/sp-addmergepublication-transact-sql)을 실행합니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-152">At the Publisher on the publication database, execute [sp_addmergepublication](/sql/relational-databases/system-stored-procedures/sp-addmergepublication-transact-sql).</span></span> <span data-ttu-id="7eadb-153">을 지정 하 **@publication** 고에 값을, `true` **@enabled_for_internet** 다음 매개 변수에 적절 한 값을 지정 합니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-153">Specify **@publication**, a value of `true` for **@enabled_for_internet** and appropriate values for the following parameters:</span></span>  
  
    -   <span data-ttu-id="7eadb-154">**@ftp_address**-스냅숏을 배달 하는 데 사용 되는 FTP 서버의 주소입니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-154">**@ftp_address** - the address of the FTP server used to deliver the snapshot.</span></span>    
    -   <span data-ttu-id="7eadb-155">(선택 사항) **@ftp_port** -FTP 서버에서 사용 하는 포트입니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-155">(Optional) **@ftp_port** - the port used by the FTP server.</span></span>    
    -   <span data-ttu-id="7eadb-156">(선택 사항) **@ftp_subdirectory** -FTP 로그인에 할당 된 기본 FTP 디렉터리의 하위 디렉터리입니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-156">(Optional) **@ftp_subdirectory** - the subdirectory of the default FTP directory assigned to an FTP login.</span></span> <span data-ttu-id="7eadb-157">예를 들어 FTP 서버 루트가 \\ \ftpserver\home이 고 스냅숏을 \ftpserver\home\snapshots에 저장 하려는 경우 \\ 에는 **\snapshots\ftp** 를 지정 **@ftp_subdirectory** 합니다. 복제는 스냅숏 파일을 만들 때 스냅숏 폴더 경로에 ' FTP '를 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-157">For example, if the FTP server root is \\\ftpserver\home and you want snapshots to be stored at \\\ftpserver\home\snapshots, specify **\snapshots\ftp** for **@ftp_subdirectory** (replication appends 'ftp' to the snapshot folder path when it creates snapshot files).</span></span>    
    -   <span data-ttu-id="7eadb-158">(선택 사항) **@ftp_login** -FTP 서버에 연결할 때 사용 되는 로그인 계정입니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-158">(Optional) **@ftp_login** - a login account used when connecting to the FTP server.</span></span>    
    -   <span data-ttu-id="7eadb-159">(선택 사항) **@ftp_password** -FTP 로그인에 대 한 암호입니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-159">(Optional) **@ftp_password** - the password for the FTP login.</span></span>  
  
     <span data-ttu-id="7eadb-160">이렇게 하면 FTP를 사용하는 게시가 만들어집니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-160">This creates a publication that uses FTP.</span></span> <span data-ttu-id="7eadb-161">자세한 내용은 [게시 만들기](create-a-publication.md)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="7eadb-161">For more information, see [Create a Publication](create-a-publication.md).</span></span>  
  
#### <a name="to-create-a-pull-subscription-to-a-snapshot-or-transactional-publication-that-uses-ftp-snapshot-delivery"></a><span data-ttu-id="7eadb-162">FTP 스냅샷 배달을 사용하는 스냅샷 또는 트랜잭션 게시에 대한 끌어오기 구독을 만들려면</span><span class="sxs-lookup"><span data-stu-id="7eadb-162">To create a pull subscription to a snapshot or transactional publication that uses FTP snapshot delivery</span></span>  
  
1.  <span data-ttu-id="7eadb-163">구독 데이터베이스의 구독자에서 [sp_addpullsubscription](/sql/relational-databases/system-stored-procedures/sp-addpullsubscription-transact-sql)을 실행합니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-163">At the Subscriber on the subscription database, execute [sp_addpullsubscription](/sql/relational-databases/system-stored-procedures/sp-addpullsubscription-transact-sql).</span></span> <span data-ttu-id="7eadb-164">**@publisher**및를 지정 **@publication** 합니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-164">Specify **@publisher** and **@publication**.</span></span>  
  
    -   <span data-ttu-id="7eadb-165">구독 데이터베이스의 구독자에서 [sp_addpullsubscription_agent](/sql/relational-databases/system-stored-procedures/sp-addpullsubscription-agent-transact-sql)를 실행합니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-165">At the Subscriber on the subscription database, execute [sp_addpullsubscription_agent](/sql/relational-databases/system-stored-procedures/sp-addpullsubscription-agent-transact-sql).</span></span> <span data-ttu-id="7eadb-166">**@publisher**, **@publisher_db** ,을 지정 하 고, **@publication** 및에 [!INCLUDE[msCoName](../../../includes/msconame-md.md)] 대해 구독자에서 배포 에이전트 실행 되는 Windows 자격 증명을 지정 **@job_login** **@job_password** 하 고,에 값을 지정 `true` **@use_ftp** 합니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-166">Specify **@publisher**, **@publisher_db**, **@publication**, the [!INCLUDE[msCoName](../../../includes/msconame-md.md)] Windows credentials under which the Distribution Agent at the Subscriber runs for **@job_login** and **@job_password**, and a value of `true` for **@use_ftp**.</span></span>  
  
2.  <span data-ttu-id="7eadb-167">게시 데이터베이스의 게시자에서 [sp_addsubscription](/sql/relational-databases/system-stored-procedures/sp-addsubscription-transact-sql) 을 실행하여 끌어오기 구독을 등록합니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-167">At the Publisher on the publication database, execute [sp_addsubscription](/sql/relational-databases/system-stored-procedures/sp-addsubscription-transact-sql) to register the pull subscription.</span></span> <span data-ttu-id="7eadb-168">자세한 내용은 [끌어오기 구독 만들기](../create-a-pull-subscription.md)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="7eadb-168">For more information, see [Create a Pull Subscription](../create-a-pull-subscription.md).</span></span>  
  
#### <a name="to-create-a-pull-subscription-to-a-merge-publication-that-uses-ftp-snapshot-delivery"></a><span data-ttu-id="7eadb-169">FTP 스냅샷 배달을 사용하는 병합 게시에 대한 끌어오기 구독을 만들려면</span><span class="sxs-lookup"><span data-stu-id="7eadb-169">To create a pull subscription to a merge publication that uses FTP snapshot delivery</span></span>  
  
1.  <span data-ttu-id="7eadb-170">구독 데이터베이스의 구독자에서 [sp_addmergepullsubscription](/sql/relational-databases/system-stored-procedures/sp-addmergepullsubscription-transact-sql)을 실행합니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-170">At the Subscriber on the subscription database, execute [sp_addmergepullsubscription](/sql/relational-databases/system-stored-procedures/sp-addmergepullsubscription-transact-sql).</span></span> <span data-ttu-id="7eadb-171">**@publisher**및를 지정 **@publication** 합니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-171">Specify **@publisher** and **@publication**.</span></span>   
2.  <span data-ttu-id="7eadb-172">구독 데이터베이스의 구독자에서 [sp_addmergepullsubscription_agent](/sql/relational-databases/system-stored-procedures/sp-addmergepullsubscription-agent-transact-sql)를 실행합니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-172">At the Subscriber on the subscription database, execute [sp_addmergepullsubscription_agent](/sql/relational-databases/system-stored-procedures/sp-addmergepullsubscription-agent-transact-sql).</span></span> <span data-ttu-id="7eadb-173">**@publisher**, **@publisher_db** ,을 지정 하 고, 및에 **@publication** 대해 구독자에서 배포 에이전트 실행 되는 Windows 자격 증명을 지정 **@job_login** **@job_password** 하 고,에 값을 지정 `true` **@use_ftp** 합니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-173">Specify **@publisher**, **@publisher_db**, **@publication**, the Windows credentials under which the Distribution Agent at the Subscriber runs for **@job_login** and **@job_password**, and a value of `true` for **@use_ftp**.</span></span>    
3.  <span data-ttu-id="7eadb-174">게시 데이터베이스의 게시자에서 [sp_addmergesubscription](/sql/relational-databases/system-stored-procedures/sp-addmergesubscription-transact-sql) 을 실행하여 끌어오기 구독을 등록합니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-174">At the Publisher on the publication database, execute [sp_addmergesubscription](/sql/relational-databases/system-stored-procedures/sp-addmergesubscription-transact-sql) to register the pull subscription.</span></span> <span data-ttu-id="7eadb-175">자세한 내용은 [끌어오기 구독 만들기](../create-a-pull-subscription.md)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="7eadb-175">For more information, see [Create a Pull Subscription](../create-a-pull-subscription.md).</span></span>  
  
#### <a name="to-change-one-or-more-ftp-snapshot-delivery-settings-for-a-snapshot-or-transactional-publication"></a><span data-ttu-id="7eadb-176">스냅샷 또는 트랜잭션 게시에 대한 하나 이상의 FTP 스냅샷 배달 설정을 변경하려면</span><span class="sxs-lookup"><span data-stu-id="7eadb-176">To change one or more FTP snapshot delivery settings for a snapshot or transactional publication</span></span>  
  
1.  <span data-ttu-id="7eadb-177">게시 데이터베이스의 게시자에서 [sp_changepublication](/sql/relational-databases/system-stored-procedures/sp-changepublication-transact-sql)을 실행합니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-177">At the Publisher on the publication database, execute [sp_changepublication](/sql/relational-databases/system-stored-procedures/sp-changepublication-transact-sql).</span></span> <span data-ttu-id="7eadb-178">에 다음 값 중 하나를 지정 **@property** 하 고에 대해이 설정의 새 값을 지정 합니다 **@value** .</span><span class="sxs-lookup"><span data-stu-id="7eadb-178">Specify one of the following values for **@property** and a new value of this setting for **@value**:</span></span>    
    -   <span data-ttu-id="7eadb-179">`ftp_address` - 스냅샷을 배달하는 데 사용되는 FTP 서버의 주소입니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-179">`ftp_address` - the address of the FTP server used to deliver the snapshot.</span></span>    
    -   <span data-ttu-id="7eadb-180">`ftp_port` - FTP 서버에서 사용되는 포트입니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-180">`ftp_port` - the port used by the FTP server.</span></span>    
    -   <span data-ttu-id="7eadb-181">`ftp_subdirectory` - FTP 스냅샷에 사용되는 기본 FTP 디렉터리의 하위 디렉터리입니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-181">`ftp_subdirectory` - the subdirectory of the default FTP directory used for the FTP snapshot.</span></span>    
    -   <span data-ttu-id="7eadb-182">`ftp_login` - FTP 서버에 연결하는 데 사용되는 로그인입니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-182">`ftp_login` - a login used to connect to the FTP server.</span></span>    
    -   <span data-ttu-id="7eadb-183">`ftp_password` - FTP 로그인에 대한 암호입니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-183">`ftp_password` - the password for the FTP login.</span></span>  
  
2.  <span data-ttu-id="7eadb-184">(옵션) 변경되는 각 FTP 설정에 대해 1단계를 반복합니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-184">(Optional) Repeat step 1 for each FTP setting being changed.</span></span>    
3.  <span data-ttu-id="7eadb-185">(옵션) FTP 스냅샷 배달을 해제하려면 게시 데이터베이스의 게시자에서 [sp_changepublication](/sql/relational-databases/system-stored-procedures/sp-changepublication-transact-sql) 을 실행합니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-185">(Optional) To disable FTP snapshot delivery, execute [sp_changepublication](/sql/relational-databases/system-stored-procedures/sp-changepublication-transact-sql) at the Publisher on the publication database.</span></span> <span data-ttu-id="7eadb-186">에 값을 지정 `enabled_for_internet` **@property** 하 고에 값을 `false` 지정 **@value** 합니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-186">Specify a value of `enabled_for_internet` for **@property** and a value of `false` for **@value**.</span></span>  
  
#### <a name="to-change-ftp-snapshot-delivery-settings-for-a-merge-publication"></a><span data-ttu-id="7eadb-187">병합 게시에 대한 FTP 스냅샷 배달 설정을 변경하려면</span><span class="sxs-lookup"><span data-stu-id="7eadb-187">To change FTP snapshot delivery settings for a merge publication</span></span>  
  
1.  <span data-ttu-id="7eadb-188">게시 데이터베이스의 게시자에서 [sp_changemergepublication](/sql/relational-databases/system-stored-procedures/sp-changemergepublication-transact-sql)을 실행합니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-188">At the Publisher on the publication database, execute [sp_changemergepublication](/sql/relational-databases/system-stored-procedures/sp-changemergepublication-transact-sql).</span></span> <span data-ttu-id="7eadb-189">에 다음 값 중 하나를 지정 **@property** 하 고에 대해이 설정의 새 값을 지정 합니다 **@value** .</span><span class="sxs-lookup"><span data-stu-id="7eadb-189">Specify one of the following values for **@property** and a new value of this setting for **@value**:</span></span>  
  
    -   <span data-ttu-id="7eadb-190">`ftp_address` - 스냅샷을 배달하는 데 사용되는 FTP 서버의 주소입니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-190">`ftp_address` - the address of the FTP server used to deliver the snapshot.</span></span>    
    -   <span data-ttu-id="7eadb-191">`ftp_port` - FTP 서버에서 사용되는 포트입니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-191">`ftp_port` - the port used by the FTP server.</span></span>    
    -   <span data-ttu-id="7eadb-192">`ftp_subdirectory` - FTP 스냅샷에 사용되는 기본 FTP 디렉터리의 하위 디렉터리입니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-192">`ftp_subdirectory` - the subdirectory of the default FTP directory used for the FTP snapshot.</span></span>   
    -   <span data-ttu-id="7eadb-193">`ftp_login` - FTP 서버에 연결하는 데 사용되는 로그인입니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-193">`ftp_login` - a login used to connect to the FTP server.</span></span>    
    -   <span data-ttu-id="7eadb-194">`ftp_password` - FTP 로그인에 대한 암호입니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-194">`ftp_password` - the password for the FTP login.</span></span>    
2.  <span data-ttu-id="7eadb-195">(옵션) 변경되는 각 FTP 설정에 대해 1단계를 반복합니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-195">(Optional) Repeat step 1 for each FTP setting being changed.</span></span>    
3.  <span data-ttu-id="7eadb-196">(옵션) FTP 스냅샷 배달을 해제하려면 게시 데이터베이스의 게시자에서 [sp_changemergepublication](/sql/relational-databases/system-stored-procedures/sp-changemergepublication-transact-sql) 을 실행합니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-196">(Optional) To disable FTP snapshot delivery, execute [sp_changemergepublication](/sql/relational-databases/system-stored-procedures/sp-changemergepublication-transact-sql) at the Publisher on the publication database.</span></span> <span data-ttu-id="7eadb-197">에 값을 지정 `enabled_for_internet` **@property** 하 고에 값을 `false` 지정 **@value** 합니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-197">Specify a value of `enabled_for_internet` for **@property** and a value of `false` for **@value**.</span></span>  
  
###  <a name="examples-transact-sql"></a><a name="TsqlExample"></a> <span data-ttu-id="7eadb-198">예(Transact-SQL)</span><span class="sxs-lookup"><span data-stu-id="7eadb-198">Examples (Transact-SQL)</span></span>  
 <span data-ttu-id="7eadb-199">다음 예에서는 구독자가 FTP를 사용하여 스냅샷 데이터에 액세스할 수 있는 병합 게시를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-199">The following example creates a merge publication that allows Subscribers to access the snapshot data using FTP.</span></span> <span data-ttu-id="7eadb-200">구독자는 FTP 공유에 액세스할 때 보안 VPN 연결을 사용해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-200">The Subscriber should use a secure VPN connection when accessing the FTP share.</span></span> <span data-ttu-id="7eadb-201">**sqlcmd** 스크립팅 변수는 로그인 및 암호 값을 제공하는 데 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-201">**sqlcmd** scripting variables are used to supply login and password values.</span></span> <span data-ttu-id="7eadb-202">자세한 내용은 [스크립팅 변수와 함께 sqlcmd 사용](../../scripting/sqlcmd-use-with-scripting-variables.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="7eadb-202">For more information, see [Use sqlcmd with Scripting Variables](../../scripting/sqlcmd-use-with-scripting-variables.md).</span></span>  
  
 [!code-sql[HowTo#sp_createmergepub_ftp](../../../snippets/tsql/SQL15/replication/howto/tsql/createmergepubftp.sql#sp_createmergepub_ftp)]  
  
 <span data-ttu-id="7eadb-203">다음 예에서는 구독자가 FTP를 사용하여 스냅샷을 얻는 병합 게시에 대한 구독을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-203">The following example creates a subscription to a merge publication, where the Subscriber obtains the snapshot using FTP.</span></span> <span data-ttu-id="7eadb-204">구독자는 FTP 공유에 액세스할 때 보안 VPN 연결을 사용해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-204">The Subscriber should use a secure VPN connection when accessing the FTP share.</span></span> <span data-ttu-id="7eadb-205">**sqlcmd** 스크립팅 변수는 로그인 및 암호 값을 제공하는 데 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="7eadb-205">**sqlcmd** scripting variables are used to supply login and password values.</span></span> <span data-ttu-id="7eadb-206">자세한 내용은 [스크립팅 변수와 함께 sqlcmd 사용](../../scripting/sqlcmd-use-with-scripting-variables.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="7eadb-206">For more information, see [Use sqlcmd with Scripting Variables](../../scripting/sqlcmd-use-with-scripting-variables.md).</span></span>  
  
 [!code-sql[HowTo#sp_createmergepullsub_ftp](../../../snippets/tsql/SQL15/replication/howto/tsql/createmergepullsubftp.sql#sp_createmergepullsub_ftp)]  
  
 [!code-sql[HowTo#sp_createmergepullsubagent_ftp](../../../snippets/tsql/SQL15/replication/howto/tsql/createmergepullsubftp.sql#sp_createmergepullsubagent_ftp)]  
  
## <a name="see-also"></a><span data-ttu-id="7eadb-207">참고 항목</span><span class="sxs-lookup"><span data-stu-id="7eadb-207">See Also</span></span>  
 <span data-ttu-id="7eadb-208">[Replication System Stored Procedures Concepts](../concepts/replication-system-stored-procedures-concepts.md) </span><span class="sxs-lookup"><span data-stu-id="7eadb-208">[Replication System Stored Procedures Concepts](../concepts/replication-system-stored-procedures-concepts.md) </span></span>  
 <span data-ttu-id="7eadb-209">[FTP를 통해 스냅숏 전송](../transfer-snapshots-through-ftp.md) </span><span class="sxs-lookup"><span data-stu-id="7eadb-209">[Transfer Snapshots Through FTP](../transfer-snapshots-through-ftp.md) </span></span>  
 <span data-ttu-id="7eadb-210">[게시 및 아티클 속성 변경](change-publication-and-article-properties.md) </span><span class="sxs-lookup"><span data-stu-id="7eadb-210">[Change Publication and Article Properties](change-publication-and-article-properties.md) </span></span>  
 [<span data-ttu-id="7eadb-211">스냅샷으로 구독 초기화</span><span class="sxs-lookup"><span data-stu-id="7eadb-211">Initialize a Subscription with a Snapshot</span></span>](../initialize-a-subscription-with-a-snapshot.md)  
  
  
