---
title: 게시 데이터베이스의 스키마 변경 | Microsoft 문서
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- replication [SQL Server], schema changes
- snapshot replication [SQL Server], replicating schema changes
- merge replication [SQL Server replication], replicating schema changes
- transactional replication, replicating schema changes
- schemas [SQL Server replication], replicating changes
- publishing [SQL Server replication], schema changes
ms.assetid: 926c88d7-a844-402f-bcb9-db49e5013b69
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: e26d3e89fcba41d474ca56637f9e465f17127348
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87646337"
---
# <a name="make-schema-changes-on-publication-databases"></a><span data-ttu-id="8d463-102">게시 데이터베이스의 스키마 변경</span><span class="sxs-lookup"><span data-stu-id="8d463-102">Make Schema Changes on Publication Databases</span></span>
  <span data-ttu-id="8d463-103">복제는 게시된 개체에 대한 다양한 스키마 변경을 지원합니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-103">Replication supports a wide range of schema changes to published objects.</span></span> <span data-ttu-id="8d463-104">[!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 게시자에 게시된 개체에 대해 다음 스키마 변경을 수행하면 기본적으로 모든 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 구독자에 변경 내용이 전파됩니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-104">When you make any of the following schema changes on the appropriate published object at a [!INCLUDE[msCoName](../../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Publisher, that change is propagated by default to all [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Subscribers:</span></span>  
  
-   <span data-ttu-id="8d463-105">ALTER TABLE</span><span class="sxs-lookup"><span data-stu-id="8d463-105">ALTER TABLE</span></span>  
  
-   <span data-ttu-id="8d463-106">스키마 변경 복제가 활성화되어 있고 토폴로지에 [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] 또는 [!INCLUDE[ssEWnoversion](../../../includes/ssewnoversion-md.md)] Subscribers.ALTER VIEW가 포함된 경우 ALTER TABLE SET LOCK ESCALATION을 사용해서는 안 됩니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-106">ALTER TABLE SET LOCK ESCALATION should not be used if schema change replication is enabled and a topology includes [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] or [!INCLUDE[ssEWnoversion](../../../includes/ssewnoversion-md.md)] Subscribers.ALTER VIEW</span></span>  
  
-   <span data-ttu-id="8d463-107">ALTER PROCEDURE</span><span class="sxs-lookup"><span data-stu-id="8d463-107">ALTER PROCEDURE</span></span>  
  
-   <span data-ttu-id="8d463-108">ALTER FUNCTION</span><span class="sxs-lookup"><span data-stu-id="8d463-108">ALTER FUNCTION</span></span>  
  
-   <span data-ttu-id="8d463-109">ALTER TRIGGER</span><span class="sxs-lookup"><span data-stu-id="8d463-109">ALTER TRIGGER</span></span>  
  
     <span data-ttu-id="8d463-110">DDL(데이터 정의 언어) 트리거는 복제할 수 없기 때문에 DML(데이터 조작 언어) 트리거에 대해서만 ALTER TRIGGER를 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-110">ALTER TRIGGER can be used only for data manipulation language [DML] triggers because data definition language [DDL] triggers cannot be replicated.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="8d463-111">테이블에 대한 스키마 변경은 [!INCLUDE[tsql](../../../includes/tsql-md.md)] 또는 SMO( [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Management Objects)를 사용하여 수행해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-111">Schema changes to tables must be made by using [!INCLUDE[tsql](../../../includes/tsql-md.md)] or [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Management Objects (SMO).</span></span> <span data-ttu-id="8d463-112">[!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)]에서 스키마를 변경하면 [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)] 에서는 해당 테이블을 삭제하고 다시 만들려고 합니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-112">When schema changes are made in [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)], [!INCLUDE[ssManStudio](../../../includes/ssmanstudio-md.md)] attempts to drop and re-create the table.</span></span> <span data-ttu-id="8d463-113">그러나 게시된 개체는 삭제할 수 없으므로 스키마 변경에 실패합니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-113">You cannot drop published objects, therefore the schema change fails.</span></span>  
  
 <span data-ttu-id="8d463-114">트랜잭션 복제 및 병합 복제의 경우 배포 에이전트 또는 병합 에이전트가 실행될 때 스키마 변경이 증분 방식으로 전파됩니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-114">For transactional replication and merge replication, schema changes are propagated incrementally when the Distribution Agent or Merge Agent runs.</span></span> <span data-ttu-id="8d463-115">스냅샷 복제의 경우 새 스냅샷을 구독자에서 적용할 때 스키마 변경이 전파됩니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-115">For snapshot replication, schema changes are propagated when a new snapshot is applied at the Subscriber.</span></span> <span data-ttu-id="8d463-116">스냅샷 복제에서 스키마의 새 복사본은 동기화가 발생할 때마다 구독자로 전달됩니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-116">In snapshot replication, a new copy of the schema is sent to the Subscriber each time synchronization occurs.</span></span> <span data-ttu-id="8d463-117">그러므로 이전에 게시된 개체에 대한 모든 스키마 변경(위에서 나열한 것 이외의 스키마 변경도 포함)이 동기화를 수행할 때마다 자동으로 전파됩니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-117">Therefore, all schema changes (not just those listed above) to previously published objects are automatically propagated with each synchronization.</span></span>  
  
 <span data-ttu-id="8d463-118">게시에서 아티클을 추가 및 제거하는 방법에 대한 자세한 내용은 [기존 게시에 대한 아티클 추가 및 삭제](add-articles-to-and-drop-articles-from-existing-publications.md)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="8d463-118">For information about adding and removing articles from publications, see [Add Articles to and Drop Articles from Existing Publications](add-articles-to-and-drop-articles-from-existing-publications.md).</span></span>  
  
 <span data-ttu-id="8d463-119">**스키마 변경을 복제하려면**</span><span class="sxs-lookup"><span data-stu-id="8d463-119">**To replicate schema changes**</span></span>  
  
 <span data-ttu-id="8d463-120">위에 나열된 스키마 변경은 기본적으로 복제됩니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-120">The schema changes listed above are replicated by default.</span></span> <span data-ttu-id="8d463-121">스키마 변경 복제를 해제하는 방법은 [Replicate Schema Changes](replicate-schema-changes.md)를 참조하십시오.</span><span class="sxs-lookup"><span data-stu-id="8d463-121">For information about disabling the replication of schema changes, see [Replicate Schema Changes](replicate-schema-changes.md).</span></span>  
  
## <a name="considerations-for-schema-changes"></a><span data-ttu-id="8d463-122">스키마 변경에 대한 고려 사항</span><span class="sxs-lookup"><span data-stu-id="8d463-122">Considerations for Schema Changes</span></span>  
 <span data-ttu-id="8d463-123">스키마 변경 복제 시 다음 사항을 고려하십시오.</span><span class="sxs-lookup"><span data-stu-id="8d463-123">Keep the following considerations in mind when replicating schema changes.</span></span>  
  
### <a name="general-considerations"></a><span data-ttu-id="8d463-124">일반적인 고려 사항</span><span class="sxs-lookup"><span data-stu-id="8d463-124">General Considerations</span></span>  
  
-   <span data-ttu-id="8d463-125">스키마 변경에는 [!INCLUDE[tsql](../../../includes/tsql-md.md)]에서 설정한 제한 사항이 적용됩니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-125">Schema changes are subject to any restrictions imposed by [!INCLUDE[tsql](../../../includes/tsql-md.md)].</span></span> <span data-ttu-id="8d463-126">예를 들어 ALTER TABLE을 사용하여 기본 키 열을 변경할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-126">For example, ALTER TABLE does not allow you to ALTER primary key columns.</span></span>  
  
-   <span data-ttu-id="8d463-127">데이터 형식 매핑은 초기 스냅샷에 대해서만 수행됩니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-127">Data type mapping is performed only for the initial snapshot.</span></span> <span data-ttu-id="8d463-128">스키마 변경은 이전 버전의 데이터 형식으로 매핑되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-128">Schema changes are not mapped to previous versions of data types.</span></span> <span data-ttu-id="8d463-129">예를 들어 [!INCLUDE[ssSQL11](../../../includes/sssql11-md.md)]에서 `ALTER TABLE ADD datetime2 column` 문을 사용하는 경우 데이터 형식이 [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] 구독자에 대한 `nvarchar`로 변환되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-129">For example, if the statement `ALTER TABLE ADD datetime2 column` is used in [!INCLUDE[ssSQL11](../../../includes/sssql11-md.md)], the data type is not translated to `nvarchar` for [!INCLUDE[ssVersion2005](../../../includes/ssversion2005-md.md)] Subscribers.</span></span> <span data-ttu-id="8d463-130">게시자에서 스키마 변경이 차단되는 경우도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-130">In some cases, schema changes are blocked on the Publisher.</span></span>  
  
-   <span data-ttu-id="8d463-131">게시에서 스키마 변경을 전파할 수 있도록 설정하면 게시의 아티클에 대해 관련 스키마 옵션이 어떻게 설정되었는지에 상관없이 스키마 변경이 전파됩니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-131">If a publication is set to allow the propagation of schema changes, schema changes are propagated regardless of how the related schema option is set for an article in the publication.</span></span> <span data-ttu-id="8d463-132">예를 들어 테이블 아티클에 대해 FOREIGN KEY 제약 조건을 복제하지 않도록 선택하고 게시자의 테이블에 외래 키를 추가하는 ALTER TABLE 명령을 실행하면 구독자의 테이블에 외래 키가 추가됩니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-132">For example, if you select not to replicate foreign key constraints for a table article, but then issue an ALTER TABLE command that adds a foreign key to the table at the Publisher, the foreign key is added to the table at the Subscriber.</span></span> <span data-ttu-id="8d463-133">이를 방지하려면 ALTER TABLE 명령을 실행하기 전에 스키마 변경 전파를 해제합니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-133">To prevent this, disable the propagation of schema changes before issuing the ALTER TABLE command.</span></span>  
  
-   <span data-ttu-id="8d463-134">스키마 변경은 구독자(재게시 구독자 포함)가 아닌 게시자에서만 수행해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-134">Schema changes should be made only at the Publisher, not at Subscribers (including republishing Subscribers).</span></span> <span data-ttu-id="8d463-135">병합 복제에서는 구독자에서 스키마를 변경할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-135">Merge replication prevents schema changes at the Subscriber.</span></span> <span data-ttu-id="8d463-136">트랜잭션 복제에서는 스키마를 변경할 수 있지만 이러한 변경으로 인해 복제가 실패할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-136">Transactional replication does not prevent the changes, but the changes can cause replication to fail.</span></span>  
  
-   <span data-ttu-id="8d463-137">재게시 구독자로 전파된 변경 내용은 기본적으로 해당 구독자로 전파됩니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-137">Changes propagated to a republishing Subscriber are by default propagated to its Subscribers.</span></span>  
  
-   <span data-ttu-id="8d463-138">스키마 변경이 게시자에는 존재하지만 구독자에는 존재하는 않는 개체 또는 제약 조건을 참조하면 게시자에서는 스키마 변경이 성공하지만 구독자에서는 실패합니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-138">If the schema change references objects or constraints existing on the Publisher but not on the Subscriber, the schema change will succeed on the Publisher but will fail on the Subscriber.</span></span>  
  
-   <span data-ttu-id="8d463-139">외래 키를 추가할 때 참조되는 구독자에 있는 모든 개체의 이름 및 소유자는 게시자에 있는 해당 개체의 이름 및 소유자와 같아야 합니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-139">All objects on the Subscriber that are referenced when adding a foreign key must have the same name and owner as the corresponding object on the Publisher.</span></span>  
  
-   <span data-ttu-id="8d463-140">명시적인 인덱스 추가, 삭제 및 변경은 지원되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-140">Explicitly adding, dropping, or altering indexes is not supported.</span></span> <span data-ttu-id="8d463-141">PRIMARY KEY 제약 조건과 같이 제약 조건에 대해 암시적으로 생성된 인덱스는 지원됩니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-141">Indexes created implicitly for constraints (such as a primary key constraint) are supported.</span></span>  
  
-   <span data-ttu-id="8d463-142">복제에서 관리하는 ID 열은 변경 또는 삭제할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-142">Altering or dropping identity columns that are managed by replication is not supported.</span></span> <span data-ttu-id="8d463-143">ID 열 자동 관리에 대한 자세한 내용은 [ID 열 복제](replicate-identity-columns.md)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="8d463-143">For more information about automatic management of identity columns, see [Replicate Identity Columns](replicate-identity-columns.md).</span></span>  
  
-   <span data-ttu-id="8d463-144">게시자 데이터와 구독자 데이터가 서로 달라질 수 있기 때문에(데이터 불일치성이라고 함) 비결정적 함수를 포함하는 스키마 변경은 지원되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-144">Schema changes that include nondeterministic functions are not supported because they can result in data at the Publisher and Subscriber being different (referred to as non-convergence).</span></span> <span data-ttu-id="8d463-145">예를 들어 게시자: `ALTER TABLE SalesOrderDetail ADD OrderDate DATETIME DEFAULT GETDATE()`에서 다음 명령을 실행하는 경우 다른 명령이 구독자에 복제되고 실행되면 값은 달라집니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-145">For example, if you issue the following command at the Publisher: `ALTER TABLE SalesOrderDetail ADD OrderDate DATETIME DEFAULT GETDATE()`, the values are different when the command is replicated to the Subscriber and executed.</span></span> <span data-ttu-id="8d463-146">비결정적 함수에 대한 자세한 내용은 [Deterministic and Nondeterministic Functions](../../user-defined-functions/deterministic-and-nondeterministic-functions.md)를 참조하십시오.</span><span class="sxs-lookup"><span data-stu-id="8d463-146">For more information about nondeterministic functions, see [Deterministic and Nondeterministic Functions](../../user-defined-functions/deterministic-and-nondeterministic-functions.md).</span></span>  
  
-   <span data-ttu-id="8d463-147">제약 조건의 이름을 명시적으로 지정하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-147">It is recommended that constraints be explicitly named.</span></span> <span data-ttu-id="8d463-148">제약 조건의 이름을 명시적으로 지정하지 않은 경우 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 에서 제약 조건에 이름을 생성하며 이러한 이름은 게시자와 각 구독자에서 다르게 됩니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-148">If a constraint is not explicitly named, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] generates a name for the constraint, and these names will be different on the Publisher and each Subscriber.</span></span> <span data-ttu-id="8d463-149">이로 인해 스키마 변경 복제 시 문제가 발생할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-149">This can cause issues during the replication of schema changes.</span></span> <span data-ttu-id="8d463-150">예를 들어 게시자에서 열을 삭제하여 종속 제약 조건이 삭제된 경우 복제에서 구독자의 제약 조건을 삭제하려고 시도하지만</span><span class="sxs-lookup"><span data-stu-id="8d463-150">For example, if you drop a column at the Publisher and a dependent constraint is dropped, replication will attempt to drop the constraint at the Subscriber.</span></span> <span data-ttu-id="8d463-151">제약 조건의 이름이 다르기 때문에 구독자에서의 삭제 작업은 실패하게 됩니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-151">The drop at the Subscriber will fail because the name of the constraint is different.</span></span> <span data-ttu-id="8d463-152">제약 조건 명명 문제로 인해 동기화가 실패할 경우 구독자에서 수동으로 제약 조건을 삭제하고 병합 에이전트를 다시 실행하십시오.</span><span class="sxs-lookup"><span data-stu-id="8d463-152">If synchronization fails because of a constraint naming issue, manually drop the constraint at the Subscriber and then rerun the Merge Agent.</span></span>  
  
-   <span data-ttu-id="8d463-153">테이블을 복제용으로 게시하면 게시 스냅샷이 이미 생성되어 있는 경우 해당 테이블의 열을 XML 데이터 형식으로 변경할 수 없습니다. 열을 변경하려면 먼저 복제를 제거해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-153">If a table is published for replication, it is not possible to alter a column in that table to a data type of XML if a publication snapshot has already been generated To alter the column, you must first remove replication.</span></span>  
  
-   <span data-ttu-id="8d463-154">커밋되지 않은 읽기는 게시된 테이블에서 DDL을 수행할 때 지원되는 격리 수준이 아닙니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-154">Read uncommitted is not a supported isolation level when doing DDL on a published table.</span></span>  
  
-   <span data-ttu-id="8d463-155">`SET CONTEXT_INFO`는 게시된 개체에 대해 스키마 변경 내용이 수행된 트랜잭션 컨텍스트 수정에 사용할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-155">`SET CONTEXT_INFO` should not be used to modify the context of transactions where schema changes are performed against published objects.</span></span>  
  
#### <a name="adding-columns"></a><span data-ttu-id="8d463-156">열 추가</span><span class="sxs-lookup"><span data-stu-id="8d463-156">Adding Columns</span></span>  
  
-   <span data-ttu-id="8d463-157">테이블에 새 열을 추가한 후 이 열을 기존 게시에 포함하려면 ALTER TABLE \<Table> ADD \<Column>을 실행합니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-157">To add a new column to a table and include that column in an existing publication, execute ALTER TABLE \<Table> ADD \<Column>.</span></span> <span data-ttu-id="8d463-158">기본적으로 이 열은 모든 구독자로 복제됩니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-158">By default, the column is then replicated to all Subscribers.</span></span> <span data-ttu-id="8d463-159">이 열에는 NULL 값이 허용되거나 기본 제약 조건이 포함되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-159">The column must allow NULL values or include a default constraint.</span></span> <span data-ttu-id="8d463-160">열을 추가하는 방법은 이 항목의 "병합 복제" 섹션을 참조하십시오.</span><span class="sxs-lookup"><span data-stu-id="8d463-160">For more information about adding columns, see the "Merge Replication" section in this topic.</span></span>  
  
-   <span data-ttu-id="8d463-161">테이블에 새 열을 추가한 후 이 열을 기존 게시에 포함하지 않으려면 스키마 변경 복제를 사용하지 않도록 설정한 다음, ALTER TABLE \<Table> ADD \<Column>을 실행합니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-161">To add a new column to a table and not include that column in an existing publication, disable the replication of schema changes, and then execute ALTER TABLE \<Table> ADD \<Column>.</span></span>  
  
-   <span data-ttu-id="8d463-162">기존 게시에 기존 열을 포함하려면 [sp_articlecolumn&#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-articlecolumn-transact-sql), [sp_mergearticlecolumn&#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-mergearticlecolumn-transact-sql) 또는 **게시 속성 - \<Publication>** 대화 상자를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-162">To include an existing column in an existing publication, use [sp_articlecolumn &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-articlecolumn-transact-sql), [sp_mergearticlecolumn &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-mergearticlecolumn-transact-sql), or the **Publication Properties - \<Publication>** dialog box.</span></span>  
  
     <span data-ttu-id="8d463-163">자세한 내용은 [Define and Modify a Column Filter](define-and-modify-a-column-filter.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="8d463-163">For more information, see [Define and Modify a Column Filter](define-and-modify-a-column-filter.md).</span></span> <span data-ttu-id="8d463-164">이 작업을 수행하려면 구독을 다시 초기화해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-164">This will require subscriptions to be reinitialized.</span></span>  
  
-   <span data-ttu-id="8d463-165">열이 구독자로 복제될 때 데이터가 일치하지 않을 수 있기 때문에 게시된 테이블에 ID 열을 추가할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-165">Adding an identity column to a published table is not supported, because it can result in non-convergence when the column is replicated to the Subscriber.</span></span> <span data-ttu-id="8d463-166">게시자의 ID 열 값은 영향을 받는 테이블 행이 실제로 저장된 순서에 따라 달라집니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-166">The values in the identity column at the Publisher depend on the order in which the rows for the affected table are physically stored.</span></span> <span data-ttu-id="8d463-167">구독자에서는 행이 다르게 저장될 수 있으므로 ID 열의 값이 같은 행에 대해 다를 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-167">The rows might be stored differently at the Subscriber; therefore the value for the identity column can be different for the same rows.</span></span>  
  
#### <a name="dropping-columns"></a><span data-ttu-id="8d463-168">열 삭제</span><span class="sxs-lookup"><span data-stu-id="8d463-168">Dropping Columns</span></span>  
  
-   <span data-ttu-id="8d463-169">기존 게시에서 열을 삭제하고 해당 열을 게시자의 테이블에서 삭제하려면 ALTER TABLE \<Table> DROP \<Column>을 실행합니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-169">To drop a column from an existing publication and drop the column from the table at the Publisher, execute ALTER TABLE \<Table> DROP \<Column>.</span></span> <span data-ttu-id="8d463-170">기본적으로 해당 열이 모든 구독자의 테이블에서 삭제됩니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-170">By default, the column is then dropped from the table at all Subscribers.</span></span>  
  
-   <span data-ttu-id="8d463-171">열을 기존 게시에서는 삭제하지만 게시자의 테이블에서는 유지하려면 [sp_articlecolumn&#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-articlecolumn-transact-sql), [sp_mergearticlecolumn&#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-mergearticlecolumn-transact-sql) 또는 **게시 속성 - \<Publication>** 대화 상자를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-171">To drop a column from an existing publication but retain the column in the table at the Publisher, use [sp_articlecolumn &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-articlecolumn-transact-sql), [sp_mergearticlecolumn &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-mergearticlecolumn-transact-sql), or the **Publication Properties - \<Publication>** dialog box.</span></span>  
  
     <span data-ttu-id="8d463-172">자세한 내용은 [Define and Modify a Column Filter](define-and-modify-a-column-filter.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="8d463-172">For more information, see [Define and Modify a Column Filter](define-and-modify-a-column-filter.md).</span></span> <span data-ttu-id="8d463-173">이 작업을 수행하려면 새 스냅샷을 생성해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-173">This will require a new snapshot to be generated.</span></span>  
  
-   <span data-ttu-id="8d463-174">삭제할 열은 데이터베이스에 있는 모든 게시 아티클의 필터 절에 사용할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-174">The column to be dropped cannot be used in the filter clauses of any article of any publication in the database.</span></span>  
  
-   <span data-ttu-id="8d463-175">다음과 같이 게시된 아티클에서 열을 삭제할 때는 데이터베이스에 영향을 줄 수 있는 열의 제약 조건, 인덱스 또는 속성을</span><span class="sxs-lookup"><span data-stu-id="8d463-175">When dropping a column from a published article, take into consideration any constraints, indexes, or properties of the column that could affect the database.</span></span> <span data-ttu-id="8d463-176">예를 들면 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-176">For example:</span></span>  
  
    -   <span data-ttu-id="8d463-177">트랜잭션 게시 아티클에서 기본 키에 사용되는 열은 복제에 사용되므로 삭제할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-177">You cannot drop columns used in a primary key from articles in transactional publications, because they are used by replication.</span></span>  
  
    -   <span data-ttu-id="8d463-178">병합 게시 아티클의 rowguid 열이나 구독 업데이트를 지원하는 트랜잭션 게시 아티클의 mstran_repl_version 열은 복제에 사용되므로 삭제할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-178">You cannot drop the rowguid column from articles in merge publications or the mstran_repl_version column from articles in transactional publications that support updating subscriptions, because they are used by replication.</span></span>  
  
    -   <span data-ttu-id="8d463-179">인덱스 변경은 구독자에 전파되지 않습니다. 게시자에서 열을 삭제하여 종속 인덱스가 삭제된 경우 인덱스 삭제는 복제되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-179">Index changes are not propagated to Subscribers: if you drop a column at the Publisher and a dependent index is dropped, the index drop is not replicated.</span></span> <span data-ttu-id="8d463-180">게시자에서 구독자로 복제 시에 열 삭제가 성공하려면 게시자에서 열을 삭제하기 전에 구독자에서 인덱스를 삭제해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-180">You should drop the index at the Subscriber before dropping the column at the Publisher, so that the column drop succeeds when it is replicated from the Publisher to the Subscriber.</span></span> <span data-ttu-id="8d463-181">구독자의 인덱스 때문에 동기화가 실패할 경우 수동으로 인덱스를 삭제하고 병합 에이전트를 다시 실행하십시오.</span><span class="sxs-lookup"><span data-stu-id="8d463-181">If synchronization fails because of an index at the Subscriber, manually drop the index and then rerun the Merge Agent.</span></span>  
  
    -   <span data-ttu-id="8d463-182">삭제가 가능하려면 제약 조건의 이름이 명시적으로 지정되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-182">Constraints should be explicitly named to allow for dropping.</span></span> <span data-ttu-id="8d463-183">자세한 내용은 이 항목의 앞에 나오는 "일반적인 고려 사항" 섹션을 참조하십시오.</span><span class="sxs-lookup"><span data-stu-id="8d463-183">For more information, see the "General Considerations" section earlier in this topic.</span></span>  
  
### <a name="transactional-replication"></a><span data-ttu-id="8d463-184">트랜잭션 복제</span><span class="sxs-lookup"><span data-stu-id="8d463-184">Transactional Replication</span></span>  
  
-   <span data-ttu-id="8d463-185">스키마 변경은 이전 버전의 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]를 실행하는 구독자로 전파되지만 DDL 문에는 구독자에서 해당 버전에 지원되는 구문만 포함되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-185">Schema changes are propagated to Subscribers running previous versions of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], but the DDL statement should only include syntax supported by the version at the Subscriber.</span></span>  
  
     <span data-ttu-id="8d463-186">구독자에서 데이터를 다시 게시하면 열을 추가 및 삭제하는 스키마 변경만 지원됩니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-186">If the Subscriber republishes data, the only supported schema changes are adding and dropping a column.</span></span> <span data-ttu-id="8d463-187">이러한 변경은 게시자에서 ALTER TABLE DDL 구문이 아니라 [sp_repladdcolumn&#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-repladdcolumn-transact-sql) 및 [sp_repldropcolumn&#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-repldropcolumn-transact-sql)을 사용하여 수행해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-187">These changes should be made on the Publisher using [sp_repladdcolumn &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-repladdcolumn-transact-sql) and [sp_repldropcolumn &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-repldropcolumn-transact-sql) rather than ALTER TABLE DDL syntax.</span></span>  
  
-   <span data-ttu-id="8d463-188">SQL Server 이외 구독자로는 스키마 변경이 복제되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-188">Schema changes are not replicated to non-SQL Server Subscribers.</span></span>  
  
-   <span data-ttu-id="8d463-189">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 이외 게시자로부터는 스키마 변경이 전파되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-189">Schema changes are not propagated from non-[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Publishers.</span></span>  
  
-   <span data-ttu-id="8d463-190">테이블로 복제되는 인덱싱된 뷰는 변경할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-190">You cannot alter indexed views that are replicated as tables.</span></span> <span data-ttu-id="8d463-191">인덱싱된 뷰로 복제되는 인덱싱된 뷰는 변경할 수 있지만 변경하면 인덱싱된 뷰가 아닌 일반 뷰가 됩니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-191">Indexed views that are replicated as indexed views can be altered, but altering them will cause them to become regular views, rather than indexed views.</span></span>  
  
-   <span data-ttu-id="8d463-192">게시에서 즉시 업데이트 구독 또는 지연 업데이트 구독을 지원하면 스키마를 변경하기 전에 시스템을 정지해야 합니다. 즉, 게시된 테이블에 대한 모든 작업을 게시자와 구독자에서 중지하고 보류 중인 데이터 변경 내용을 모든 노드에 전파해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-192">If the publication supports immediate updating or queued updating subscriptions, the system must be quiesced before making schema changes: all activity on the published table must be stopped at the Publisher and Subscribers, and pending data changes must be propagated to all nodes.</span></span> <span data-ttu-id="8d463-193">스키마 변경을 모든 노드로 전파하면 게시된 테이블에 대한 작업을 재개할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-193">After the schema changes have propagated to all nodes, activity can resume on the published tables.</span></span>  
  
-   <span data-ttu-id="8d463-194">피어 투 피어 토폴로지의 게시에서는 스키마를 변경하기 전에 시스템을 정지해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-194">If the publication is in a peer-to-peer topology, the system must be quiesced before making schema changes.</span></span> <span data-ttu-id="8d463-195">자세한 내용은 [복제 토폴로지 정지&#40;복제 Transact-SQL 프로그래밍&#41;](../administration/quiesce-a-replication-topology-replication-transact-sql-programming.md)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="8d463-195">For more information, see [Quiesce a Replication Topology &#40;Replication Transact-SQL Programming&#41;](../administration/quiesce-a-replication-topology-replication-transact-sql-programming.md).</span></span>  
  
-   <span data-ttu-id="8d463-196">테이블에 타임스탬프 열을 추가하고 이 타임스탬프를 binary(8)로 매핑하면 아티클이 모든 활성 구독에 대해 다시 초기화됩니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-196">Adding a timestamp column to a table and mapping the timestamp to binary(8) causes the article to be reinitialized for all active subscriptions.</span></span>  
  
### <a name="merge-replication"></a><span data-ttu-id="8d463-197">병합 복제</span><span class="sxs-lookup"><span data-stu-id="8d463-197">Merge Replication</span></span>  
  
-   <span data-ttu-id="8d463-198">병합 복제에서 스키마 변경을 처리하는 방법은 게시 호환성 수준 및 스냅샷이 기본 모드(기본값) 또는 문자 모드로 설정되었는지에 의해 결정됩니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-198">How merge replication handles schema changes is determined by the publication compatibility level, and whether the snapshot is set to native mode (default) or character mode:</span></span>  
  
    -   <span data-ttu-id="8d463-199">스키마 변경을 복제하려면 게시의 호환성 수준이 적어도 90RTM 이상이어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-199">To replicate schema changes, the compatibility level of the publication must be at least 90RTM.</span></span> <span data-ttu-id="8d463-200">구독자에서 이전 버전의 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]를 실행하거나 호환성 수준이 90RTM 이하인 경우에도 [sp_repladdcolumn&#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-repladdcolumn-transact-sql) 및 [sp_repldropcolumn&#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-repldropcolumn-transact-sql)을 사용하여 열을 추가 및 삭제할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-200">If Subscribers are running previous versions of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] or the compatibility level is less than 90RTM you can use [sp_repladdcolumn &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-repladdcolumn-transact-sql) and [sp_repldropcolumn &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-repldropcolumn-transact-sql) to add and drop columns.</span></span> <span data-ttu-id="8d463-201">그러나 이러한 프로시저는 더 이상 사용되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-201">However, these procedures are deprecated.</span></span>  
  
    -   <span data-ttu-id="8d463-202">[!INCLUDE[ssKatmai](../../../includes/sskatmai-md.md)]에서 도입된 데이터 형식의 열을 기존 아티클에 추가하려는 경우 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 는 다음과 같이 동작합니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-202">If you try to add to an existing article a column with a data type that was introduced in [!INCLUDE[ssKatmai](../../../includes/sskatmai-md.md)], [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] has the following behavior:</span></span>  
  
        ||<span data-ttu-id="8d463-203">100RTM, 기본 스냅샷</span><span class="sxs-lookup"><span data-stu-id="8d463-203">100RTM, native snapshot</span></span>|<span data-ttu-id="8d463-204">100RTM, 문자 스냅샷</span><span class="sxs-lookup"><span data-stu-id="8d463-204">100RTM, character snapshot</span></span>|<span data-ttu-id="8d463-205">다른 모든 호환성 수준</span><span class="sxs-lookup"><span data-stu-id="8d463-205">All other compatibility levels</span></span>|  
        |-|-----------------------------|--------------------------------|------------------------------------|  
        |`hierarchyid`|<span data-ttu-id="8d463-206">변경 허용</span><span class="sxs-lookup"><span data-stu-id="8d463-206">Allow change</span></span>|<span data-ttu-id="8d463-207">변경 차단</span><span class="sxs-lookup"><span data-stu-id="8d463-207">Block change</span></span>|<span data-ttu-id="8d463-208">변경 차단</span><span class="sxs-lookup"><span data-stu-id="8d463-208">Block change</span></span>|  
        |<span data-ttu-id="8d463-209">`geography` 및 `geometry`</span><span class="sxs-lookup"><span data-stu-id="8d463-209">`geography` and `geometry`</span></span>|<span data-ttu-id="8d463-210">변경 허용</span><span class="sxs-lookup"><span data-stu-id="8d463-210">Allow change</span></span>|<span data-ttu-id="8d463-211">변경 허용<sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="8d463-211">Allow change<sup>1</sup></span></span>|<span data-ttu-id="8d463-212">변경 차단</span><span class="sxs-lookup"><span data-stu-id="8d463-212">Block change</span></span>|  
        |`filestream`|<span data-ttu-id="8d463-213">변경 허용</span><span class="sxs-lookup"><span data-stu-id="8d463-213">Allow change</span></span>|<span data-ttu-id="8d463-214">변경 차단</span><span class="sxs-lookup"><span data-stu-id="8d463-214">Block change</span></span>|<span data-ttu-id="8d463-215">변경 차단</span><span class="sxs-lookup"><span data-stu-id="8d463-215">Block change</span></span>|  
        |<span data-ttu-id="8d463-216">`date`, `time`, `datetime2` 및 `datetimeoffset`</span><span class="sxs-lookup"><span data-stu-id="8d463-216">`date`, `time`, `datetime2`, and `datetimeoffset`</span></span>|<span data-ttu-id="8d463-217">변경 허용</span><span class="sxs-lookup"><span data-stu-id="8d463-217">Allow change</span></span>|<span data-ttu-id="8d463-218">변경 허용<sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="8d463-218">Allow change<sup>1</sup></span></span>|<span data-ttu-id="8d463-219">변경 차단</span><span class="sxs-lookup"><span data-stu-id="8d463-219">Block change</span></span>|  
  
         <span data-ttu-id="8d463-220"><sup>1</sup> SQL Server Compact 구독자는 구독자에서 이러한 데이터 형식을 변환 합니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-220"><sup>1</sup> SQL Server Compact Subscribers convert these data types at the Subscriber.</span></span>  
  
-   <span data-ttu-id="8d463-221">스키마 변경을 적용할 때 오류(예: 구독자에서 사용할 수 없는 테이블을 참조하는 외래 키를 추가할 때 발생하는 오류)가 발생하면 동기화가 실패하므로 구독을 다시 초기화해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-221">If an error occurs when applying a schema change (such as an error resulting from adding a foreign key that references a table not available at the Subscriber), synchronization fails and the subscription must be reinitialized.</span></span>  
  
-   <span data-ttu-id="8d463-222">조인 필터 또는 매개 변수가 있는 필터와 관련된 열에 스키마 변경을 수행하면 모든 구독을 다시 초기화하고 스냅샷을 다시 생성해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-222">If a schema change is made on a column involved in a join filter or parameterized filter, you must reinitialize all subscriptions and regenerate the snapshot.</span></span>  
  
-   <span data-ttu-id="8d463-223">병합 복제에서는 문제를 해결하는 동안 스키마 변경을 건너뛸 수 있는 저장 프로시저를 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="8d463-223">Merge replication provides stored procedures to skip schema changes during troubleshooting.</span></span> <span data-ttu-id="8d463-224">자세한 내용은 [sp_markpendingschemachange&#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-markpendingschemachange-transact-sql) 및 [sp_enumeratependingschemachanges&#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-enumeratependingschemachanges-transact-sql)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="8d463-224">For more information, see [sp_markpendingschemachange &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-markpendingschemachange-transact-sql) and [sp_enumeratependingschemachanges &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-enumeratependingschemachanges-transact-sql).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="8d463-225">참고 항목</span><span class="sxs-lookup"><span data-stu-id="8d463-225">See Also</span></span>  
 <span data-ttu-id="8d463-226">[ALTER TABLE&#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-table-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="8d463-226">[ALTER TABLE &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-table-transact-sql) </span></span>  
 <span data-ttu-id="8d463-227">[ALTER VIEW&#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-view-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="8d463-227">[ALTER VIEW &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-view-transact-sql) </span></span>  
 <span data-ttu-id="8d463-228">[ALTER PROCEDURE&#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-procedure-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="8d463-228">[ALTER PROCEDURE &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-procedure-transact-sql) </span></span>  
 <span data-ttu-id="8d463-229">[ALTER FUNCTION&#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-function-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="8d463-229">[ALTER FUNCTION &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-function-transact-sql) </span></span>  
 <span data-ttu-id="8d463-230">[ALTER TRIGGER&#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-trigger-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="8d463-230">[ALTER TRIGGER &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-trigger-transact-sql) </span></span>  
 <span data-ttu-id="8d463-231">[데이터 및 데이터베이스 개체 게시](publish-data-and-database-objects.md) </span><span class="sxs-lookup"><span data-stu-id="8d463-231">[Publish Data and Database Objects](publish-data-and-database-objects.md) </span></span>  
 [<span data-ttu-id="8d463-232">스키마 변경 내용을 반영하기 위해 사용자 지정 트랜잭션 프로시저 다시 생성</span><span class="sxs-lookup"><span data-stu-id="8d463-232">Regenerate Custom Transactional Procedures to Reflect Schema Changes</span></span>](../transactional/transactional-articles-regenerate-to-reflect-schema-changes.md)  
  
  
