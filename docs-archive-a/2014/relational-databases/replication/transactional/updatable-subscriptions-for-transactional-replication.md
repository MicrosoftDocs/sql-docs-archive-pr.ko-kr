---
title: 트랜잭션 복제를 위한 업데이트 가능 구독 | Microsoft 문서
ms.custom: ''
ms.date: 03/31/2016
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- transactional replication, updatable subscriptions
- updatable subscriptions, about updatable subscriptions
- queued updating subscriptions [SQL Server replication]
- immediate updating subscriptions
- subscriptions [SQL Server replication], updatable
- updatable subscriptions
ms.assetid: 8eec95cb-3a11-436e-bcee-bdcd05aa5c5a
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: e0b739ffe34a14519ff5290c406805ff7715edce
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87661002"
---
# <a name="updatable-subscriptions-for-transactional-replication"></a><span data-ttu-id="cbd5c-102">Updatable Subscriptions for Transactional Replication</span><span class="sxs-lookup"><span data-stu-id="cbd5c-102">Updatable Subscriptions for Transactional Replication</span></span>

<span data-ttu-id="cbd5c-103">**적용 대상:** SQL Server 2008 (이상)</span><span class="sxs-lookup"><span data-stu-id="cbd5c-103">**Applies to:** SQL Server 2008 (and later)</span></span>

    
> [!NOTE]  
>  [!INCLUDE[ssNoteDepFutureAvoid](../../../includes/ssnotedepfutureavoid-md.md)]  
  
<span data-ttu-id="cbd5c-104">SQL Server 2014에서 트랜잭션 복제는 업데이트할 수 있는 구독과 피어 투 피어 복제를 통해 구독자에서 업데이트를 지원 합니다.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-104">In SQL Server 2014, transactional replication supports updates at Subscribers through updatable subscriptions and peer-to-peer replication.</span></span> <span data-ttu-id="cbd5c-105">업데이트할 수 있는 구독에는 다음 두 가지 유형이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-105">The following are the two types of updatable subscriptions:</span></span>  
  
-   <span data-ttu-id="cbd5c-106">즉시 업데이트.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-106">Immediate updating.</span></span> <span data-ttu-id="cbd5c-107">구독자에서 데이터를 업데이트하려면 게시자와 구독자를 연결해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-107">The Publisher and Subscriber must be connected to update data at the Subscriber.</span></span>  
  
-   <span data-ttu-id="cbd5c-108">지연 업데이트. 구독자에서 데이터를 업데이트하기 위해 게시자와 구독자를 연결할 필요가 없습니다.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-108">Queued updating The Publisher and Subscriber do not have to be connected to update data at the Subscriber.</span></span> <span data-ttu-id="cbd5c-109">구독자나 게시자가 오프라인 상태일 때도 업데이트할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-109">Updates can be made while the Subscriber or Publisher is offline.</span></span>  
  
 <span data-ttu-id="cbd5c-110">구독자에서 데이터를 업데이트하면 이 데이터는 먼저 게시자로 전파된 다음 다른 구독자로 전파됩니다.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-110">When data is updated at a Subscriber, it is first propagated to the Publisher and then propagated to other Subscribers.</span></span> <span data-ttu-id="cbd5c-111">즉시 업데이트를 사용하는 경우 변경 내용은 2단계 커밋 프로토콜을 사용하여 즉시 전파됩니다.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-111">If immediate updating is used, the changes are propagated immediately using the two-phase commit protocol.</span></span> <span data-ttu-id="cbd5c-112">지연 업데이트를 사용하는 경우 변경 내용은 큐에 저장됩니다. 그런 다음 네트워크 연결이 가능할 때마다 지연 트랜잭션이 게시자에서 비동기적으로 적용됩니다.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-112">If queued updating is used, the changes are stored in a queue; the queued transactions are then applied asynchronously at the Publisher whenever network connectivity is available.</span></span> <span data-ttu-id="cbd5c-113">업데이트한 내용은 게시자에 비동기식으로 전파되기 때문에 같은 데이터를 게시자나 다른 구독자가 업데이트할 수 있고 업데이트를 적용할 때 충돌이 발생할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-113">Because the updates are propagated asynchronously to the Publisher, the same data may have been updated by the Publisher or by another Subscriber and conflicts can occur when applying the updates.</span></span> <span data-ttu-id="cbd5c-114">게시를 만들 때 설정한 충돌 해결 정책에 따라 충돌을 감지하고 해결합니다.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-114">Conflicts are detected and resolved according to a conflict resolution policy that is set when creating the publication.</span></span>  
  
 <span data-ttu-id="cbd5c-115">새 게시 마법사에서 업데이트할 수 있는 구독이 있는 트랜잭션 게시를 만드는 경우 즉시 업데이트와 지연 업데이트를 모두 설정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-115">If you create a transactional publication with updatable subscriptions in the New Publication Wizard, both immediate updating and queued updating are enabled.</span></span> <span data-ttu-id="cbd5c-116">저장 프로시저가 있는 게시를 만드는 경우 이 두 가지 옵션 중 하나 또는 둘 다를 설정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-116">If you create a publication with stored procedures, you can enable one or both options.</span></span> <span data-ttu-id="cbd5c-117">게시에 대한 구독을 만드는 경우에는 사용할 업데이트 모드를 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-117">When you create a subscription to the publication, you specify which update mode to use.</span></span> <span data-ttu-id="cbd5c-118">그런 다음 필요에 따라 업데이트 모드를 전환할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-118">You can then switch between update modes if necessary.</span></span> <span data-ttu-id="cbd5c-119">자세한 내용은 다음에 나올 "업데이트 모드 전환" 섹션을 참조하십시오.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-119">For more information, see the following section "Switching between Update Modes".</span></span>  
  
 <span data-ttu-id="cbd5c-120">트랜잭션 게시에 대해 업데이트할 수 있는 구독을 설정하려면 [Enable Updating Subscriptions for Transactional Publications](../publish/enable-updating-subscriptions-for-transactional-publications.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-120">To enable updatable subscriptions for transactional publications, [Enable Updating Subscriptions for Transactional Publications](../publish/enable-updating-subscriptions-for-transactional-publications.md)</span></span>  
  
 <span data-ttu-id="cbd5c-121">트랜잭션 게시에 대해 업데이트할 수 있는 구독을 만들려면 [Create an Updatable Subscription to a Transactional Publication](../publish/create-an-updatable-subscription-to-a-transactional-publication.md)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-121">To create updatable subscriptions for transactional publications, see [Create an Updatable Subscription to a Transactional Publication](../publish/create-an-updatable-subscription-to-a-transactional-publication.md)</span></span>  
  
## <a name="switching-between-update-modes"></a><span data-ttu-id="cbd5c-122">업데이트 모드 전환</span><span class="sxs-lookup"><span data-stu-id="cbd5c-122">Switching Between Update Modes</span></span>  
 <span data-ttu-id="cbd5c-123">업데이트할 수 있는 구독을 사용할 때는 구독에서 특정 업데이트 모드를 사용하도록 지정한 다음 애플리케이션의 필요에 따라 다른 업데이트 모드로 전환할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-123">When using updatable subscriptions you can specify that a subscription should use one update mode and then switch to the other if the application requires it.</span></span> <span data-ttu-id="cbd5c-124">예를 들어 구독에서 즉시 업데이트를 사용하도록 지정한 다음 시스템 오류로 인해 네트워크 연결이 손실된 경우에 지연 업데이트로 전환할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-124">For example, you can specify that a subscription should use immediate updating, but switch to queued updating if a system failure results in the loss of network connectivity.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="cbd5c-125">복제에서는 업데이트 모드가 자동으로 전환되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-125">Replication does not switch automatically between update modes.</span></span> <span data-ttu-id="cbd5c-126">모드를 전환하려면 SQL Server Management Studio를 통해 업데이트 모드를 설정하거나 애플리케이션에서 [sp_setreplfailovermode&#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-setreplfailovermode-transact-sql)를 호출해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-126">You must set the update mode through SQL Server Management Studio or your application must call [sp_setreplfailovermode &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-setreplfailovermode-transact-sql) to switch between modes.</span></span>  
  
 <span data-ttu-id="cbd5c-127">즉시 업데이트에서 지연 업데이트로 전환하면 구독자와 게시자가 연결되고 큐 판독기 에이전트에서 큐의 보류 중인 모든 메시지를 게시자에 적용할 때까지는 즉시 업데이트로 다시 전환할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-127">If you switch from immediate updating to queued updating, you cannot switch back to immediate updating until the Subscriber and Publisher are connected and the Queue Reader Agent has applied all pending messages in the queue to the Publisher.</span></span>  
  
 <span data-ttu-id="cbd5c-128">**업데이트 모드를 전환하려면**</span><span class="sxs-lookup"><span data-stu-id="cbd5c-128">**To switch between update modes**</span></span>  
  
 <span data-ttu-id="cbd5c-129">업데이트 모드를 전환하려면 이 두 업데이트 모드에 대한 게시와 구독을 설정한 다음 필요에 따라 모드를 전환합니다.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-129">To switch between updating modes, you must enable the publication and subscription for both update modes, and then switch between them if necessary.</span></span> <span data-ttu-id="cbd5c-130">자세한 내용은 다음을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-130">For more information, see</span></span>  
<span data-ttu-id="cbd5c-131">[업데이트 가능한 트랜잭션 구독에 대 한 업데이트 모드를 전환](../administration/switch-between-update-modes-for-an-updatable-transactional-subscription.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-131">[Switch Between Update Modes for an Updatable Transactional Subscription](../administration/switch-between-update-modes-for-an-updatable-transactional-subscription.md).</span></span>  
  
### <a name="considerations-for-using-updatable-subscriptions"></a><span data-ttu-id="cbd5c-132">업데이트할 수 있는 구독 사용 시 고려 사항</span><span class="sxs-lookup"><span data-stu-id="cbd5c-132">Considerations for Using Updatable Subscriptions</span></span>  
  
-   <span data-ttu-id="cbd5c-133">구독 업데이트나 지연 업데이트 구독에 대해 게시를 설정한 다음에는 구독에서 게시를 사용할 필요가 없더라도 해당 옵션을 해제할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-133">After a publication is enabled for updating subscriptions or queued updating subscriptions, the option cannot be disabled for the publication (although subscriptions do not need to use it).</span></span> <span data-ttu-id="cbd5c-134">이 옵션을 해제하려면 해당 게시를 삭제하고 새 게시를 만들어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-134">To disable the option, the publication must be deleted and a new one created.</span></span>  
  
-   <span data-ttu-id="cbd5c-135">데이터 재게시는 지원되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-135">Republishing data is not supported.</span></span>  
  
-   <span data-ttu-id="cbd5c-136">복제는 추적을 위해 **msrepl_tran_version** 열을 게시된 테이블에 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-136">Replication adds the **msrepl_tran_version** column to published tables for tracking purposes.</span></span> <span data-ttu-id="cbd5c-137">이 추가 열 때문에 모든 `INSERT` 문에 열 목록이 포함되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-137">Because of this additional column, all `INSERT` statements should include a column list.</span></span>  
  
-   <span data-ttu-id="cbd5c-138">구독 업데이트를 지원하는 게시의 테이블에서 스키마를 변경하려면 게시자와 구독자에서 해당 테이블에 대한 모든 작업을 중단해야 하고 보류 중인 데이터 변경 내용이 스키마를 변경하기 전에 모든 노드로 전파되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-138">To make schema changes on a table in a publication that supports updating subscriptions, all activity on the table must be stopped at the Publisher and Subscribers, and pending data changes must be propagated to all nodes before making any schema changes.</span></span> <span data-ttu-id="cbd5c-139">이렇게 하면 처리 중인 트랜잭션이 보류 중인 스키마 변경과 충돌하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-139">This ensures that outstanding transactions do not conflict with the pending schema change.</span></span> <span data-ttu-id="cbd5c-140">스키마 변경을 모든 노드로 전파하면 게시된 테이블에 대한 작업을 재개할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-140">After the schema changes have propagated to all nodes, activity can resume on the published tables.</span></span> <span data-ttu-id="cbd5c-141">자세한 내용은 [복제 토폴로지 정지&#40;복제 Transact-SQL 프로그래밍&#41;](../administration/quiesce-a-replication-topology-replication-transact-sql-programming.md)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-141">For more information, see [Quiesce a Replication Topology &#40;Replication Transact-SQL Programming&#41;](../administration/quiesce-a-replication-topology-replication-transact-sql-programming.md).</span></span>  
  
-   <span data-ttu-id="cbd5c-142">업데이트 모드를 전환하려면 구독을 초기화한 후 큐 판독기 에이전트를 최소한 한 번은 실행해야 합니다. 큐 판독기 에이전트는 기본적으로 계속 실행됩니다.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-142">If you plan to switch between update modes, the Queue Reader Agent must run at least once after the subscription has been initialized (by default, the Queue Reader Agent runs continuously).</span></span>  
  
-   <span data-ttu-id="cbd5c-143">구독자 데이터베이스가 수평으로 분할되고 파티션에 구독자에는 존재하면서 게시자에는 없는 행이 있다면 구독자는 기존 행을 업데이트할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-143">If the Subscriber database is partitioned horizontally and there are rows in the partition that exist at the Subscriber, but not at the Publisher, the Subscriber cannot update the preexisting rows.</span></span> <span data-ttu-id="cbd5c-144">이러한 행을 업데이트하려고 하면 오류가 발생합니다.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-144">Attempting to update these rows returns an error.</span></span> <span data-ttu-id="cbd5c-145">테이블에서 이 행을 삭제한 다음 게시자에서 추가해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-145">The rows should be deleted from the table and then added at the Publisher.</span></span>  
  
### <a name="updates-at-the-subscriber"></a><span data-ttu-id="cbd5c-146">구독자에서의 업데이트</span><span class="sxs-lookup"><span data-stu-id="cbd5c-146">Updates at the Subscriber</span></span>  
  
-   <span data-ttu-id="cbd5c-147">구독자에서의 업데이트는 구독이 만료되었거나 비활성화 상태에 있더라도 게시자로 전파됩니다.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-147">Updates at the Subscriber are propagated to the Publisher even if a subscription is expired or is inactive.</span></span> <span data-ttu-id="cbd5c-148">이러한 구독은 삭제하거나 다시 초기화하십시오.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-148">Ensure that any such subscriptions are either dropped or reinitialized.</span></span>  
  
-   <span data-ttu-id="cbd5c-149">`TIMESTAMP` 또는 `IDENTITY` 열을 사용하고 이러한 열이 자체 기본 데이터 형식으로 복제되는 경우에는 이러한 열의 값을 구독자에서 업데이트할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-149">If `TIMESTAMP` or `IDENTITY` columns are used, and they are replicated as their base data types, values in these columns should not be updated at the Subscriber.</span></span>  
  
-   <span data-ttu-id="cbd5c-150">복제에 대한 변경 내용 추적 트리거 내의 삽입 테이블 또는 삭제 테이블에서는 읽기 작업을 수행할 수 없으므로 구독자는 `text`, `ntext` 또는 `image` 값을 업데이트하거나 삽입할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-150">Subscribers cannot update or insert `text`, `ntext` or `image` values because it is not possible to read from the inserted or deleted tables inside the replication change-tracking triggers.</span></span> <span data-ttu-id="cbd5c-151">마찬가지로 게시자가 데이터를 덮어쓰므로 구독자는 `WRITETEXT` 또는 `UPDATETEXT`를 사용하여 `text` 또는 `image` 값을 업데이트하거나 삽입할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-151">Similarly, Subscribers cannot update or insert `text` or `image` values using `WRITETEXT` or `UPDATETEXT` because the data is overwritten by the Publisher.</span></span> <span data-ttu-id="cbd5c-152">대신 `text` 및 `image` 열을 별개의 테이블에 분할할 수 있고 트랜잭션 내에서 두 테이블을 수정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-152">Instead, you could partition the `text` and `image` columns into a separate table and modify the two tables within a transaction.</span></span>  
  
     <span data-ttu-id="cbd5c-153">구독자에서 큰 개체를 업데이트하려면 `text`, `ntext` 및 `image` 데이터 형식 대신 `varchar(max)`, `nvarchar(max)` 및 `varbinary(max)` 데이터 형식을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-153">To update large objects at a Subscriber, use the data types `varchar(max)`, `nvarchar(max)`, `varbinary(max)` instead of `text`, `ntext`, and `image` data types, respectively.</span></span>  
  
-   <span data-ttu-id="cbd5c-154">중복을 생성하는 고유 키(기본 키 포함)에 대한 업데이트(예: `UPDATE <column> SET <column> =<column>+1` 형식의 업데이트)는 허용되지 않으며 고유성 위반 때문에 거부됩니다.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-154">Updates to unique keys (including primary keys) that generate duplicates (for example, an update of the form `UPDATE <column> SET <column> =<column>+1` are not allowed and will be rejected because of a uniqueness violation.</span></span> <span data-ttu-id="cbd5c-155">이는 구독자에서의 업데이트 설정이 영향을 받는 각 행에 대한 개별 `UPDATE` 문으로 복제에 의해 전파되기 때문입니다.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-155">This is because set updates made at the Subscriber are propagated by replication as individual `UPDATE` statements for each row affected.</span></span>  
  
-   <span data-ttu-id="cbd5c-156">구독자 데이터베이스가 수평으로 분할되고 파티션에 구독자에는 존재하면서 게시자에는 없는 행이 있다면 구독자는 기존 행을 업데이트할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-156">If the Subscriber database is partitioned horizontally and there are rows in the partition that exist at the Subscriber but not at the Publisher, the Subscriber cannot update the pre-existing rows.</span></span> <span data-ttu-id="cbd5c-157">이러한 행을 업데이트하려고 하면 오류가 발생합니다.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-157">Attempting to update these rows returns an error.</span></span> <span data-ttu-id="cbd5c-158">테이블에서 이 행을 삭제하고 다시 삽입해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-158">The rows should be deleted from the table and inserted again.</span></span>  
  
### <a name="user-defined-triggers"></a><span data-ttu-id="cbd5c-159">사용자 정의 트리거</span><span class="sxs-lookup"><span data-stu-id="cbd5c-159">User-defined Triggers</span></span>  
  
-   <span data-ttu-id="cbd5c-160">애플리케이션이 구독자에 대한 트리거를 요구하는 경우에는 게시자와 구독자에서 `NOT FOR REPLICATION` 옵션을 사용하여 트리거를 정의해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-160">If the application requires triggers at the Subscriber, the triggers should be defined with the `NOT FOR REPLICATION` option at the Publisher and Subscriber.</span></span> <span data-ttu-id="cbd5c-161">이렇게 하면 원래 데이터가 변경될 때만 트리거가 발생되고 변경 내용이 복제될 때는 트리거가 발생되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-161">This ensures that triggers fire only for the original data change, but not when that change is replicated.</span></span>  
  
     <span data-ttu-id="cbd5c-162">복제 트리거에 의해 테이블이 업데이트될 때 사용자 정의 트리거가 발생되지 않도록 합니다.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-162">Ensure that the user-defined trigger does not fire when the replication trigger updates the table.</span></span> <span data-ttu-id="cbd5c-163">이는 사용자 정의 트리거 본문에서 `sp_check_for_sync_trigger` 프로시저를 호출하여 수행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-163">This is accomplished by calling the procedure `sp_check_for_sync_trigger` in the body of the user-defined trigger.</span></span> <span data-ttu-id="cbd5c-164">자세한 내용은 [sp_check_for_sync_trigger&#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-check-for-sync-trigger-transact-sql)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-164">For more information, see [sp_check_for_sync_trigger &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-check-for-sync-trigger-transact-sql).</span></span>  
  
### <a name="immediate-updating"></a><span data-ttu-id="cbd5c-165">즉시 업데이트</span><span class="sxs-lookup"><span data-stu-id="cbd5c-165">Immediate Updating</span></span>  
  
-   <span data-ttu-id="cbd5c-166">즉시 업데이트 구독의 경우에 구독자에서의 변경 내용은 게시자로 전파되고 MS DTC(Microsoft Distributed Transaction Coordinator)를 사용하여 적용됩니다.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-166">For immediate updating subscriptions, changes at the Subscriber are propagated to the Publisher and applied using Microsoft Distributed Transaction Coordinator (MS DTC).</span></span> <span data-ttu-id="cbd5c-167">게시자와 구독자에 MS DTC가 설치되고 구성되어 있는지 확인하십시오.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-167">Ensure that MS DTC is installed and configured at the Publisher and Subscriber.</span></span> <span data-ttu-id="cbd5c-168">자세한 내용은 Windows 설명서를 참조하십시오.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-168">For more information, see the Windows documentation.</span></span>  
  
-   <span data-ttu-id="cbd5c-169">변경 내용을 복제하려면 즉시 업데이트 구독에 사용되는 트리거를 게시자에 연결해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-169">The triggers used by immediate updating subscriptions require a connection to the Publisher to replicate changes.</span></span>  
  
-   <span data-ttu-id="cbd5c-170">게시에서 즉시 업데이트 구독을 허용하고 게시의 아티클에 열 필터가 있는 경우에는 기본값이 없고 Null을 허용하지 않는 열을 필터를 사용하여 제외할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-170">If the publication allows immediate updating subscriptions and an article in the publication has a column filter, you cannot filter out non-nullable columns without defaults.</span></span>  
  
### <a name="queued-updating"></a><span data-ttu-id="cbd5c-171">지연 업데이트</span><span class="sxs-lookup"><span data-stu-id="cbd5c-171">Queued Updating</span></span>  
  
-   <span data-ttu-id="cbd5c-172">병합 게시에 포함된 테이블도 지연 업데이트 구독을 허용하는 트랜잭션 게시의 일부로 게시할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-172">Tables included in a merge publication cannot also be published as part of a transactional publication that allows queued updating subscriptions.</span></span>  
  
-   <span data-ttu-id="cbd5c-173">지연 업데이트를 사용할 경우에는 기본 키가 모든 쿼리에 대해 레코드 로케이터로 사용되기 때문에 기본 키 열에 대해 업데이트를 하지 않는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-173">Updates made to primary key columns are not recommended when using queued updating because the primary key is used as a record locator for all queries.</span></span> <span data-ttu-id="cbd5c-174">충돌 해결 정책이 구독자 내용을 적용하도록 설정된 경우 기본 키는 주의해서 업데이트해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-174">When the conflict resolution policy is set to Subscriber Wins, updates to primary keys should be made with caution.</span></span> <span data-ttu-id="cbd5c-175">게시자 및 구독자 모두에서 기본 키를 업데이트하면 그 결과로 다른 기본 키를 가진 두 개의 행이 생성됩니다.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-175">If updates to the primary key are made at both the Publisher and at the Subscriber, the result will be two rows with different primary keys.</span></span>  
  
-   <span data-ttu-id="cbd5c-176">데이터 형식이 `SQL_VARIANT`인 열의 경우: 데이터를 구독자에서 삽입하거나 업데이트하면 해당 데이터가 구독자에서 큐로 복사될 때 큐 판독기 에이전트에 의해 다음과 같은 방식으로 매핑됩니다.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-176">For columns of data type `SQL_VARIANT`: when data is inserted or updated at the Subscriber, it is mapped in the following way by the Queue Reader Agent when it is copied from the Subscriber to the queue:</span></span>  
  
    -   <span data-ttu-id="cbd5c-177">`BIGINT`, `DECIMAL`, `NUMERIC`, `MONEY` 및 `SMALLMONEY`는 `NUMERIC`으로 매핑됩니다.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-177">`BIGINT`, `DECIMAL`, `NUMERIC`, `MONEY`, and `SMALLMONEY` are mapped to `NUMERIC`.</span></span>  
  
    -   <span data-ttu-id="cbd5c-178">`BINARY` 및 `VARBINARY`는 `VARBINARY` 데이터로 매핑됩니다.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-178">`BINARY` and `VARBINARY` are mapped to `VARBINARY` data.</span></span>  
  
### <a name="conflict-detection-and-resolution"></a><span data-ttu-id="cbd5c-179">충돌 감지 및 해결</span><span class="sxs-lookup"><span data-stu-id="cbd5c-179">Conflict Detection and Resolution</span></span>  
  
-   <span data-ttu-id="cbd5c-180">"구독자 내용 적용" 충돌 정책을 사용하는 경우: 기본 키 열에 대한 업데이트에 대해서는 충돌 해결이 지원되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-180">For the Subscriber Wins conflict policy: conflict resolution is not supported for updates to primary key columns.</span></span>  
  
-   <span data-ttu-id="cbd5c-181">FOREIGN KEY 제약 조건 오류로 인한 충돌은 복제로 해결되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-181">Conflicts due to foreign key constraint failures are not resolved by replication:</span></span>  
  
    -   <span data-ttu-id="cbd5c-182">충돌이 예상되지 않고 데이터가 제대로 분할된 경우(구독자가 같은 행을 업데이트하지 않음)에는 게시자와 구독자에서 FOREIGN KEY 제약 조건을 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-182">If conflicts are not expected and data is well partitioned (Subscribers do not update the same rows), you can use foreign key constraints on the Publisher and Subscribers.</span></span>  
  
    -   <span data-ttu-id="cbd5c-183">충돌이 예상되는 경우에는 "구독자 내용 적용" 충돌 해결 사용 시 게시자나 구독자에서 외래 키 제약 조건을 사용해서는 안 되며 "게시자 내용 적용" 충돌 해결 사용 시 구독자에서 외래 키 제약 조건을 사용해서는 안 됩니다.</span><span class="sxs-lookup"><span data-stu-id="cbd5c-183">If conflicts are expected: you should not use foreign key constraints at the Publisher or Subscriber if you use "Subscriber wins" conflict resolution; you should not use foreign key constraints at the Subscriber if you use "Publisher wins" conflict resolution.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="cbd5c-184">참고 항목</span><span class="sxs-lookup"><span data-stu-id="cbd5c-184">See Also</span></span>  
 <span data-ttu-id="cbd5c-185">[Peer-to-Peer Transactional Replication](peer-to-peer-transactional-replication.md) </span><span class="sxs-lookup"><span data-stu-id="cbd5c-185">[Peer-to-Peer Transactional Replication](peer-to-peer-transactional-replication.md) </span></span>  
 <span data-ttu-id="cbd5c-186">[트랜잭션 복제](transactional-replication.md) </span><span class="sxs-lookup"><span data-stu-id="cbd5c-186">[Transactional Replication](transactional-replication.md) </span></span>  
 <span data-ttu-id="cbd5c-187">[데이터 및 데이터베이스 개체 게시](../publish/publish-data-and-database-objects.md) </span><span class="sxs-lookup"><span data-stu-id="cbd5c-187">[Publish Data and Database Objects](../publish/publish-data-and-database-objects.md) </span></span>  
 [<span data-ttu-id="cbd5c-188">게시 구독</span><span class="sxs-lookup"><span data-stu-id="cbd5c-188">Subscribe to Publications</span></span>](../subscribe-to-publications.md)  
  
  
