---
title: 스키마 변경 내용을 반영하기 위해 사용자 지정 트랜잭션 프로시저 다시 생성 | Microsoft 문서
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: replication
ms.topic: conceptual
helpviewer_keywords:
- custom procedures [SQL Server replication]
- transactional replication, replicating schema changes
- schemas [SQL Server replication], replicating changes
ms.assetid: ccf68a13-e748-4455-8168-90e6d2868098
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 7b41b5309816e037ce3619e880b796e0653c7506
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87738188"
---
# <a name="regenerate-custom-transactional-procedures-to-reflect-schema-changes"></a><span data-ttu-id="7f47e-102">스키마 변경 내용을 반영하기 위해 사용자 지정 트랜잭션 프로시저 다시 생성</span><span class="sxs-lookup"><span data-stu-id="7f47e-102">Regenerate Custom Transactional Procedures to Reflect Schema Changes</span></span>
  <span data-ttu-id="7f47e-103">기본적으로 트랜잭션 복제는 게시의 각 테이블 아티클에 대해 내부 프로시저로 생성된 저장 프로시저를 통해 구독자에서 모든 데이터 변경 내용을 적용합니다.</span><span class="sxs-lookup"><span data-stu-id="7f47e-103">By default transactional replication makes all data changes at Subscribers through stored procedures that are generated by internal procedures for each table article in the publication.</span></span> <span data-ttu-id="7f47e-104">3개의 프로시저(삽입, 업데이트 및 삭제에 대해 각각 하나씩)가 구독자에 복사되고 삽입, 업데이트 또는 삭제가 구독자에 복제되면 실행됩니다.</span><span class="sxs-lookup"><span data-stu-id="7f47e-104">The three procedures (one each for inserts, updates, and deletes) are copied to the Subscriber and execute when an insert, update, or delete is replicated to the Subscriber.</span></span> <span data-ttu-id="7f47e-105">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 게시자의 테이블에서 스키마를 변경하면 복제는 새 프로시저가 새 스키마와 일치하도록 동일한 내부 스크립팅 프로시저 집합을 호출하여 이러한 프로시저를 자동으로 다시 생성합니다. Oracle 게시자의 경우 스키마 변경 내용의 복제는 지원되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="7f47e-105">When a schema change is made to a table on a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Publisher, replication regenerates these procedures automatically by calling the same set of internal scripting procedures so that the new procedures match the new schema (replication of schema changes is not supported for Oracle Publishers).</span></span>  
  
 <span data-ttu-id="7f47e-106">또한 사용자 지정 프로시저를 지정하여 기본 프로시저 중 하나 이상을 바꿀 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="7f47e-106">It is also possible to specify custom procedures to replace one or more of the default procedures.</span></span> <span data-ttu-id="7f47e-107">스키마 변경으로 인해 프로시저가 영향을 받는 경우에는 사용자 지정 프로시저를 변경해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="7f47e-107">The custom procedures should be changed if the schema change will affect the procedure.</span></span> <span data-ttu-id="7f47e-108">예를 들어 프로시저가 스키마 변경에서 삭제된 열을 참조하는 경우 해당 열에 대한 참조를 프로시저에서 제거해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="7f47e-108">For example, if a procedure references a column that is dropped in a schema change, references to the column should be removed from the procedure.</span></span> <span data-ttu-id="7f47e-109">복제가 새 사용자 지정 프로시저를 구독자에 전파하는 방법에는 두 가지가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="7f47e-109">There are two ways for replication to propagate a new custom procedure to Subscribers:</span></span>  
  
-   <span data-ttu-id="7f47e-110">첫 번째 옵션은 사용자 지정 스크립팅 프로시저를 사용하여 복제에서 사용하는 기본값을 바꾸는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="7f47e-110">The first option is to use a custom scripting procedure to replace the defaults used by replication:</span></span>  
  
    1.  <span data-ttu-id="7f47e-111">[Transact-sql&#41;&#40;sp_addarticle ](/sql/relational-databases/system-stored-procedures/sp-addarticle-transact-sql)을 실행할 때 **@schema_option** 0x02 비트가 **true**인지 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="7f47e-111">When executing [sp_addarticle &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addarticle-transact-sql), ensure the **@schema_option** 0x02 bit is to **true**.</span></span>  
  
    2.  <span data-ttu-id="7f47e-112">[Transact-sql&#41;&#40;sp_register_custom_scripting](/sql/relational-databases/system-stored-procedures/sp-register-custom-scripting-transact-sql) 을 실행 하 고 매개 변수에 대해 ' insert ', ' update ' 또는 ' delete ' 값을 지정 하 고 **@type** 매개 변수에 대 한 사용자 지정 스크립팅 프로시저의 이름을 지정 합니다 **@value** .</span><span class="sxs-lookup"><span data-stu-id="7f47e-112">Execute [sp_register_custom_scripting &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-register-custom-scripting-transact-sql) and specify a value of 'insert', 'update', or 'delete' for the parameter **@type** and the name of the custom scripting procedure for the parameter **@value**.</span></span>  
  
     <span data-ttu-id="7f47e-113">다음에 스키마를 변경하면 복제는 이 저장 프로시저를 호출하여 사용자가 새로 정의한 사용자 지정 저장 프로시저에 대한 정의를 스크립팅한 다음 프로시저를 각 구독자로 전파합니다.</span><span class="sxs-lookup"><span data-stu-id="7f47e-113">The next time a schema change is made, replication calls this stored procedure to script out the definition for the new user defined custom stored procedure, and then propagates the procedure to each Subscriber.</span></span>  
  
-   <span data-ttu-id="7f47e-114">두 번째 옵션은 새 사용자 지정 프로시저 정의를 포함하는 스크립트를 사용하는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="7f47e-114">The second option is to use a script that contains a new custom procedure definition:</span></span>  
  
    1.  <span data-ttu-id="7f47e-115">[Transact-sql&#41;&#40;sp_addarticle ](/sql/relational-databases/system-stored-procedures/sp-addarticle-transact-sql)를 실행 하는 경우 복제는 **@schema_option** 구독자에서 사용자 지정 프로시저를 자동으로 생성 하지 않도록 0x02 비트를 **false** 로 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="7f47e-115">When executing [sp_addarticle &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-addarticle-transact-sql), set the **@schema_option** 0x02 bit to **false** so replication does not automatically generate custom procedures at the Subscriber.</span></span>  
  
    2.  <span data-ttu-id="7f47e-116">각 스키마 변경 전에 새 스크립트 파일을 만들고 [sp_register_custom_scripting&#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-register-custom-scripting-transact-sql)을 실행하여 이 스크립트를 복제에 등록합니다.</span><span class="sxs-lookup"><span data-stu-id="7f47e-116">Before each schema change, create a new script file and register the script with replication by executing [sp_register_custom_scripting &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-register-custom-scripting-transact-sql).</span></span> <span data-ttu-id="7f47e-117">매개 변수의 값으로 ' custom_script '을 지정 **@type** 하 고 매개 변수에 대해 게시자의 스크립트 경로를 지정 **@value** 합니다.</span><span class="sxs-lookup"><span data-stu-id="7f47e-117">Specify a value of 'custom_script' for the parameter **@type** and the path to the script on the Publisher for the parameter **@value**.</span></span>  
  
     <span data-ttu-id="7f47e-118">다음에 관련 스키마를 변경하면 이 스크립트는 동일한 트랜잭션 내 각 구독자에서 DDL 명령으로 실행됩니다.</span><span class="sxs-lookup"><span data-stu-id="7f47e-118">The next time a relevant schema change is made, this script executes on each Subscriber within the same transaction as the DDL command.</span></span> <span data-ttu-id="7f47e-119">스키마를 변경한 다음에는 스크립트 등록이 취소됩니다.</span><span class="sxs-lookup"><span data-stu-id="7f47e-119">After the schema change is made, the script is unregistered.</span></span> <span data-ttu-id="7f47e-120">후속 스키마 변경 이후에 스크립트를 실행하려면 해당 스크립트를 다시 등록해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="7f47e-120">You must re-register the script to have it executed after a subsequent schema change.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="7f47e-121">참고 항목</span><span class="sxs-lookup"><span data-stu-id="7f47e-121">See Also</span></span>  
 <span data-ttu-id="7f47e-122">[트랜잭션 아티클에 대한 변경 내용을 전파하는 방법 지정](transactional-articles-specify-how-changes-are-propagated.md) </span><span class="sxs-lookup"><span data-stu-id="7f47e-122">[Specify How Changes Are Propagated for Transactional Articles](transactional-articles-specify-how-changes-are-propagated.md) </span></span>  
 [<span data-ttu-id="7f47e-123">게시 데이터베이스의 스키마 변경</span><span class="sxs-lookup"><span data-stu-id="7f47e-123">Make Schema Changes on Publication Databases</span></span>](../publish/make-schema-changes-on-publication-databases.md)  
  
  
