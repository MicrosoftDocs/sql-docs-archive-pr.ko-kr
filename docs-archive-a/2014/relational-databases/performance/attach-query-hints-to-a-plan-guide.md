---
title: 계획 지침에 쿼리 힌트 연결 | Microsoft 문서
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: performance
ms.topic: conceptual
ms.assetid: 2131f796-6359-4f9e-9047-da0b3d4dedaf
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 074c69ffefd2b5a7b2ef445f941f97b7130b0732
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87652786"
---
# <a name="attach-query-hints-to-a-plan-guide"></a><span data-ttu-id="46bb2-102">계획 지침에 쿼리 힌트 연결</span><span class="sxs-lookup"><span data-stu-id="46bb2-102">Attach Query Hints to a Plan Guide</span></span>
  <span data-ttu-id="46bb2-103">계획 지침에 모든 올바른 쿼리 힌트 조합을 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="46bb2-103">Any combination of valid query hints can be used in a plan guide.</span></span> <span data-ttu-id="46bb2-104">계획 지침이 쿼리와 일치하면 컴파일 및 최적화하기 전에 계획 지침의 힌트 절에 지정된 OPTION 절이 쿼리에 추가됩니다.</span><span class="sxs-lookup"><span data-stu-id="46bb2-104">When a plan guide matches a query, the OPTION clause specified in the hints clause of a plan guide is added to the query before it compiles and optimizes.</span></span> <span data-ttu-id="46bb2-105">계획 지침에 일치하는 쿼리에 이미 OPTION 절이 있으면 계획 지침에 지정된 쿼리 힌트가 쿼리에서 이를 대체합니다.</span><span class="sxs-lookup"><span data-stu-id="46bb2-105">If a query that is matched to a plan guide already has an OPTION clause, the query hints specified in the plan guide replace those in the query.</span></span> <span data-ttu-id="46bb2-106">그러나 이미 OPTION 절이 있는 쿼리에 계획 지침을 일치시키려면 해당 쿼리 텍스트를 지정할 때 sp_create_plan_guide 문이 쿼리의 OPTION 절을 포함해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="46bb2-106">However, for a plan guide to match a query that already has an OPTION clause, you must include the OPTION clause of the query when you specify the text of the query to match in the sp_create_plan_guide statement.</span></span> <span data-ttu-id="46bb2-107">계획 지침에 지정한 힌트로 이미 쿼리에 있는 힌트를 대체하는 대신 계획 지침에 지정한 힌트를 이미 쿼리에 있는 힌트에 추가하려면 원래 힌트와 추가 힌트를 모두 계획 지침의 OPTION 절에 지정해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="46bb2-107">If you want the hints specified in the plan guide to be added to the hints that already exist on the query, instead of replacing them, you must specify both the original hints and the additional hints in the OPTION clause of the plan guide.</span></span>  
  
> [!CAUTION]  
>  <span data-ttu-id="46bb2-108">쿼리 힌트를 오용하는 계획 지침을 사용하면 컴파일, 실행 또는 성능 문제가 발생할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="46bb2-108">Plan guides that misuse query hints can cause compilation, execution, or performance problems.</span></span> <span data-ttu-id="46bb2-109">계획 지침은 숙련된 개발자와 데이터베이스 관리자만 사용해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="46bb2-109">Plan guides should be used only by experienced developers and database administrators.</span></span>  
  
## <a name="common-query-hints-used-in-plan-guides"></a><span data-ttu-id="46bb2-110">계획 지침에 사용되는 일반적인 쿼리 힌트</span><span class="sxs-lookup"><span data-stu-id="46bb2-110">Common Query Hints Used in Plan Guides</span></span>  
 <span data-ttu-id="46bb2-111">계획 지침을 사용할 경우 도움이 되는 쿼리는 일반적으로 매개 변수 기반이며 매개 변수 값이 최악의 시나리오나 가장 대표적인 시나리오를 나타내지 않는 캐시된 쿼리 계획을 사용하므로 성능이 좋지 않을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="46bb2-111">Queries that can benefit from plan guides are generally parameter-based, and may be performing poorly because they use cached query plans whose parameter values do not represent a worst-case or most representative scenario.</span></span> <span data-ttu-id="46bb2-112">OPTIMIZE FOR 및 RECOMPILE 쿼리 힌트를 사용하면 이러한 문제를 해결할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="46bb2-112">The OPTIMIZE FOR and RECOMPILE query hints can be used to address this problem.</span></span> <span data-ttu-id="46bb2-113">OPTIMIZE FOR는 쿼리가 최적화될 때 매개 변수에 특정 값을 사용하도록 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 에 지시합니다.</span><span class="sxs-lookup"><span data-stu-id="46bb2-113">OPTIMIZE FOR instructs [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] to use a particular value for a parameter when the query is optimized.</span></span> <span data-ttu-id="46bb2-114">RECOMPILE은 실행 후 쿼리 계획을 삭제하도록 서버에 지시하여 다음 번에 같은 쿼리를 실행할 때 쿼리 최적화 프로그램이 새로운 쿼리 계획을 다시 컴파일하도록 합니다.</span><span class="sxs-lookup"><span data-stu-id="46bb2-114">RECOMPILE instructs the server to discard a query plan after execution, forcing the query optimizer to recompile a new query plan the next time that the same query is executed.</span></span> <span data-ttu-id="46bb2-115">예제를 보려면 [계획 지침](plan-guides.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="46bb2-115">For an example, see [Plan Guides](plan-guides.md).</span></span>  
  
 <span data-ttu-id="46bb2-116">또한 INDEX, FORCESCAN 및 FORCESEEK 테이블 힌트를 쿼리 힌트로 지정할 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="46bb2-116">In addition, you can specify the table hints INDEX, FORCESCAN, and FORCESEEK as query hints.</span></span> <span data-ttu-id="46bb2-117">쿼리 힌트로 지정할 경우 이러한 힌트는 인라인 테이블이나 뷰 힌트처럼 동작합니다.</span><span class="sxs-lookup"><span data-stu-id="46bb2-117">When specified as query hints, these hints behave like an inline table or view hint.</span></span> <span data-ttu-id="46bb2-118">INDEX 힌트는 쿼리 최적화 프로그램이 지정한 인덱스만 사용하여 참조된 테이블이나 뷰에 있는 데이터에 액세스하도록 합니다.</span><span class="sxs-lookup"><span data-stu-id="46bb2-118">The INDEX hint forces the query optimizer to use only the specified indexes to access the data in the referenced table or view.</span></span> <span data-ttu-id="46bb2-119">FORCESEEK 힌트는 최적화 프로그램이 Index Seek 연산만 사용하여 참조된 테이블이나 뷰에 있는 데이터에 액세스하도록 합니다.</span><span class="sxs-lookup"><span data-stu-id="46bb2-119">The FORCESEEK hint forces the optimizer to use only an index seek operation to access the data in the referenced table or view.</span></span> <span data-ttu-id="46bb2-120">이러한 힌트는 추가 계획 지침 기능을 제공하며 계획 지침을 사용하는 쿼리의 최적화에 보다 많은 영향을 줄 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="46bb2-120">These hints provide additional plan guide functionality and allow you to have more influence over the optimization of queries that use the plan guide.</span></span>  
  
  
