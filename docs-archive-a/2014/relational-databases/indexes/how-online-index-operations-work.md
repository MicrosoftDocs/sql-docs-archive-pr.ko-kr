---
title: 온라인 인덱스 작동 방식 | Microsoft 문서
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: table-view-index
ms.topic: conceptual
helpviewer_keywords:
- online index operations
- source indexes [SQL Server]
- preexisting indexes [SQL Server]
- target indexes [SQL Server]
- temporary mapping index [SQL Server]
- index temporary mappings [SQL Server]
ms.assetid: eef0c9d1-790d-46e4-a758-d0bf6742e6ae
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 9b74690c9dfb980787087899200ffb45c2c4b6b6
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87660558"
---
# <a name="how-online-index-operations-work"></a><span data-ttu-id="99f13-102">온라인 인덱스 작동 방식</span><span class="sxs-lookup"><span data-stu-id="99f13-102">How Online Index Operations Work</span></span>
  <span data-ttu-id="99f13-103">이 항목에서는 온라인 인덱스 작업 중에 존재하는 구조에 대해 설명하고 이러한 구조와 관련된 작업을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="99f13-103">This topic defines the structures that exist during an online index operation and shows the activities associated with these structures.</span></span>  
  
## <a name="online-index-structures"></a><span data-ttu-id="99f13-104">온라인 인덱스 구조</span><span class="sxs-lookup"><span data-stu-id="99f13-104">Online Index Structures</span></span>  
 <span data-ttu-id="99f13-105">인덱스 DDL(데이터 정의 언어) 작업 중에 동시 사용자 작업이 가능하도록 하려면 온라인 인덱스 작업 중에 원본 및 기존 인덱스, 대상 및 임시 매핑 인덱스(힙을 다시 작성하거나 클러스터형 인덱스를 온라인으로 삭제하는 경우) 구조를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="99f13-105">To allow for concurrent user activity during an index data definition language (DDL) operation, the following structures are used during the online index operation: source and preexisting indexes, target, and for rebuilding a heap or dropping a clustered index online, a temporary mapping index.</span></span>  
  
-   <span data-ttu-id="99f13-106">**원본 및 기존 인덱스**</span><span class="sxs-lookup"><span data-stu-id="99f13-106">**Source and preexisting indexes**</span></span>  
  
     <span data-ttu-id="99f13-107">원본은 원래 테이블이거나 클러스터형 인덱스 데이터입니다.</span><span class="sxs-lookup"><span data-stu-id="99f13-107">The source is the original table or clustered index data.</span></span> <span data-ttu-id="99f13-108">기존 인덱스는 원본 구조와 관련된 모든 비클러스터형 인덱스입니다.</span><span class="sxs-lookup"><span data-stu-id="99f13-108">Preexisting indexes are any nonclustered indexes that are associated with the source structure.</span></span> <span data-ttu-id="99f13-109">예를 들어 온라인 인덱스 작업이 네 개의 관련 비클러스터형 인덱스가 있는 클러스터형 인덱스를 재구성하는 것이라면 원본은 기존 클러스터형 인덱스이고 기존 인덱스는 비클러스터형 인덱스입니다.</span><span class="sxs-lookup"><span data-stu-id="99f13-109">For example, if the online index operation is rebuilding a clustered index that has four associated nonclustered indexes, the source is the existing clustered index and the preexisting indexes are the nonclustered indexes.</span></span>  
  
     <span data-ttu-id="99f13-110">기존 인덱스는 여러 사용자의 동시 선택, 삽입, 업데이트 및 삭제 작업에 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="99f13-110">The preexisting indexes are available to concurrent users for select, insert, update, and delete operations.</span></span> <span data-ttu-id="99f13-111">여기에는 대량 삽입(지원되지만 권장하지 않음)과 트리거 및 참조 무결성 제약 조건에 의한 암시적 업데이트가 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="99f13-111">This includes bulk inserts (supported but not recommended) and implicit updates by triggers and referential integrity constraints.</span></span> <span data-ttu-id="99f13-112">쿼리와 검색에 모든 기존 인덱스를 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="99f13-112">All preexisting indexes are available for queries and searches.</span></span> <span data-ttu-id="99f13-113">즉, 기존 인덱스를 쿼리 최적화 프로그램에서 선택할 수 있으며 필요한 경우 인덱스 힌트에 지정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="99f13-113">This means they may be selected by the query optimizer and, if necessary, specified in index hints.</span></span>  
  
-   <span data-ttu-id="99f13-114">**대상**</span><span class="sxs-lookup"><span data-stu-id="99f13-114">**Target**</span></span>  
  
     <span data-ttu-id="99f13-115">대상은 만들거나 다시 작성하는 새 인덱스(또는 힙)이거나 새 인덱스 집합입니다.</span><span class="sxs-lookup"><span data-stu-id="99f13-115">The target or targets is the new index (or heap) or a set of new indexes that is being created or rebuilt.</span></span> <span data-ttu-id="99f13-116">[!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] 에서는 인덱스 작업을 수행하는 동안 원본에 대한 사용자 삽입, 업데이트 및 삭제 작업을 대상에 적용합니다.</span><span class="sxs-lookup"><span data-stu-id="99f13-116">User insert, update, and delete operations to the source are applied by the [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)] to the target during the index operation.</span></span> <span data-ttu-id="99f13-117">예를 들어 온라인 인덱스 작업이 클러스터형 인덱스를 다시 작성하는 것이라면 대상은 다시 작성되는 클러스터형 인덱스입니다. [!INCLUDE[ssDE](../../includes/ssde-md.md)] 에서는 클러스터형 인덱스를 다시 작성할 때 비클러스터형 인덱스를 다시 작성하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="99f13-117">For example, if the online index operation is rebuilding a clustered index, the target is the rebuilt clustered index; the [!INCLUDE[ssDE](../../includes/ssde-md.md)] does not rebuild nonclustered indexes when a clustered index is rebuilt.</span></span>  
  
     <span data-ttu-id="99f13-118">대상 인덱스는 인덱스 작업이 커밋될 때까지 SELECT 문을 처리하는 동안 검색되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="99f13-118">The target index is not searched while processing SELECT statements until the index operation is committed.</span></span> <span data-ttu-id="99f13-119">내부적으로 인덱스가 쓰기 전용으로 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="99f13-119">Internally, the index is marked as write-only.</span></span>  
  
-   <span data-ttu-id="99f13-120">**임시 매핑 인덱스**</span><span class="sxs-lookup"><span data-stu-id="99f13-120">**Temporary mapping index**</span></span>  
  
     <span data-ttu-id="99f13-121">클러스터형 인덱스를 만들거나 삭제하거나 다시 작성하는 온라인 인덱스 작업에는 임시 매핑 인덱스도 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="99f13-121">Online index operations that create, drop, or rebuild a clustered index also require a temporary mapping index.</span></span> <span data-ttu-id="99f13-122">이러한 임시 인덱스는 동시 트랜잭션이 기본 테이블의 행이 업데이트되거나 삭제될 때 작성되는 새 인덱스에서 삭제할 레코드를 결정하는 데 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="99f13-122">This temporary index is used by concurrent transactions to determine which records to delete in the new indexes that are being built when rows in the underlying table are updated or deleted.</span></span> <span data-ttu-id="99f13-123">이러한 비클러스터형 인덱스는 새 클러스터형 인덱스(또는 힙)와 같은 단계에서 만들어지므로 별도의 정렬 작업이 필요 없습니다.</span><span class="sxs-lookup"><span data-stu-id="99f13-123">This nonclustered index is created in the same step as the new clustered index (or heap) and does not require a separate sort operation.</span></span> <span data-ttu-id="99f13-124">동시 트랜잭션의 모든 삽입, 업데이트 및 삭제 작업에서도 임시 매핑 인덱스가 유지됩니다.</span><span class="sxs-lookup"><span data-stu-id="99f13-124">Concurrent transactions also maintain the temporary mapping index in all their insert, update, and delete operations.</span></span>  
  
## <a name="online-index-activities"></a><span data-ttu-id="99f13-125">온라인 인덱스 작업</span><span class="sxs-lookup"><span data-stu-id="99f13-125">Online Index Activities</span></span>  
 <span data-ttu-id="99f13-126">비클러스터형 테이블(힙)에서 클러스터형 인덱스를 만드는 것과 같은 단순 온라인 인덱스 작업 중에는 원본 및 대상이 준비, 작성, 최종의 세 단계를 거치게 됩니다.</span><span class="sxs-lookup"><span data-stu-id="99f13-126">During a simple online index operation, such as creating a clustered index on a nonindexed table (heap), the source and target go through three phases: preparation, build, and final.</span></span>  
  
 <span data-ttu-id="99f13-127">다음 그림에서는 온라인 상태에서 초기 클러스터형 인덱스를 만드는 과정을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="99f13-127">The following illustration shows the process for creating an initial clustered index online.</span></span> <span data-ttu-id="99f13-128">원본 개체(힙)에는 다른 인덱스가 없습니다.</span><span class="sxs-lookup"><span data-stu-id="99f13-128">The source object (the heap) has no other indexes.</span></span> <span data-ttu-id="99f13-129">그림에는 원본 및 대상 구조와 관련된 각 단계의 작업과 동시 사용자 선택, 삽입, 업데이트 및 삭제 작업이 표시되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="99f13-129">The source and target structure activities are shown for each phase; concurrent user select, insert, update, and delete operations are also shown.</span></span> <span data-ttu-id="99f13-130">준비, 작성 및 최종 단계는 각 단계에 사용되는 잠금 모드와 함께 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="99f13-130">The preparation, build, and final phases are indicated together with the lock modes used in each phase.</span></span>  
  
 <span data-ttu-id="99f13-131">![온라인 인덱스 작업 중 수행되는 활동](../../database-engine/media/online-index.gif "온라인 인덱스 작업 중 수행되는 활동")</span><span class="sxs-lookup"><span data-stu-id="99f13-131">![Activities performed during online index operation](../../database-engine/media/online-index.gif "Activities performed during online index operation")</span></span>  
  
## <a name="source-structure-activities"></a><span data-ttu-id="99f13-132">원본 구조 작업</span><span class="sxs-lookup"><span data-stu-id="99f13-132">Source Structure Activities</span></span>  
 <span data-ttu-id="99f13-133">다음 표에서는 인덱스 작업의 각 단계에서 원본 구조와 관련된 작업과 해당 잠금 전략에 대해 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="99f13-133">The following table lists the activities involving the source structures during each phase of the index operation and the corresponding locking strategy.</span></span>  
  
|<span data-ttu-id="99f13-134">단계</span><span class="sxs-lookup"><span data-stu-id="99f13-134">Phase</span></span>|<span data-ttu-id="99f13-135">원본 작업</span><span class="sxs-lookup"><span data-stu-id="99f13-135">Source activity</span></span>|<span data-ttu-id="99f13-136">원본 잠금</span><span class="sxs-lookup"><span data-stu-id="99f13-136">Source locks</span></span>|  
|-----------|---------------------|------------------|  
|<span data-ttu-id="99f13-137">준비</span><span class="sxs-lookup"><span data-stu-id="99f13-137">Preparation</span></span><br /><br /> <span data-ttu-id="99f13-138">매우 짧은 단계</span><span class="sxs-lookup"><span data-stu-id="99f13-138">Very short phase</span></span>|<span data-ttu-id="99f13-139">비어 있는 새 인덱스 구조를 만들 시스템 메타데이터 준비</span><span class="sxs-lookup"><span data-stu-id="99f13-139">System metadata preparation to create the new empty index structure.</span></span><br /><br /> <span data-ttu-id="99f13-140">테이블 스냅샷이 정의됩니다.</span><span class="sxs-lookup"><span data-stu-id="99f13-140">A snapshot of the table is defined.</span></span> <span data-ttu-id="99f13-141">즉, 트랜잭션 수준의 읽기 일관성을 제공하기 위해 행 버전 관리가 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="99f13-141">That is, row versioning is used to provide transaction-level read consistency.</span></span><br /><br /> <span data-ttu-id="99f13-142">매우 짧은 기간 동안 원본에 대한 동시 사용자 쓰기 작업이 차단됩니다.</span><span class="sxs-lookup"><span data-stu-id="99f13-142">Concurrent user write operations on the source are blocked for a very short period.</span></span><br /><br /> <span data-ttu-id="99f13-143">여러 개의 비클러스터형 인덱스 만들기를 제외한 동시 DDL 작업이 허용되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="99f13-143">No concurrent DDL operations are allowed except creating multiple nonclustered indexes.</span></span>|<span data-ttu-id="99f13-144">테이블에 대한 S(공유)\*</span><span class="sxs-lookup"><span data-stu-id="99f13-144">S (Shared) on the table\*</span></span><br /><br /> <span data-ttu-id="99f13-145">IS(내재된 공유)</span><span class="sxs-lookup"><span data-stu-id="99f13-145">IS (Intent Shared)</span></span><br /><br /> <span data-ttu-id="99f13-146">INDEX_BUILD_INTERNAL_RESOURCE\*\*</span><span class="sxs-lookup"><span data-stu-id="99f13-146">INDEX_BUILD_INTERNAL_RESOURCE\*\*</span></span>|  
|<span data-ttu-id="99f13-147">빌드</span><span class="sxs-lookup"><span data-stu-id="99f13-147">Build</span></span><br /><br /> <span data-ttu-id="99f13-148">주 단계</span><span class="sxs-lookup"><span data-stu-id="99f13-148">Main phase</span></span>|<span data-ttu-id="99f13-149">대량 로드 작업의 대상으로 데이터가 검색, 정렬, 병합 및 삽입됩니다.</span><span class="sxs-lookup"><span data-stu-id="99f13-149">The data is scanned, sorted, merged, and inserted into the target in bulk load operations.</span></span><br /><br /> <span data-ttu-id="99f13-150">동시 사용자 선택, 삽입, 업데이트 및 삭제 작업이 기존 인덱스와 작성된 모든 새 인덱스에 적용됩니다.</span><span class="sxs-lookup"><span data-stu-id="99f13-150">Concurrent user select, insert, update, and delete operations are applied to both the preexisting indexes and any new indexes being built.</span></span>|<span data-ttu-id="99f13-151">IS</span><span class="sxs-lookup"><span data-stu-id="99f13-151">IS</span></span><br /><br /> <span data-ttu-id="99f13-152">INDEX_BUILD_INTERNAL_RESOURCE\*\*</span><span class="sxs-lookup"><span data-stu-id="99f13-152">INDEX_BUILD_INTERNAL_RESOURCE\*\*</span></span>|  
|<span data-ttu-id="99f13-153">최종</span><span class="sxs-lookup"><span data-stu-id="99f13-153">Final</span></span><br /><br /> <span data-ttu-id="99f13-154">매우 짧은 단계</span><span class="sxs-lookup"><span data-stu-id="99f13-154">Very short phase</span></span>|<span data-ttu-id="99f13-155">이 단계를 시작하기 전에 커밋되지 않은 모든 업데이트 트랜잭션이 완료되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="99f13-155">All uncommitted update transactions must complete before this phase starts.</span></span> <span data-ttu-id="99f13-156">획득한 잠금에 따라 이 단계가 완료될 때까지 매우 짧은 기간 동안 새로운 사용자 읽기 또는 쓰기 트랜잭션이 모두 차단됩니다.</span><span class="sxs-lookup"><span data-stu-id="99f13-156">Depending on the acquired lock, all new user read or write transactions are blocked for a very short period until this phase is completed.</span></span><br /><br /> <span data-ttu-id="99f13-157">시스템 메타데이터가 업데이트되어 원본이 대상으로 대체됩니다.</span><span class="sxs-lookup"><span data-stu-id="99f13-157">System metadata is updated to replace the source with the target.</span></span><br /><br /> <span data-ttu-id="99f13-158">필요한 경우 원본이 삭제됩니다.</span><span class="sxs-lookup"><span data-stu-id="99f13-158">The source is dropped if it is required.</span></span> <span data-ttu-id="99f13-159">예를 들어 클러스터형 인덱스를 다시 작성하거나 삭제하면 원본이 삭제됩니다.</span><span class="sxs-lookup"><span data-stu-id="99f13-159">For example, after rebuilding or dropping a clustered index.</span></span>|<span data-ttu-id="99f13-160">INDEX_BUILD_INTERNAL_RESOURCE\*\*</span><span class="sxs-lookup"><span data-stu-id="99f13-160">INDEX_BUILD_INTERNAL_RESOURCE\*\*</span></span><br /><br /> <span data-ttu-id="99f13-161">비클러스터형 인덱스를 만드는 경우 테이블에 대한 S\*</span><span class="sxs-lookup"><span data-stu-id="99f13-161">S on the table if creating a nonclustered index.\*</span></span><br /><br /> <span data-ttu-id="99f13-162">원본 구조(인덱스 또는 테이블)가 삭제되는 경우 SCH-M(스키마 수정)\*</span><span class="sxs-lookup"><span data-stu-id="99f13-162">SCH-M (Schema Modification) if any source structure (index or table) is dropped.\*</span></span>|  
  
 <span data-ttu-id="99f13-163">\* 인덱스 작업은 커밋되지 않은 모든 업데이트 트랜잭션이 완료될 때까지 대기한 후 테이블에 대한 S 잠금이나 SCH-M 잠금을 획득합니다.</span><span class="sxs-lookup"><span data-stu-id="99f13-163">\* The index operation will wait for any uncommitted update transactions to complete before acquiring the S lock or SCH-M lock on the table.</span></span>  
  
 <span data-ttu-id="99f13-164">\*\* 리소스 잠금 INDEX_BUILD_INTERNAL_RESOURCE는 인덱스 작업이 진행 중인 동안 원본과 기존 구조에 대한 동시 DDL(데이터 정의 언어) 작업이 실행되지 못하게 합니다.</span><span class="sxs-lookup"><span data-stu-id="99f13-164">\*\* The resource lock INDEX_BUILD_INTERNAL_RESOURCE prevents the execution of concurrent data definition language (DDL) operations on the source and preexisting structures while the index operation is in progress.</span></span> <span data-ttu-id="99f13-165">예를 들어 이 잠금으로 인해 동일한 테이블에 대한 두 인덱스를 동시에 다시 작성할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="99f13-165">For example, this lock prevents concurrent rebuild of two indexes on the same table.</span></span> <span data-ttu-id="99f13-166">이 리소스 잠금은 Sch-M 잠금과 연관되지만 이 리소스 잠금으로 인해 데이터 조작 문이 실행되지 않는 것은 아닙니다.</span><span class="sxs-lookup"><span data-stu-id="99f13-166">Although this resource lock is associated with the Sch-M lock, it does not prevent data manipulation statements.</span></span>  
  
 <span data-ttu-id="99f13-167">위의 표에서는 단일 인덱스를 포함하는 온라인 인덱스 작업의 작성 단계 중에 획득되는 단일 공유(S) 잠금을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="99f13-167">The previous table shows a single Shared (S) lock acquired during the build phase of an online index operation that involves a single index.</span></span> <span data-ttu-id="99f13-168">하나 이상의 비클러스터형 인덱스를 포함하는 테이블에 대한 초기 클러스터형 인덱스를 만드는 경우와 같이 클러스터형 인덱스와 비클러스터형 인덱스를 작성하거나 다시 작성하는 경우에는 먼저 단기 S 잠금 두 개가 획득된 후 장기 IS(내재된 공유) 잠금이 획득됩니다.</span><span class="sxs-lookup"><span data-stu-id="99f13-168">When clustered and nonclustered indexes are built, or rebuilt, in a single online index operation (for example, during the initial clustered index creation on a table that contains one or more nonclustered indexes) two short-term S locks are acquired during the build phase followed by long-term Intent Shared (IS) locks.</span></span> <span data-ttu-id="99f13-169">먼저 클러스터형 인덱스 작성에 대한 S 잠금을 획득하고 클러스터형 인덱스 작성이 완료되면 비클러스터형 인덱스 작성을 위한 두 번째 단기 S 잠금을 획득합니다.</span><span class="sxs-lookup"><span data-stu-id="99f13-169">One S lock is acquired first for the clustered index creation and when creating the clustered index is completed, a second short-term S lock is acquired for creating the nonclustered indexes.</span></span> <span data-ttu-id="99f13-170">비클러스터형 인덱스가 작성된 후 온라인 인덱스 작업의 최종 단계까지 S 잠금이 IS 잠금으로 다운그레이드됩니다.</span><span class="sxs-lookup"><span data-stu-id="99f13-170">After the nonclustered indexes are created, the S lock is downgraded to an IS lock until the final phase of the online index operation.</span></span>  
  
### <a name="target-structure-activities"></a><span data-ttu-id="99f13-171">대상 구조 작업</span><span class="sxs-lookup"><span data-stu-id="99f13-171">Target Structure Activities</span></span>  
 <span data-ttu-id="99f13-172">다음 표에서는 인덱스 작업의 각 단계에서 대상 구조와 관련된 작업과 해당 잠금 전략에 대해 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="99f13-172">The following table lists the activities that involve the target structure during each phase of the index operation and the corresponding locking strategy.</span></span>  
  
|<span data-ttu-id="99f13-173">단계</span><span class="sxs-lookup"><span data-stu-id="99f13-173">Phase</span></span>|<span data-ttu-id="99f13-174">대상 작업</span><span class="sxs-lookup"><span data-stu-id="99f13-174">Target activity</span></span>|<span data-ttu-id="99f13-175">대상 잠금</span><span class="sxs-lookup"><span data-stu-id="99f13-175">Target locks</span></span>|  
|-----------|---------------------|------------------|  
|<span data-ttu-id="99f13-176">준비</span><span class="sxs-lookup"><span data-stu-id="99f13-176">Preparation</span></span>|<span data-ttu-id="99f13-177">새 인덱스가 작성되고 쓰기 전용으로 설정됩니다.</span><span class="sxs-lookup"><span data-stu-id="99f13-177">New index is created and set to write-only.</span></span>|<span data-ttu-id="99f13-178">IS</span><span class="sxs-lookup"><span data-stu-id="99f13-178">IS</span></span>|  
|<span data-ttu-id="99f13-179">빌드</span><span class="sxs-lookup"><span data-stu-id="99f13-179">Build</span></span>|<span data-ttu-id="99f13-180">원본의 데이터가 삽입됩니다.</span><span class="sxs-lookup"><span data-stu-id="99f13-180">Data is inserted from source.</span></span><br /><br /> <span data-ttu-id="99f13-181">원본에 적용된 사용자 수정 사항(삽입, 업데이트, 삭제)이 적용됩니다.</span><span class="sxs-lookup"><span data-stu-id="99f13-181">User modifications (inserts, updates, deletes) applied to the source are applied.</span></span><br /><br /> <span data-ttu-id="99f13-182">사용자는 이 작업을 인식하지 못합니다.</span><span class="sxs-lookup"><span data-stu-id="99f13-182">This activity is transparent to the user.</span></span>|<span data-ttu-id="99f13-183">IS</span><span class="sxs-lookup"><span data-stu-id="99f13-183">IS</span></span>|  
|<span data-ttu-id="99f13-184">최종</span><span class="sxs-lookup"><span data-stu-id="99f13-184">Final</span></span>|<span data-ttu-id="99f13-185">인덱스 메타데이터가 업데이트됩니다.</span><span class="sxs-lookup"><span data-stu-id="99f13-185">Index metadata is updated.</span></span><br /><br /> <span data-ttu-id="99f13-186">인덱스가 읽기/쓰기 상태로 설정됩니다.</span><span class="sxs-lookup"><span data-stu-id="99f13-186">Index is set to read/write status.</span></span>|<span data-ttu-id="99f13-187">S</span><span class="sxs-lookup"><span data-stu-id="99f13-187">S</span></span><br /><br /> <span data-ttu-id="99f13-188">또는</span><span class="sxs-lookup"><span data-stu-id="99f13-188">or</span></span><br /><br /> <span data-ttu-id="99f13-189">SCH-M</span><span class="sxs-lookup"><span data-stu-id="99f13-189">SCH-M</span></span>|  
  
 <span data-ttu-id="99f13-190">인덱스 작업이 완료될 때까지 사용자가 실행한 SELECT 문은 대상에 액세스할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="99f13-190">The target is not accessed by SELECT statements issued by the user until the index operation is completed.</span></span>  
  
 <span data-ttu-id="99f13-191">준비 및 최종 단계가 완료되면 프로시저 캐시에 저장되어 있는 쿼리 및 업데이트 계획이 무효화됩니다.</span><span class="sxs-lookup"><span data-stu-id="99f13-191">After the preparation and final phase is completed, the query and update plans that are stored in the procedure cache are invalidated.</span></span> <span data-ttu-id="99f13-192">이후의 쿼리에서는 새 인덱스를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="99f13-192">Subsequent queries will use the new index.</span></span>  
  
 <span data-ttu-id="99f13-193">온라인 인덱스 작업과 관련된 테이블에 선언되어 있는 커서의 수명은 온라인 인덱스 단계로 제한됩니다.</span><span class="sxs-lookup"><span data-stu-id="99f13-193">The lifetime of a cursor declared on a table that is involved in an online index operation is limited by the online index phases.</span></span> <span data-ttu-id="99f13-194">각 단계에서 업데이트 커서가 무효화됩니다.</span><span class="sxs-lookup"><span data-stu-id="99f13-194">Update cursors are invalidated at each phase.</span></span> <span data-ttu-id="99f13-195">읽기 전용 커서는 최종 단계 이후에만 무효화됩니다.</span><span class="sxs-lookup"><span data-stu-id="99f13-195">Read-only cursors are invalidated only after the final phase.</span></span>  
  
## <a name="related-content"></a><span data-ttu-id="99f13-196">관련 내용</span><span class="sxs-lookup"><span data-stu-id="99f13-196">Related Content</span></span>  
 [<span data-ttu-id="99f13-197">온라인으로 인덱스 작업 수행</span><span class="sxs-lookup"><span data-stu-id="99f13-197">Perform Index Operations Online</span></span>](perform-index-operations-online.md)  
  
 [<span data-ttu-id="99f13-198">온라인 인덱스 작업에 대한 지침</span><span class="sxs-lookup"><span data-stu-id="99f13-198">Guidelines for Online Index Operations</span></span>](guidelines-for-online-index-operations.md)  
  
  
