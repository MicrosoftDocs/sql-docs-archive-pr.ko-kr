---
title: 클라이언트 연결의 SPN(서비스 사용자 이름) 지원 | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: native-client
ms.topic: reference
helpviewer_keywords:
- SQL Server Native Client, SPNs
- ODBC, SPNs
- OLE DB, SPNs
- SPNs [SQL Server]
ms.assetid: 96598c69-ce9a-4090-aacb-d546591e8af7
author: rothja
ms.author: jroth
ms.openlocfilehash: 10a64baa17bd070d9354beaf6ff8c2e460682318
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87647661"
---
# <a name="service-principal-name-spn-support-in-client-connections"></a><span data-ttu-id="35fa1-102">클라이언트 연결의 SPN(서비스 사용자 이름) 지원</span><span class="sxs-lookup"><span data-stu-id="35fa1-102">Service Principal Name (SPN) Support in Client Connections</span></span>
  <span data-ttu-id="35fa1-103">[!INCLUDE[ssKatmai](../../../includes/sskatmai-md.md)]부터는 모든 프로토콜에서 상호 인증을 지원하도록 SPN(서비스 사용자 이름)이 확장되었습니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-103">Beginning with [!INCLUDE[ssKatmai](../../../includes/sskatmai-md.md)], support for service principal names (SPNs) has been extended to enable mutual authentication across all protocols.</span></span> <span data-ttu-id="35fa1-104">이전 버전의 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]에서 SPN은 Active Directory에 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 인스턴스에 대한 기본 SPN이 등록된 경우 TCP를 사용하는 Kerberos에 대해서만 지원되었습니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-104">In previous versions of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], SPNs were only supported for Kerberos over TCP when the default SPN for the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance was registered with Active Directory.</span></span>  
  
 <span data-ttu-id="35fa1-105">SPN은 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 인스턴스가 실행되는 계정을 확인하기 위해 인증 프로토콜에 의해 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-105">SPNs are used by the authentication protocol to determine the account in which a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance runs.</span></span> <span data-ttu-id="35fa1-106">인스턴스 계정이 알려진 경우 Kerberos 인증을 사용하여 클라이언트와 서버에 의한 상호 인증을 제공할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-106">If the instance account is known, Kerberos authentication can be used to provide mutual authentication by the client and server.</span></span> <span data-ttu-id="35fa1-107">인스턴스 계정이 알려지지 않은 경우 서버에 의한 클라이언트 인증만 제공하는 NTLM 인증이 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-107">If the instance account is not known, NTLM authentication, which only provides authentication of the client by the server, is used.</span></span> <span data-ttu-id="35fa1-108">현재 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client는 인스턴스 이름과 네트워크 연결 속성에서 SPN을 파생시켜 인증 조회를 수행합니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-108">Currently, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client performs the authentication lookup, deriving the SPN from the instance name and network connection properties.</span></span> [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="35fa1-109">인스턴스는 시작 시에 SPN 등록을 시도하며 또는 수동으로 등록할 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-109">instances will attempt to register SPNs on startup, or they can be registered manually.</span></span> <span data-ttu-id="35fa1-110">SPN을 등록하려고 시도하는 계정에 액세스 권한이 충분하지 않은 경우 등록은 실패하게 됩니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-110">However, registration will fail if there are insufficient access rights for the account that attempts to register the SPNs.</span></span>  
  
 <span data-ttu-id="35fa1-111">도메인 및 컴퓨터 계정은 Active Directory에 자동으로 등록됩니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-111">Domain and computer accounts are registered automatically in Active Directory.</span></span> <span data-ttu-id="35fa1-112">이러한 계정을 SPN으로 사용할 수 있고 관리자가 직접 자신의 SPN을 정의할 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-112">These can be used as SPNs, or administators can define their own SPNs.</span></span> [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]<span data-ttu-id="35fa1-113">는 클라이언트에서 사용할 SPN을 직접 지정하도록 허용하여 보안 인증의 관리성과 안정성을 더 높여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-113">makes secure authentication more manageable and reliable by allowing clients to directly specify the SPN to use.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="35fa1-114">클라이언트 애플리케이션에서 지정한 SPN은 Windows 통합 보안으로 연결이 설정되는 경우에만 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-114">An SPN specified by a client application is only used when a connection is made with Windows integrated security.</span></span>  
  
> [!TIP]  
>  <span data-ttu-id="35fa1-115">**[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]용 [!INCLUDE[msCoName](../../../includes/msconame-md.md)] Kerberos 구성 관리자**는 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]과의 Kerberos 관련 연결 문제를 해결하는 진단 도구입니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-115">**[!INCLUDE[msCoName](../../../includes/msconame-md.md)] Kerberos Configuration Manager for [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]** is a diagnostic tool that helps troubleshoot Kerberos related connectivity issues with [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="35fa1-116">자세한 내용은 [SQL Server용 Microsoft Kerberos 구성 관리자](https://www.microsoft.com/download/details.aspx?id=39046)를 참조하십시오.</span><span class="sxs-lookup"><span data-stu-id="35fa1-116">For more information, see [Microsoft Kerberos Configuration Manager for SQL Server](https://www.microsoft.com/download/details.aspx?id=39046).</span></span>  
  
> [!TIP]  
>  <span data-ttu-id="35fa1-117">**[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]용 [!INCLUDE[msCoName](../../../includes/msconame-md.md)] Kerberos 구성 관리자**는 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]과의 Kerberos 관련 연결 문제를 해결하는 진단 도구입니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-117">**[!INCLUDE[msCoName](../../../includes/msconame-md.md)] Kerberos Configuration Manager for [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]** is a diagnostic tool that helps troubleshoot Kerberos related connectivity issues with [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="35fa1-118">자세한 내용은 [SQL Server용 Microsoft Kerberos 구성 관리자](https://www.microsoft.com/download/details.aspx?id=39046)를 참조하십시오.</span><span class="sxs-lookup"><span data-stu-id="35fa1-118">For more information, see [Microsoft Kerberos Configuration Manager for SQL Server](https://www.microsoft.com/download/details.aspx?id=39046).</span></span>  
  
 <span data-ttu-id="35fa1-119">Kerberos에 대한 자세한 내용은 다음 문서를 참조하십시오.</span><span class="sxs-lookup"><span data-stu-id="35fa1-119">For more information about Kerberos, see the following articles:</span></span>  
  
-   [<span data-ttu-id="35fa1-120">Windows용 Kerberos 기술 보충 자료</span><span class="sxs-lookup"><span data-stu-id="35fa1-120">Kerberos Technical Supplement for Windows</span></span>](https://go.microsoft.com/fwlink/?LinkId=101449)  
  
-   [<span data-ttu-id="35fa1-121">Microsoft Kerberos</span><span class="sxs-lookup"><span data-stu-id="35fa1-121">Microsoft Kerberos</span></span>](https://go.microsoft.com/fwlink/?LinkID=100758)  
  
## <a name="usage"></a><span data-ttu-id="35fa1-122">사용</span><span class="sxs-lookup"><span data-stu-id="35fa1-122">Usage</span></span>  
 <span data-ttu-id="35fa1-123">다음 표에서는 클라이언트 애플리케이션이 보안 인증을 사용할 수 있는 가장 일반적인 시나리오에 대해 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-123">The following table describes the most common scenarios in which client applications can enable secure authentication.</span></span>  
  
|<span data-ttu-id="35fa1-124">시나리오</span><span class="sxs-lookup"><span data-stu-id="35fa1-124">Scenario</span></span>|<span data-ttu-id="35fa1-125">Description</span><span class="sxs-lookup"><span data-stu-id="35fa1-125">Description</span></span>|  
|--------------|-----------------|  
|<span data-ttu-id="35fa1-126">레거시 애플리케이션이 SPN을 지정하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-126">A legacy application does not specify an SPN.</span></span>|<span data-ttu-id="35fa1-127">이 호환성 시나리오는 이전 버전의 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]용으로 개발된 애플리케이션의 동작에 변화가 없을 것임을 보장합니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-127">This compatibility scenario guarantees that there will be no behavior change for applications developed for previous versions of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="35fa1-128">지정된 SPN이 없으면 해당 애플리케이션은 생성된 SPN에 의존하며, 어떤 인증 방법이 사용되는지 알 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-128">If no SPN is specified, the application relies on generated SPNs and has no knowledge of which authentication method is used.</span></span>|  
|<span data-ttu-id="35fa1-129">현재 버전의 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client를 사용하는 클라이언트 애플리케이션이 연결 문자열의 SPN을 도메인 사용자 또는 컴퓨터 계정으로, 인스턴스별 SPN으로, 또는 사용자 정의 문자열로 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-129">A client application using the current version of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client specifies an SPN in the connection string as a domain user or computer account, as an instance-specific SPN, or as a user-defined string.</span></span>|<span data-ttu-id="35fa1-130"> 공급자, 초기화 또는 연결 문자열에서 `ServerSPN` 키워드를 사용하여 다음을 수행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-130">The `ServerSPN` keyword can be used in a provider, initialization, or connection string to do the following:</span></span><br /><br /> <span data-ttu-id="35fa1-131">-인스턴스에서 연결을 위해 사용 하는 계정을 지정 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 합니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-131">-   Specify the account used by the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance for a connection.</span></span> <span data-ttu-id="35fa1-132">이를 통해 Kerberos 인증에 대한 액세스가 간소화됩니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-132">This simplifies access to Kerberos authentication.</span></span> <span data-ttu-id="35fa1-133">Kerberos KDC(키 배포 센터)가 있고 올바른 계정이 지정된 경우 NTLM보다 Kerberos 인증이 사용될 가능성이 더 높습니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-133">If a Kerberos Key Distribution Center (KDC) is present and the correct account is specified, Kerberos authentication is more likely to be used than NTLM.</span></span> <span data-ttu-id="35fa1-134">KDC는 일반적으로 도메인 컨트롤러와 동일한 컴퓨터에 위치합니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-134">The KDC usually resides on the same computer as the domain controller.</span></span><br /><span data-ttu-id="35fa1-135">-인스턴스에 대 한 서비스 계정을 조회할 SPN을 지정 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 합니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-135">-   Specify an SPN to look up the service account for the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance.</span></span> <span data-ttu-id="35fa1-136">모든 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 인스턴스에 대해 이 용도로 사용할 수 있는 두 개의 기본 SPN이 생성됩니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-136">For every [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance, two default SPNs are generated that can be used for this purpose.</span></span> <span data-ttu-id="35fa1-137">그러나 키가 Active Directory에 있다는 보장은 없으므로 이 경우 Kerberos 인증이 보장되지는 않습니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-137">These keys are not guaranteed to be present in Active Directory, however, so in this situation Kerberos authentication is not guaranteed.</span></span><br /><span data-ttu-id="35fa1-138">-인스턴스의 서비스 계정을 조회 하는 데 사용할 SPN을 지정 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 합니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-138">-   Specify an SPN that will be used to look up the service account for the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance.</span></span> <span data-ttu-id="35fa1-139">이는 서비스 계정에 매핑되는 사용자 정의 문자열일 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-139">This can be any user-defined string that maps to the service account.</span></span> <span data-ttu-id="35fa1-140">이 경우 키는 KDC에 수동으로 등록해야 하며 사용자 정의 SPN에 대한 규칙을 충족해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-140">In this case, the key must be registered manually in the KDC and must satisfy the rules for a user-defined SPN.</span></span><br /><br /> <span data-ttu-id="35fa1-141">`FailoverPartnerSPN` 키워드를 사용하여 장애 조치(Failover) 파트너 서버에 대한 SPN을 지정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-141">The `FailoverPartnerSPN` keyword can be used to specify the SPN for the failover partner server.</span></span> <span data-ttu-id="35fa1-142">계정 및 Active Directory 키 값의 범위는 주 서버에 지정할 수 있는 값과 동일합니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-142">The range of account and Active Directory key values is the same as the values you can specify for the principal server.</span></span>|  
|<span data-ttu-id="35fa1-143">ODBC 애플리케이션이 주 서버 또는 장애 조치 파트너 서버에 대한 연결 특성으로 SPN을 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-143">An ODBC application specifies an SPN as a connection attribute for the principal server or failover partner server.</span></span>|<span data-ttu-id="35fa1-144">`SQL_COPT_SS_SERVER_SPN` 연결 문자열을 사용하여 주 서버 연결에 대한 SPN을 지정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-144">The connection attribute `SQL_COPT_SS_SERVER_SPN` can be used to specify the SPN for a connection to the principal server.</span></span><br /><br /> <span data-ttu-id="35fa1-145">`SQL_COPT_SS_FAILOVER_PARTNER_SPN` 연결 문자열을 사용하여 장애 조치 파트너 서버에 대한 SPN을 지정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-145">The connection attribute `SQL_COPT_SS_FAILOVER_PARTNER_SPN` can be used to specify the SPN for the failover partner server.</span></span>|  
|<span data-ttu-id="35fa1-146">OLE DB 애플리케이션이 주 서버 또는 장애 조치 파트너 서버에 대한 데이터 원본 초기화 속성으로 SPN을 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-146">An OLE DB application specifies an SPN as a data source initialization property for the principal server or for a failover partner server.</span></span>|<span data-ttu-id="35fa1-147">`SSPROP_INIT_SERVER_SPN` 속성 집합의 `DBPROPSET_SQLSERVERDBINIT` 연결 속성을 사용하여 연결에 대한 SPN을 지정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-147">The connection property `SSPROP_INIT_SERVER_SPN` in the `DBPROPSET_SQLSERVERDBINIT` property set can be used to specify the SPN for a connection.</span></span><br /><br /> <span data-ttu-id="35fa1-148">`SSPROP_INIT_FAILOVER_PARTNER_SPN`의 `DBPROPSET_SQLSERVERDBINIT` 연결 속성을 사용하여 장애 조치 파트너 서버에 대한 SPN을 지정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-148">The connection property `SSPROP_INIT_FAILOVER_PARTNER_SPN` in the `DBPROPSET_SQLSERVERDBINIT` can be used to specify the SPN for the failover partner server.</span></span>|  
|<span data-ttu-id="35fa1-149">사용자가 ODBC DSN(데이터 원본 이름)에 서버 또는 장애 조치 파트너 서버에 대한 SPN을 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-149">A user specifies an SPN for a server or failover partner server in an ODBC data source name (DSN).</span></span>|<span data-ttu-id="35fa1-150">DSN 설정 대화 상자를 통해 SPN을 ODBC DSN에 지정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-150">The SPN can be specified in an ODBC DSN through the DSN setup dialog boxes.</span></span>|  
|<span data-ttu-id="35fa1-151">사용자가 OLE DB **데이터 연결** 또는 **로그인** 대화 상자에 서버 또는 장애 조치 파트너 서버에 대한 SPN을 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-151">The user specifies an SPN for a server or failover partner server in an OLE DB **Data Link** or **Login** dialog box.</span></span>|<span data-ttu-id="35fa1-152">SPN은 **데이터 연결** 또는 **로그인** 대화 상자에 지정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-152">The SPN can be specified in a **Data Link** or **Login** dialog box.</span></span> <span data-ttu-id="35fa1-153">**로그인** 대화 상자는 ODBC 또는 OLE DB에서 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-153">The **Login** dialog box can be used with either ODBC or OLE DB.</span></span>|  
|<span data-ttu-id="35fa1-154">ODBC 애플리케이션이 연결을 설정하는 데 사용된 인증 방법을 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-154">An ODBC application determines the authentication method used to establish a connection.</span></span>|<span data-ttu-id="35fa1-155"> 연결이 성공적으로 열리면 애플리케이션은 `SQL_COPT_SS_INTEGRATED_AUTHENTICATION_METHOD` 연결 특성을 쿼리하여 사용된 인증 방법을 확인할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-155">When a connection has been opened successfully, an application can query the connection attribute `SQL_COPT_SS_INTEGRATED_AUTHENTICATION_METHOD` to determine which authentication method was used.</span></span> <span data-ttu-id="35fa1-156">값에는 `NTLM`, `Kerberos` 등이 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-156">The values will include, but are not limited to, `NTLM` and `Kerberos`.</span></span>|  
|<span data-ttu-id="35fa1-157">OLE DB 애플리케이션이 연결을 설정하는 데 사용된 인증 방법을 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-157">An OLE DB application determines the authentication method used to establish a connection.</span></span>|<span data-ttu-id="35fa1-158"> 연결이 성공적으로 열리면 애플리케이션은 `SSPROP_AUTHENTICATION_METHOD` 속성 집합의 `DBPROPSET_SQLSERVERDATASOURCEINFO` 연결 속성을 쿼리하여 사용된 인증 방법을 확인할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-158">When a connection has been opened successfully, an application can query the connection property `SSPROP_AUTHENTICATION_METHOD` in the `DBPROPSET_SQLSERVERDATASOURCEINFO` property set to determine which authentication method was used.</span></span> <span data-ttu-id="35fa1-159">값에는 `NTLM`, `Kerberos` 등이 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-159">The values will include, but are not limited to, `NTLM` and `Kerberos`.</span></span>|  
  
## <a name="failover"></a><span data-ttu-id="35fa1-160">장애 조치</span><span class="sxs-lookup"><span data-stu-id="35fa1-160">Failover</span></span>  
 <span data-ttu-id="35fa1-161">SPN이 장애 조치 캐시에 저장되지 않아 연결 간에 전달될 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-161">SPNs are not stored in the failover cache and therefore cannot be passed between connections.</span></span> <span data-ttu-id="35fa1-162">연결 문자열 또는 연결 특성에 SPN이 지정되면 주 서버 및 파트너 서버에 대한 모든 연결 시도에 SPN이 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-162">SPNs will be used on all connection attempts to the principal and partner when specified in the connection string or connection attributes.</span></span>  
  
## <a name="connection-pooling"></a><span data-ttu-id="35fa1-163">연결 풀링</span><span class="sxs-lookup"><span data-stu-id="35fa1-163">Connection Pooling</span></span>  
 <span data-ttu-id="35fa1-164">애플리케이션에서는 전체 문자열이 아닌 일부에 SPN을 지정하면 풀 조각화가 발생할 수 있음을 인식해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-164">Applications should be aware that specifying SPNs in some but not all connection strings can contribute to pool fragmentation.</span></span>  
  
 <span data-ttu-id="35fa1-165">애플리케이션은 연결 문자열 키워드를 지정하는 대신 프로그래밍 방식으로 SPN을 연결 특성으로 지정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-165">Applications can programmatically specify SPNs as connection attributes, instead of specifying connection string keywords.</span></span> <span data-ttu-id="35fa1-166">이렇게 하면 연결 풀 조각화를 보다 용이하게 관리할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-166">This can help manage connection pool fragmentation.</span></span>  
  
 <span data-ttu-id="35fa1-167">애플리케이션에서는 해당 연결 특성을 설정하여 연결 문자열의 SPN을 재정의할 수 있지만 연결 풀링에 사용되는 연결 문자열은 풀링을 위해 연결 문자열 값을 사용한다는 점을 인식해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-167">Applications should be aware that SPNs in connection strings can be overridden by setting the corresponding connection attributes, but connection strings used by connection pooling will use the connection string values for pooling purposes.</span></span>  
  
## <a name="down-level-server-behavior"></a><span data-ttu-id="35fa1-168">하위 수준 서버 동작</span><span class="sxs-lookup"><span data-stu-id="35fa1-168">Down-Level Server Behavior</span></span>  
 <span data-ttu-id="35fa1-169">새 연결 동작은 클라이언트에 의해 구현되므로 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]의 특정 버전에 국한되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-169">The new connection behavior is implemented by the client; therefore, it is not specific to a version of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span>  
  
## <a name="linked-servers-and-delegation"></a><span data-ttu-id="35fa1-170">연결된 서버 및 위임</span><span class="sxs-lookup"><span data-stu-id="35fa1-170">Linked Servers and Delegation</span></span>  
 <span data-ttu-id="35fa1-171">연결된 서버가 만들어질 때 [sp_addlinkedserver](/sql/relational-databases/system-stored-procedures/sp-addlinkedserver-transact-sql)의 `@provstr` 매개 변수를 사용하여 서버 및 장애 조치 파트너 SPN을 지정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-171">When linked servers are created, the `@provstr` parameter of [sp_addlinkedserver](/sql/relational-databases/system-stored-procedures/sp-addlinkedserver-transact-sql) can be used to specify the server and failover partner SPNs.</span></span> <span data-ttu-id="35fa1-172">이렇게 하는 경우의 이점은 클라이언트 연결 문자열에 SPN을 지정하는 경우와 동일합니다. Kerberos 인증을 사용하는 연결을 설정하는 것이 더 쉽고 안정적입니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-172">The benefits of doing this are the same as specifying SPNs in client connection strings: It is simpler and more reliable to establish connections that use Kerberos authentication.</span></span>  
  
 <span data-ttu-id="35fa1-173">연결된 서버를 사용한 위임에는 Kerberos 인증이 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-173">Delegation with linked servers requires Kerberos authentication.</span></span>  
  
## <a name="management-aspects-of-spns-specified-by-applications"></a><span data-ttu-id="35fa1-174">애플리케이션에서 지정하는 SPN의 관리 측면</span><span class="sxs-lookup"><span data-stu-id="35fa1-174">Management Aspects of SPNs Specified by Applications</span></span>  
 <span data-ttu-id="35fa1-175">애플리케이션에서 연결 문자열을 통해 SPN을 지정할지, 또는 기본 공급자가 생성한 SPN을 사용하지 않고 연결 속성을 통해 프로그래밍 방식으로 SPN을 지정할지 선택할 때는 다음 사항을 고려해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-175">When choosing whether to specify SPNs in an application (through connection strings) or programmatically through connection properties (rather than relying on the defalt provider generated SPNs), consider the following factors:</span></span>  
  
-   <span data-ttu-id="35fa1-176">보안: 지정된 SPN이 보호되는 정보를 노출하나요?</span><span class="sxs-lookup"><span data-stu-id="35fa1-176">Security: Does the specified SPN disclose information that is protected?</span></span>  
  
-   <span data-ttu-id="35fa1-177">안정성: 기본 SPN 사용을 활성화하려면 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 인스턴스가 실행되는 서비스 계정에 KDC의 Active Directory를 업데이트할 수 있는 권한이 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-177">Reliability: To enable the use of default SPNs, the service account in which the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance runs must have sufficient privileges to update the Active Directory on the KDC.</span></span>  
  
-   <span data-ttu-id="35fa1-178">편의성 및 위치 투명성: 데이터베이스가 다른 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 인스턴스로 이동되는 경우 애플리케이션의 SPN에 어떤 영향이 있나요?</span><span class="sxs-lookup"><span data-stu-id="35fa1-178">Convenience and location transparency: How will an application's SPNs be affected if its database moves to a different [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance?</span></span> <span data-ttu-id="35fa1-179">데이터베이스 미러링을 사용하는 경우 이는 주 서버 및 해당 장애 조치 파트너 모두에 적용됩니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-179">This applies to both the principal server and its failover partner if you use database mirroring.</span></span> <span data-ttu-id="35fa1-180">서버 변경 시 SPN도 변경해야 한다면 애플리케이션은 어떤 영향을 받습니까?</span><span class="sxs-lookup"><span data-stu-id="35fa1-180">If a server change means that SPNs must be changed, how will this affect applications?</span></span> <span data-ttu-id="35fa1-181">변경 내용은 관리됩니까?</span><span class="sxs-lookup"><span data-stu-id="35fa1-181">Will any changes be managed?</span></span>  
  
## <a name="specifying-the-spn"></a><span data-ttu-id="35fa1-182">SPN 지정</span><span class="sxs-lookup"><span data-stu-id="35fa1-182">Specifying the SPN</span></span>  
 <span data-ttu-id="35fa1-183">대화 상자 또는 코드에서 SPN을 지정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-183">You can specify an SPN in dialog boxes and in code.</span></span> <span data-ttu-id="35fa1-184">이 섹션에서는 SPN을 지정하는 방법에 대해 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-184">This section discusses how you can specify an SPN.</span></span>  
  
 <span data-ttu-id="35fa1-185">SPN의 최대 길이는 260자입니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-185">The maximum length for an SPN is 260 characters.</span></span>  
  
 <span data-ttu-id="35fa1-186">SPN이 연결 문자열 또는 연결 특성에서 사용하는 구문은 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-186">The syntax that SPNs use in connection string or connection attributes is as follows:</span></span>  
  
|<span data-ttu-id="35fa1-187">구문</span><span class="sxs-lookup"><span data-stu-id="35fa1-187">Syntax</span></span>|<span data-ttu-id="35fa1-188">Description</span><span class="sxs-lookup"><span data-stu-id="35fa1-188">Description</span></span>|  
|------------|-----------------|  
|<span data-ttu-id="35fa1-189">MSSQLSvc/*fqdn*</span><span class="sxs-lookup"><span data-stu-id="35fa1-189">MSSQLSvc/*fqdn*</span></span>|<span data-ttu-id="35fa1-190">TCP 이외의 프로토콜이 사용될 때 기본 인스턴스에 대해 공급자가 생성하는 기본 SPN입니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-190">The provider-generated, default SPN for a default instance when a protocol other than TCP is used.</span></span><br /><br /> <span data-ttu-id="35fa1-191">*fqdn* 은 정규화 된 도메인 이름입니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-191">*fqdn* is a fully-qualified domain name.</span></span>|  
|<span data-ttu-id="35fa1-192">MSSQLSvc/*fqdn*:*port*</span><span class="sxs-lookup"><span data-stu-id="35fa1-192">MSSQLSvc/*fqdn*:*port*</span></span>|<span data-ttu-id="35fa1-193">TCP가 사용될 때 공급자가 생성하는 기본 SPN입니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-193">The provider-generated, default SPN when TCP is used.</span></span><br /><br /> <span data-ttu-id="35fa1-194">*port* 는 TCP 포트 번호입니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-194">*port* is a TCP port number.</span></span>|  
|<span data-ttu-id="35fa1-195">MSSQLSvc/*fqdn*:*InstanceName*</span><span class="sxs-lookup"><span data-stu-id="35fa1-195">MSSQLSvc/*fqdn*:*InstanceName*</span></span>|<span data-ttu-id="35fa1-196">TCP 이외의 프로토콜이 사용될 때 명명된 인스턴스에 대해 공급자가 생성하는 기본 SPN입니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-196">The provider-generated, default SPN for a named instance when a protocol other than TCP is used.</span></span><br /><br /> <span data-ttu-id="35fa1-197">*InstanceName*은 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 인스턴스 이름입니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-197">*InstanceName* is a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance name.</span></span>|  
|<span data-ttu-id="35fa1-198">HOST/*fqdn*</span><span class="sxs-lookup"><span data-stu-id="35fa1-198">HOST/*fqdn*</span></span><br /><br /> <span data-ttu-id="35fa1-199">HOST/*MachineName*</span><span class="sxs-lookup"><span data-stu-id="35fa1-199">HOST/*MachineName*</span></span>|<span data-ttu-id="35fa1-200">Windows에서 자동으로 등록되는 기본 제공 컴퓨터 계정에 매핑되는 SPN입니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-200">The SPN that maps to built-in computer accounts that are automatically registered by Windows.</span></span>|  
|<span data-ttu-id="35fa1-201">*사용자 이름* @ *도메인*</span><span class="sxs-lookup"><span data-stu-id="35fa1-201">*Username*@*Domain*</span></span>|<span data-ttu-id="35fa1-202">도메인 계정 직접 지정입니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-202">Direct specification of a domain account.</span></span><br /><br /> <span data-ttu-id="35fa1-203">*Username* 은 Windows 사용자 계정 이름입니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-203">*Username* is a Windows user account name.</span></span><br /><br /> <span data-ttu-id="35fa1-204">*Domain* 은 Windows 도메인 이름 또는 정규화된 도메인 이름입니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-204">*Domain* is a Windows domain name or fully-qualified domain name.</span></span>|  
|<span data-ttu-id="35fa1-205">*MachineName* $@ *도메인*</span><span class="sxs-lookup"><span data-stu-id="35fa1-205">*MachineName*$@*Domain*</span></span>|<span data-ttu-id="35fa1-206">컴퓨터 계정 직접 지정입니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-206">Direct specification of a computer account.</span></span><br /><br /> <span data-ttu-id="35fa1-207">(연결 하는 서버가 로컬 시스템 또는 네트워크 서비스 계정으로 실행 되 고 있는 경우 Kerberos 인증을 얻으려면가 `ServerSPN` *MachineName* $@ *도메인* 형식일 수 있습니다.)</span><span class="sxs-lookup"><span data-stu-id="35fa1-207">(If the server you are connecting to is running under LOCAL SYSTEM or NETWORK SERVICE accounts, to get Kerberos authentication, `ServerSPN` can be in the *MachineName*$@*Domain* format.)</span></span>|  
|<span data-ttu-id="35fa1-208">*Kdckey* / *MachineName*</span><span class="sxs-lookup"><span data-stu-id="35fa1-208">*KDCKey*/*MachineName*</span></span>|<span data-ttu-id="35fa1-209">사용자가 지정한 SPN</span><span class="sxs-lookup"><span data-stu-id="35fa1-209">A user-specified SPN.</span></span><br /><br /> <span data-ttu-id="35fa1-210">*KDCKey* 는 KDC 키에 대한 규칙을 따르는 영숫자 문자열입니다.</span><span class="sxs-lookup"><span data-stu-id="35fa1-210">*KDCKey* is an alphanumeric string that conforms to the rules for a KDC key.</span></span>|  
  
## <a name="odbc-and-ole-db-syntax-supporting-spns"></a><span data-ttu-id="35fa1-211">SPN을 지원하는 ODBC 및 OLE DB 구문</span><span class="sxs-lookup"><span data-stu-id="35fa1-211">ODBC and OLE DB Syntax Supporting SPNs</span></span>  
 <span data-ttu-id="35fa1-212">구문별 정보는 다음 항목을 참조하십시오.</span><span class="sxs-lookup"><span data-stu-id="35fa1-212">For syntax-specific information, see the following topics:</span></span>  
  
-   [<span data-ttu-id="35fa1-213">클라이언트 연결의 SPN&#40;서비스 사용자 이름&#41;&#40;ODBC&#41;</span><span class="sxs-lookup"><span data-stu-id="35fa1-213">Service Principal Names &#40;SPNs&#41; in Client Connections &#40;ODBC&#41;</span></span>](../odbc/service-principal-names-spns-in-client-connections-odbc.md)  
  
-   [<span data-ttu-id="35fa1-214">클라이언트 연결의 SPN&#40;서비스 사용자 이름&#41;&#40;OLE DB&#41;</span><span class="sxs-lookup"><span data-stu-id="35fa1-214">Service Principal Names &#40;SPNs&#41; in Client Connections &#40;OLE DB&#41;</span></span>](../ole-db/service-principal-names-spns-in-client-connections-ole-db.md)  
  
 <span data-ttu-id="35fa1-215">이 기능을 보여 주는 예제 애플리케이션에 대한 자세한 내용은 [SQL Server 데이터 프로그래밍 기능 예제](https://msftdpprodsamples.codeplex.com/)를 참조하십시오.</span><span class="sxs-lookup"><span data-stu-id="35fa1-215">For information about sample applications that demonstrate this feature, see [SQL Server Data Programmability Samples](https://msftdpprodsamples.codeplex.com/).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="35fa1-216">참고 항목</span><span class="sxs-lookup"><span data-stu-id="35fa1-216">See Also</span></span>  
 [<span data-ttu-id="35fa1-217">SQL Server Native Client 기능</span><span class="sxs-lookup"><span data-stu-id="35fa1-217">SQL Server Native Client Features</span></span>](sql-server-native-client-features.md)  
  
