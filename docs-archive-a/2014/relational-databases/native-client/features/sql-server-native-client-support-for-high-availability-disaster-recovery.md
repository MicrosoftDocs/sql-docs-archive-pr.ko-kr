---
title: 고가용성, 재해 복구를 위한 SQL Server Native Client 지원 | Microsoft Docs
ms.custom: ''
ms.date: 08/31/2016
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: native-client
ms.topic: reference
ms.assetid: 2b06186b-4090-4728-b96b-90d6ebd9f66f
author: rothja
ms.author: jroth
ms.openlocfilehash: 43c835d5c0e1c064387aee7fb0db65f577c3aa26
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87659946"
---
# <a name="sql-server-native-client-support-for-high-availability-disaster-recovery"></a><span data-ttu-id="68a57-102">고가용성 재해 복구를 위한 SQL Server Native Client 지원</span><span class="sxs-lookup"><span data-stu-id="68a57-102">SQL Server Native Client Support for High Availability, Disaster Recovery</span></span>
  <span data-ttu-id="68a57-103">이 항목에서는 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]에 대한 [!INCLUDE[ssSQL11](../../../includes/sssql11-md.md)] Native Client 지원([!INCLUDE[ssHADR](../../../includes/sshadr-md.md)]에 추가됨)에 대해 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="68a57-103">This topic discusses [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client support (added in [!INCLUDE[ssSQL11](../../../includes/sssql11-md.md)]) for [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)].</span></span> <span data-ttu-id="68a57-104">[!INCLUDE[ssHADR](../../../includes/sshadr-md.md)]에 대한 자세한 내용은 [가용성 그룹 수신기, 클라이언트 연결 및 애플리케이션 장애 조치(Failover)&#40;SQL Server&#41;](../../../database-engine/listeners-client-connectivity-application-failover.md), [가용성 그룹의 생성 및 구성&#40;SQL Server&#41;](../../../database-engine/availability-groups/windows/creation-and-configuration-of-availability-groups-sql-server.md), [장애 조치(Failover) 클러스터링 및 AlwaysOn 가용성 그룹&#40;SQL Server&#41;](../../../database-engine/availability-groups/windows/failover-clustering-and-always-on-availability-groups-sql-server.md) 및 [활성 보조: 읽기 가능한 보조 복제본(AlwaysOn 가용성 그룹)](../../../database-engine/availability-groups/windows/active-secondaries-readable-secondary-replicas-always-on-availability-groups.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="68a57-104">For more information about [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)], see [Availability Group Listeners, Client Connectivity, and Application Failover &#40;SQL Server&#41;](../../../database-engine/listeners-client-connectivity-application-failover.md), [Creation and Configuration of Availability Groups &#40;SQL Server&#41;](../../../database-engine/availability-groups/windows/creation-and-configuration-of-availability-groups-sql-server.md), [Failover Clustering and AlwaysOn Availability Groups &#40;SQL Server&#41;](../../../database-engine/availability-groups/windows/failover-clustering-and-always-on-availability-groups-sql-server.md), and [Active Secondaries: Readable Secondary Replicas (AlwaysOn Availability Groups)](../../../database-engine/availability-groups/windows/active-secondaries-readable-secondary-replicas-always-on-availability-groups.md).</span></span>  
  
 <span data-ttu-id="68a57-105">연결 문자열에서 특정 AG(가용성 그룹)에 대한 가용성 그룹 수신기를 지정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="68a57-105">You can specify the availability group listener of a given availability group in the connection string.</span></span> <span data-ttu-id="68a57-106">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client 애플리케이션이 장애 조치(Failover)되는 가용성 그룹의 데이터베이스에 연결된 경우, 원래 연결은 끊어지며 장애 조치 후 애플리케이션이 계속 작동하려면 새 연결을 열어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="68a57-106">If a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client application is connected to a database in an availability group that fails over, the original connection is broken, and the application must open a new connection to continue work after the failover.</span></span>  
  
 <span data-ttu-id="68a57-107">가용성 그룹 수신기에 연결하지 않았고 여러 IP 주소가 호스트 이름과 연결된 경우 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client는 DNS 항목과 연결된 모든 IP 주소를 순차적으로 반복합니다.</span><span class="sxs-lookup"><span data-stu-id="68a57-107">If you are not connecting to an availability group listener, and if multiple IP addresses are associated with a hostname, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client will iterate sequentially through all IP addresses associated with DNS entry.</span></span> <span data-ttu-id="68a57-108">DNS 서버가 반환한 첫 번째 IP 주소가 NIC(네트워크 인터페이스 카드)에 바인딩되지 않은 경우 시간이 오래 걸릴 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="68a57-108">This can be time consuming if the first IP address returned by DNS server is not bound to any network interface card (NIC).</span></span> <span data-ttu-id="68a57-109">가용성 그룹 수신기에 연결할 경우 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client는 모든 IP 주소에 대한 연결을 병렬로 시도하고, 그 중 한 연결 시도가 성공하면 드라이버가 보류 중인 모든 연결 시도를 삭제합니다.</span><span class="sxs-lookup"><span data-stu-id="68a57-109">When connecting to an availability group listener, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client attempts to establish connections to all IP addresses in parallel and if a connection attempt succeeds, the driver will discard any pending connection attempts.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="68a57-110">연결 제한 시간을 늘리고 연결 재시도 논리를 구현하면 애플리케이션이 가용성 그룹에 연결될 가능성이 증가합니다.</span><span class="sxs-lookup"><span data-stu-id="68a57-110">Increasing connection timeout and implementing connection retry logic will increase the probability that an application will connect to an availability group.</span></span> <span data-ttu-id="68a57-111">또한 가용성 그룹 장애 조치(failover)로 인해 연결이 실패할 수 있으므로 실패한 연결을 다시 연결할 때까지 다시 시도하는 연결 재시도 논리를 구현해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="68a57-111">Also, because a connection can fail because of an availability group failover, you should implement connection retry logic, retrying a failed connection until it reconnects.</span></span>  
  
## <a name="connecting-with-multisubnetfailover"></a><span data-ttu-id="68a57-112">MultiSubnetFailover로 연결</span><span class="sxs-lookup"><span data-stu-id="68a57-112">Connecting With MultiSubnetFailover</span></span>  
 <span data-ttu-id="68a57-113">SQL Server 2012 가용성 그룹 수신기 또는 SQL Server 2012 장애 조치(Failover) 클러스터 인스턴스에 연결할 때는 항상 `MultiSubnetFailover=Yes`를 지정하십시오.</span><span class="sxs-lookup"><span data-stu-id="68a57-113">Always specify `MultiSubnetFailover=Yes` when connecting to a SQL Server 2012 availability group listener or SQL Server 2012 Failover Cluster Instance.</span></span> <span data-ttu-id="68a57-114">`MultiSubnetFailover`를 사용하면 SQL Server 2012에서 모든 가용성 그룹 및 장애 조치(Failover) 클러스터 인스턴스에 대한 장애 조치(Failover)를 빠르게 수행하고 단일 및 다중 서브넷 AlwaysOn 토폴로지에 대한 장애 조치(Failover) 시간을 크게 줄일 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="68a57-114">`MultiSubnetFailover` enables faster failover for all Availability Groups and failover cluster instance in SQL Server 2012 and will significantly reduce failover time for single and multi-subnet AlwaysOn topologies.</span></span> <span data-ttu-id="68a57-115">다중 서브넷 장애 조치(Failover) 중에는 클라이언트가 연결을 병렬로 시도합니다.</span><span class="sxs-lookup"><span data-stu-id="68a57-115">During a multi-subnet failover, the client will attempt connections in parallel.</span></span> <span data-ttu-id="68a57-116">서브넷 장애 조치(Failover) 중에는 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client가 적극적으로 TCP 연결을 다시 시도합니다.</span><span class="sxs-lookup"><span data-stu-id="68a57-116">During a subnet failover, [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client will aggressively retry the TCP connection.</span></span>  
  
 <span data-ttu-id="68a57-117">`MultiSubnetFailover` 연결 속성은 애플리케이션을 가용성 그룹 또는 장애 조치(Failover) 클러스터 인스턴스에 배치하는 중이고 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client가 모든 IP 주소에 연결을 시도하여 주 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 인스턴스의 데이터베이스에 연결을 시도함을 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="68a57-117">The `MultiSubnetFailover` connection property indicates that the application is being deployed in an availability group or Failover Cluster Instance, and that [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client will try to connect to the database on the primary [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance by trying to connect to all the IP addresses.</span></span> <span data-ttu-id="68a57-118">`MultiSubnetFailover=Yes`연결에 대해를 지정 하면 클라이언트는 운영 체제의 기본 tcp 재전송 간격 보다 빠르게 TCP 연결을 다시 시도 합니다.</span><span class="sxs-lookup"><span data-stu-id="68a57-118">When `MultiSubnetFailover=Yes` is specified for a connection, the client retries TCP connection attempts faster than the operating system's default TCP retransmit intervals.</span></span> <span data-ttu-id="68a57-119">이렇게 하면 AlwaysOn 가용성 그룹 또는 AlwaysOn 장애 조치(Failover) 클러스터 인스턴스의 장애 조치(Failover) 후 더 빠르게 다시 연결할 수 있습니다. 이 설정은 단일/다중 서브넷 가용성 그룹 및 장애 조치(Failover) 클러스터 인스턴스에 모두 적용됩니다.</span><span class="sxs-lookup"><span data-stu-id="68a57-119">This enables faster reconnection after failover of either an AlwaysOn Availability Group or an AlwaysOn Failover Cluster Instance, and is applicable to both single- and multi-subnet Availability Groups and Failover Cluster Instances.</span></span>  
  
 <span data-ttu-id="68a57-120">연결 문자열 키워드에 대한 자세한 내용은 [SQL Server Native Client에서 연결 문자열 키워드 사용](../applications/using-connection-string-keywords-with-sql-server-native-client.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="68a57-120">For more information about connection string keywords, see [Using Connection String Keywords with SQL Server Native Client](../applications/using-connection-string-keywords-with-sql-server-native-client.md).</span></span>  
  
 <span data-ttu-id="68a57-121">가용성 그룹 수신기 또는 장애 조치(Failover) 클러스터 인스턴스 이외의 다른 항목에 연결할 때 `MultiSubnetFailover=Yes`를 지정하면 성능에 상당히 부정적인 영향을 줄 수 있으므로 이러한 설정은 지원되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="68a57-121">Specifying `MultiSubnetFailover=Yes` when connecting to something other than an availability group listener or Failover Cluster Instance may result in a negative performance impact, and is not supported.</span></span>  
  
 <span data-ttu-id="68a57-122">다음 지침에 따라 장애 조치(Failover) 클러스터 인스턴스 또는 가용성 그룹의 서버에 연결하십시오.</span><span class="sxs-lookup"><span data-stu-id="68a57-122">Use the following guidelines to connect to a server in an availability group or Failover Cluster Instance:</span></span>  
  
-   <span data-ttu-id="68a57-123">단일 또는 다중 서브넷에 연결할 때 `MultiSubnetFailover` 연결 속성을 사용하십시오. 그러면 두 경우 모두 성능이 향상됩니다.</span><span class="sxs-lookup"><span data-stu-id="68a57-123">Use the `MultiSubnetFailover` connection property when connecting to a single subnet or multi-subnet; it will improve performance for both.</span></span>  
  
-   <span data-ttu-id="68a57-124">가용성 그룹에 연결하려면 가용성 그룹에 대한 가용성 그룹 수신기를 연결 문자열의 서버로 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="68a57-124">To connect to an availability group, specify the availability group listener of the availability group as the server in your connection string.</span></span>  
  
-   <span data-ttu-id="68a57-125">IP 주소가 64개 이상으로 구성된 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 인스턴스에 연결하면 연결 오류가 발생합니다.</span><span class="sxs-lookup"><span data-stu-id="68a57-125">Connecting to a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance configured with more than 64 IP addresses will cause a connection failure.</span></span>  
  
-   <span data-ttu-id="68a57-126">연결 속성을 사용 하는 응용 프로그램의 동작은 인증 `MultiSubnetFailover` 유형 ( [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 인증, Kerberos 인증 또는 Windows 인증)에 따라 영향을 받지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="68a57-126">Behavior of an application that uses the `MultiSubnetFailover` connection property is not affected based on the type of authentication: [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Authentication, Kerberos Authentication, or Windows Authentication.</span></span>  
  
-   <span data-ttu-id="68a57-127">장애 조치(Failover) 시간을 수용하고 애플리케이션 연결 재시도 횟수를 줄이기 위해 `loginTimeout` 값을 늘릴 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="68a57-127">You can increase the value of `loginTimeout` to accommodate for failover time and reduce application connection retry attempts.</span></span>  
  
-   <span data-ttu-id="68a57-128">분산된 트랜잭션은 지원되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="68a57-128">Distributed transactions are not supported.</span></span>  
  
 <span data-ttu-id="68a57-129">읽기 전용 라우팅이 적용되지 않으면 다음과 같은 경우 가용성 그룹의 보조 복제본 위치에 대한 연결이 실패합니다.</span><span class="sxs-lookup"><span data-stu-id="68a57-129">If read-only routing is not in effect, connecting to a secondary replica location in an availability group will fail in the following situations:</span></span>  
  
1.  <span data-ttu-id="68a57-130">보조 복제본 위치가 연결을 허용하도록 구성되어 있지 않은 경우</span><span class="sxs-lookup"><span data-stu-id="68a57-130">If the secondary replica location is not configured to accept connections.</span></span>  
  
2.  <span data-ttu-id="68a57-131">애플리케이션에서 `ApplicationIntent=ReadWrite`(아래 설명 참조)를 사용하고 보조 복제본 위치가 읽기 전용 액세스용으로 구성되어 있는 경우</span><span class="sxs-lookup"><span data-stu-id="68a57-131">If an application uses `ApplicationIntent=ReadWrite` (discussed below) and the secondary replica location is configured for read-only access.</span></span>  
  
 <span data-ttu-id="68a57-132">주 복제본이 읽기 전용 작업을 거부하도록 구성되어 있고 연결 문자열에 `ApplicationIntent=ReadOnly`가 포함되어 있으면 연결이 실패합니다.</span><span class="sxs-lookup"><span data-stu-id="68a57-132">A connection will fail if a primary replica is configured to reject read-only workloads and the connection string contains `ApplicationIntent=ReadOnly`.</span></span>  
  
## <a name="upgrading-to-use-multi-subnet-clusters-from-database-mirroring"></a><span data-ttu-id="68a57-133">데이터베이스 미러링에서 다중 서브넷 클러스터를 사용하도록 업그레이드</span><span class="sxs-lookup"><span data-stu-id="68a57-133">Upgrading to Use Multi-Subnet Clusters from Database Mirroring</span></span>  
 <span data-ttu-id="68a57-134">연결 문자열에 `MultiSubnetFailover` 및 `Failover_Partner` 연결 키워드가 있으면 연결 오류가 발생합니다.</span><span class="sxs-lookup"><span data-stu-id="68a57-134">A connection error will occur if the `MultiSubnetFailover` and `Failover_Partner` connection keywords are present in the connection string.</span></span> <span data-ttu-id="68a57-135">`MultiSubnetFailover`가 사용되고[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]에서 데이터베이스 미러링 쌍의 일부임을 나타내는 장애 조치(Failover) 파트너 응답을 반환하는 경우에도 오류가 발생합니다.</span><span class="sxs-lookup"><span data-stu-id="68a57-135">An error will also occur if `MultiSubnetFailover` is used and the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] returns a failover partner response indicating it is part of a database mirroring pair.</span></span>  
  
 <span data-ttu-id="68a57-136">현재 데이터베이스 미러링을 사용 중인 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client 애플리케이션을 다중 서브넷 시나리오로 업그레이드할 경우에는 `Failover_Partner` 연결 속성을 제거하고 이를 `MultiSubnetFailover`로 설정된 `Yes`로 바꾸고, 연결 문자열에서 서버 이름을 가용성 그룹 수신기로 바꿔야 합니다.</span><span class="sxs-lookup"><span data-stu-id="68a57-136">If you upgrade a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client application that currently uses database mirroring to a multi-subnet scenario, you should remove the `Failover_Partner` connection property and replace it with `MultiSubnetFailover` set to `Yes` and replace the server name in the connection string with an availability group listener.</span></span> <span data-ttu-id="68a57-137">연결 문자열에 `Failover_Partner` 및 `MultiSubnetFailover=Yes`가 사용될 경우 드라이버에서 오류가 발생합니다.</span><span class="sxs-lookup"><span data-stu-id="68a57-137">If a connection string uses `Failover_Partner` and `MultiSubnetFailover=Yes`, the driver will generate an error.</span></span> <span data-ttu-id="68a57-138">하지만 연결 문자열에 `Failover_Partner` 및 `MultiSubnetFailover=No`(또는 `ApplicationIntent=ReadWrite`)가 사용될 경우 애플리케이션에 데이터베이스 미러링이 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="68a57-138">However, if a connection string uses `Failover_Partner` and `MultiSubnetFailover=No` (or `ApplicationIntent=ReadWrite`), the application will use database mirroring.</span></span>  
  
 <span data-ttu-id="68a57-139">가용성 그룹의 주 데이터베이스에서 데이터베이스 미러링이 사용되고 가용성 그룹 수신기가 아닌 주 데이터베이스에 연결하는 연결 문자열에 `MultiSubnetFailover=Yes`가 사용될 경우 드라이버에서 오류를 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="68a57-139">The driver will return an error if database mirroring is used on the primary database in the availability group, and if `MultiSubnetFailover=Yes` is used in the connection string that connects to a primary database instead of to an availability group listener.</span></span>  
  
## <a name="specifying-application-intent"></a><span data-ttu-id="68a57-140">애플리케이션 의도 지정</span><span class="sxs-lookup"><span data-stu-id="68a57-140">Specifying Application Intent</span></span>  
 <span data-ttu-id="68a57-141">`ApplicationIntent=ReadOnly`인 경우 클라이언트는 AlwaysOn이 설정된 데이터베이스에 연결할 때 읽기 작업을 요청합니다.</span><span class="sxs-lookup"><span data-stu-id="68a57-141">When `ApplicationIntent=ReadOnly`, the client requests a read workload when connecting to an AlwaysOn enabled database.</span></span> <span data-ttu-id="68a57-142">서버는 연결 시 그리고 USE 데이터베이스 문 중에 AlwaysOn이 설정된 데이터베이스에 한하여 의도를 강제 적용합니다.</span><span class="sxs-lookup"><span data-stu-id="68a57-142">The server will enforce the intent at connection time and during a USE database statement but only to an Always On enabled database.</span></span>  
  
 <span data-ttu-id="68a57-143">`ApplicationIntent` 키워드는 레거시 읽기 전용 데이터베이스에 적용되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="68a57-143">The `ApplicationIntent` keyword does not work with legacy, read-only databases.</span></span>  
  
 <span data-ttu-id="68a57-144">데이터베이스는 대상 AlwaysOn 데이터베이스에 대한 읽기 작업을 허용하거나 허용하지 않을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="68a57-144">A database can allow or disallow read workloads on the targeted AlwaysOn database.</span></span> <span data-ttu-id="68a57-145">`ALLOW_CONNECTIONS` 및 `PRIMARY_ROLE``SECONDARY_ROLE` 문의 [!INCLUDE[tsql](../../../includes/tsql-md.md)] 절을 사용하여 이를 수행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="68a57-145">(This is done with the `ALLOW_CONNECTIONS` clause of the `PRIMARY_ROLE` and `SECONDARY_ROLE`[!INCLUDE[tsql](../../../includes/tsql-md.md)] statements.)</span></span>  
  
 <span data-ttu-id="68a57-146">`ApplicationIntent` 키워드는 읽기 전용 라우팅을 설정하는 데 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="68a57-146">The `ApplicationIntent` keyword is used to enable read-only routing.</span></span>  
  
## <a name="read-only-routing"></a><span data-ttu-id="68a57-147">읽기 전용 라우팅</span><span class="sxs-lookup"><span data-stu-id="68a57-147">Read-Only Routing</span></span>  
 <span data-ttu-id="68a57-148">읽기 전용 라우팅은 데이터베이스의 읽기 전용 복사본의 가용성을 유지할 수 있는 기능입니다.</span><span class="sxs-lookup"><span data-stu-id="68a57-148">Read-only routing is a feature that can ensure the availability of a read only replica of a database.</span></span> <span data-ttu-id="68a57-149">읽기 전용 라우팅을 활성화하려면:</span><span class="sxs-lookup"><span data-stu-id="68a57-149">To enable read-only routing:</span></span>  
  
1.  <span data-ttu-id="68a57-150">AlwaysOn 가용성 그룹의 가용성 그룹 수신기에 연결해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="68a57-150">You must connect to an Always On Availability Group availability group listener.</span></span>  
  
2.  <span data-ttu-id="68a57-151">`ApplicationIntent` 연결 문자열 키워드를 `ReadOnly`로 설정해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="68a57-151">The `ApplicationIntent` connection string keyword must be set to `ReadOnly`.</span></span>  
  
3.  <span data-ttu-id="68a57-152">읽기 전용 라우팅을 설정하려면 데이터베이스 관리자가 가용성 그룹을 구성해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="68a57-152">The Availability Group must be configured by the database administrator to enable read-only routing.</span></span>  
  
 <span data-ttu-id="68a57-153">읽기 전용 라우팅을 사용하는 여러 연결 중 일부가 동일한 읽기 전용 복사본에 연결되지 않을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="68a57-153">It is possible that multiple connections using read-only routing will not all connect to the same read-only replica.</span></span> <span data-ttu-id="68a57-154">데이터베이스 동기화를 변경하거나 서버 라우팅 구성을 변경하면 클라이언트를 다른 읽기 전용 복사본에 연결할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="68a57-154">Changes in database synchronization or changes in the server's routing configuration can result in client connections to different read-only replicas.</span></span> <span data-ttu-id="68a57-155">모든 읽기 전용 요청을 동일한 읽기 전용 복제본에 연결하려면 가용성 그룹 수신기를 `Server` 연결 문자열 키워드에 전달하지 마십시오.</span><span class="sxs-lookup"><span data-stu-id="68a57-155">To ensure that all read-only requests connect to the same read-only replica, do not pass an availability group listener to the `Server` connection string keyword.</span></span> <span data-ttu-id="68a57-156">대신, 읽기 전용 인스턴스의 이름을 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="68a57-156">Instead, specify the name of the read-only instance.</span></span>  
  
 <span data-ttu-id="68a57-157">읽기 전용 라우팅은 먼저 주 데이터베이스에 연결한 후 사용 가능한 최선의 읽기 가능한 보조 데이터베이스를 검색하기 때문에 주 데이터베이스에 연결할 때보다 시간이 더 많이 걸릴 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="68a57-157">Read-only routing may take longer than connecting to the primary because read only routing first connects to the primary and then looks for the best available readable secondary.</span></span> <span data-ttu-id="68a57-158">따라서 로그인 제한 시간을 늘려야 합니다.</span><span class="sxs-lookup"><span data-stu-id="68a57-158">Because of this, you should increase your login timeout.</span></span>  
  
## <a name="odbc"></a><span data-ttu-id="68a57-159">ODBC</span><span class="sxs-lookup"><span data-stu-id="68a57-159">ODBC</span></span>  
 <span data-ttu-id="68a57-160">[!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] Native Client에는 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]을 지원하기 위해 다음과 같은 두 개의 ODBC 연결 문자열 키워드가 추가되었습니다.</span><span class="sxs-lookup"><span data-stu-id="68a57-160">Two ODBC connection string keywords were added to support [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] in [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client:</span></span>  
  
-   `ApplicationIntent`  
  
-   `MultiSubnetFailover`  
  
 <span data-ttu-id="68a57-161">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client의 ODBC 연결 문자열 키워드에 대한 자세한 내용은 [SQL Server Native Client에서 연결 문자열 키워드 사용](../applications/using-connection-string-keywords-with-sql-server-native-client.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="68a57-161">For more information about ODBC connection string keywords in [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client, see [Using Connection String Keywords with SQL Server Native Client](../applications/using-connection-string-keywords-with-sql-server-native-client.md).</span></span>  
  
 <span data-ttu-id="68a57-162">해당하는 연결 속성은 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="68a57-162">The equivalent connection properties are:</span></span>  
  
-   `SQL_COPT_SS_APPLICATION_INTENT`  
  
-   `SQL_COPT_SS_MULTISUBNET_FAILOVER`  
  
 <span data-ttu-id="68a57-163">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client의 ODBC 연결 속성에 대한 자세한 내용은 [SQLSetConnectAttr](../../native-client-odbc-api/sqlsetconnectattr.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="68a57-163">For more information about ODBC connection properties in [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client, see [SQLSetConnectAttr](../../native-client-odbc-api/sqlsetconnectattr.md).</span></span>  
  
 <span data-ttu-id="68a57-164">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]에서부터 `ApplicationIntent` 및 `MultiSubnetFailover` 키워드의 기능은 [!INCLUDE[ssSQL11](../../../includes/sssql11-md.md)] Native Client 드라이버를 사용하는 DSN의 ODBC 데이터 원본 관리자에서 노출됩니다.</span><span class="sxs-lookup"><span data-stu-id="68a57-164">The functionality of the `ApplicationIntent` and `MultiSubnetFailover` keywords will be exposed in the ODBC Data Source Administrator for DSNs that use the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client driver, beginning in [!INCLUDE[ssSQL11](../../../includes/sssql11-md.md)].</span></span>  
  
 <span data-ttu-id="68a57-165">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client ODBC 애플리케이션에서는 다음 세 가지 함수 중 하나를 사용하여 연결할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="68a57-165">A [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client ODBC application can use one of three functions to make the connection:</span></span>  
  
|<span data-ttu-id="68a57-166">기능</span><span class="sxs-lookup"><span data-stu-id="68a57-166">Function</span></span>|<span data-ttu-id="68a57-167">Description</span><span class="sxs-lookup"><span data-stu-id="68a57-167">Description</span></span>|  
|--------------|-----------------|  
|[<span data-ttu-id="68a57-168">SQLBrowseConnect</span><span class="sxs-lookup"><span data-stu-id="68a57-168">SQLBrowseConnect</span></span>](../../native-client-odbc-api/sqlbrowseconnect.md)|<span data-ttu-id="68a57-169">`SQLBrowseConnect`에서 반환되는 서버 목록에는 VNN이 포함되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="68a57-169">The list of servers returned by `SQLBrowseConnect` will not include VNNs.</span></span> <span data-ttu-id="68a57-170">서버가 독립 실행형 서버인지, 아니면 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]에 대해 사용하도록 설정된 둘 이상의 [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] 인스턴스를 포함하는 WSFC(Windows Server 장애 조치(failover) 클러스터링) 클러스터의 주 또는 보조 서버인지는 표시되지 않고 서버 목록만 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="68a57-170">You will only see a list of servers without any indication if the server is a standalone server, or a primary or secondary server in a Windows Server Failover Clustering (WSFC) cluster that contains two or more [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instances that have been enabled for [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)].</span></span> <span data-ttu-id="68a57-171">서버에 연결한 후 오류가 발생할 경우에는 서버에 연결은 되었지만 `ApplicationIntent` 설정이 서버 구성과 호환되지 않기 때문일 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="68a57-171">If you connect to a server and get a failure, it may be because you have connected to a server, and the `ApplicationIntent` setting is not compatible with the server configuration.</span></span><br /><br /> <span data-ttu-id="68a57-172">`SQLBrowseConnect`는 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]에 대해 사용하도록 설정된 둘 이상의 [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] 인스턴스를 포함하는 WSFC(Windows Server 장애 조치(failover) 클러스터링) 클러스터의 서버를 인식하지 않으므로 `SQLBrowseConnect`는 `MultiSubnetFailover` 연결 문자열 키워드를 무시합니다.</span><span class="sxs-lookup"><span data-stu-id="68a57-172">Because `SQLBrowseConnect` does not recognize servers in a Windows Server Failover Clustering (WSFC) cluster that contains two or more [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instances that have been enabled for [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)], `SQLBrowseConnect` ignores the `MultiSubnetFailover` connection string keyword.</span></span>|  
|[<span data-ttu-id="68a57-173">SQLConnect</span><span class="sxs-lookup"><span data-stu-id="68a57-173">SQLConnect</span></span>](../../native-client-odbc-api/sqlconnect.md)|<span data-ttu-id="68a57-174">`SQLConnect`는 DSN(데이터 원본 이름) 또는 연결 속성을 통해 `ApplicationIntent`와 `MultiSubnetFailover`를 모두 지원합니다.</span><span class="sxs-lookup"><span data-stu-id="68a57-174">`SQLConnect` supports both `ApplicationIntent` and `MultiSubnetFailover` via a data source name (DSN) or connection properties.</span></span>|  
|[<span data-ttu-id="68a57-175">SQLDriverConnect</span><span class="sxs-lookup"><span data-stu-id="68a57-175">SQLDriverConnect</span></span>](../../native-client-odbc-api/sqldriverconnect.md)|<span data-ttu-id="68a57-176">`SQLDriverConnect`는 연결 문자열 키워드, 연결 속성 또는 DSN을 통해 `ApplicationIntent` 및 `MultiSubnetFailover`를 지원합니다.</span><span class="sxs-lookup"><span data-stu-id="68a57-176">`SQLDriverConnect` supports `ApplicationIntent` and `MultiSubnetFailover` via connection string keywords, connection properties, or DSN.</span></span>|  
  
## <a name="ole-db"></a><span data-ttu-id="68a57-177">OLE DB</span><span class="sxs-lookup"><span data-stu-id="68a57-177">OLE DB</span></span>  
 <span data-ttu-id="68a57-178">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client의 OLE DB는 `MultiSubnetFailover` 키워드를 지원하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="68a57-178">OLE DB in the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client does not support the `MultiSubnetFailover` keyword.</span></span>  
  
 <span data-ttu-id="68a57-179">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]Native Client의 OLE DB는 애플리케이션 의도를 지원합니다.</span><span class="sxs-lookup"><span data-stu-id="68a57-179">OLE DB in the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client will support application intent.</span></span> <span data-ttu-id="68a57-180">애플리케이션 의도는 OLE DB 애플리케이션에 대해 ODBC 애플리케이션과 동일하게 동작합니다(위의 내용 참조).</span><span class="sxs-lookup"><span data-stu-id="68a57-180">Application intent will behave the same for OLE DB applications as ODBC applications (see above).</span></span>  
  
 <span data-ttu-id="68a57-181">[!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] Native Client에는 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]을 지원하기 위해 다음과 같은 하나의 OLE DB 연결 문자열 키워드가 추가되었습니다.</span><span class="sxs-lookup"><span data-stu-id="68a57-181">One OLE DB connection string keyword added to support [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] in [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client:</span></span>  
  
-   `Application Intent`  
  
 <span data-ttu-id="68a57-182">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client의 연결 문자열 키워드에 대한 자세한 내용은 [SQL Server Native Client에서 연결 문자열 키워드 사용](../applications/using-connection-string-keywords-with-sql-server-native-client.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="68a57-182">For more information about connection string keywords in [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client, see [Using Connection String Keywords with SQL Server Native Client](../applications/using-connection-string-keywords-with-sql-server-native-client.md).</span></span>  
  
 <span data-ttu-id="68a57-183">해당하는 연결 속성은 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="68a57-183">The equivalent connection properties are:</span></span>  
  
-   `SSPROP_INIT_APPLICATIONINTENT`  
  
-   `DBPROP_INIT_PROVIDERSTRING`  
  
 <span data-ttu-id="68a57-184">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client OLE DB 애플리케이션에서는 다음 메서드 중 하나를 사용하여 애플리케이션 의도를 지정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="68a57-184">A [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Native Client OLE DB application can use one of the methods to specify application intent:</span></span>  
  
 `IDBInitialize::Initialize`  
 <span data-ttu-id="68a57-185">`IDBInitialize::Initialize`는 이전에 구성한 속성 집합을 사용하여 데이터 원본을 초기화하고 데이터 원본 개체를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="68a57-185">`IDBInitialize::Initialize` uses the previously configured set of properties to initialize the data source and create the data source object.</span></span> <span data-ttu-id="68a57-186">애플리케이션 의도를 공급자 속성 또는 확장 속성 문자열의 일부로 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="68a57-186">Specify application intent as a provider property or as part of the extended properties string.</span></span>  
  
 `IDataInitialize::GetDataSource`  
 <span data-ttu-id="68a57-187">`IDataInitialize::GetDataSource`는 `Application Intent` 키워드를 포함할 수 있는 입력 연결 문자열을 받아들입니다.</span><span class="sxs-lookup"><span data-stu-id="68a57-187">`IDataInitialize::GetDataSource` takes an input connection string that can contain the `Application Intent` keyword.</span></span>  
  
 `IDBProperties::GetProperties`  
 <span data-ttu-id="68a57-188">`IDBProperties::GetProperties`는 현재 데이터 원본에 설정된 속성 값을 검색합니다.</span><span class="sxs-lookup"><span data-stu-id="68a57-188">`IDBProperties::GetProperties` retrieves the value of the property that is currently set on the data source.</span></span>  <span data-ttu-id="68a57-189">DBPROP_INIT_PROVIDERSTRING 속성과 SSPROP_INIT_APPLICATIONINTENT 속성을 통해 `Application Intent` 값을 검색할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="68a57-189">You can retrieve the `Application Intent` value through the DBPROP_INIT_PROVIDERSTRING property and SSPROP_INIT_APPLICATIONINTENT property.</span></span>  
  
 `IDBProperties::SetProperties`  
 <span data-ttu-id="68a57-190">`ApplicationIntent` 속성 값을 설정하려면 값이 "`IDBProperties::SetProperties`" 또는 "`SSPROP_INIT_APPLICATIONINTENT`"인 `ReadWrite` 속성이나 값에 "`ReadOnly`" 또는 "`DBPROP_INIT_PROVIDERSTRING`"를 포함하는 `ApplicationIntent=ReadOnly` 속성을 전달하여 `ApplicationIntent=ReadWrite`를 호출합니다.</span><span class="sxs-lookup"><span data-stu-id="68a57-190">To set the `ApplicationIntent` property value, call `IDBProperties::SetProperties` passing in the `SSPROP_INIT_APPLICATIONINTENT` property with value "`ReadWrite`" or "`ReadOnly`" or `DBPROP_INIT_PROVIDERSTRING` property with value containing "`ApplicationIntent=ReadOnly`" or "`ApplicationIntent=ReadWrite`".</span></span>  
  
 <span data-ttu-id="68a57-191">**데이터 연결 속성** 대화 상자의 모두 탭에 있는 애플리케이션 의도 속성 필드에서 애플리케이션 의도를 지정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="68a57-191">You can specify application intent in the Application Intent Properties field of the All tab in the **Data Link Properties** dialog box.</span></span>  
  
 <span data-ttu-id="68a57-192">암시적 연결을 설정하면 암시적 연결이 부모 연결의 애플리케이션 의도 설정을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="68a57-192">When implicit connections are established, the implicit connection will use the application intent setting of the parent connection.</span></span> <span data-ttu-id="68a57-193">마찬가지로 동일한 데이터 원본에서 만들어진 여러 개의 세션은 데이터 원본의 애플리케이션 의도 설정을 상속합니다.</span><span class="sxs-lookup"><span data-stu-id="68a57-193">Similarly, multiple sessions created from the same data source will inherit the data source's application intent setting.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="68a57-194">참고 항목</span><span class="sxs-lookup"><span data-stu-id="68a57-194">See Also</span></span>  
 <span data-ttu-id="68a57-195">[SQL Server Native Client 기능](sql-server-native-client-features.md) </span><span class="sxs-lookup"><span data-stu-id="68a57-195">[SQL Server Native Client Features](sql-server-native-client-features.md) </span></span>  
 [<span data-ttu-id="68a57-196">SQL Server Native Client에서 연결 문자열 키워드 사용</span><span class="sxs-lookup"><span data-stu-id="68a57-196">Using Connection String Keywords with SQL Server Native Client</span></span>](../applications/using-connection-string-keywords-with-sql-server-native-client.md)  
  
  
