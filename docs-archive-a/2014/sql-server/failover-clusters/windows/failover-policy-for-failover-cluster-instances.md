---
title: 장애 조치(failover) 클러스터 인스턴스용 장애 조치(failover) 정책 | Microsoft 문서
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- flexible failover policy
ms.assetid: 39ceaac5-42fa-4b5d-bfb6-54403d7f0dc9
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 8d441e5627280cb46168d9ff187d7f43da8b26a6
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87650561"
---
# <a name="failover-policy-for-failover-cluster-instances"></a><span data-ttu-id="7ba75-102">장애 조치(failover) 클러스터 인스턴스용 장애 조치(failover) 정책</span><span class="sxs-lookup"><span data-stu-id="7ba75-102">Failover Policy for Failover Cluster Instances</span></span>
  <span data-ttu-id="7ba75-103">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 장애 조치(failover) 클러스터 인스턴스(FCI)에서는 한 번에 하나의 노드에서만 WSFC(Windows Server Failover Cluster) 클러스터 리소스 그룹을 소유할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="7ba75-103">In a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover cluster instance (FCI), only one node can own the Windows Server Failover Cluster (WSFC) cluster resource group at a given time.</span></span> <span data-ttu-id="7ba75-104">클라이언트 요청은 FCI에서 이 노드를 통해 제공됩니다.</span><span class="sxs-lookup"><span data-stu-id="7ba75-104">The client requests are served through this node in the FCI.</span></span> <span data-ttu-id="7ba75-105">오류가 발생하여 다시 시작이 실패하면 그룹 소유권이 FCI의 다른 WSFC 노드로 이동합니다.</span><span class="sxs-lookup"><span data-stu-id="7ba75-105">In the case of a failure and an unsuccessful restart, the group ownership is moved to another WSFC node in the FCI.</span></span> <span data-ttu-id="7ba75-106">이 프로세스를 장애 조치(Failover)라고 합니다.</span><span class="sxs-lookup"><span data-stu-id="7ba75-106">This process is called failover.</span></span> [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] <span data-ttu-id="7ba75-107">는 오류 검색의 안정성이 향상되었고 유연한 장애 조치(failover) 정책을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="7ba75-107">increases the reliability of failure detection and provides a flexible failover policy.</span></span>  
  
 <span data-ttu-id="7ba75-108">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] FCI는 장애 조치(failover) 탐지에 대한 기본 WSFC 서비스에 따라 달라집니다.</span><span class="sxs-lookup"><span data-stu-id="7ba75-108">A [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] FCI depends on the underlying WSFC service for failover detection.</span></span> <span data-ttu-id="7ba75-109">따라서 기본 WSFC 기능과 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 설치 프로그램에서 추가한 기능의 두 가지 메커니즘을 통해 장애 조치(failover) 동작이 결정됩니다.</span><span class="sxs-lookup"><span data-stu-id="7ba75-109">Therefore, two mechanisms determine the failover behavior for FCI: the former is native WSFC functionality, and the latter is functionality added by [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] setup.</span></span>  
  
-   <span data-ttu-id="7ba75-110">WSFC 클러스터는 자동 장애 조치(failover)에서 고유한 장애 조치(failover) 대상을 보장하는 쿼럼 구성을 유지 관리합니다.</span><span class="sxs-lookup"><span data-stu-id="7ba75-110">The WSFC cluster maintains the quorum configuration, which ensures a unique failover target in an automatic failover.</span></span> <span data-ttu-id="7ba75-111">WSFC 서비스는 클러스터가 최적의 쿼럼 상태인지 여부를 항상 확인하여 이에 따라 리소스 그룹을 온라인 및 오프라인 상태로 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="7ba75-111">The WSFC service determines whether the cluster is in optimal quorum health at all times and brings the resource group online and offline accordingly.</span></span>  
  
-   <span data-ttu-id="7ba75-112">활성 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 인스턴스는 전용 연결을 통해 WSFC 리소스 그룹에 대한 구성 요소 진단 집합을 주기적으로 보고합니다.</span><span class="sxs-lookup"><span data-stu-id="7ba75-112">The active [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance periodically reports a set of component diagnostics to the WSFC resource group over a dedicated connection.</span></span> <span data-ttu-id="7ba75-113">WSFC 리소스 그룹은 다시 시작 및 장애 조치(failover)를 트리거하는 오류 상태를 정의한 장애 조치(failover) 정책을 유지 관리합니다.</span><span class="sxs-lookup"><span data-stu-id="7ba75-113">The WSFC resource group maintains the failover policy, which defines the failure conditions that trigger restarts and failovers.</span></span>  
  
 <span data-ttu-id="7ba75-114">이 항목에서는 위의 두 번째 메커니즘에 대해 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="7ba75-114">This topic discusses the second mechanism above.</span></span> <span data-ttu-id="7ba75-115">쿼럼 구성 및 상태 감지에 대한 WSFC 동작의 자세한 내용은 [WSFC 쿼럼 모드 및 투표 구성&#40;SQL Server&#41;](wsfc-quorum-modes-and-voting-configuration-sql-server.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="7ba75-115">For more information on the WSFC behavior for quorum configuration and health detection, see [WSFC Quorum Modes and Voting Configuration &#40;SQL Server&#41;](wsfc-quorum-modes-and-voting-configuration-sql-server.md).</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="7ba75-116">FCI로 또는 FCI로부터의 자동 장애 조치(failover)는 AlwaysOn 가용성 그룹에서 허용되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="7ba75-116">Automatic failovers to and from an FCI are not allowed in an AlwaysOn availability group.</span></span> <span data-ttu-id="7ba75-117">그러나 FCI로 또는 FCI로부터의 수동 장애 조치(failover)는 AlwaysOn 가용성 그룹에서 허용됩니다.</span><span class="sxs-lookup"><span data-stu-id="7ba75-117">However, manual failovers to and from and FCI are allowed in an AlwaysOn availability group.</span></span>  
  
##  <a name="failover-policy-overview"></a><a name="Concepts"></a> <span data-ttu-id="7ba75-118">장애 조치(failover) 정책 개요</span><span class="sxs-lookup"><span data-stu-id="7ba75-118">Failover Policy Overview</span></span>  
 <span data-ttu-id="7ba75-119">장애 조치(failover) 프로세스는 다음 단계로 세분화될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="7ba75-119">The failover process can be broken down into the following steps:</span></span>  
  
1.  [<span data-ttu-id="7ba75-120">상태 모니터링</span><span class="sxs-lookup"><span data-stu-id="7ba75-120">Monitor the Health Status</span></span>](failover-policy-for-failover-cluster-instances.md#monitor)  
  
2.  [<span data-ttu-id="7ba75-121">오류 확인</span><span class="sxs-lookup"><span data-stu-id="7ba75-121">Determining Failures</span></span>](failover-policy-for-failover-cluster-instances.md#determine)  
  
3.  [<span data-ttu-id="7ba75-122">실패에 대한 응답</span><span class="sxs-lookup"><span data-stu-id="7ba75-122">Responding to Failures</span></span>](failover-policy-for-failover-cluster-instances.md#respond)  
  
###  <a name="monitor-the-health-status"></a><a name="monitor"></a><span data-ttu-id="7ba75-123">상태 모니터링</span><span class="sxs-lookup"><span data-stu-id="7ba75-123">Monitor the Health Status</span></span>  
 <span data-ttu-id="7ba75-124">모니터링되는 FCI 상태에는 다음의 세 가지 유형이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="7ba75-124">There are three types of health statuses that are monitored for the FCI:</span></span>  
  
-   [<span data-ttu-id="7ba75-125">SQL Server 서비스의 상태</span><span class="sxs-lookup"><span data-stu-id="7ba75-125">State of the SQL Server service</span></span>](failover-policy-for-failover-cluster-instances.md#service)  
  
-   [<span data-ttu-id="7ba75-126">SQL Server 인스턴스의 응답</span><span class="sxs-lookup"><span data-stu-id="7ba75-126">Responsiveness of the SQL Server instance</span></span>](failover-policy-for-failover-cluster-instances.md#instance)  
  
-   [<span data-ttu-id="7ba75-127">SQL Server 구성 요소 진단</span><span class="sxs-lookup"><span data-stu-id="7ba75-127">SQL Server component diagnostics</span></span>](failover-policy-for-failover-cluster-instances.md#component)  
  
####  <a name="state-of-the-sql-server-service"></a><a name="service"></a> <span data-ttu-id="7ba75-128">SQL Server 서비스의 상태</span><span class="sxs-lookup"><span data-stu-id="7ba75-128">State of the SQL Server service</span></span>  
 <span data-ttu-id="7ba75-129">WSFC 서비스는 활성 FCI 노드에 대한 SQL Server 서비스의 시작 상태를 모니터링하여 SQL Server 서비스가 중지된 시간을 감지합니다.</span><span class="sxs-lookup"><span data-stu-id="7ba75-129">The WSFC service monitors the start state of the SQL Server service on the active FCI node to detect when the SQL Server service is stopped.</span></span>  
  
####  <a name="responsiveness-of-the-sql-server-instance"></a><a name="instance"></a><span data-ttu-id="7ba75-130">SQL Server 인스턴스의 응답성</span><span class="sxs-lookup"><span data-stu-id="7ba75-130">Responsiveness of the SQL Server instance</span></span>  
 <span data-ttu-id="7ba75-131">SQL Server를 시작하는 동안 WSFC 서비스는 SQL Server 데이터베이스 엔진 리소스 DLL을 사용하여, 상태 모니터링을 위해 배타적으로 사용되는 별도의 스레드로 새 연결을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="7ba75-131">During SQL Server startup, the WSFC service uses the SQL Server Database Engine resource DLL to create a new connection to on a separate thread that is used exclusively for monitoring the health status.</span></span> <span data-ttu-id="7ba75-132">이렇게 하면 로드가 있는 상황에서 SQL 인스턴스가 자신의 상태를 보고하는 데 필요한 리소스를 가지고 있도록 보장됩니다.</span><span class="sxs-lookup"><span data-stu-id="7ba75-132">This ensures that there the SQL instance has the required resources to report its health status while under load.</span></span> <span data-ttu-id="7ba75-133">이 전용 연결을 통해 SQL Server는 [sp_server_diagnostics&#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-server-diagnostics-transact-sql) 시스템 저장 프로시저를 반복적으로 실행하여 리소스 DLL에 대한 SQL Server 구성 요소의 상태를 주기적으로 보고합니다.</span><span class="sxs-lookup"><span data-stu-id="7ba75-133">Using this dedicated connection, SQL Server runs the [sp_server_diagnostics &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-server-diagnostics-transact-sql) system stored procedure in repeat mode to periodically report the health status of the SQL Server components to the resource DLL.</span></span>  
  
 <span data-ttu-id="7ba75-134">리소스 DLL은 상태 확인 제한 시간을 사용하여 SQL 인스턴스의 응답을 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="7ba75-134">The resource DLL determines the responsiveness of the SQL instance using a health check timeout.</span></span> <span data-ttu-id="7ba75-135">HealthCheckTimeout 속성은 리소스 DLL이 SQL 인스턴스가 WSFC Server 서비스에 응답하지 않는 것으로 보고하기 전에 sp_server_diagnostics 저장 프로시저를 대기해야 하는 시간을 정의합니다.</span><span class="sxs-lookup"><span data-stu-id="7ba75-135">The HealthCheckTimeout property defines how long the resource DLL should wait for the sp_server_diagnostics stored procedure before it reports the SQL instance as unresponsive to the WSFC service.</span></span> <span data-ttu-id="7ba75-136">이 속성은 장애 조치(failover) 클러스터 관리자 스냅인뿐만 아니라 T-SQL을 사용하여 구성할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="7ba75-136">This property is configurable using T-SQL as well as in the Failover Cluster Manager snap-in.</span></span> <span data-ttu-id="7ba75-137">자세한 내용은 [Configure HealthCheckTimeout Property Settings](configure-healthchecktimeout-property-settings.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="7ba75-137">For more information, see [Configure HealthCheckTimeout Property Settings](configure-healthchecktimeout-property-settings.md).</span></span> <span data-ttu-id="7ba75-138">다음 항목에서는 이 속성이 제한 시간 및 반복 간격 설정에 어떻게 영향을 주는지에 대해 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="7ba75-138">The following items describe how this property affects timeout and repeat interval settings:</span></span>  
  
-   <span data-ttu-id="7ba75-139">리소스 DLL은 sp_server_diagnostics 저장 프로시저를 호출하고 반복 간격을 HealthCheckTimeout 설정의 1/3로 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="7ba75-139">The resource DLL calls the sp_server_diagnostics stored procedure and sets the repeat interval to one-third of the HealthCheckTimeout setting.</span></span>  
  
-   <span data-ttu-id="7ba75-140">sp_server_diagnostics 저장 프로시저가 느리거나 정보를 반환하지 않는 경우 리소스 DLL은 SQL 인스턴스가 응답하지 않는 것으로 WSFC 서비스에 보고하기 전에 HealthCheckTimeout에서 지정된 간격 동안 대기합니다.</span><span class="sxs-lookup"><span data-stu-id="7ba75-140">If the sp_server_diagnostics stored procedure is slow or is not returning information, the resource DLL will wait for the interval specified by HealthCheckTimeout before it reports to the WSFC service that the SQL instance is unresponsive.</span></span>  
  
-   <span data-ttu-id="7ba75-141">전용 연결이 손실된 경우 리소스 DLL은 SQL 인스턴스가 응답하지 않는 것으로 WSFC 서비스에 보고하기 전에 HealthCheckTimeout에서 지정된 간격 동안 SQL 인스턴스에 연결을 다시 시도합니다.</span><span class="sxs-lookup"><span data-stu-id="7ba75-141">If the dedicated connection is lost, the resource DLL will retry the connection to the SQL instance for the interval specified by HealthCheckTimeout before it reports to the WSFC service that the SQL instance is unresponsive.</span></span>  
  
####  <a name="sql-server-component-diagnostics"></a><a name="component"></a><span data-ttu-id="7ba75-142">SQL Server 구성 요소 진단</span><span class="sxs-lookup"><span data-stu-id="7ba75-142">SQL Server component diagnostics</span></span>  
 <span data-ttu-id="7ba75-143">sp_server_diagnostics 시스템 저장 프로시저는 SQL 인스턴스에 대한 구성 요소 진단을 주기적으로 수집합니다.</span><span class="sxs-lookup"><span data-stu-id="7ba75-143">The system stored procedure sp_server_diagnostics periodically collects component diagnostics on the SQL instance.</span></span> <span data-ttu-id="7ba75-144">수집된 진단 정보는 다음 각 구성 요소의 행으로 표시되고 호출 스레드에 전달됩니다.</span><span class="sxs-lookup"><span data-stu-id="7ba75-144">The diagnostic information that is collected is surfaced as a row for each of the following components and passed to the calling thread.</span></span>  
  
1.  <span data-ttu-id="7ba75-145">시스템</span><span class="sxs-lookup"><span data-stu-id="7ba75-145">system</span></span>  
  
2.  <span data-ttu-id="7ba75-146">resource</span><span class="sxs-lookup"><span data-stu-id="7ba75-146">resource</span></span>  
  
3.  <span data-ttu-id="7ba75-147">쿼리 프로세스</span><span class="sxs-lookup"><span data-stu-id="7ba75-147">query process</span></span>  
  
4.  <span data-ttu-id="7ba75-148">io_subsystem</span><span class="sxs-lookup"><span data-stu-id="7ba75-148">io_subsystem</span></span>  
  
5.  <span data-ttu-id="7ba75-149">events</span><span class="sxs-lookup"><span data-stu-id="7ba75-149">events</span></span>  
  
 <span data-ttu-id="7ba75-150">시스템, 리소스 및 쿼리 프로세스 구성 요소는 실패 감지에 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="7ba75-150">The system, resource, and query process components are used for failure detection.</span></span> <span data-ttu-id="7ba75-151">IO 하위 시스템 및 이벤트 구성 요소는 진단용으로만 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="7ba75-151">The io_subsytem and events components are used for diagnostic purposes only.</span></span>  
  
 <span data-ttu-id="7ba75-152">또한 정보의 각 행 집합이 SQL Server 클러스터 진단 로그에 기록됩니다.</span><span class="sxs-lookup"><span data-stu-id="7ba75-152">Each rowset of information is also written to the SQL Server cluster diagnostics log.</span></span> <span data-ttu-id="7ba75-153">자세한 내용은 [장애 조치(failover) 클러스터 인스턴스 진단 로그 보기 및 읽기](view-and-read-failover-cluster-instance-diagnostics-log.md)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="7ba75-153">For more information, see [View and Read Failover Cluster Instance Diagnostics Log](view-and-read-failover-cluster-instance-diagnostics-log.md).</span></span>  
  
> [!TIP]  
>  <span data-ttu-id="7ba75-154">sp_server_diagnostic 저장 프로시저는 SQL Server AlwaysOn 기술에서 사용되는 동안 문제를 감지하고 해결하는 데 도움이 되도록 SQL Server 인스턴스에서 사용이 가능합니다.</span><span class="sxs-lookup"><span data-stu-id="7ba75-154">While the sp_server_diagnostic stored procedure is used by SQL Server AlwaysOn technology, it is available for use in any SQL Server instance to help detect and troubleshoot problems.</span></span>  
  
####  <a name="determining-failures"></a><a name="determine"></a> <span data-ttu-id="7ba75-155">실패 확정</span><span class="sxs-lookup"><span data-stu-id="7ba75-155">Determining Failures</span></span>  
 <span data-ttu-id="7ba75-156">SQL Server 데이터베이스 엔진 리소스 DLL은 FailureConditionLevel 속성을 사용하여 감지된 상태가 오류 상태인지 여부를 결정합니다.</span><span class="sxs-lookup"><span data-stu-id="7ba75-156">The SQL Server Database Engine resource DLL determines whether the detected health status is a condition for failure using the FailureConditionLevel property.</span></span> <span data-ttu-id="7ba75-157">FailureConditionLevel 속성은 감지된 상태 중에서 다시 시작 또는 장애 조치(failover)의 원인이 된 상태를 결정합니다.</span><span class="sxs-lookup"><span data-stu-id="7ba75-157">The FailureConditionLevel property defines which detected health statuses cause restarts or failovers.</span></span> <span data-ttu-id="7ba75-158">자동 다시 시작 또는 장애 조치(failover) 사용 안 함에서부터 자동 다시 시작 또는 장애 조치(failover)를 초래하는 모든 오류 상태에 이르기까지 다양한 수준의 옵션을 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="7ba75-158">Multiple levels of options are available, ranging from no automatic restart or failover to all possible failure conditions resulting in an automatic restart or failover.</span></span> <span data-ttu-id="7ba75-159">이 속성을 구성하는 방법은 [Configure FailureConditionLevel Property Settings](configure-failureconditionlevel-property-settings.md)을 참조하십시오.</span><span class="sxs-lookup"><span data-stu-id="7ba75-159">For more information about how to configure this property, see [Configure FailureConditionLevel Property Settings](configure-failureconditionlevel-property-settings.md).</span></span>  
  
 <span data-ttu-id="7ba75-160">실패 조건은 증가하는 범위로 설정됩니다.</span><span class="sxs-lookup"><span data-stu-id="7ba75-160">The failure conditions are set on an increasing scale.</span></span> <span data-ttu-id="7ba75-161">수준 1-5의 경우 각 수준에는 자체 조건과 함께 이전 수준의 모든 조건이 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="7ba75-161">For levels 1-5, each level includes all the conditions from the previous levels in addition to its own conditions.</span></span> <span data-ttu-id="7ba75-162">이는 수준이 높을수록 장애 조치(Failover) 또는 다시 시작 확률이 증가함을 의미합니다.</span><span class="sxs-lookup"><span data-stu-id="7ba75-162">This means that with each level, there is an increased probability of a failover or restart.</span></span> <span data-ttu-id="7ba75-163">다음 표에서는 실패 조건 수준에 대해 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="7ba75-163">The failure condition levels are described in the following table.</span></span>  
  
 <span data-ttu-id="7ba75-164">이 시스템 저장 프로시저는 오류 상태 수준에서 중요한 역할을 하므로 [sp_server_diagnostics&#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-server-diagnostics-transact-sql)를 검토하세요.</span><span class="sxs-lookup"><span data-stu-id="7ba75-164">Review [sp_server_diagnostics &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-server-diagnostics-transact-sql) as this system stored procedure plays in important role in the failure condition levels.</span></span>  
  
|<span data-ttu-id="7ba75-165">Level</span><span class="sxs-lookup"><span data-stu-id="7ba75-165">Level</span></span>|<span data-ttu-id="7ba75-166">조건</span><span class="sxs-lookup"><span data-stu-id="7ba75-166">Condition</span></span>|<span data-ttu-id="7ba75-167">Description</span><span class="sxs-lookup"><span data-stu-id="7ba75-167">Description</span></span>|  
|-----------|---------------|-----------------|  
|<span data-ttu-id="7ba75-168">0</span><span class="sxs-lookup"><span data-stu-id="7ba75-168">0</span></span>|<span data-ttu-id="7ba75-169">자동 장애 조치(Failover) 또는 다시 시작 안 함</span><span class="sxs-lookup"><span data-stu-id="7ba75-169">No automatic failover or restart</span></span>|<span data-ttu-id="7ba75-170">어떤 실패 조건에서도 장애 조치(Failover) 또는 다시 시작이 자동으로 트리거되지 않음을 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="7ba75-170">Indicates that no failover or restart will be triggered automatically on any failure conditions.</span></span> <span data-ttu-id="7ba75-171">이 수준은 시스템 유지 관리 목적으로만 제공됩니다.</span><span class="sxs-lookup"><span data-stu-id="7ba75-171">This level is for system maintenance purposes only.</span></span>|  
|<span data-ttu-id="7ba75-172">1</span><span class="sxs-lookup"><span data-stu-id="7ba75-172">1</span></span>|<span data-ttu-id="7ba75-173">서버 다운 시 장애 조치(Failover) 또는 다시 시작</span><span class="sxs-lookup"><span data-stu-id="7ba75-173">Failover or restart on server down</span></span>|<span data-ttu-id="7ba75-174">다음 조건이 발생한 경우 서버가 다시 시작되거나 장애 조치(Failover)됨을 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="7ba75-174">Indicates that a server restart or failover will be triggered if the following condition is raised:</span></span><br /><br /> <span data-ttu-id="7ba75-175">SQL Server 서비스가 다운된 경우</span><span class="sxs-lookup"><span data-stu-id="7ba75-175">SQL Server service is down.</span></span>|  
|<span data-ttu-id="7ba75-176">2</span><span class="sxs-lookup"><span data-stu-id="7ba75-176">2</span></span>|<span data-ttu-id="7ba75-177">서버가 응답하지 않는 경우 장애 조치(Failover) 또는 다시 시작</span><span class="sxs-lookup"><span data-stu-id="7ba75-177">Failover or restart on server unresponsive</span></span>|<span data-ttu-id="7ba75-178">다음 조건 중 하나가 발생한 경우 서버가 다시 시작되거나 장애 조치(Failover)됨을 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="7ba75-178">Indicates that a server restart or failover will be triggered if any of the following conditions are raised:</span></span><br /><br /> <span data-ttu-id="7ba75-179">SQL Server 서비스가 다운된 경우</span><span class="sxs-lookup"><span data-stu-id="7ba75-179">SQL Server service is down.</span></span><br /><br /> <span data-ttu-id="7ba75-180">SQL 서버 인스턴스가 응답하지 않을 경우(리소스 DLL이 HealthCheckTimeout 설정의 sp_server_diagnostics에서 데이터를 받을 수 없음)</span><span class="sxs-lookup"><span data-stu-id="7ba75-180">SQL Server instance is not responsive (Resource DLL cannot receive data from sp_server_diagnostics within the HealthCheckTimeout settings).</span></span>|  
|<span data-ttu-id="7ba75-181">3\*</span><span class="sxs-lookup"><span data-stu-id="7ba75-181">3\*</span></span>|<span data-ttu-id="7ba75-182">심각한 서버 오류 시 장애 조치(Failover) 또는 다시 시작</span><span class="sxs-lookup"><span data-stu-id="7ba75-182">Failover or restart on critical server errors</span></span>|<span data-ttu-id="7ba75-183">다음 조건 중 하나가 발생한 경우 서버가 다시 시작되거나 장애 조치(Failover)됨을 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="7ba75-183">Indicates that a server restart or failover will be triggered if any of the following conditions are raised:</span></span><br /><br /> <span data-ttu-id="7ba75-184">SQL Server 서비스가 다운된 경우</span><span class="sxs-lookup"><span data-stu-id="7ba75-184">SQL Server service is down.</span></span><br /><br /> <span data-ttu-id="7ba75-185">SQL 서버 인스턴스가 응답하지 않을 경우(리소스 DLL이 HealthCheckTimeout 설정의 sp_server_diagnostics에서 데이터를 받을 수 없음)</span><span class="sxs-lookup"><span data-stu-id="7ba75-185">SQL Server instance is not responsive (Resource DLL cannot receive data from sp_server_diagnostics within the HealthCheckTimeout settings).</span></span><br /><br /> <span data-ttu-id="7ba75-186">시스템 저장 프로시저 sp_server_diagnostics가 '시스템 오류'를 반환할 경우</span><span class="sxs-lookup"><span data-stu-id="7ba75-186">System stored procedure sp_server_diagnostics returns 'system error'.</span></span>|  
|<span data-ttu-id="7ba75-187">4</span><span class="sxs-lookup"><span data-stu-id="7ba75-187">4</span></span>|<span data-ttu-id="7ba75-188">일반적인 서버 오류 시 장애 조치(Failover) 또는 다시 시작</span><span class="sxs-lookup"><span data-stu-id="7ba75-188">Failover or restart on moderate server errors</span></span>|<span data-ttu-id="7ba75-189">다음 조건 중 하나가 발생한 경우 서버가 다시 시작되거나 장애 조치(Failover)됨을 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="7ba75-189">Indicates that a server restart or failover will be triggered if any of the following conditions are raised:</span></span><br /><br /> <span data-ttu-id="7ba75-190">SQL Server 서비스가 다운된 경우</span><span class="sxs-lookup"><span data-stu-id="7ba75-190">SQL Server service is down.</span></span><br /><br /> <span data-ttu-id="7ba75-191">SQL 서버 인스턴스가 응답하지 않을 경우(리소스 DLL이 HealthCheckTimeout 설정의 sp_server_diagnostics에서 데이터를 받을 수 없음)</span><span class="sxs-lookup"><span data-stu-id="7ba75-191">SQL Server instance is not responsive (Resource DLL cannot receive data from sp_server_diagnostics within the HealthCheckTimeout settings).</span></span><br /><br /> <span data-ttu-id="7ba75-192">시스템 저장 프로시저 sp_server_diagnostics가 '시스템 오류'를 반환할 경우</span><span class="sxs-lookup"><span data-stu-id="7ba75-192">System stored procedure sp_server_diagnostics returns 'system error'.</span></span><br /><br /> <span data-ttu-id="7ba75-193">시스템 저장 프로시저 sp_server_diagnostics가 '리소스 오류'를 반환할 경우</span><span class="sxs-lookup"><span data-stu-id="7ba75-193">System  stored procedure sp_server_diagnostics returns 'resource error'.</span></span>|  
|<span data-ttu-id="7ba75-194">5</span><span class="sxs-lookup"><span data-stu-id="7ba75-194">5</span></span>|<span data-ttu-id="7ba75-195">임의의 실패 조건 발생 시 장애 조치(Failover) 또는 다시 시작</span><span class="sxs-lookup"><span data-stu-id="7ba75-195">Failover or restart on any qualified failure conditions</span></span>|<span data-ttu-id="7ba75-196">다음 조건 중 하나가 발생한 경우 서버가 다시 시작되거나 장애 조치(Failover)됨을 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="7ba75-196">Indicates that a server restart or failover will be triggered if any of the following conditions are raised:</span></span><br /><br /> <span data-ttu-id="7ba75-197">SQL Server 서비스가 다운된 경우</span><span class="sxs-lookup"><span data-stu-id="7ba75-197">SQL Server service is down.</span></span><br /><br /> <span data-ttu-id="7ba75-198">SQL 서버 인스턴스가 응답하지 않을 경우(리소스 DLL이 HealthCheckTimeout 설정의 sp_server_diagnostics에서 데이터를 받을 수 없음)</span><span class="sxs-lookup"><span data-stu-id="7ba75-198">SQL Server instance is not responsive (Resource DLL cannot receive data from sp_server_diagnostics within the HealthCheckTimeout settings).</span></span><br /><br /> <span data-ttu-id="7ba75-199">시스템 저장 프로시저 sp_server_diagnostics가 '시스템 오류'를 반환할 경우</span><span class="sxs-lookup"><span data-stu-id="7ba75-199">System stored procedure sp_server_diagnostics returns 'system error'.</span></span><br /><br /> <span data-ttu-id="7ba75-200">시스템 저장 프로시저 sp_server_diagnostics가 '리소스 오류'를 반환할 경우</span><span class="sxs-lookup"><span data-stu-id="7ba75-200">System  stored procedure sp_server_diagnostics returns 'resource error'.</span></span><br /><br /> <span data-ttu-id="7ba75-201">시스템 저장 프로시저 sp_server_diagnostics가 'query_processing 오류'를 반환할 경우</span><span class="sxs-lookup"><span data-stu-id="7ba75-201">System stored procedure sp_server_diagnostics returns 'query_processing error'.</span></span>|  
  
 <span data-ttu-id="7ba75-202">\*기본값</span><span class="sxs-lookup"><span data-stu-id="7ba75-202">\*Default Value</span></span>  
  
####  <a name="responding-to-failures"></a><a name="respond"></a><span data-ttu-id="7ba75-203">실패에 대 한 응답</span><span class="sxs-lookup"><span data-stu-id="7ba75-203">Responding to Failures</span></span>  
 <span data-ttu-id="7ba75-204">하나 이상의 오류 상태가 감지된 경우 WSFC 서비스의 오류 대응 방법은 FCI 리소스 그룹의 다시 시작 및 장애 조치(failover) 설정과 WSFC 쿼럼 상태에 따라 다릅니다.</span><span class="sxs-lookup"><span data-stu-id="7ba75-204">After one or more failure conditions are detected, how the WSFC service responds to the failures depends on the WSFC quorum state and the restart and failover settings of the FCI resource group.</span></span> <span data-ttu-id="7ba75-205">FCI에 손실된 WSFC 쿼럼이 있으면 전체 FCI가 오프라인 상태가 되고 해당 FCI의 고가용성이 손실됩니다.</span><span class="sxs-lookup"><span data-stu-id="7ba75-205">If the FCI has lost its WSFC quorum, then the entire FCI is brought offline and the FCI has lost its high availability.</span></span> <span data-ttu-id="7ba75-206">이 FCI가 계속 WSFC 쿼럼을 유지하면 WSFC 서비스는 실패한 노드의 다시 시작을 처음 시도하여 대응하고 다시 시작 시도가 실패할 경우 장애 조치(failover)할 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="7ba75-206">If the FCI still retains its WSFC quorum, then the WSFC service may respond by first attempting to restart the failed node and then failover if the restart attempts are unsuccessful.</span></span> <span data-ttu-id="7ba75-207">다시 시작 및 장애 조치(failover) 설정은 장애 조치(failover) 클러스터 관리자 스냅인에서 구성됩니다.</span><span class="sxs-lookup"><span data-stu-id="7ba75-207">The restart and failover settings are configured in the Failover Cluster Manager snap-in.</span></span> <span data-ttu-id="7ba75-208">이러한 설정에 대 한 자세한 내용은 [ \<Resource> 속성: 정책 탭](https://technet.microsoft.com/library/cc725685.aspx)을 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="7ba75-208">For more information these settings, see [\<Resource> Properties: Policies Tab](https://technet.microsoft.com/library/cc725685.aspx).</span></span>  
  
 <span data-ttu-id="7ba75-209">쿼럼 상태의 유지 관리에 대한 자세한 내용은 [WSFC 쿼럼 모드 및 투표 구성&#40;SQL Server&#41;](wsfc-quorum-modes-and-voting-configuration-sql-server.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="7ba75-209">For more information on maintaining quorum health, see [WSFC Quorum Modes and Voting Configuration &#40;SQL Server&#41;](wsfc-quorum-modes-and-voting-configuration-sql-server.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="7ba75-210">참고 항목</span><span class="sxs-lookup"><span data-stu-id="7ba75-210">See Also</span></span>  
 [<span data-ttu-id="7ba75-211">ALTER SERVER CONFIGURATION&#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="7ba75-211">ALTER SERVER CONFIGURATION &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/alter-server-configuration-transact-sql)  
  
  
