---
title: affinity I/O mask 서버 구성 옵션 | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: configuration
ms.topic: conceptual
helpviewer_keywords:
- affinity I/O mask option
- processor affinity [SQL Server]
- binding processors [SQL Server]
- CPU affinity mask option
ms.assetid: 9950a8c9-9fe0-4003-95df-6f0d1becb0e7
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 3d0606e2a3f5480b27e27a4a585562f4b289b640
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87638992"
---
# <a name="affinity-input-output-mask-server-configuration-option"></a><span data-ttu-id="32168-102">선호도 입력-출력 마스크 서버 구성 옵션</span><span class="sxs-lookup"><span data-stu-id="32168-102">affinity Input-Output mask Server Configuration Option</span></span>
  <span data-ttu-id="32168-103">[!INCLUDE[msCoName](../../includes/msconame-md.md)] Windows 2000 및 Windows Server 2003에서는 멀티태스킹을 수행하기 위해 경우에 따라 여러 프로세서 사이에 프로세스 스레드를 이동하기도 합니다.</span><span class="sxs-lookup"><span data-stu-id="32168-103">To carry out multitasking, [!INCLUDE[msCoName](../../includes/msconame-md.md)] Windows 2000 and Windows Server 2003 sometimes move process threads among different processors.</span></span> <span data-ttu-id="32168-104">운영 체제 측면에서는 효율적이지만 각 프로세서 캐시에 데이터가 반복적으로 다시 로드되어 시스템 로드가 많은 경우 이 활동으로 인해 [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 성능이 저하될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="32168-104">Although efficient from an operating system point of view, this activity can reduce [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] performance under heavy system loads, as each processor cache is repeatedly reloaded with data.</span></span> <span data-ttu-id="32168-105">프로세서를 특정 스레드에 할당하면 프로세서가 다시 로드되지 않으므로 이러한 조건에서도 성능을 향상시킬 수 있습니다. 스레드와 프로세서 간의 이러한 연결을 프로세서 선호도라고 합니다.</span><span class="sxs-lookup"><span data-stu-id="32168-105">Assigning processors to specific threads can improve performance under these conditions by eliminating processor reloads; such an association between a thread and a processor is called processor affinity.</span></span>  
  
 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="32168-106">에서는 두 가지 선호도 마스크 옵션인 **선호도 마스크** ( **CPU 선호도 마스크**라고도 함)와 **선호도 I/O 마스크**를 통해 프로세서 선호도를 지원합니다.</span><span class="sxs-lookup"><span data-stu-id="32168-106">supports processor affinity by means of two affinity mask options: **affinity mask** (also known as **CPU affinity mask**) and **affinity I/O mask**.</span></span> <span data-ttu-id="32168-107">**affinity mask** 옵션에 대한 자세한 내용은 [affinity mask 서버 구성 옵션](affinity-mask-server-configuration-option.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="32168-107">For more information on the **affinity mask** option, see [affinity mask Server Configuration Option](affinity-mask-server-configuration-option.md).</span></span> <span data-ttu-id="32168-108">33-64개 프로세서가 있는 서버에 대한 CPU 및 I/O 선호도를 지원할 경우 [affinity64 mask 서버 구성 옵션](affinity64-mask-server-configuration-option.md) 및 [affinity64 Input-Output mask 서버 구성 옵션](affinity64-input-output-mask-server-configuration-option.md) 을 추가로 사용해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="32168-108">CPU and I/O affinity support for servers with 33 to 64 processors requires the additional use of the [affinity64 mask Server Configuration Option](affinity64-mask-server-configuration-option.md) and [affinity64 Input-Output mask Server Configuration Option](affinity64-input-output-mask-server-configuration-option.md) respectively.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="32168-109">33개에서 64개의 프로세서를 가지는 서버에 대한 선호도 지원은 64비트 운영 체제에서만 가능합니다.</span><span class="sxs-lookup"><span data-stu-id="32168-109">Affinity support for servers with 33 to 64 processors is only available on 64-bit operating systems.</span></span>  
  
 <span data-ttu-id="32168-110">**affinity I/O mask** 옵션은 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 디스크 I/O를 지정된 CPU 하위 집합에 바인딩합니다.</span><span class="sxs-lookup"><span data-stu-id="32168-110">The **affinity I/O mask** option binds [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] disk I/O to a specified subset of CPUs.</span></span> <span data-ttu-id="32168-111">고성능 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] OLTP(온라인 트랜잭션 처리) 환경에서 이러한 확장을 통해 I/O를 실행하는 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 스레드의 성능을 향상시킬 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="32168-111">In high-end [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] online transactional processing (OLTP) environments, this extension can enhance the performance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] threads issuing I/Os.</span></span> <span data-ttu-id="32168-112">이 향상된 기능은 개별 디스크 또는 디스크 컨트롤러의 하드웨어 선호도를 지원하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="32168-112">This enhancement does not support hardware affinity for individual disks or disk controllers.</span></span>  
  
 <span data-ttu-id="32168-113">**affinity I/O mask** 의 값은 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 디스크 I/O 작업을 처리하는 데 적합한 다중 프로세서 컴퓨터의 CPU를 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="32168-113">The value for **affinity I/O mask** specifies which CPUs in a multiprocessor computer are eligible to process [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] disk I/O operations.</span></span> <span data-ttu-id="32168-114">마스크는 가장 오른쪽 비트가 최하위 CPU(0)를 지정하고 그 다음 왼쪽에 있는 비트가 두 번째 최하위 CPU(1)를 지정하는 방식으로 이어지는 비트맵입니다.</span><span class="sxs-lookup"><span data-stu-id="32168-114">The mask is a bitmap in which the rightmost bit specifies the lowest-order CPU(0), the bit to its immediate left specifies the next-lowest-order CPU(1), and so on.</span></span> <span data-ttu-id="32168-115">33개 이상의 프로세서를 구성하려면 **affinity I/O mask** 및 **affinity64 I/O mask**를 모두 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="32168-115">To configure more than 32 processors, set both the **affinity I/O mask** and the **affinity64 I/O mask**.</span></span>  
  
 <span data-ttu-id="32168-116">**affinity I/O mask** 의 값은 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="32168-116">The values for **affinity I/O mask** are as follows:</span></span>  
  
-   <span data-ttu-id="32168-117">1바이트 **affinity I/O mask** 의 경우 하나의 다중 프로세서 컴퓨터에서 CPU가 8개까지 허용됩니다.</span><span class="sxs-lookup"><span data-stu-id="32168-117">A 1-byte **affinity I/O mask** covers up to 8 CPUs in a multiprocessor computer.</span></span>  
  
-   <span data-ttu-id="32168-118">2바이트 **affinity I/O mask** 의 경우 하나의 다중 프로세서 컴퓨터에서 CPU가 16개까지 허용됩니다.</span><span class="sxs-lookup"><span data-stu-id="32168-118">A 2-byte **affinity I/O mask** covers up to 16 CPUs in a multiprocessor computer.</span></span>  
  
-   <span data-ttu-id="32168-119">3바이트 **affinity I/O mask** 의 경우 하나의 다중 프로세서 컴퓨터에서 CPU가 24개까지 허용됩니다.</span><span class="sxs-lookup"><span data-stu-id="32168-119">A 3-byte **affinity I/O mask** covers up to 24 CPUs in a multiprocessor computer.</span></span>  
  
-   <span data-ttu-id="32168-120">4바이트 **affinity I/O mask** 의 경우 하나의 다중 프로세서 컴퓨터에서 CPU가 32개까지 허용됩니다.</span><span class="sxs-lookup"><span data-stu-id="32168-120">A 4-byte **affinity I/O mask** covers up to 32 CPUs in a multiprocessor computer.</span></span>  
  
-   <span data-ttu-id="32168-121">33개 이상의 CPU를 처리하려면 처음 32개의 CPU에 대해 4바이트 **affinity I/O mask** 를 구성하고 나머지 CPU에 대해 최대 4바이트 **affinity64 I/O mask** 를 구성합니다.</span><span class="sxs-lookup"><span data-stu-id="32168-121">To cover more than 32 CPUs, configure a four-byte **affinity I/O mask** for the first 32 CPUs and up to a four-byte **affinity64 I/O mask** for the remaining CPUs.</span></span>  
  
 <span data-ttu-id="32168-122">affinity I/O 패턴의 1비트는 해당 CPU가 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 디스크 I/O 작업을 수행하는 데 적합함을 나타내고 0비트는 해당 CPU에 대해 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 디스크 I/O 작업이 예약되지 않음을 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="32168-122">A 1 bit in the affinity I/O pattern specifies that the corresponding CPU is eligible to perform [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] disk I/O operations; a 0 bit specifies that no [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] disk I/O operations should be scheduled for the corresponding CPU.</span></span> <span data-ttu-id="32168-123">모든 비트가 0으로 설정되어 있거나 **affinity I/O mask** 가 지정되지 않은 경우 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 디스크 I/O는 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 스레드를 처리하는 데 적합한 모든 CPU에 대해 예약됩니다.</span><span class="sxs-lookup"><span data-stu-id="32168-123">When all bits are set to zero, or **affinity I/O mask** is not specified, [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] disk I/O is scheduled to any of the CPUs eligible to process [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] threads.</span></span>  
  
 <span data-ttu-id="32168-124">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] **affinity I/O mask** 옵션 설정은 특수 작업이므로 필요한 경우에만 사용해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="32168-124">Because setting the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] **affinity I/O mask** option is a specialized operation, it should be used only when necessary.</span></span> <span data-ttu-id="32168-125">대부분의 경우 Windows 2000 또는 Windows Server 2003 기본 선호도를 사용할 때 최상의 성능을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="32168-125">In most cases, the Windows 2000 or Windows Server 2003 default affinity provides the best performance.</span></span>  
  
 <span data-ttu-id="32168-126">**affinity I/O mask** 옵션을 지정할 때는 **affinity mask** 구성 옵션과 함께 사용해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="32168-126">When specifying the **affinity I/O mask** option, you must use it with the **affinity mask** configuration option.</span></span> <span data-ttu-id="32168-127">**affinity I/O mask** 스위치와 **affinity mask** 옵션에서 동일한 CPU를 사용하지 마세요.</span><span class="sxs-lookup"><span data-stu-id="32168-127">Do not enable the same CPU in both the **affinity I/O mask** switch and the **affinity mask** option.</span></span> <span data-ttu-id="32168-128">각 CPU에 해당하는 비트는 다음 3가지 상태 중 하나여야 합니다.</span><span class="sxs-lookup"><span data-stu-id="32168-128">The bits corresponding to each CPU should be in one of the following three states:</span></span>  
  
-   <span data-ttu-id="32168-129">**affinity I/O mask** 옵션과 **affinity mask** 옵션이 모두 0</span><span class="sxs-lookup"><span data-stu-id="32168-129">0 in both the **affinity I/O mask** option and the **affinity mask** option.</span></span>  
  
-   <span data-ttu-id="32168-130">**affinity I/O mask** 옵션이 1이고 **affinity mask** 옵션이 0</span><span class="sxs-lookup"><span data-stu-id="32168-130">1 in the **affinity I/O mask** option and 0 in the **affinity mask** option.</span></span>  
  
-   <span data-ttu-id="32168-131">**affinity I/O mask** 옵션이 0이고 **affinity mask** 옵션이 1</span><span class="sxs-lookup"><span data-stu-id="32168-131">0 in the **affinity I/O mask** option and 1 in the **affinity mask** option.</span></span>  
  
 <span data-ttu-id="32168-132">**affinity I/O mask** 옵션은 고급 옵션입니다.</span><span class="sxs-lookup"><span data-stu-id="32168-132">The **affinity I/O mask** option is an advanced option.</span></span> <span data-ttu-id="32168-133">시스템 저장 프로시저를 사용 하 여 설정을 변경 하는 경우 `sp_configure` **show advanced options** 를 1로 설정할 때만 **affinity i/o mask** 를 변경할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="32168-133">If you are using the `sp_configure` system stored procedure to change the setting, you can change **affinity I/O mask** only when **show advanced options** is set to 1.</span></span> <span data-ttu-id="32168-134">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]에서 **affinity I/O mask** 옵션을 다시 구성하려면 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 인스턴스를 다시 시작해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="32168-134">In [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)], reconfiguring the **affinity I/O mask** option requires a restart of the [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance.</span></span>  
  
> [!CAUTION]  
>  <span data-ttu-id="32168-135">Windows 운영 체제에서 CPU 선호도를 구성하지 말고 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]에서도 선호도 마스크를 구성하지 마십시오.</span><span class="sxs-lookup"><span data-stu-id="32168-135">Do not configure CPU affinity in the Windows operating system and also configure the affinity mask in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="32168-136">동일한 결과를 얻기 위해 이렇게 설정하는 경우도 있지만 구성이 일치하지 않는 경우 예상치 못한 결과가 나올 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="32168-136">These settings are attempting to achieve the same result, and if the configurations are inconsistent, you may have unpredictable results.</span></span> [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] <span data-ttu-id="32168-137">CPU 선호도는 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]의 `sp_configure` 옵션을 사용하면 가장 잘 구성됩니다.</span><span class="sxs-lookup"><span data-stu-id="32168-137">CPU affinity is best configured using the `sp_configure` option in [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="32168-138">참고 항목</span><span class="sxs-lookup"><span data-stu-id="32168-138">See Also</span></span>  
 <span data-ttu-id="32168-139">[리소스 사용 모니터링&#40;시스템 모니터&#41;](../../relational-databases/performance-monitor/monitor-resource-usage-system-monitor.md) </span><span class="sxs-lookup"><span data-stu-id="32168-139">[Monitor Resource Usage &#40;System Monitor&#41;](../../relational-databases/performance-monitor/monitor-resource-usage-system-monitor.md) </span></span>  
 <span data-ttu-id="32168-140">[RECONFIGURE&#40;Transact-SQL&#41;](/sql/t-sql/language-elements/reconfigure-transact-sql) </span><span class="sxs-lookup"><span data-stu-id="32168-140">[RECONFIGURE &#40;Transact-SQL&#41;](/sql/t-sql/language-elements/reconfigure-transact-sql) </span></span>  
 <span data-ttu-id="32168-141">[서버 구성 옵션&#40;SQL Server&#41;](server-configuration-options-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="32168-141">[Server Configuration Options &#40;SQL Server&#41;](server-configuration-options-sql-server.md) </span></span>  
 [<span data-ttu-id="32168-142">sp_configure &#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="32168-142">sp_configure &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sp-configure-transact-sql)  
  
  
