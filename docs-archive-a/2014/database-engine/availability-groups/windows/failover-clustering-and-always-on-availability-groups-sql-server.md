---
title: 장애 조치 (Failover) 클러스터링 및 AlwaysOn 가용성 그룹 (SQL Server) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- clustering [SQL Server]
- Availability Groups [SQL Server], WSFC clusters
- Failover Cluster Instances [SQL Server], see failover clustering [SQL Server]
- quorum [SQL Server]
- failover clustering [SQL Server], AlwaysOn Availability Groups
- Availability Groups [SQL Server], Failover Cluster Instances
ms.assetid: 613bfbf1-9958-477b-a6be-c6d4f18785c3
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 64ee815c2b852849d9506ca6c3fc114d3d0e4935
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87650274"
---
# <a name="failover-clustering-and-alwayson-availability-groups-sql-server"></a><span data-ttu-id="9f507-102">장애 조치(Failover) 클러스터링 및 AlwaysOn 가용성 그룹(SQL Server)</span><span class="sxs-lookup"><span data-stu-id="9f507-102">Failover Clustering and AlwaysOn Availability Groups (SQL Server)</span></span>
  [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)]<span data-ttu-id="9f507-103">에 도입된 고가용성 재해 복구 솔루션인 [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)]을 사용하려면 WSFC(Windows Server 장애 조치(Failover) 클러스터링)가 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="9f507-103">, the high availability and disaster recovery solution introduced in [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)], requires Windows Server Failover Clustering (WSFC).</span></span> <span data-ttu-id="9f507-104">또한 [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] 을 사용하는 데 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 장애 조치(Failover) 클러스터링이 필요하지 않더라도 FCI(장애 조치(Failover) 클러스터링 인스턴스)를 사용하여 가용성 그룹의 가용성 복제본을 호스팅할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="9f507-104">Also, though [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] is not dependent upon [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Failover Clustering, you can use a failover clustering instance (FCI) to host an availability replica for an availability group.</span></span> <span data-ttu-id="9f507-105">각 클러스터링 기술의 역할과 [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] 환경을 디자인하는 데 고려해야 할 사항을 알고 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="9f507-105">It is important to know the role of each clustering technology, and to know what considerations are necessary as you design your [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] environment.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="9f507-106">[!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] 개념에 대한 자세한 내용은 [AlwaysOn 가용성 그룹 개요&#40;SQL Server&#41;](overview-of-always-on-availability-groups-sql-server.md)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="9f507-106">For information about [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] concepts, see [Overview of AlwaysOn Availability Groups &#40;SQL Server&#41;](overview-of-always-on-availability-groups-sql-server.md).</span></span>  
  

  
##  <a name="windows-server-failover-clustering-and-availability-groups"></a><a name="WSFC"></a><span data-ttu-id="9f507-107">Windows Server 장애 조치 (Failover) 클러스터링 및 가용성 그룹</span><span class="sxs-lookup"><span data-stu-id="9f507-107">Windows Server Failover Clustering and Availability Groups</span></span>  
 <span data-ttu-id="9f507-108">[!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] 을 배포하려면 WSFC(Windows Server 장애 조치(Failover) 클러스터링) 클러스터가 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="9f507-108">Deploying [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] requires a Windows Server Failover Clustering (WSFC) cluster.</span></span> <span data-ttu-id="9f507-109">[!INCLUDE[ssHADR](../../../includes/sshadr-md.md)]을 사용하도록 설정하려면 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 인스턴스가 WSFC 노드에 있고 WSFC 클러스터 및 노드가 온라인 상태여야 합니다.</span><span class="sxs-lookup"><span data-stu-id="9f507-109">To be enabled for [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)], an instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] must reside on a WSFC node, and the WSFC cluster and node must be online.</span></span> <span data-ttu-id="9f507-110">또한 지정된 가용성 그룹의 각 가용성 복제본은 동일한 WSFC 클러스터의 서로 다른 노드에 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="9f507-110">Furthermore, each availability replica of a given availability group must reside on a different node of the same WSFC cluster.</span></span> <span data-ttu-id="9f507-111">유일한 예외는 다른 WSFC 클러스터로 마이그레이션되는 동안 가용성 그룹이 일시적으로 두 클러스터에 걸쳐 있는 경우입니다.</span><span class="sxs-lookup"><span data-stu-id="9f507-111">The only exception is that while being migrated to another WSFC cluster, an availability group can temporarily straddle two clusters.</span></span>  
  
 [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] <span data-ttu-id="9f507-112">은 WSFC(Windows Server 장애 조치(failover) 클러스터링) 클러스터를 사용하여 지정된 가용성 그룹에 속해 있는 가용성 복제본의 현재 역할을 모니터링 및 관리하고 장애 조치(failover) 이벤트가 가용성 복제본에 미치는 영향을 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="9f507-112">relies on the Windows Failover Clustering (WSFC) cluster to monitor and manage the current roles of the availability replicas that belong to a given availability group and to determine how a failover event affects the availability replicas.</span></span> <span data-ttu-id="9f507-113">WSFC 리소스 그룹은 생성하는 모든 가용성 그룹에 대해 만들어집니다.</span><span class="sxs-lookup"><span data-stu-id="9f507-113">A WSFC resource group is created for every availability group that you create.</span></span> <span data-ttu-id="9f507-114">WSFC 클러스터는 이 리소스 그룹을 모니터링하여 주 복제본의 상태를 평가합니다.</span><span class="sxs-lookup"><span data-stu-id="9f507-114">The WSFC cluster monitors this resource group to evaluate the health of the primary replica.</span></span>  
  
 <span data-ttu-id="9f507-115">[!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] 에 대한 쿼럼은 지정된 클러스터 노드가 가용성 복제본을 호스팅하는지 여부에 관계없이 WSFC 클러스터의 모든 노드를 기반합니다.</span><span class="sxs-lookup"><span data-stu-id="9f507-115">The quorum for [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] is based on all nodes in the WSFC cluster regardless of whether a given cluster node hosts any availability replicas.</span></span> <span data-ttu-id="9f507-116">데이터베이스 미러링과 달리 [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)]에는 모니터 역할이 없습니다.</span><span class="sxs-lookup"><span data-stu-id="9f507-116">In contrast to database mirroring, there is no witness role in [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)].</span></span>  
  
 <span data-ttu-id="9f507-117">WSFC 클러스터의 전반적인 상태는 클러스터에 있는 노드 쿼럼의 투표에 의해 결정됩니다.</span><span class="sxs-lookup"><span data-stu-id="9f507-117">The overall health of a WSFC cluster is determined by the votes of quorum of nodes in the cluster.</span></span> <span data-ttu-id="9f507-118">계획되지 않은 재해나 영구적인 하드웨어 또는 통신 장애로 인해 WSFC 클러스터가 오프라인으로 전환된 경우 수동 관리 작업을 수행해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="9f507-118">If the WSFC cluster goes offline because of an unplanned disaster, or due to a persistent hardware or communications failure, manual administrative intervention is required.</span></span> <span data-ttu-id="9f507-119">Windows Server 또는 WSFC 클러스터 관리자는 강제 쿼럼을 수행하고 내결함성이 없는 구성에서 활성 클러스터 노드를 다시 온라인으로 전환해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="9f507-119">A Windows Server or WSFC cluster administrator will need to force a quorum and then bring the surviving cluster nodes back online in a non-fault-tolerant configuration.</span></span>  
  
> [!IMPORTANT]  
>  [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] <span data-ttu-id="9f507-120">레지스트리 키는 WSFC 클러스터의 하위 키입니다.</span><span class="sxs-lookup"><span data-stu-id="9f507-120">registry keys are subkeys of the WSFC cluster.</span></span> <span data-ttu-id="9f507-121">WSFC 클러스터를 삭제한 다음 다시 만들려는 경우 원본 WSFC 클러스터에서 가용성 복제본을 호스팅한 [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] 의 각 인스턴스에서 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 기능을 사용하지 않도록 설정한 후 다시 사용하도록 설정해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="9f507-121">If you delete and re-create a WSFC cluster, you must disable and re-enable the [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] feature on each instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] that hosted an availability replica on the original WSFC cluster.</span></span>  
  
 <span data-ttu-id="9f507-122">WSFC(Windows Server 장애 조치(failover) 클러스터링) 노드에서 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]를 실행하는 방법과 WSFC 쿼럼에 대한 자세한 내용은 [SQL Server의 WSFC&#40;Windows Server 장애 조치(failover) 클러스터링&#41;](../../../sql-server/failover-clusters/windows/windows-server-failover-clustering-wsfc-with-sql-server.md)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="9f507-122">For information about running [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] on Windows Server Failover Clustering (WSFC) nodes and about WSFC quorum, see [Windows Server Failover Clustering &#40;WSFC&#41; with SQL Server](../../../sql-server/failover-clusters/windows/windows-server-failover-clustering-wsfc-with-sql-server.md).</span></span>  
  
### <a name="cross-cluster-migration-of-alwayson-availability-groups-for-os-upgrade"></a><span data-ttu-id="9f507-123">OS 업그레이드를 위한 AlwaysOn 가용성 그룹의 클러스터 간 마이그레이션</span><span class="sxs-lookup"><span data-stu-id="9f507-123">Cross-Cluster Migration of AlwaysOn Availability Groups for OS Upgrade</span></span>  
 <span data-ttu-id="9f507-124">[!INCLUDE[ssSQL11SP1](../../../includes/sssql11sp1-md.md)]부터 [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] 에서는 새 WSFC(Windows Server 장애 조치(Failover) 클러스터링) 클러스터에 배포하기 위해 가용성 그룹의 클러스터 간 마이그레이션을 지원합니다.</span><span class="sxs-lookup"><span data-stu-id="9f507-124">Beginning with [!INCLUDE[ssSQL11SP1](../../../includes/sssql11sp1-md.md)], [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] supports cross-cluster migration of availability groups for deployments to a new Windows Server Failover Clustering (WSFC) cluster.</span></span> <span data-ttu-id="9f507-125">클러스터 간 마이그레이션은 작동 중단 시간을 최소화하면서 하나의 가용성 그룹이나 일련의 가용성 그룹을 새 대상 WSFC 클러스터로 이동합니다.</span><span class="sxs-lookup"><span data-stu-id="9f507-125">A cross-cluster migration moves one availability group or a batch of availability groups to the new, destination WSFC cluster with minimal downtime.</span></span> <span data-ttu-id="9f507-126">클러스터 간 마이그레이션 프로세스를 사용하면 [!INCLUDE[win8srv](../../../includes/win8srv-md.md)] 클러스터로 업그레이드할 때 SLA(서비스 수준 계약)를 유지 관리할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="9f507-126">The cross-cluster migration process enables you to maintain your service level agreements (SLAs) when upgrading to a [!INCLUDE[win8srv](../../../includes/win8srv-md.md)] cluster.</span></span> [!INCLUDE[ssSQL11SP1](../../../includes/sssql11sp1-md.md)] <span data-ttu-id="9f507-127">이상 버전은 대상 WSFC 클러스터에 설치하고 AlwaysOn에 대해 사용하도록 설정해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="9f507-127">(or a later version) must be installed and enabled for AlwaysOn on the destination WSFC cluster.</span></span> <span data-ttu-id="9f507-128">클러스터 간 마이그레이션의 성공 여부는 대상 WSFC 클러스터의 철저한 계획 및 준비에 의해 결정됩니다.</span><span class="sxs-lookup"><span data-stu-id="9f507-128">The success of a cross-cluster migration depends on thorough planning and preparation of the destination WSFC cluster.</span></span>  
  
 <span data-ttu-id="9f507-129">자세한 내용은 [OS 업그레이드를 위한 AlwaysOn 가용성 그룹의 클러스터 간 마이그레이션](https://msdn.microsoft.com/library/jj873730.aspx)을 참조하십시오.</span><span class="sxs-lookup"><span data-stu-id="9f507-129">For more information, see [Cross-Cluster Migration of AlwaysOn Availability Groups for OS Upgrade](https://msdn.microsoft.com/library/jj873730.aspx).</span></span>  
  
##  <a name="ssnoversion-failover-cluster-instances-fcis-and-availability-groups"></a><a name="SQLServerFC"></a> <span data-ttu-id="9f507-130">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] FCI(장애 조치(failover) 클러스터 인스턴스) 및 가용성 그룹</span><span class="sxs-lookup"><span data-stu-id="9f507-130">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Failover Cluster Instances (FCIs) and Availability Groups</span></span>  
 <span data-ttu-id="9f507-131">WSFC 클러스터와 함께 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 장애 조치(Failover) 클러스터링을 구현하여 서버 인스턴스 수준에서 장애 조치(Failover)의 두 번째 계층을 설정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="9f507-131">You can set up a second layer of failover at the server-instance level by implementing [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover clustering together with the WSFC cluster.</span></span> <span data-ttu-id="9f507-132">가용성 복제본은 독립 실행형 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 인스턴스 또는 FCI 인스턴스에서 호스팅할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="9f507-132">An availability replica can be hosted by either a standalone instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] or an FCI instance.</span></span> <span data-ttu-id="9f507-133">지정된 가용성 그룹의 복제본은 하나의 FCI 파트너에서만 호스팅할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="9f507-133">Only one FCI partner can host a replica for a given availability group.</span></span> <span data-ttu-id="9f507-134">가용성 복제본이 FCI에서 실행 중인 경우 가용성 그룹에 대한 가능한 소유자 목록에는 활성 FCI 노드만 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="9f507-134">When an availability replica is running on an FCI, the possible owners list for the availability group will contain only the active FCI node.</span></span>  
  
 [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] <span data-ttu-id="9f507-135">은 어떤 형태의 공유 스토리지에도 종속되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="9f507-135">does not depend on any form of shared storage.</span></span> <span data-ttu-id="9f507-136">하지만 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] FCI(장애 조치(Failover) 클러스터 인스턴스)를 사용하여 하나 이상의 가용성 복제본을 호스팅하는 경우 각 FCI에는 표준 SQL Server 장애 조치(Failover) 클러스터 인스턴스 설치와 같이 공유 스토리지가 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="9f507-136">However, if you use a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover cluster instance (FCI) to host one or more availability replicas, each of those FCIs will require shared storage as per standard SQL Server failover cluster instance installation.</span></span>  
  
 <span data-ttu-id="9f507-137">필수 조건에 대한 자세한 내용은 [AlwaysOn 가용성 그룹에 대한 필수 조건, 제한 사항 및 권장 사항&#40;SQL Server&#41;](prereqs-restrictions-recommendations-always-on-availability.md)의 "가용성 복제본을 호스트하기 위해 SQL Server FCI(장애 조치(failover) 클러스터 인스턴스) 사용에 대한 필수 조건 및 제한 사항" 섹션을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="9f507-137">For more information about additional prerequisites, see the "Prerequisites and Restrictions for Using a SQL Server Failover Cluster Instance (FCI) to Host an Availability Replica" section of [Prerequisites, Restrictions, and Recommendations for AlwaysOn Availability Groups &#40;SQL Server&#41;](prereqs-restrictions-recommendations-always-on-availability.md).</span></span>  
  
### <a name="comparison-of-failover-cluster-instances-and-availability-groups"></a><span data-ttu-id="9f507-138">장애 조치(Failover) 클러스터 인스턴스와 가용성 그룹 비교</span><span class="sxs-lookup"><span data-stu-id="9f507-138">Comparison of Failover Cluster Instances and Availability Groups</span></span>  
 <span data-ttu-id="9f507-139">FCI의 노드 수에 관계 없이 전체 FCI는 가용성 그룹 내의 단일 복제본을 호스팅합니다.</span><span class="sxs-lookup"><span data-stu-id="9f507-139">Regardless of the number of nodes in the FCI, an entire FCI hosts a single replica within an availability group.</span></span> <span data-ttu-id="9f507-140">다음 표에서는 FCI의 노드와 가용성 그룹 내 복제본 간의 개념적인 차이에 대해 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="9f507-140">The following table describes the distinctions in concepts between nodes in an FCI and replicas within an availability group.</span></span>  
  
||<span data-ttu-id="9f507-141">FCI 내의 노드</span><span class="sxs-lookup"><span data-stu-id="9f507-141">Nodes within an FCI</span></span>|<span data-ttu-id="9f507-142">가용성 그룹 내의 복제본</span><span class="sxs-lookup"><span data-stu-id="9f507-142">Replicas within an availability group</span></span>|  
|-|-------------------------|-------------------------------------------|  
|<span data-ttu-id="9f507-143">**WSFC 클러스터 사용**</span><span class="sxs-lookup"><span data-stu-id="9f507-143">**Uses WSFC cluster**</span></span>|<span data-ttu-id="9f507-144">예</span><span class="sxs-lookup"><span data-stu-id="9f507-144">Yes</span></span>|<span data-ttu-id="9f507-145">예</span><span class="sxs-lookup"><span data-stu-id="9f507-145">Yes</span></span>|  
|<span data-ttu-id="9f507-146">**보호 수준**</span><span class="sxs-lookup"><span data-stu-id="9f507-146">**Protection level**</span></span>|<span data-ttu-id="9f507-147">인스턴스</span><span class="sxs-lookup"><span data-stu-id="9f507-147">Instance</span></span>|<span data-ttu-id="9f507-148">데이터베이스</span><span class="sxs-lookup"><span data-stu-id="9f507-148">Database</span></span>|  
|<span data-ttu-id="9f507-149">**스토리지 유형**</span><span class="sxs-lookup"><span data-stu-id="9f507-149">**Storage type**</span></span>|<span data-ttu-id="9f507-150">공유됨</span><span class="sxs-lookup"><span data-stu-id="9f507-150">Shared</span></span>|<span data-ttu-id="9f507-151">공유되지 않음</span><span class="sxs-lookup"><span data-stu-id="9f507-151">Non-shared</span></span><br /><br /> <span data-ttu-id="9f507-152">가용성 그룹의 복제본은 스토리지를 공유하지 않는 반면 FCI가 호스트하는 복제본은 해당 FCI가 요구하는 대로 공유 스토리지 솔루션을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="9f507-152">Note that while the replicas in an availability group do not share storage, a replica that is hosted by an FCI uses a shared storage solution as required by that FCI.</span></span> <span data-ttu-id="9f507-153">스토리지 솔루션은 FCI 내 노드에 의해서만 공유되고 가용성 그룹의 복제본 사이에서는 공유되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="9f507-153">The storage solution is shared only by nodes within the FCI and not between replicas of the availability group.</span></span>|  
|<span data-ttu-id="9f507-154">**스토리지 솔루션**</span><span class="sxs-lookup"><span data-stu-id="9f507-154">**Storage solutions**</span></span>|<span data-ttu-id="9f507-155">직접 연결됨, SAN, 탑재 지점, SMB</span><span class="sxs-lookup"><span data-stu-id="9f507-155">Direct attached, SAN, mount points, SMB</span></span>|<span data-ttu-id="9f507-156">노드 유형에 따라 다름</span><span class="sxs-lookup"><span data-stu-id="9f507-156">Depends on node type</span></span>|  
|<span data-ttu-id="9f507-157">**읽기 가능한 보조 복제본**</span><span class="sxs-lookup"><span data-stu-id="9f507-157">**Readable secondaries**</span></span>|<span data-ttu-id="9f507-158">아니요\*</span><span class="sxs-lookup"><span data-stu-id="9f507-158">No\*</span></span>|<span data-ttu-id="9f507-159">예</span><span class="sxs-lookup"><span data-stu-id="9f507-159">Yes</span></span>|  
|<span data-ttu-id="9f507-160">**적용할 수 있는 장애 조치(Failover) 정책 설정**</span><span class="sxs-lookup"><span data-stu-id="9f507-160">**Applicable failover policy settings**</span></span>|<span data-ttu-id="9f507-161">WSFC 쿼럼</span><span class="sxs-lookup"><span data-stu-id="9f507-161">WSFC quorum</span></span><br /><br /> <span data-ttu-id="9f507-162">FCI별</span><span class="sxs-lookup"><span data-stu-id="9f507-162">FCI-specific</span></span><br /><br /> <span data-ttu-id="9f507-163">가용성 그룹 설정\*\*</span><span class="sxs-lookup"><span data-stu-id="9f507-163">Availability group settings\*\*</span></span>|<span data-ttu-id="9f507-164">WSFC 쿼럼</span><span class="sxs-lookup"><span data-stu-id="9f507-164">WSFC quorum</span></span><br /><br /> <span data-ttu-id="9f507-165">가용성 그룹 설정</span><span class="sxs-lookup"><span data-stu-id="9f507-165">Availability group settings</span></span>|  
|<span data-ttu-id="9f507-166">**장애 조치(Failover)가 실행된 리소스**</span><span class="sxs-lookup"><span data-stu-id="9f507-166">**Failed-over resources**</span></span>|<span data-ttu-id="9f507-167">서버, 인스턴스 및 데이터베이스</span><span class="sxs-lookup"><span data-stu-id="9f507-167">Server, instance, and database</span></span>|<span data-ttu-id="9f507-168">데이터베이스에만 해당</span><span class="sxs-lookup"><span data-stu-id="9f507-168">Database only</span></span>|  
  
 <span data-ttu-id="9f507-169">\*가용성 그룹의 동기적 보조 복제본은 항상 해당 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 인스턴스에서 실행되는 반면 FCI의 보조 노드는 실제로 해당 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 인스턴스를 시작하지 않았으며 따라서 읽을 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="9f507-169">\*Whereas synchronous secondary replicas in an availability group are always running on their respective [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instances, secondary nodes in an FCI actually have not started their respective [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instances and are therefore not readable.</span></span> <span data-ttu-id="9f507-170">FCI에서 보조 노드는 리소스 그룹 소유권이 FCI 장애 조치(Failover) 중 보조 노드로 전달된 경우에만 해당 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 인스턴스를 시작합니다.</span><span class="sxs-lookup"><span data-stu-id="9f507-170">In an FCI, a secondary node starts its [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] instance only when the resource group ownership is transferred to it during an FCI failover.</span></span> <span data-ttu-id="9f507-171">하지만 FCI가 호스팅하는 데이터베이스가 가용성 그룹에 속해 있을 때 활성 FCI 노드에서 로컬 가용성 복제본이 읽기 가능한 보조 복제본으로 실행되는 경우 이 데이터베이스는 읽을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="9f507-171">However, on the active FCI node, when an FCI-hosted database belongs to an availability group, if the local availability replica is running as a readable secondary replica, the database is readable.</span></span>  
  
 <span data-ttu-id="9f507-172">\*\*가용성 그룹에 대한 장애 조치(Failover) 정책 설정은 독립 실행형 인스턴스에서 호스팅되는지 FCI 인스턴스에서 호스팅되는지에 관계없이 모든 복제본에 적용됩니다.</span><span class="sxs-lookup"><span data-stu-id="9f507-172">\*\*Failover policy settings for the availability group apply to all replicas, whether it is hosted in a standalone instance or an FCI instance.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="9f507-173">장애 조치 (Failover) 클러스터링 내의 **노드 수** 및 다양 한 버전의 **AlwaysOn 가용성 그룹** 에 대 한 자세한 내용은 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] [SQL Server 2012 버전에서 지 원하는 기능](https://go.microsoft.com/fwlink/?linkid=232473) 을 참조 하세요 https://go.microsoft.com/fwlink/?linkid=232473) .</span><span class="sxs-lookup"><span data-stu-id="9f507-173">For more information about **Number of nodes** within Failover Clustering and **AlwaysOn Availability Groups** for different editions of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], see [Features Supported by the Editions of SQL Server 2012](https://go.microsoft.com/fwlink/?linkid=232473) (https://go.microsoft.com/fwlink/?linkid=232473).</span></span>  
  
### <a name="considerations-for-hosting-an-availability-replica-on-an-fci"></a><span data-ttu-id="9f507-174">FCI에서 가용성 복제본을 호스팅하는 경우의 고려 사항</span><span class="sxs-lookup"><span data-stu-id="9f507-174">Considerations for hosting an Availability Replica on an FCI</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="9f507-175">SQL Server FCI(장애 조치(Failover) 클러스터 인스턴스)에서 가용성 복제본을 호스팅하려는 경우 Windows Server 2008 호스트 노드가 FCI에 대한 AlwaysOn 필수 구성 요소 및 제한 사항을 충족하는지 확인해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="9f507-175">If you plan to host an availability replica on a SQL Server Failover Cluster Instance (FCI), ensure that the Windows Server 2008 host nodes meet the AlwaysOn prerequisites and restrictions for Failover Cluster Instances (FCIs).</span></span> <span data-ttu-id="9f507-176">자세한 내용은 [AlwaysOn 가용성 그룹에 대한 필수 조건, 제한 사항 및 권장 사항&#40;SQL Server&#41;](prereqs-restrictions-recommendations-always-on-availability.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="9f507-176">For more information, see [Prerequisites, Restrictions, and Recommendations for AlwaysOn Availability Groups &#40;SQL Server&#41;](prereqs-restrictions-recommendations-always-on-availability.md).</span></span>  
  
 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="9f507-177">FCI(장애 조치(failover) 클러스터 인스턴스)는 가용성 그룹에 따라 AlwaysOn 자동 장애 조치(failover)를 지원하지 않으므로 FCI에서 호스트하는 모든 가용성 복제본은 수동 장애 조치(failover)에 대해서만 구성될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="9f507-177">Failover Cluster Instances (FCIs) do not support automatic failover by availability groups, so any availability replica that is hosted by an FCI can only be configured for manual failover.</span></span>  
  
 <span data-ttu-id="9f507-178">일부 노드에서는 사용할 수 없는 공유 디스크를 포함하도록 WSFC(Windows Server 장애 조치(Failover) 클러스터링) 클러스터를 구성해야 할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="9f507-178">You might need to configure a Windows Server Failover Clustering (WSFC) cluster to include shared disks that are not available on all nodes.</span></span> <span data-ttu-id="9f507-179">예를 들어 세 개의 노드와 두 데이터 센터에 걸쳐 있는 WSFC 클러스터가 있다고 가정합니다.</span><span class="sxs-lookup"><span data-stu-id="9f507-179">For example, consider a WSFC cluster across two data centers with three nodes.</span></span> <span data-ttu-id="9f507-180">노드 중 두 개는 주 데이터 센터에서 SQL Server FCI(장애 조치(Failover) 클러스터링 인스턴스)를 호스팅하며 동일한 공유 디스크에 대한 액세스 권한이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="9f507-180">Two of the nodes host a SQL Server failover clustering instance (FCI) in the primary data center and have access to the same shared disks.</span></span> <span data-ttu-id="9f507-181">세 번째 노드는 다른 데이터 센터에서 독립 실행형 SQL Server 인스턴스를 호스팅하며 주 데이터 센터의 공유 디스크에 대한 액세스 권한이 없습니다.</span><span class="sxs-lookup"><span data-stu-id="9f507-181">The third node hosts a stand-alone instance of SQL Server in a different data center and does not have access to the shared disks from the primary data center.</span></span> <span data-ttu-id="9f507-182">이 WSFC 클러스터 구성은 FCI가 주 복제본을 호스팅하고 독립 실행형 인스턴스가 보조 복제본을 호스팅하는 경우 가용성 그룹 배포를 지원합니다.</span><span class="sxs-lookup"><span data-stu-id="9f507-182">This WSFC cluster configuration supports the deployment of an availability group if the FCI hosts the primary replica and the stand-alone instance hosts the secondary replica.</span></span>  
  
 <span data-ttu-id="9f507-183">지정된 가용성 그룹에 대한 가용성 복제본을 호스팅하도록 FCI를 선택하는 경우 FCI 장애 조치(Failover)로 인해 단일 WSFC 노드가 동일한 가용성 그룹에 대해 두 개의 가용성 복제본을 호스팅하려고 시도해서는 안 됩니다.</span><span class="sxs-lookup"><span data-stu-id="9f507-183">When choosing an FCI to host an availability replica for a given availability group, ensure that an FCI failover could not potentially cause a single WSFC node to attempt to host two availability replicas for the same availability group.</span></span>  
  
 <span data-ttu-id="9f507-184">다음 예에서는 이 구성을 사용할 경우 발생할 수 있는 문제를 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="9f507-184">The following example scenario illustrates how this configuration could lead to problems:</span></span>  
  
 <span data-ttu-id="9f507-185">Marcel은 `NODE01` 및 `NODE02`라는 두 개의 노드가 있는 WSFC 클러스터를 구성합니다.</span><span class="sxs-lookup"><span data-stu-id="9f507-185">Marcel configures two a WSFC cluster with two nodes, `NODE01` and `NODE02`.</span></span> <span data-ttu-id="9f507-186">Marcel은 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 및 `fciInstance1`모두에 `NODE01` 장애 조치(Failover) 클러스터 인스턴스 `NODE02` 을 설치합니다. 여기에서 `NODE01` 은 `fciInstance1`의 현재 소유자입니다.</span><span class="sxs-lookup"><span data-stu-id="9f507-186">He installs a [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover cluster instance, `fciInstance1`, on both `NODE01` and `NODE02` where `NODE01` is the current owner for `fciInstance1`.</span></span>  
 <span data-ttu-id="9f507-187">Marcel은 `NODE02`에 독립 실행형 인스턴스인 또 다른 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]인스턴스, `Instance3`을 설치합니다.</span><span class="sxs-lookup"><span data-stu-id="9f507-187">On `NODE02`, Marcel installs another instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], `Instance3`, which is a stand-alone instance.</span></span>  
 <span data-ttu-id="9f507-188">Marcel은 `NODE01`에서 [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)]을 사용하도록 fciInstance1을 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="9f507-188">On `NODE01`, Marcel enables fciInstance1 for [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)].</span></span> <span data-ttu-id="9f507-189">`NODE02`에서 Marcel은 `Instance3` 을 사용하도록 [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)]을 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="9f507-189">On `NODE02`, he enables `Instance3` for [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)].</span></span> <span data-ttu-id="9f507-190">그런 다음 Marcel은 `fciInstance1` 이 주 복제본을 호스팅하고 `Instance3` 이 보조 복제본을 호스팅하는 가용성 그룹을 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="9f507-190">Then he sets up an availability group for which `fciInstance1` hosts the primary replica, and `Instance3` hosts the secondary replica.</span></span>  
 <span data-ttu-id="9f507-191">어느 시점에 `fciInstance1` 에서 `NODE01`을 사용할 수 없게 되면 WSFC 클러스터를 통해 `fciInstance1` 에서 `NODE02`로 장애 조치(Failover)가 수행됩니다.</span><span class="sxs-lookup"><span data-stu-id="9f507-191">At some point `fciInstance1` becomes unavailable on `NODE01`, and the WSFC cluster causes a failover of `fciInstance1` to `NODE02`.</span></span> <span data-ttu-id="9f507-192">장애 조치(Failover) 후 `fciInstance1` 은 [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)]에서 주 역할로 실행되는 `NODE02`사용 인스턴스가 되지만</span><span class="sxs-lookup"><span data-stu-id="9f507-192">After the failover, `fciInstance1` is a [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)]-enabled instance running under the primary role on `NODE02`.</span></span> <span data-ttu-id="9f507-193">`Instance3` 은 이제 `fciInstance1`과 동일한 WSFC 노드에 있습니다.</span><span class="sxs-lookup"><span data-stu-id="9f507-193">However, `Instance3` now resides on the same WSFC node as `fciInstance1`.</span></span> <span data-ttu-id="9f507-194">이 경우 [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] 제약 조건을 위반하게 됩니다.</span><span class="sxs-lookup"><span data-stu-id="9f507-194">This violates the [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] constraint.</span></span>  
 <span data-ttu-id="9f507-195">이 시나리오에서 발생한 문제를 해결하려면 독립 실행형 인스턴스인 `Instance3`이 `NODE01` 및 `NODE02`와 동일한 WSFC 클러스터의 다른 노드에 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="9f507-195">To correct the problem that this scenario presents, the stand-alone instance, `Instance3`, must reside on another node in the same WSFC cluster as `NODE01` and `NODE02`.</span></span>  
  
 <span data-ttu-id="9f507-196">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 장애 조치(failover) 클러스터링에 대한 자세한 내용은 [AlwaysOn 장애 조치(Failover) 클러스터 인스턴스&#40;SQL Server&#41;](../../../sql-server/failover-clusters/windows/always-on-failover-cluster-instances-sql-server.md)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="9f507-196">For more information about [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] failover clustering, see [AlwaysOn Failover Cluster Instances &#40;SQL Server&#41;](../../../sql-server/failover-clusters/windows/always-on-failover-cluster-instances-sql-server.md).</span></span>  
  
##  <a name="restrictions-on-using-the-wsfc-failover-cluster-manager-with-availability-groups"></a><a name="FCMrestrictions"></a><span data-ttu-id="9f507-197">가용성 그룹에 WSFC 장애 조치(Failover) 클러스터 관리자 사용에 대 한 제한 사항</span><span class="sxs-lookup"><span data-stu-id="9f507-197">Restrictions on Using The WSFC Failover Cluster Manager with Availability Groups</span></span>  
 <span data-ttu-id="9f507-198">다음의 예처럼 장애 조치(Failover) 클러스터 관리자를 사용하여 가용성 그룹을 조작하지 마세요.</span><span class="sxs-lookup"><span data-stu-id="9f507-198">Do not use the Failover Cluster Manager to manipulate availability groups, for example:</span></span>  
  
-   <span data-ttu-id="9f507-199">가용성 그룹에 대한 클러스터형 서비스(리소스 그룹)에 리소스를 추가하거나 제거하지 마세요.</span><span class="sxs-lookup"><span data-stu-id="9f507-199">Do not add or remove resources in the clustered service (resource group) for the availability group.</span></span>  
  
-   <span data-ttu-id="9f507-200">가능한 소유자 및 기본 설정 소유자와 같은 가용성 그룹 속성을 변경하지 마세요.</span><span class="sxs-lookup"><span data-stu-id="9f507-200">Do not change any availability group properties, such as the possible owners and preferred owners.</span></span> <span data-ttu-id="9f507-201">이러한 속성은 가용성 그룹에 의해 자동으로 설정됩니다.</span><span class="sxs-lookup"><span data-stu-id="9f507-201">These properties are set automatically by the availability group.</span></span>  
  
-   <span data-ttu-id="9f507-202">장애 조치(Failover) 클러스터 관리자를 사용하여 가용성 그룹을 다른 노드로 옮기거나 가용성 그룹을 장애 조치(Failover)을 수행하지 마세요.</span><span class="sxs-lookup"><span data-stu-id="9f507-202">Do not use the Failover Cluster Manager to move availability groups to different nodes or to fail over availability groups.</span></span> <span data-ttu-id="9f507-203">장애 조치(Failover) 클러스터 관리자에서는 가용성 복제본의 동기화 상태를 인식하지 못하기 때문에 이로 인해 작동 중지 시간이 길어질 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="9f507-203">The Failover Cluster Manager is not aware of the synchronization status of the availability replicas, and doing so can lead to extended downtime.</span></span> <span data-ttu-id="9f507-204">[!INCLUDE[tsql](../../../includes/tsql-md.md)] 또는 [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)]를 사용해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="9f507-204">You must use [!INCLUDE[tsql](../../../includes/tsql-md.md)] or [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)].</span></span>  
  
##  <a name="related-content"></a><a name="RelatedContent"></a> <span data-ttu-id="9f507-205">관련 내용</span><span class="sxs-lookup"><span data-stu-id="9f507-205">Related Content</span></span>  
  
-   <span data-ttu-id="9f507-206">**블로그:**</span><span class="sxs-lookup"><span data-stu-id="9f507-206">**Blogs:**</span></span>  
  
     [<span data-ttu-id="9f507-207">제한된 보안을 사용하여 SQL Server의 Windows 장애 조치(Failover) 클러스터링 구성(가용성 그룹 또는 FCI)</span><span class="sxs-lookup"><span data-stu-id="9f507-207">Configure Windows Failover Clustering for SQL Server (Availability Group or FCI) with Limited Security</span></span>](https://blogs.msdn.com/b/sqlalwayson/archive/2012/06/05/configure-windows-failover-clustering-for-sql-server-availability-group-or-fci-with-limited-security.aspx)  
  
     [<span data-ttu-id="9f507-208">SQL Server AlwaysOn 팀 블로그: 공식 SQL Server AlwaysOn 팀 블로그</span><span class="sxs-lookup"><span data-stu-id="9f507-208">SQL Server AlwaysOn Team Blogs: The official SQL Server AlwaysOn Team Blog</span></span>](https://blogs.msdn.com/b/sqlalwayson/)  
  
     [<span data-ttu-id="9f507-209">CSS SQL Server 엔지니어 블로그</span><span class="sxs-lookup"><span data-stu-id="9f507-209">CSS SQL Server Engineers Blogs</span></span>](https://blogs.msdn.com/b/psssql/)  
  
-   <span data-ttu-id="9f507-210">**백서:**</span><span class="sxs-lookup"><span data-stu-id="9f507-210">**Whitepapers:**</span></span>  
  
     [<span data-ttu-id="9f507-211">AlwaysOn 아키텍처 가이드: 장애 조치(Failover) 클러스터 인스턴스 및 가용성 그룹을 사용하여 고가용성 및 재해 복구 솔루션 구축</span><span class="sxs-lookup"><span data-stu-id="9f507-211">AlwaysOn Architecture Guide: Building a High Availability and Disaster Recovery Solution by Using Failover Cluster Instances and Availability Groups</span></span>](https://msdn.microsoft.com/library/jj215886.aspx)  
  
     [<span data-ttu-id="9f507-212">고가용성 및 재해 복구를 위한 Microsoft SQL Server AlwaysOn 솔루션 가이드</span><span class="sxs-lookup"><span data-stu-id="9f507-212">Microsoft SQL Server AlwaysOn Solutions Guide for High Availability and Disaster Recovery</span></span>](https://go.microsoft.com/fwlink/?LinkId=227600)  
  
     [<span data-ttu-id="9f507-213">SQL Server 2012에 대한 Microsoft 백서</span><span class="sxs-lookup"><span data-stu-id="9f507-213">Microsoft White Papers for SQL Server 2012</span></span>](https://msdn.microsoft.com/library/hh403491.aspx)  
  
     [<span data-ttu-id="9f507-214">SQL Server 고객 자문 팀 백서</span><span class="sxs-lookup"><span data-stu-id="9f507-214">SQL Server Customer Advisory Team Whitepapers</span></span>](http://sqlcat.com/)  
  
## <a name="see-also"></a><span data-ttu-id="9f507-215">참고 항목</span><span class="sxs-lookup"><span data-stu-id="9f507-215">See Also</span></span>  
 <span data-ttu-id="9f507-216">[AlwaysOn 가용성 그룹 &#40;&#41;SQL Server 개요](overview-of-always-on-availability-groups-sql-server.md) AlwaysOn 가용성 그룹 &#40;SQL Server [사용 및 사용 안 함](enable-and-disable-always-on-availability-groups-sql-server.md)&#41;&#40;&#41;[가용성 그룹 모니터링](monitor-availability-groups-transact-sql.md)</span><span class="sxs-lookup"><span data-stu-id="9f507-216">[Overview of AlwaysOn Availability Groups &#40;SQL Server&#41;](overview-of-always-on-availability-groups-sql-server.md) [Enable and Disable AlwaysOn Availability Groups &#40;SQL Server&#41;](enable-and-disable-always-on-availability-groups-sql-server.md) [Monitor Availability Groups &#40;Transact-SQL&#41;](monitor-availability-groups-transact-sql.md)</span></span>  
 [<span data-ttu-id="9f507-217">AlwaysOn 장애 조치 (Failover) 클러스터 인스턴스 &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="9f507-217">AlwaysOn Failover Cluster Instances &#40;SQL Server&#41;</span></span>](../../../sql-server/failover-clusters/windows/always-on-failover-cluster-instances-sql-server.md) 
  
  
