---
title: AlwaysOn 가용성 그룹 구성 문제 해결 (SQL Server) | Microsoft Docs
ms.custom: ''
ms.date: 01/31/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- troubleshooting [SQL Server], deploying
- Availability Groups [SQL Server], troubleshooting
- Availability Groups [SQL Server], configuring
ms.assetid: 8c222f98-7392-4faf-b7ad-5fb60ffa237e
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: 165036ba539c3392b1944282bd9d6126eb471a97
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87741280"
---
# <a name="troubleshoot-alwayson-availability-groups-configuration-sql-server"></a><span data-ttu-id="c838c-102">AlwaysOn 가용성 그룹 구성 문제 해결(SQL Server)</span><span class="sxs-lookup"><span data-stu-id="c838c-102">Troubleshoot AlwaysOn Availability Groups Configuration (SQL Server)</span></span>
  <span data-ttu-id="c838c-103">이 항목에서는 [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)]에 대한 서버 인스턴스를 구성하는 것과 관련된 일반적인 문제를 해결하는 데 유용한 정보를 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="c838c-103">This topic provides information to help you troubleshoot typical problems with configuring server instances for [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)].</span></span> <span data-ttu-id="c838c-104">[!INCLUDE[ssHADR](../../../includes/sshadr-md.md)]을 사용할 수 없거나, 계정이 잘못 구성되거나, 데이터베이스 미러링 엔드포인트가 없거나, 엔드포인트에 액세스할 수 없거나(SQL Server 오류 1418), 네트워크 액세스 권한이 없거나, 데이터베이스 조인 명령이 실패(SQL Server 오류 35250)하는 경우가 일반적인 구성 문제에 해당합니다.</span><span class="sxs-lookup"><span data-stu-id="c838c-104">Typical configuration problems include [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] is disabled, accounts are incorrectly configured, the database mirroring endpoint does not exist, the endpoint is inaccessible (SQL Server Error 1418), network access does not exist, and a join database command fails (SQL Server Error 35250).</span></span>

> [!NOTE]
>  <span data-ttu-id="c838c-105">[!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] 사전 요구 사항을 충족하는지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="c838c-105">Ensure that you are meeting the [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] prerequisites.</span></span> <span data-ttu-id="c838c-106">자세한 내용은 [AlwaysOn 가용성 그룹에 대한 필수 조건, 제한 사항 및 권장 사항&#40;SQL Server&#41;](prereqs-restrictions-recommendations-always-on-availability.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="c838c-106">For more information, see [Prerequisites, Restrictions, and Recommendations for AlwaysOn Availability Groups &#40;SQL Server&#41;](prereqs-restrictions-recommendations-always-on-availability.md).</span></span>

 <span data-ttu-id="c838c-107">**항목 내용:**</span><span class="sxs-lookup"><span data-stu-id="c838c-107">**In This Topic:**</span></span>

|<span data-ttu-id="c838c-108">섹션</span><span class="sxs-lookup"><span data-stu-id="c838c-108">Section</span></span>|<span data-ttu-id="c838c-109">Description</span><span class="sxs-lookup"><span data-stu-id="c838c-109">Description</span></span>|
|-------------|-----------------|
|[<span data-ttu-id="c838c-110">AlwaysOn 가용성 그룹을 사용할 수 없음</span><span class="sxs-lookup"><span data-stu-id="c838c-110">AlwaysOn Availability Groups Is Not Enabled</span></span>](#IsHadrEnabled)|<span data-ttu-id="c838c-111">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 에서 [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)]의 인스턴스를 사용할 수 없는 경우 해당 인스턴스는 가용성 그룹 만들기를 지원하지 않고 가용성 복제본을 호스팅할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="c838c-111">If an instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] is not enabled for [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)], the instance does not support availability group creation and cannot host any availability replicas.</span></span>|
|[<span data-ttu-id="c838c-112">계정</span><span class="sxs-lookup"><span data-stu-id="c838c-112">Accounts</span></span>](#Accounts)|<span data-ttu-id="c838c-113">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 가 실행되고 있는 계정을 올바르게 구성하기 위한 요구 사항에 대해 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="c838c-113">Discusses requirements for correctly configuring the accounts under which [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] is running.</span></span>|
|[<span data-ttu-id="c838c-114">엔드포인트</span><span class="sxs-lookup"><span data-stu-id="c838c-114">Endpoints</span></span>](#Endpoints)|<span data-ttu-id="c838c-115">서버 인스턴스의 데이터베이스 미러링 엔드포인트 관련 문제를 진단하는 방법에 대해 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="c838c-115">Discusses how to diagnose issues with the database mirroring endpoint of a server instance.</span></span>|
|[<span data-ttu-id="c838c-116">시스템 이름</span><span class="sxs-lookup"><span data-stu-id="c838c-116">System name</span></span>](#SystemName)|<span data-ttu-id="c838c-117">엔드포인트 URL에서 서버 인스턴스의 시스템 이름을 지정하는 대안이 요약되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c838c-117">Summarizes the alternatives for specifying the system name of a server instance in an endpoint URL.</span></span>|
|[<span data-ttu-id="c838c-118">네트워크 액세스</span><span class="sxs-lookup"><span data-stu-id="c838c-118">Network access</span></span>](#NetworkAccess)|<span data-ttu-id="c838c-119">가용성 복제본을 호스팅하는 각 서버 인스턴스에서 TCP를 통해 다른 각 서버 인스턴스의 포트에 액세스할 수 있어야 한다는 요구 사항에 대해 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="c838c-119">Documents the requirement that each server instance that is hosting an availability replica must be able to access the port of each of the other server instances over TCP.</span></span>|
|[<span data-ttu-id="c838c-120">엔드포인트 액세스(SQL Server 오류 1418)</span><span class="sxs-lookup"><span data-stu-id="c838c-120">Endpoint Access (SQL Server Error 1418)</span></span>](#Msg1418)|<span data-ttu-id="c838c-121">이 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 오류 메시지에 대한 정보를 포함합니다.</span><span class="sxs-lookup"><span data-stu-id="c838c-121">Contains information about this [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] error message.</span></span>|
|[<span data-ttu-id="c838c-122">데이터베이스 조인 실패(SQL Server 오류 35250)</span><span class="sxs-lookup"><span data-stu-id="c838c-122">Join Database Fails (SQL Server Error 35250)</span></span>](#JoinDbFails)|<span data-ttu-id="c838c-123">주 복제본 연결이 활성화되지 않아서 가용성 그룹에 대한 보조 데이터베이스 조인에 실패하는 원인과 해결 방법에 대해 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="c838c-123">Discusses the possible causes and resolution of a failure to join secondary databases to an availability group because the connection to the primary replica is not active.</span></span>|
|[<span data-ttu-id="c838c-124">읽기 전용 라우팅이 올바르게 작동하지 않음</span><span class="sxs-lookup"><span data-stu-id="c838c-124">Read-Only Routing is Not Working Correctly</span></span>](#ROR)||
|[<span data-ttu-id="c838c-125">관련 작업</span><span class="sxs-lookup"><span data-stu-id="c838c-125">Related Tasks</span></span>](#RelatedTasks)|<span data-ttu-id="c838c-126">가용성 그룹 구성 문제를 해결하는 방법에 대해 설명하는 [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] 온라인 설명서에 있는 태스크 지향 항목 목록을 포함합니다.</span><span class="sxs-lookup"><span data-stu-id="c838c-126">Contains a list of task-oriented topics in [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)] Books Online that are particularly relevant to troubleshooting an availability group configuration.</span></span>|
|[<span data-ttu-id="c838c-127">관련 내용</span><span class="sxs-lookup"><span data-stu-id="c838c-127">Related Content</span></span>](#RelatedContent)|<span data-ttu-id="c838c-128">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 온라인 설명서에 포함되어 있지 않은 관련 리소스 목록을 포함합니다.</span><span class="sxs-lookup"><span data-stu-id="c838c-128">Contains a list of relevant resources that are external to [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Books Online.</span></span>|

##  <a name="alwayson-availability-groups-is-not-enabled"></a><a name="IsHadrEnabled"></a><span data-ttu-id="c838c-129">AlwaysOn 가용성 그룹를 사용할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="c838c-129">AlwaysOn Availability Groups Is Not Enabled</span></span>
 <span data-ttu-id="c838c-130">[!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] 의 각 인스턴스에서 [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)]기능을 사용하도록 설정해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="c838c-130">The [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] feature must be enabled on each of the instances of [!INCLUDE[ssCurrent](../../../includes/sscurrent-md.md)].</span></span> <span data-ttu-id="c838c-131">자세한 내용은 [AlwaysOn 가용성 그룹 활성화 및 비활성화&#40;SQL Server&#41;](enable-and-disable-always-on-availability-groups-sql-server.md)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="c838c-131">For more information, see [Enable and Disable AlwaysOn Availability Groups &#40;SQL Server&#41;](enable-and-disable-always-on-availability-groups-sql-server.md).</span></span>

##  <a name="accounts"></a><a name="Accounts"></a> <span data-ttu-id="c838c-132">계정</span><span class="sxs-lookup"><span data-stu-id="c838c-132">Accounts</span></span>
 <span data-ttu-id="c838c-133">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 를 실행하고 있는 계정이 올바르게 구성되어 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="c838c-133">The accounts under which [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] is running must be correctly configured.</span></span>

1.  <span data-ttu-id="c838c-134">계정에 올바른 권한이 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="c838c-134">Do the accounts have the correct permissions?</span></span>

    1.  <span data-ttu-id="c838c-135">파트너가 동일한 도메인 사용자 계정으로 실행되는 경우 올바른 사용자 로그인이 자동으로 두 **master** 데이터베이스에 모두 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="c838c-135">If the partners run as the same domain user account, the correct user logins exist automatically in both **master** databases.</span></span> <span data-ttu-id="c838c-136">데이터베이스에 대한 간단한 보안 구성으로 권장됩니다.</span><span class="sxs-lookup"><span data-stu-id="c838c-136">This simplifies the security configuration the database and is recommended.</span></span>

    2.  <span data-ttu-id="c838c-137">두 서버 인스턴스가 서로 다른 계정으로 실행되는 경우, 원격 서버 인스턴스의 **master** 에 각 계정에 대한 로그인을 만들고 이 로그인에 해당 서버 인스턴스의 데이터베이스 미러링 엔드포인트에 연결할 수 있는 CONNECT 권한을 부여해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="c838c-137">If two server instances run as different accounts, the login each account must be created in **master** on the remote server instance, and that login must be granted CONNECT permissions to connect to the database mirroring endpoint of that server instance.</span></span> <span data-ttu-id="c838c-138">자세한 내용은[데이터베이스 미러링에 대 한 로그인 계정 설정 또는&#41;SQL Server &#40;AlwaysOn 가용성 그룹 ](../../database-mirroring/set-up-login-accounts-database-mirroring-always-on-availability.md)을 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="c838c-138">For more information, see[Set Up Login Accounts for Database Mirroring or AlwaysOn Availability Groups &#40;SQL Server&#41;](../../database-mirroring/set-up-login-accounts-database-mirroring-always-on-availability.md).</span></span>

2.  <span data-ttu-id="c838c-139">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]가 로컬 시스템, 로컬 서비스 또는 네트워크 서비스와 같은 기본 제공 계정이나 비도메인 계정으로 실행 중인 경우에는 사용자가 엔드포인트 인증을 위한 인증서를 사용해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="c838c-139">If [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] is running as a built-in account, such as Local System, Local Service, or Network Service, or a nondomain account, you must use certificates for endpoint authentication.</span></span> <span data-ttu-id="c838c-140">서비스 계정에서 동일한 도메인의 도메인 계정을 사용 중인 경우 모든 복제본 위치의 각 서비스 계정에 연결 권한을 부여하거나, 인증서를 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c838c-140">If your service accounts are using domain accounts in the same domain, you can choose to grant CONNECT access for each service account on all the replica locations or you can use certificates.</span></span> <span data-ttu-id="c838c-141">자세한 내용은 [데이터베이스 미러링 엔드포인트에 대한 인증서 사용 &#40;Transact-SQL &#41;](../../database-mirroring/use-certificates-for-a-database-mirroring-endpoint-transact-sql.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="c838c-141">For more information, see[Use Certificates for a Database Mirroring Endpoint &#40;Transact-SQL&#41;](../../database-mirroring/use-certificates-for-a-database-mirroring-endpoint-transact-sql.md).</span></span>

##  <a name="endpoints"></a><a name="Endpoints"></a> <span data-ttu-id="c838c-142">엔드포인트</span><span class="sxs-lookup"><span data-stu-id="c838c-142">Endpoints</span></span>
 <span data-ttu-id="c838c-143">엔드포인트를 올바르게 구성해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="c838c-143">Endpoints must be correctly configured.</span></span>

1.  <span data-ttu-id="c838c-144">가용성 복제본을 호스트할 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 의 각 인스턴스(각 *복제본 위치*)에 데이터베이스 미러링 엔드포인트가 있는지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="c838c-144">Make sure that each instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] that is going to host an availability replica (each *replica location*) has a database mirroring endpoint.</span></span> <span data-ttu-id="c838c-145">지정된 서버 인스턴스에 데이터베이스 미러링 엔드포인트가 있는지 여부를 확인하려면 [sys.database_mirroring_endpoints](/sql/relational-databases/system-catalog-views/sys-database-mirroring-endpoints-transact-sql) 카탈로그 뷰를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="c838c-145">To determine whether a database mirroring endpoint exists on a given server instance, use the [sys.database_mirroring_endpoints](/sql/relational-databases/system-catalog-views/sys-database-mirroring-endpoints-transact-sql) catalog view.</span></span> <span data-ttu-id="c838c-146">자세한 내용은 [Windows 인증에 대한 데이터베이스 미러링 엔드포인트 만들기 &#40;Transact-SQL &#41;](../../database-mirroring/create-a-database-mirroring-endpoint-for-windows-authentication-transact-sql.md) 또는 [데이터베이스 미러링 엔드포인트의 아웃바운드 연결에 대한 인증서 사용 허용 &#40;Transact-SQL &#41;](../../database-mirroring/database-mirroring-use-certificates-for-outbound-connections.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="c838c-146">For more information, see either [Create a Database Mirroring Endpoint for Windows Authentication &#40;Transact-SQL&#41;](../../database-mirroring/create-a-database-mirroring-endpoint-for-windows-authentication-transact-sql.md) or [Allow a Database Mirroring Endpoint to Use Certificates for Outbound Connections &#40;Transact-SQL&#41;](../../database-mirroring/database-mirroring-use-certificates-for-outbound-connections.md).</span></span>

2.  <span data-ttu-id="c838c-147">포트 번호가 정확한지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="c838c-147">Check that the port numbers are correct.</span></span>

     <span data-ttu-id="c838c-148">서버 인스턴스의 데이터베이스 미러링 엔드포인트와 현재 연결된 포트를 식별하려면 다음 [!INCLUDE[tsql](../../../includes/tsql-md.md)] 문을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="c838c-148">To identify the port currently associated with database mirroring endpoint of a server instance, use the following [!INCLUDE[tsql](../../../includes/tsql-md.md)] statement:</span></span>

    ```
    SELECT type_desc, port FROM sys.tcp_endpoints;
    GO
    ```

3.  <span data-ttu-id="c838c-149">설명하기 어려운 [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] 설치 문제의 경우 각 서버 인스턴스를 조사하여 올바른 포트에서 수신하고 있는지 확인하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="c838c-149">For [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] setup issues that are difficult to explain, we recommend that you inspect each server instance to determine whether it is listening on the correct ports.</span></span> <span data-ttu-id="c838c-150">포트 가용성 확인에 대한 자세한 내용은 [MSSQLSERVER_1418](../../../relational-databases/errors-events/mssqlserver-1418-database-engine-error.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="c838c-150">For information about verifying port availability, see [MSSQLSERVER_1418](../../../relational-databases/errors-events/mssqlserver-1418-database-engine-error.md).</span></span>

4.  <span data-ttu-id="c838c-151">엔드포인트가 시작되었는지 확인합니다(STATE=STARTED).</span><span class="sxs-lookup"><span data-stu-id="c838c-151">Make sure that the endpoints are started (STATE=STARTED).</span></span> <span data-ttu-id="c838c-152">각 서버 인스턴스에서 다음 [!INCLUDE[tsql](../../../includes/tsql-md.md)] 문을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="c838c-152">On each server instance, use the following [!INCLUDE[tsql](../../../includes/tsql-md.md)] statement:</span></span>

    ```
    SELECT state_desc FROM sys.database_mirroring_endpoints
    ```

     <span data-ttu-id="c838c-153">**state_desc** 열에 대한 자세한 내용은 [sys.database_mirroring_endpoints&#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-database-mirroring-endpoints-transact-sql)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="c838c-153">For more information about the **state_desc** column, see [sys.database_mirroring_endpoints &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-database-mirroring-endpoints-transact-sql).</span></span>

     <span data-ttu-id="c838c-154">엔드포인트를 시작하려면 다음 [!INCLUDE[tsql](../../../includes/tsql-md.md)] 문을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="c838c-154">To start an endpoint, use the following [!INCLUDE[tsql](../../../includes/tsql-md.md)] statement:</span></span>

    ```
    ALTER ENDPOINT Endpoint_Mirroring 
    STATE = STARTED 
    AS TCP (LISTENER_PORT = <port_number>)
    FOR database_mirroring (ROLE = ALL);
    GO
    ```

     <span data-ttu-id="c838c-155">자세한 내용은 [ALTER ENDPOINT&#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-endpoint-transact-sql)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="c838c-155">For more information, see [ALTER ENDPOINT &#40;Transact-SQL&#41;](/sql/t-sql/statements/alter-endpoint-transact-sql).</span></span>

5.  <span data-ttu-id="c838c-156">다른 서버에서 로그인할 경우 CONNECT 권한이 있는지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="c838c-156">Make sure that the login from the other server has CONNECT permission.</span></span> <span data-ttu-id="c838c-157">엔드포인트에 대한 CONNECT 권한이 있는 사용자를 파악하려면 각 서버 인스턴스에서 다음 [!INCLUDE[tsql](../../../includes/tsql-md.md)] 문을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="c838c-157">To determine who has CONNECT permission for an endpoint, on each server instance use the following [!INCLUDE[tsql](../../../includes/tsql-md.md)] statement:</span></span>

    ```
    SELECT 'Metadata Check';
    SELECT EP.name, SP.STATE, 
       CONVERT(nvarchar(38), suser_name(SP.grantor_principal_id)) 
          AS GRANTOR, 
       SP.TYPE AS PERMISSION,
       CONVERT(nvarchar(46),suser_name(SP.grantee_principal_id)) 
          AS GRANTEE 
       FROM sys.server_permissions SP , sys.endpoints EP
       WHERE SP.major_id = EP.endpoint_id
       ORDER BY Permission,grantor, grantee; 
    GO

    ```

##  <a name="system-name"></a><a name="SystemName"></a> <span data-ttu-id="c838c-158">System Name</span><span class="sxs-lookup"><span data-stu-id="c838c-158">System Name</span></span>
 <span data-ttu-id="c838c-159">엔드포인트 URL에서 서버 인스턴스의 시스템 이름에는 시스템을 명확하게 식별하는 모든 이름을 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c838c-159">For the system name of a server instance in an endpoint URL, you can use any name that unambiguously identifies the system.</span></span> <span data-ttu-id="c838c-160">서버 주소는 시스템 이름(시스템이 같은 도메인에 있는 경우), 정규화된 도메인 이름 또는 IP 주소(가급적 고정 IP 주소)일 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c838c-160">The server address can be a system name (if the systems are in the same domain), a fully qualified domain name, or an IP address (preferably, a static IP address).</span></span> <span data-ttu-id="c838c-161">정규화된 도메인 이름을 사용하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="c838c-161">Using the fully qualified domain name is guaranteed to work.</span></span> <span data-ttu-id="c838c-162">자세한 내용은 [가용성 복제본 추가 또는 수정 시 엔드포인트 URL 지정&#40;SQL Server&#41;](specify-endpoint-url-adding-or-modifying-availability-replica.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="c838c-162">For more information, see [Specify the Endpoint URL When Adding or Modifying an Availability Replica &#40;SQL Server&#41;](specify-endpoint-url-adding-or-modifying-availability-replica.md).</span></span>

##  <a name="network-access"></a><a name="NetworkAccess"></a> <span data-ttu-id="c838c-163">Network Access</span><span class="sxs-lookup"><span data-stu-id="c838c-163">Network Access</span></span>
 <span data-ttu-id="c838c-164">가용성 복제본을 호스팅하는 각 서버 인스턴스에서 TCP를 통해 다른 각 서버 인스턴스의 포트에 액세스할 수 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="c838c-164">Each server instance that is hosting an availability replica must be able to access the port of each of the other server instance over TCP.</span></span> <span data-ttu-id="c838c-165">이는 서버 인스턴스가 서로 트러스트하지 않는 다른 도메인(트러스트되지 않은 도메인)에 있을 경우 특히 유용합니다.</span><span class="sxs-lookup"><span data-stu-id="c838c-165">This is especially important if the server instances are in different domains that do not trust each other (untrusted domains).</span></span>

##  <a name="endpoint-access-sql-server-error-1418"></a><a name="Msg1418"></a> <span data-ttu-id="c838c-166">엔드포인트 액세스(SQL Server 오류 1418)</span><span class="sxs-lookup"><span data-stu-id="c838c-166">Endpoint Access (SQL Server Error 1418)</span></span>
 <span data-ttu-id="c838c-167">이 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 메시지는 엔드포인트 URL에 지정된 서버 네트워크 주소가 없거나 도달할 수 없음을 나타내며 네트워크 주소 이름을 확인한 후 명령을 다시 실행하도록 제안합니다.</span><span class="sxs-lookup"><span data-stu-id="c838c-167">This [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] message indicates that the server network address specified in the endpoint URL cannot be reached or does not exist, and it suggests that you verify the network address name and reissue the command.</span></span> <span data-ttu-id="c838c-168">자세한 내용은 [MSSQLSERVER_1418](../../../relational-databases/errors-events/mssqlserver-1418-database-engine-error.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="c838c-168">For more information, see [MSSQLSERVER_1418](../../../relational-databases/errors-events/mssqlserver-1418-database-engine-error.md).</span></span>

##  <a name="join-database-fails-sql-server-error-35250"></a><a name="JoinDbFails"></a> <span data-ttu-id="c838c-169">데이터베이스 조인 실패(SQL Server 오류 35250)</span><span class="sxs-lookup"><span data-stu-id="c838c-169">Join Database Fails (SQL Server Error 35250)</span></span>
 <span data-ttu-id="c838c-170">이 섹션에서는 주 복제본 연결이 활성화되지 않아서 가용성 그룹에 대한 보조 데이터베이스 조인에 실패하는 원인과 해결 방법에 대해 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="c838c-170">This section discusses the possible causes and resolution of a failure to join secondary databases to the availability group because the connection to the primary replica is not active.</span></span>

 <span data-ttu-id="c838c-171">**해결 방법:**</span><span class="sxs-lookup"><span data-stu-id="c838c-171">**Resolution:**</span></span>

1.  <span data-ttu-id="c838c-172">방화벽 설정을 검사하여 주 복제본과 보조 복제본(기본적으로 포트 5022)을 호스팅하는 서버 인스턴스 사이의 엔드포인트 포트 통신을 허용하는지 여부를 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="c838c-172">Check the firewall setting to see if whether allows the endpoint port communication between the server instances that host primary replica and the secondary replica (port 5022 by default).</span></span>

2.  <span data-ttu-id="c838c-173">네트워크 서비스 계정에 엔드포인트에 대한 연결 권한이 있는지 여부를 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="c838c-173">Check whether the network service account has connect permission to the endpoint.</span></span>

##  <a name="read-only-routing-is-not-working-correctly"></a><a name="ROR"></a> <span data-ttu-id="c838c-174">읽기 전용 라우팅이 올바르게 작동하지 않음</span><span class="sxs-lookup"><span data-stu-id="c838c-174">Read-Only Routing is Not Working Correctly</span></span>
 <span data-ttu-id="c838c-175">다음 구성 값 설정을 확인하고 필요한 경우 수정합니다.</span><span class="sxs-lookup"><span data-stu-id="c838c-175">Verify the following configuration values settings and correct them if necessary.</span></span>

||<span data-ttu-id="c838c-176">On...</span><span class="sxs-lookup"><span data-stu-id="c838c-176">On...</span></span>|<span data-ttu-id="c838c-177">작업</span><span class="sxs-lookup"><span data-stu-id="c838c-177">Action</span></span>|<span data-ttu-id="c838c-178">주석</span><span class="sxs-lookup"><span data-stu-id="c838c-178">Comments</span></span>|<span data-ttu-id="c838c-179">링크</span><span class="sxs-lookup"><span data-stu-id="c838c-179">Link</span></span>|
|------|---------|------------|--------------|----------|
|<span data-ttu-id="c838c-180">![확인란](../../media/checkboxemptycenterxtraspacetopandright.gif "확인란")</span><span class="sxs-lookup"><span data-stu-id="c838c-180">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="c838c-181">현재 주 복제본</span><span class="sxs-lookup"><span data-stu-id="c838c-181">Current primary replica</span></span>|<span data-ttu-id="c838c-182">가용성 그룹 수신기가 온라인 상태인지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="c838c-182">Ensure that the availability group listener is online.</span></span>|<span data-ttu-id="c838c-183">**수신기가 온라인 상태인지 여부를 확인하려면:**</span><span class="sxs-lookup"><span data-stu-id="c838c-183">**To verify whether the listener is online:**</span></span><br /><br /> `SELECT * FROM sys.dm_tcp_listener_states;`<br /><br /> <span data-ttu-id="c838c-184">**오프라인 수신기를 다시 시작하려면:**</span><span class="sxs-lookup"><span data-stu-id="c838c-184">**To restart an offline listener:**</span></span><br /><br /> `ALTER AVAILABILITY GROUP myAG RESTART LISTENER 'myAG_Listener';`|[<span data-ttu-id="c838c-185">sys.dm_tcp_listener_states&#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="c838c-185">sys.dm_tcp_listener_states &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-dynamic-management-views/sys-dm-tcp-listener-states-transact-sql)<br /><br /> [<span data-ttu-id="c838c-186">ALTER AVAILABILITY GROUP&#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="c838c-186">ALTER AVAILABILITY GROUP &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/alter-availability-group-transact-sql)|
|<span data-ttu-id="c838c-187">![확인란](../../media/checkboxemptycenterxtraspacetopandright.gif "확인란")</span><span class="sxs-lookup"><span data-stu-id="c838c-187">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="c838c-188">현재 주 복제본</span><span class="sxs-lookup"><span data-stu-id="c838c-188">Current primary replica</span></span>|<span data-ttu-id="c838c-189">READ_ONLY_ROUTING_LIST에 읽기 가능한 보조 복제본을 호스팅하는 서버 인스턴스만 포함되어 있는지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="c838c-189">Ensure that the READ_ONLY_ROUTING_LIST contains only server instances that are hosting a readable secondary replica.</span></span>|<span data-ttu-id="c838c-190">**읽기 가능한 보조 복제본을 확인하려면:** sys.availability_replicas(**secondary_role_allow_connections_desc** 열)</span><span class="sxs-lookup"><span data-stu-id="c838c-190">**To identify readable secondary replicas:** sys.availability_replicas  (**secondary_role_allow_connections_desc** column)</span></span><br /><br /> <span data-ttu-id="c838c-191">**읽기 전용 라우팅 목록을 보려면:** sys.availability_read_only_routing_lists</span><span class="sxs-lookup"><span data-stu-id="c838c-191">**To view a read-only routing list:** sys.availability_read_only_routing_lists</span></span><br /><br /> <span data-ttu-id="c838c-192">**읽기 전용 라우팅 목록을 변경하려면:** ALTER AVAILABILITY GROUP</span><span class="sxs-lookup"><span data-stu-id="c838c-192">**To change a read-only routing list:** ALTER AVAILABILITY GROUP</span></span>|[<span data-ttu-id="c838c-193">sys.availability_replicas&#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="c838c-193">sys.availability_replicas &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-catalog-views/sys-availability-replicas-transact-sql)<br /><br /> [<span data-ttu-id="c838c-194">sys.availability_read_only_routing_lists&#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="c838c-194">sys.availability_read_only_routing_lists &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-catalog-views/sys-availability-read-only-routing-lists-transact-sql)<br /><br /> [<span data-ttu-id="c838c-195">ALTER AVAILABILITY GROUP&#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="c838c-195">ALTER AVAILABILITY GROUP &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/alter-availability-group-transact-sql)|
|<span data-ttu-id="c838c-196">![확인란](../../media/checkboxemptycenterxtraspacetopandright.gif "확인란")</span><span class="sxs-lookup"><span data-stu-id="c838c-196">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="c838c-197">read_only_routing_list에 있는 모든 복제본</span><span class="sxs-lookup"><span data-stu-id="c838c-197">Every replica in the read_only_routing_list</span></span>|<span data-ttu-id="c838c-198">Windows 방화벽이 READ_ONLY_ROUTING_URL 포트를 차단하고 있는지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="c838c-198">Ensure that the Windows firewall is not blocking the READ_ONLY_ROUTING_URL port.</span></span>|-|[<span data-ttu-id="c838c-199">데이터베이스 엔진 액세스에 대한 Windows 방화벽 구성</span><span class="sxs-lookup"><span data-stu-id="c838c-199">Configure a Windows Firewall for Database Engine Access</span></span>](../../configure-windows/configure-a-windows-firewall-for-database-engine-access.md)|
|<span data-ttu-id="c838c-200">![확인란](../../media/checkboxemptycenterxtraspacetopandright.gif "확인란")</span><span class="sxs-lookup"><span data-stu-id="c838c-200">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="c838c-201">read_only_routing_list에 있는 모든 복제본</span><span class="sxs-lookup"><span data-stu-id="c838c-201">Every replica in the read_only_routing_list</span></span>|<span data-ttu-id="c838c-202">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 구성 관리자에서 다음을 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="c838c-202">In [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Configuration Manager, verify that:</span></span><br /><br /> <span data-ttu-id="c838c-203">SQL Server 원격 연결이 사용되고 있는지 여부</span><span class="sxs-lookup"><span data-stu-id="c838c-203">SQL Server remote connectivity is enabled.</span></span><br /><br /> <span data-ttu-id="c838c-204">TCP/IP가 사용되고 있는지 여부</span><span class="sxs-lookup"><span data-stu-id="c838c-204">TCP/IP is enabled.</span></span><br /><br /> <span data-ttu-id="c838c-205">IP 주소가 올바르게 구성되어 있는지 여부</span><span class="sxs-lookup"><span data-stu-id="c838c-205">The IP addresses are configured correctly.</span></span>|-|[<span data-ttu-id="c838c-206">서버 속성 보기 또는 변경&#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="c838c-206">View or Change Server Properties &#40;SQL Server&#41;</span></span>](../../configure-windows/view-or-change-server-properties-sql-server.md)<br /><br /> [<span data-ttu-id="c838c-207">특정 TCP 포트로 수신하도록 서버 구성&#40;SQL Server 구성 관리자&#41;</span><span class="sxs-lookup"><span data-stu-id="c838c-207">Configure a Server to Listen on a Specific TCP Port &#40;SQL Server Configuration Manager&#41;</span></span>](../../configure-windows/configure-a-server-to-listen-on-a-specific-tcp-port.md)|
|<span data-ttu-id="c838c-208">![확인란](../../media/checkboxemptycenterxtraspacetopandright.gif "확인란")</span><span class="sxs-lookup"><span data-stu-id="c838c-208">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="c838c-209">read_only_routing_list에 있는 모든 복제본</span><span class="sxs-lookup"><span data-stu-id="c838c-209">Every replica in the read_only_routing_list</span></span>|<span data-ttu-id="c838c-210">READ_ONLY_ROUTING_URL (TCP<strong>:// *`system-address`* :</strong>*port*)에 올바른 FQDN (정규화 된 도메인 이름) 및 포트 번호가 포함 되어 있는지 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="c838c-210">Ensure that the READ_ONLY_ROUTING_URL (TCP<strong>://*`system-address`*:</strong>*port*) contains the correct fully-qualified domain name (FQDN) and port number.</span></span>|-|[<span data-ttu-id="c838c-211">AlwaysOn에 대한 read_only_routing_url 계산</span><span class="sxs-lookup"><span data-stu-id="c838c-211">Calculating read_only_routing_url for AlwaysOn</span></span>](https://docs.microsoft.com/archive/blogs/mattn/calculating-read_only_routing_url-for-alwayson)<br /><br /> [<span data-ttu-id="c838c-212">sys.availability_replicas&#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="c838c-212">sys.availability_replicas &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-catalog-views/sys-availability-replicas-transact-sql)<br /><br /> [<span data-ttu-id="c838c-213">ALTER AVAILABILITY GROUP&#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="c838c-213">ALTER AVAILABILITY GROUP &#40;Transact-SQL&#41;</span></span>](/sql/t-sql/statements/alter-availability-group-transact-sql)|
|<span data-ttu-id="c838c-214">![확인란](../../media/checkboxemptycenterxtraspacetopandright.gif "확인란")</span><span class="sxs-lookup"><span data-stu-id="c838c-214">![Checkbox](../../media/checkboxemptycenterxtraspacetopandright.gif "Checkbox")</span></span>|<span data-ttu-id="c838c-215">클라이언트 시스템</span><span class="sxs-lookup"><span data-stu-id="c838c-215">Client system</span></span>|<span data-ttu-id="c838c-216">클라이언트 드라이버가 읽기 전용 라우팅을 지원하는지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="c838c-216">Verify that the client driver supports read-only routing.</span></span>|-|[<span data-ttu-id="c838c-217">AlwaysOn 클라이언트 연결(SQL Server)</span><span class="sxs-lookup"><span data-stu-id="c838c-217">AlwaysOn Client Connectivity (SQL Server)</span></span>](always-on-client-connectivity-sql-server.md)|

##  <a name="related-tasks"></a><a name="RelatedTasks"></a> <span data-ttu-id="c838c-218">관련 작업</span><span class="sxs-lookup"><span data-stu-id="c838c-218">Related Tasks</span></span>

-   [<span data-ttu-id="c838c-219">가용성 그룹의 생성 및 구성&#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="c838c-219">Creation and Configuration of Availability Groups &#40;SQL Server&#41;</span></span>](creation-and-configuration-of-availability-groups-sql-server.md)

-   [<span data-ttu-id="c838c-220">Windows 인증에 대한 데이터베이스 미러링 엔드포인트 만들기&#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="c838c-220">Create a Database Mirroring Endpoint for Windows Authentication &#40;Transact-SQL&#41;</span></span>](../../database-mirroring/create-a-database-mirroring-endpoint-for-windows-authentication-transact-sql.md)

-   [<span data-ttu-id="c838c-221">가용성 복제본 추가 또는 수정 시 엔드포인트 URL 지정&#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="c838c-221">Specify the Endpoint URL When Adding or Modifying an Availability Replica &#40;SQL Server&#41;</span></span>](specify-endpoint-url-adding-or-modifying-availability-replica.md)

-   [<span data-ttu-id="c838c-222">가용성 그룹에 대한 보조 데이터베이스 준비&#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="c838c-222">Manually Prepare a Secondary Database for an Availability Group &#40;SQL Server&#41;</span></span>](manually-prepare-a-secondary-database-for-an-availability-group-sql-server.md)

-   [<span data-ttu-id="c838c-223">실패 한 파일 추가 작업 문제 해결 AlwaysOn 가용성 그룹 &#40;&#41;</span><span class="sxs-lookup"><span data-stu-id="c838c-223">Troubleshoot a Failed Add-File Operation &#40;AlwaysOn Availability Groups&#41;</span></span>](troubleshoot-a-failed-add-file-operation-always-on-availability-groups.md)

-   [<span data-ttu-id="c838c-224">가용성 그룹의 데이터베이스에 대한 로그인 및 작업 관리&#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="c838c-224">Management of Logins and Jobs for the Databases of an Availability Group &#40;SQL Server&#41;</span></span>](../../logins-and-jobs-for-availability-group-databases.md)

-   [<span data-ttu-id="c838c-225">다른 서버 인스턴스에서 데이터베이스를 사용할 수 있도록 할 때 메타데이터 관리&#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="c838c-225">Manage Metadata When Making a Database Available on Another Server Instance &#40;SQL Server&#41;</span></span>](../../../relational-databases/databases/manage-metadata-when-making-a-database-available-on-another-server.md)

##  <a name="related-content"></a><a name="RelatedContent"></a> <span data-ttu-id="c838c-226">관련 내용</span><span class="sxs-lookup"><span data-stu-id="c838c-226">Related Content</span></span>

-   <span data-ttu-id="c838c-227">[장애 조치(Failover) 클러스터에 대한 이벤트 및 로그 보기](https://technet.microsoft.com/library/cc772342\(WS.10\).aspx)</span><span class="sxs-lookup"><span data-stu-id="c838c-227">[View Events and Logs for a Failover Cluster](https://technet.microsoft.com/library/cc772342\(WS.10\).aspx)</span></span>

-   [<span data-ttu-id="c838c-228">Get-ClusterLog 장애 조치(Failover) 클러스터 Cmdlet</span><span class="sxs-lookup"><span data-stu-id="c838c-228">Get-ClusterLog Failover Cluster Cmdlet</span></span>](https://technet.microsoft.com/library/ee461045.aspx)

-   [<span data-ttu-id="c838c-229">SQL Server AlwaysOn 팀 블로그: 공식 SQL Server AlwaysOn 팀 블로그</span><span class="sxs-lookup"><span data-stu-id="c838c-229">SQL Server AlwaysOn Team Blog: The official SQL Server AlwaysOn Team Blog</span></span>](https://blogs.msdn.com/b/sqlalwayson/)

## <a name="see-also"></a><span data-ttu-id="c838c-230">참고 항목</span><span class="sxs-lookup"><span data-stu-id="c838c-230">See Also</span></span>
 <span data-ttu-id="c838c-231">[데이터베이스 미러링 및 AlwaysOn 가용성 그룹 &#40;의 전송 보안 SQL Server&#41;](../../database-mirroring/transport-security-database-mirroring-always-on-availability.md) [클라이언트 네트워크 구성 필수 구성](../../configure-windows/client-network-configuration.md) [요소, 제한 사항 및 AlwaysOn 가용성 그룹 &#40;SQL Server에 대 한 권장 사항&#41;](prereqs-restrictions-recommendations-always-on-availability.md)</span><span class="sxs-lookup"><span data-stu-id="c838c-231">[Transport Security for Database Mirroring and AlwaysOn Availability Groups &#40;SQL Server&#41;](../../database-mirroring/transport-security-database-mirroring-always-on-availability.md) [Client Network Configuration](../../configure-windows/client-network-configuration.md) [Prerequisites, Restrictions, and Recommendations for AlwaysOn Availability Groups &#40;SQL Server&#41;](prereqs-restrictions-recommendations-always-on-availability.md)</span></span>


