---
title: 복제, 변경 내용 추적, 변경 데이터 캡처 및 AlwaysOn 가용성 그룹 (SQL Server) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- change tracking [SQL Server], AlwaysOn Availability Groups
- change data capture [SQL Server], AlwaysOn Availability Groups
- Availability Groups [SQL Server], interoperability
- replication [SQL Server], AlwaysOn Availability Groups
ms.assetid: e17a9ca9-dd96-4f84-a85d-60f590da96ad
author: MashaMSFT
ms.author: mathoma
ms.openlocfilehash: e8ea6257cb906177b9eb224d718eecf54fb94119
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87648591"
---
# <a name="replication-change-tracking-change-data-capture-and-alwayson-availability-groups-sql-server"></a><span data-ttu-id="e5bb9-102">복제, 변경 내용 추적, 변경 데이터 캡처 및 AlwaysOn 가용성 그룹(SQL Server)</span><span class="sxs-lookup"><span data-stu-id="e5bb9-102">Replication, Change Tracking, Change Data Capture, and AlwaysOn Availability Groups (SQL Server)</span></span>
  [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] <span data-ttu-id="e5bb9-103">복제, CDC(변경 데이터 캡처) 및 CT(변경 내용 추적)는 [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)]에서 지원됩니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-103">Replication, change data capture (CDC), and change tracking (CT) are supported on [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)].</span></span> [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] <span data-ttu-id="e5bb9-104">을 사용하면 고가용성 및 추가 데이터베이스 복구 기능을 제공할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-104">helps provide high availability and additional database recovery capabilities.</span></span>  
  
 
  
##  <a name="overview-of-replication-on-alwayson-availability-groups"></a><a name="Overview"></a><span data-ttu-id="e5bb9-105">AlwaysOn 가용성 그룹의 복제 개요</span><span class="sxs-lookup"><span data-stu-id="e5bb9-105">Overview of Replication on AlwaysOn Availability Groups</span></span>  
  
###  <a name="publisher-redirection"></a><a name="PublisherRedirect"></a> <span data-ttu-id="e5bb9-106">게시자 리디렉션</span><span class="sxs-lookup"><span data-stu-id="e5bb9-106">Publisher Redirection</span></span>  
 <span data-ttu-id="e5bb9-107">게시된 데이터베이스가 [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)]을 인식하는 경우 에이전트에 게시 데이터베이스에 대한 액세스 권한을 제공하는 배포자가 redirected_publishers 항목으로 구성됩니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-107">When a published database is aware of [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)], the distributor that provides agent access to the publishing database is configured with redirected_publishers entries.</span></span> <span data-ttu-id="e5bb9-108">이러한 항목은 가용성 그룹 수신기 이름을 사용하여 게시자 및 게시 데이터베이스에 연결함으로써 원래 구성되어 있는 게시자/데이터베이스 쌍을 리디렉션합니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-108">These entries redirect the originally configured publisher/database pair, making use of an availability group listener name to connect to the publisher and publishing database.</span></span> <span data-ttu-id="e5bb9-109">가용성 그룹 수신기 이름을 통해 설정된 연결은 장애 조치(Failover) 시 실패합니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-109">Established connections through the availability group listener name will fail on failover.</span></span> <span data-ttu-id="e5bb9-110">장애 조치(Failover) 후 복제 에이전트가 다시 시작되면 연결이 새 주 데이터베이스에 자동으로 리디렉션됩니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-110">When the replication agent restarts after failover, the connection will automatically be redirected to the new primary.</span></span>  
  
 <span data-ttu-id="e5bb9-111">AlwaysOn 가용성 그룹에서 보조 데이터베이스는 게시자가 될 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-111">In an AlwaysOn availability group a secondary database cannot be a publisher.</span></span> <span data-ttu-id="e5bb9-112">복제가 [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)]과 결합된 경우 복제가 지원되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-112">Republishing is not supported when replication is combined with [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)].</span></span>  
  
 <span data-ttu-id="e5bb9-113">게시된 데이터베이스가 가용성 그룹의 구성원이고 게시자가 리디렉션되는 경우 가용성 그룹에 연결된 가용성 그룹 수신기 이름으로 리디렉션되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-113">If a published database is a member of an availability group and the publisher is redirected, it must be redirected to an availability group listener name associated with the availability group.</span></span> <span data-ttu-id="e5bb9-114">게시자를 명시적 노드로 리디렉션할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-114">It may not be redirected to an explicit node.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="e5bb9-115">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 의 보조 복제본에 대한 장애 조치(Failover) 후에 복제 모니터는 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]의 게시 인스턴스 이름을 조정할 수 없으며 계속해서 원래 주 인스턴스 이름으로 복제 정보를 표시합니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-115">After failover to a secondary replica, Replication Monitor is unable to adjust the name of the publishing instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] and will continue to display replication information under the name of the original primary instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="e5bb9-116">장애 조치(Failover) 후 복제 모니터를 사용하여 추적 프로그램 토큰을 입력할 수 없지만 새 게시자가 [!INCLUDE[tsql](../../../includes/tsql-md.md)]을 사용하여 입력한 추적 프로그램 토큰은 복제 모니터에 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-116">After failover, a tracer token cannot be entered by using the Replication Monitor, however a tracer token entered on the new publisher by using [!INCLUDE[tsql](../../../includes/tsql-md.md)], is visible in Replication Monitor.</span></span>  
  
###  <a name="general-changes-to-replication-agents-to-support-alwayson-availability-groups"></a><a name="Changes"></a><span data-ttu-id="e5bb9-117">AlwaysOn 가용성 그룹를 지원 하기 위해 복제 에이전트에 대 한 일반적인 변경 내용</span><span class="sxs-lookup"><span data-stu-id="e5bb9-117">General Changes to Replication Agents to Support AlwaysOn Availability Groups</span></span>  
 <span data-ttu-id="e5bb9-118">[!INCLUDE[ssHADR](../../../includes/sshadr-md.md)]을 지원하도록 세 가지 복제 에이전트가 수정되었습니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-118">Three replication agents were modified to support [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)].</span></span> <span data-ttu-id="e5bb9-119">로그 판독기, 스냅샷 및 병합 에이전트는 배포 데이터베이스에서 리디렉션된 게시자를 쿼리하고 리디렉션된 게시자가 선언된 경우 반환된 가용성 그룹 수신기 이름을 사용하여 데이터베이스 게시자에 연결합니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-119">The Log Reader, Snapshot, and Merge agents were modified to query the distribution database for the redirected publisher and to use the returned availability group listener name, if a redirected publisher was declared, to connect to the database publisher.</span></span>  
  
 <span data-ttu-id="e5bb9-120">기본적으로 원본 게시자가 리디렉션되었는지 확인하기 위해 에이전트가 배포자를 쿼리할 때는 리디렉션된 호스트를 에이전트에 반환하기 전에 현재 대상 또는 리디렉션의 적합성이 확인됩니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-120">By default, when the agents query the distributor to determine whether the original publisher has been redirected, the suitability of the current target or redirection will be verified prior to returning the redirected host to the agent.</span></span> <span data-ttu-id="e5bb9-121">이 동작은 수행하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-121">This is recommended behavior.</span></span> <span data-ttu-id="e5bb9-122">하지만 에이전트 시작이 매우 자주 수행되는 경우 유효성 검사 저장 프로시저와 연결된 오버헤드의 비용이 너무 높은 것으로 간주될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-122">However, if agent start up occurs very frequently the overhead associated with the validation stored procedure may be deemed too costly.</span></span> <span data-ttu-id="e5bb9-123">로그 판독기, 스냅샷 및 병합 에이전트에는 새로운 명령줄 스위치인 *BypassPublisherValidation*이 추가되었습니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-123">A new command line switch, *BypassPublisherValidation*, has been added to the Logreader, Snapshot, and Merge agents.</span></span> <span data-ttu-id="e5bb9-124">이 스위치를 사용하면 리디렉션된 게시자가 에이전트에 즉시 반환되고 유효성 검사 저장 프로시저의 실행이 무시됩니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-124">When the switch is used, the redirected publisher is returned immediately to the agent and execution of the validation stored procedure is bypassed.</span></span>  
  
 <span data-ttu-id="e5bb9-125">유효성 검사 저장 프로시저에서 반환된 오류는 에이전트 기록 로그에 기록됩니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-125">Failures returned from the validation stored procedure are logged in the agent history logs.</span></span> <span data-ttu-id="e5bb9-126">심각도가 16 이상인 오류가 발생할 경우 에이전트가 종료됩니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-126">Those errors with severity greater than or equal to 16 will cause the agents to terminate.</span></span> <span data-ttu-id="e5bb9-127">에이전트에는 새로운 주 데이터베이스로 장애 조치(Failover)를 수행할 때 게시된 데이터베이스로부터의 예상된 연결 해제를 처리할 수 있도록 몇 가지 재시도 기능이 기본 제공되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-127">Some retry capabilities have been built in to the agents to handle the expected disconnect from a published database when it fails over to a new primary.</span></span>  
  
#### <a name="log-reader-agent-modifications"></a><span data-ttu-id="e5bb9-128">로그 판독기 에이전트 수정 사항</span><span class="sxs-lookup"><span data-stu-id="e5bb9-128">Log Reader Agent Modifications</span></span>  
 <span data-ttu-id="e5bb9-129">로그 판독기 에이전트에는 다음과 같은 변경 사항이 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-129">The Logreader Agent has the following changes.</span></span>  
  
-   <span data-ttu-id="e5bb9-130">**복제된 데이터베이스 일관성**</span><span class="sxs-lookup"><span data-stu-id="e5bb9-130">**Replicated Database Consistency**</span></span>  
  
     <span data-ttu-id="e5bb9-131">게시된 데이터베이스가 AlwaysOn 가용성 그룹의 구성원인 경우 기본적으로 로그 판독기는 모든 가용성 그룹 보조 복제본에서 아직 확정되지 않은 로그 레코드를 처리하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-131">When a published database is a member of an AlwaysOn availability group, by default the log reader will not process log records that have not already been hardened at all availability group secondary replicas.</span></span> <span data-ttu-id="e5bb9-132">따라서 장애 조치 시에 구독자에 복제되는 모든 행이 새 주 복제본에도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-132">This insures that on failover, all rows replicated to a subscriber also are present at the new primary.</span></span>  
  
     <span data-ttu-id="e5bb9-133">게시자에 두 AlwaysOn 가용성 복제본(주 복제본 하나와 및 보조 복제본 하나)만 있는 경우 장애 조치(Failover)가 발생하면 모든 보조 데이터베이스가 다시 온라인 상태가 되거나 실패한 보조 복제본이 가용성 그룹에서 제거되기 전까지는 로그 판독기가 앞으로 이동하지 않기 때문에 원래 주 복제본이 중지된 상태로 유지됩니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-133">When the publisher has only two AlwaysOn availability replicas (one primary and one secondary) and a failover happens, the original primary replica remains down because the logreader does not move forward until all secondary databases are brought back online or until the failing secondary replicas are removed from the availability group.</span></span> <span data-ttu-id="e5bb9-134">AlwaysOn이 보조 데이터베이스에 대한 변경 내용을 확정할 수 없으므로 보조 데이터베이스에 대해 실행 중인 로그 판독기는 앞으로 진행되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-134">The logreader, now running against the secondary database, will not proceed forward since AlwaysOn cannot harden any changes to any secondary database.</span></span> <span data-ttu-id="e5bb9-135">로그 판독기를 계속 진행하고 재해 복구 기능을 포함하도록 하려면 ALTER AVAILABITY GROUP <group_name> REMOVE REPLICA를 사용하여 가용성 그룹에서 원래 주 복제본을 제거해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-135">To allow the logreader to proceed further and still have disaster recovery capacity, remove the original primary replica from the availability group using ALTER AVAILABITY GROUP <group_name> REMOVE REPLICA.</span></span> <span data-ttu-id="e5bb9-136">그런 다음 새 보조 복제본을 가용성 그룹에 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-136">Then add a new secondary replica to the availability group.</span></span>  
  
-   <span data-ttu-id="e5bb9-137">**추적 플래그 1448**</span><span class="sxs-lookup"><span data-stu-id="e5bb9-137">**Trace flag 1448**</span></span>  
  
     <span data-ttu-id="e5bb9-138">추적 플래그 1448를 사용하면 비동기 보조 복제본이 변경 내용 수신을 확인하지 않은 경우에도 복제 로그 판독기가 앞으로 진행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-138">Trace flag 1448 enables the replication log reader to move forward even if the asynchronous secondary replicas have not acknowledged the reception of a change.</span></span> <span data-ttu-id="e5bb9-139">이 추적 플래그를 설정하면 로그 판독기가 항상 동기 보조 복제본을 기다립니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-139">Even with this trace flag enabled,, the log reader always waits for the synchronous secondary replicas.</span></span> <span data-ttu-id="e5bb9-140">로그 판독기는 동기 보조 복제본에 대한 최소 승인을 넘지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-140">The log reader will not go beyond the min ack of the synchronous secondary replicas.</span></span> <span data-ttu-id="e5bb9-141">이 추적 플래그는 단순히 가용성 그룹, 가용성 데이터베이스 또는 로그 판독기 인스턴스가 아니라 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]인스턴스에 적용됩니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-141">This trace flag applies to the instance of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)], not just to an availability group, an availability database, or a log reader instance.</span></span> <span data-ttu-id="e5bb9-142">이 추적 플래그는 다시 시작하지 않고 즉시 적용됩니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-142">This trace flag takes effect immediately without a restart.</span></span> <span data-ttu-id="e5bb9-143">비동기 보조 복제본이 실패할 때 또는 미리 활성화할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-143">It can be activated ahead of time or when an asynchronous secondary replica fails.</span></span>  
  
###  <a name="stored-procedures-supporting-alwayson"></a><a name="StoredProcs"></a><span data-ttu-id="e5bb9-144">AlwaysOn을 지 원하는 저장 프로시저</span><span class="sxs-lookup"><span data-stu-id="e5bb9-144">Stored Procedures Supporting AlwaysOn</span></span>  
  
-   <span data-ttu-id="e5bb9-145">**sp_redirect_publisher**</span><span class="sxs-lookup"><span data-stu-id="e5bb9-145">**sp_redirect_publisher**</span></span>  
  
     <span data-ttu-id="e5bb9-146">저장 프로시저 **sp_redirect_publisher** 는 기존 게시자/데이터베이스 쌍에 대해 리디렉션된 게시자를 지정하는 데 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-146">The stored procedure **sp_redirect_publisher** is used to specify a redirected publisher for an existing publisher/database pair.</span></span> <span data-ttu-id="e5bb9-147">게시자 데이터베이스가 가용성 그룹에 속하는 경우 리디렉션된 게시자는 가용성 그룹 수신기 이름입니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-147">If the publisher database belongs to an availability group, the redirected publisher is the availability group listener name.</span></span>  
  
-   <span data-ttu-id="e5bb9-148">**sp_get_redirected_publisher**</span><span class="sxs-lookup"><span data-stu-id="e5bb9-148">**sp_get_redirected_publisher**</span></span>  
  
     <span data-ttu-id="e5bb9-149">저장 프로시저 **sp_get_redirected_publisher** 는 복제 에이전트가 배포자에게 쿼리하여 게시자/데이터베이스 쌍에 정의된 리디렉션된 게시자가 있는지 여부를 확인하는 데 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-149">The stored procedure **sp_get_redirected_publisher** is used by replication agents to query a distributor to determine whether a publisher/database pair has a defined redirected publisher.</span></span> <span data-ttu-id="e5bb9-150">이 저장 프로시저는 두 가지 용도로 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-150">This stored procedure serves two purposes.</span></span> <span data-ttu-id="e5bb9-151">첫째, 에이전트가 원래 게시자가 리디렉션되었는지 여부를 확인할 수 있도록 해줍니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-151">First, it allows the agent to determine whether the original publisher has been redirected.</span></span> <span data-ttu-id="e5bb9-152">둘째, 명명된 데이터베이스에 대한 게시자 역할을 하는 대상 리디렉션 노드의 적합성을 확인하는 배포자(**sp_validate_redirected_publisher**)에서 실행되는 유효성 검사 저장 프로시저를 시작할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-152">Second, it may also initiate a validation stored procedure run at the distributor (**sp_validate_redirected_publisher**) that verifies the suitability of the target node of the redirection to serve as a publisher for the named database.</span></span>  
  
     <span data-ttu-id="e5bb9-153">이 저장 프로시저를 실행하려면 호출자가 **sysadmin** 서버 역할 또는 배포 데이터베이스에 대한 **db_owner** 데이터베이스 역할의 구성원이거나 게시자 데이터베이스에 연결된 정의된 게시에 대한 **게시 액세스 목록** 의 구성원이어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-153">To execute this stored procedure the caller must either be a member of the **sysadmin** server role, the **db_owner** database role for the distribution database, or a member of a **Publication Access List** for a defined publication associated with the publisher database.</span></span>  
  
-   <span data-ttu-id="e5bb9-154">**sp_validate_redirected_publisher**</span><span class="sxs-lookup"><span data-stu-id="e5bb9-154">**sp_validate_redirected_publisher**</span></span>  
  
     <span data-ttu-id="e5bb9-155">이 저장 프로시저는 현재 게시자가 게시된 데이터베이스를 호스팅할 수 있는지를 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-155">This stored procedure attempts to validate that the current publisher is capable of hosting the published database.</span></span> <span data-ttu-id="e5bb9-156">언제든지 이 저장 프로시저를 호출하여 게시된 데이터베이스의 현재 호스트가 복제를 지원할 수 있는지 확인할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-156">It can be called at any time to verify that the current host for the published database is capable of supporting replication.</span></span>  
  
-   <span data-ttu-id="e5bb9-157">**sp_validate_replicate_hosts_as_publishers**</span><span class="sxs-lookup"><span data-stu-id="e5bb9-157">**sp_validate_replicate_hosts_as_publishers**</span></span>  
  
     <span data-ttu-id="e5bb9-158">에이전트가 현재 주 복제본이 게시자 데이터베이스에 대한 복제 게시자 역할을 할 수 있는지를 확인하는 것도 유용하지만, AlwaysOn 가용성 데이터베이스의 전체 복제 토폴로지의 유효성을 설정하려면 보다 일반적인 유효성 검사 기능이 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-158">While it is useful for the agents to insure that the current primary can function as the replication publisher for a publisher database, a more general validation capability is needed to establish the validity of an entire replication topology on an AlwaysOn availability database.</span></span> <span data-ttu-id="e5bb9-159">저장 프로시저 **sp_validate_replica_hosts_as_publishers** 는 이 요구를 충족하도록 설계되었습니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-159">The stored procedure **sp_validate_replica_hosts_as_publishers** is designed to fill this need.</span></span>  
  
     <span data-ttu-id="e5bb9-160">이 저장 프로시저는 항상 수동으로 실행됩니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-160">This stored procedure is always run manually.</span></span> <span data-ttu-id="e5bb9-161">호출자는 배포자의 **sysadmin** 이거나, 배포 데이터베이스의 **dbowner** 이거나, 게시자 데이터베이스 게시의 **게시 액세스 목록** 의 멤버여야 합니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-161">The caller must either be **sysadmin** at the distributor, **dbowner** of the distribution database, or a member of the **Publication Access List** of a publication of the publisher database.</span></span> <span data-ttu-id="e5bb9-162">또한 호출자의 로그인이 모든 가용성 복제본 호스트에 유효한 로그인이고 게시자 데이터베이스에 연결된 가용성 데이터베이스에 대한 선택 권한이 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-162">In addition, the login of the caller must be a valid login for all of the availability replica hosts, and have select privileges on the availability database associated with the publisher database.</span></span>  
  
###  <a name="change-data-capture"></a><a name="CDC"></a> <span data-ttu-id="e5bb9-163">변경 데이터 캡처</span><span class="sxs-lookup"><span data-stu-id="e5bb9-163">Change Data Capture</span></span>  
 <span data-ttu-id="e5bb9-164">CDC(변경 데이터 캡처)에 사용되는 데이터베이스는 [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] 을 활용하여 장애가 발생하더라도 데이터베이스가 사용 가능한 상태로 유지되도록 보장하고 데이터베이스 테이블 변경 사항을 계속 모니터링하여 CDC 변경 테이블에 보관할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-164">Databases enabled for change data capture (CDC) are able to leverage [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] in order to insure not only that the database remains available in the event of failure, but that changes to the database tables continue to be monitored and deposited in the CDC change tables.</span></span> <span data-ttu-id="e5bb9-165">CDC 및 [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] 이 구성되는 순서는 중요하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-165">The order in which CDC and [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] are configured is not important.</span></span> <span data-ttu-id="e5bb9-166">CDC 사용 데이터베이스는 [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)]에 추가될 수 있으며 AlwaysOn 가용성 그룹의 멤버인 데이터베이스는 CDC를 사용하도록 설정될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-166">CDC enabled databases can be added to [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)], and databases that are members of an AlwaysOn availability group can be enabled for CDC.</span></span> <span data-ttu-id="e5bb9-167">그러나 두 경우 모두 CDC 구성은 항상 현재 또는 의도된 주 복제본에 대해 수행됩니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-167">In both cases, however, CDC configuration is always performed on the current or intended primary replica.</span></span> <span data-ttu-id="e5bb9-168">CDC는 로그 판독기 에이전트를 사용하여 이 항목의 이전 **로그 판독기 에이전트 수정** 섹션에 설명된 대로 동일한 제한을 가집니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-168">CDC uses the log reader agent and has the same limitations as described in the **Log Reader Agent Modifications** section earlier in this topic.</span></span>  
  
-   <span data-ttu-id="e5bb9-169">**복제를 사용하지 않는 변경 데이터 캡처를 위한 변경 사항 수집**</span><span class="sxs-lookup"><span data-stu-id="e5bb9-169">**Harvesting Changes for Change Data Capture Without Replication**</span></span>  
  
     <span data-ttu-id="e5bb9-170">CDC는 데이터베이스에 사용되지만 복제는 사용되지 않는 경우 로그에서 변경 사항을 수집하여 CDC 변경 테이블에 보관하는 데 사용되는 캡처 프로세스는 SQL 에이전트 작업을 소유한 CDC 호스트에서 실행됩니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-170">If CDC is enabled for a database, but replication is not, the capture process used to harvest changes from the log and deposit them in CDC change tables runs at the CDC host as its own SQL Agent job.</span></span>  
  
     <span data-ttu-id="e5bb9-171">장애 조치(Failover) 후 변경 사항 수집을 재개하려면 저장 프로시저 **sp_cdc_add_job** 이 새 주 복제본에서 실행되어 로컬 캡처 작업을 만들어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-171">In order to resume the harvesting of changes after failover, the stored procedure **sp_cdc_add_job** must be run at the new primary to create the local capture job.</span></span>  
  
     <span data-ttu-id="e5bb9-172">다음 예에서는 캡처 작업을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-172">The following example creates the capture job.</span></span>  
  
    ```  
    EXEC sys.sp_cdc_add_job @job_type = 'capture';  
    ```  
  
-   <span data-ttu-id="e5bb9-173">**복제를 사용하는 변경 데이터 캡처를 위한 변경 사항 수집**</span><span class="sxs-lookup"><span data-stu-id="e5bb9-173">**Harvesting Changes for Change Data Capture With Replication**</span></span>  
  
     <span data-ttu-id="e5bb9-174">데이터베이스에서 CDC와 복제를 모두 사용하는 경우 로그 판독기가 CDC 변경 테이블을 채웁니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-174">If both CDC and replication are enabled for a database, the log reader handles the population of the CDC change tables.</span></span> <span data-ttu-id="e5bb9-175">이 경우 복제에서 [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] 을 활용하는 데 사용되는 기술을 통해 로그에서 변경 사항을 계속 수집하여 장애 조치(Failover) 후 CDC 변경 테이블에 보관합니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-175">In this case, the techniques used by replication to leverage [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] will insure that changes continue to be harvested from the log and deposited in CDC change tables after failover.</span></span> <span data-ttu-id="e5bb9-176">이 구성에서는 변경 테이블이 채워지도록 보장하기 위해 CDC에 대해 어떠한 추가 작업도 수행할 필요가 없습니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-176">Nothing additional needs to be done for CDC in this configuration to insure that the change tables are populated.</span></span>  
  
-   <span data-ttu-id="e5bb9-177">**변경 데이터 캡처 정리**</span><span class="sxs-lookup"><span data-stu-id="e5bb9-177">**Change Data Capture Cleanup**</span></span>  
  
     <span data-ttu-id="e5bb9-178">새 주 데이터베이스에서 적절한 정리가 수행되도록 하려면 항상 로컬 정리 작업을 만들어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-178">To insure that appropriate cleanup occurs at the new primary database, a local cleanup job should always be created.</span></span> <span data-ttu-id="e5bb9-179">다음 예에서는 정리 작업을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-179">The following example creates the cleanup job.</span></span>  
  
    ```  
    EXEC sys.sp_cdc_add_job @job_type = 'cleanup';  
    ```  
  
    > [!NOTE]  
    >  <span data-ttu-id="e5bb9-180">장애 조치(Failover)가 발생하기 전에 모든 가능한 장애 조치(Failover) 대상에서 작업을 만든 다음 호스트의 가용성 복제본이 새로운 주 복제본이 될 때까지 해당 작업을 사용 안 함으로 표시해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-180">You should create the jobs at all of the possible failover targets before failover, and mark them as disabled until the availability replica at a host becomes the new primary replica.</span></span> <span data-ttu-id="e5bb9-181">또한 이전 주 데이터베이스에서 실행 중인 CDC 작업은 로컬 데이터베이스가 보조 데이터베이스가 되면 해제되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-181">The CDC jobs running at the old primary database should be also disabled when the local database becomes a secondary database.</span></span> <span data-ttu-id="e5bb9-182">작업을 사용 하지 않도록 설정 하 고 설정 하려면 *@enabled* [transact-sql&#41;&#40;sp_update_job ](/sql/relational-databases/system-stored-procedures/sp-update-job-transact-sql)옵션을 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-182">To disable and enable jobs, use the *@enabled* option of [sp_update_job &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-update-job-transact-sql).</span></span> <span data-ttu-id="e5bb9-183">CDC 작업을 만드는 방법은 [sys.sp_cdc_add_job&#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sys-sp-cdc-add-job-transact-sql)에서 지원됩니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-183">For more information about creating CDC jobs, see [sys.sp_cdc_add_job &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sys-sp-cdc-add-job-transact-sql).</span></span>  
  
-   <span data-ttu-id="e5bb9-184">**AlwaysOn 주 데이터베이스 복제본에 CDC 역할 추가**</span><span class="sxs-lookup"><span data-stu-id="e5bb9-184">**Adding CDC Roles to an AlwaysOn Primary Database Replica**</span></span>  
  
     <span data-ttu-id="e5bb9-185">CDC에 대해 테이블이 사용하도록 설정된 경우 데이터베이스 역할을 캡처 인스턴스와 연결할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-185">When a table is enabled for CDC, it is possible to associate a database role with the capture instance.</span></span> <span data-ttu-id="e5bb9-186">역할이 지정된 경우 테이블 변경 사항에 액세스하기 위해 CDC 테이블 반환 함수를 사용하려는 사용자는 추적된 테이블 열에 대한 액세스를 선택해야 할 뿐만 아니라 명명된 역할의 멤버여야 합니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-186">If a role is specified, the user wishing to use the CDC table-valued functions to access changes for the table must not only have select access to the tracked table columns, but must also be a member of the named role.</span></span> <span data-ttu-id="e5bb9-187">지정된 역할이 아직 없으면 역할이 만들어집니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-187">If the specified role does not already exist, the role will be created.</span></span> <span data-ttu-id="e5bb9-188">AlwaysOn 주 데이터베이스에 데이터베이스 역할이 자동으로 추가된 경우 가용성 그룹의 보조 데이터베이스에도 해당 역할이 전파됩니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-188">When database roles are automatically added to an AlwaysOn primary database, the roles are also propagated to the secondary databases of the availability group.</span></span>  
  
-   <span data-ttu-id="e5bb9-189">**CDC 변경 데이터 및 Always On에 액세스하는 클라이언트 애플리케이션**</span><span class="sxs-lookup"><span data-stu-id="e5bb9-189">**Client Applications Accessing CDC Change Data and Always On**</span></span>  
  
     <span data-ttu-id="e5bb9-190">또한 TVF(테이블 반환 함수) 또는 연결된 서버를 사용하여 변경 테이블 데이터에 액세스하는 클라이언트 애플리케이션은 장애 조치(Failover) 후 적합한 CDC 호스트를 찾는 기능이 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-190">Client applications that use the table-valued functions (TVFs) or linked servers to access change table data also need the ability to locate an appropriate CDC host after failover.</span></span> <span data-ttu-id="e5bb9-191">가용성 그룹 수신기 이름은 연결 대상을 다른 호스트로 투명하게 다시 지정할 수 있도록 [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] 에서 제공하는 메커니즘입니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-191">The availability group listener name is the mechanism provided by [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] to transparently allow a connection to be retargeted to a different host.</span></span> <span data-ttu-id="e5bb9-192">가용성 그룹 수신기 이름을 가용성 그룹에 연결한 다음에는 TCP 연결 문자열에서 이를 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-192">Once an availability group listener name is associated with an availability group, it is available to be used in TCP connection strings.</span></span> <span data-ttu-id="e5bb9-193">가용성 그룹 수신기 이름은 서로 다른 두 가지 연결 시나리오에서 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-193">Two different connection scenarios are supported through the availability group listener name.</span></span>  
  
    -   <span data-ttu-id="e5bb9-194">한 시나리오에서는 연결 요청이 항상 현재 주 복제본으로 전송됩니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-194">One insures that connection requests are always directed to the current primary replica.</span></span>  
  
    -   <span data-ttu-id="e5bb9-195">다른 시나리오에서는 연결 요청이 읽기 전용 보조 복제본으로 전송됩니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-195">One insures that connection requests are directed to a read-only secondary replica.</span></span>  
  
     <span data-ttu-id="e5bb9-196">읽기 전용 보조 복제본을 찾기 위해서는 가용성 그룹에 대해 읽기 전용 라우팅 목록도 정의해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-196">If used to locate a read-only secondary replica, a read-only routing list must also be defined for the availability group.</span></span> <span data-ttu-id="e5bb9-197">읽기 전용 보조 복제본으로 액세스 라우팅에 자세한 내용은 [읽기 전용 라우팅을 위해 가용성 복제본을 구성하려면](../../listeners-client-connectivity-application-failover.md#ConfigureARsForROR)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-197">For more information about routing access to readable secondaries, see [To Configure Availability Replicas for Read-Only Routing](../../listeners-client-connectivity-application-failover.md#ConfigureARsForROR).</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="e5bb9-198">가용성 그룹 수신기 이름을 만들고 이를 사용하여 클라이언트 애플리케이션이 가용성 그룹 데이터베이스 복제본에 액세스할 때는 약간의 전파 지연이 발생합니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-198">There is some propagation delay associated with the creation of an availability group listener name and its use by client applications to access an availability group database replica.</span></span>  
  
     <span data-ttu-id="e5bb9-199">CDC 데이터베이스를 호스팅하는 가용성 그룹에 대해 가용성 그룹 수신기 이름이 정의되었는지 여부를 확인하려면 다음 쿼리를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-199">Use the following query to determine whether an availability group listener name has been defined for the availability group hosting a CDC database.</span></span> <span data-ttu-id="e5bb9-200">이 쿼리는 가용성 그룹 수신기 이름이 만들어진 경우 이를 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-200">The query will return the availability group listener name if one has been created.</span></span>  
  
    ```  
    SELECT dns_name   
    FROM sys.availability_group_listeners AS l  
    INNER JOIN sys.availability_databases_cluster AS d  
        ON l.group_id = d.group_id  
    WHERE d.database_name = N'MyCDCDB';  
    ```  
  
-   <span data-ttu-id="e5bb9-201">**쿼리 부하를 읽기 가능한 보조 복제본으로 리디렉션**</span><span class="sxs-lookup"><span data-stu-id="e5bb9-201">**Redirecting the Query Load to a Readable Secondary Replica**</span></span>  
  
     <span data-ttu-id="e5bb9-202">대부분의 경우 클라이언트 애플리케이션은 항상 현재 주 복제본에 연결하려고 하지만 [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)]을 활용하기 위해 현재 주 복제본만 사용할 수 있는 것은 아닙니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-202">While in many cases a client application will always want to connect to the current primary replica that is not the only way to leverage [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)].</span></span> <span data-ttu-id="e5bb9-203">가용성 그룹이 읽기 가능한 보조 복제본을 지원하도록 구성된 경우 보조 노드에서도 변경 데이터를 수집할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-203">If an availability group is configured to support readable secondary replicas, change data can also be gathered from secondary nodes.</span></span>  
  
     <span data-ttu-id="e5bb9-204">가용성 그룹이 구성된 경우 SECONDARY_ROLE과 연결된 ALLOW_CONNECTIONS 특성을 사용하여 지원되는 보조 액세스 유형을 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-204">When an availability group is configured, the ALLOW_CONNECTIONS attribute associated with the SECONDARY_ROLE is used to specify the type of secondary access supported.</span></span> <span data-ttu-id="e5bb9-205">ALL로 구성된 경우 보조 복제본에 대한 모든 연결이 허용되지만 읽기 전용 액세스가 필요한 연결만 성공합니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-205">If configured as ALL, all connections to the secondary will be allowed, but only those requiring read only access will succeed.</span></span> <span data-ttu-id="e5bb9-206">READ_ONLY로 구성된 경우 연결이 성공하려면 보조 데이터베이스에 연결할 때 읽기 전용 의도를 지정해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-206">If configured as READ_ONLY, it is necessary to specify read only intent when making the connection to the secondary database in order for the connection to succeed.</span></span> <span data-ttu-id="e5bb9-207">자세한 내용은 [가용성 복제본에 대한 읽기 전용 액세스 구성&#40;SQL Server&#41;](configure-read-only-access-on-an-availability-replica-sql-server.md)가 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-207">For more information, see [Configure Read-Only Access on an Availability Replica &#40;SQL Server&#41;](configure-read-only-access-on-an-availability-replica-sql-server.md).</span></span>  
  
     <span data-ttu-id="e5bb9-208">다음 쿼리를 사용하면 읽기 가능한 보조 복제본에 연결하기 위해 읽기 전용 의도가 필요한지 여부를 확인할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-208">The following query can be used to determine whether read-only intent is needed to connect to a readable secondary replica.</span></span>  
  
    ```  
    SELECT g.name AS AG, replica_server_name, secondary_role_allow_connections_desc  
    FROM sys.availability_replicas AS r  
    JOIN sys.availability_groups AS g  
        ON r.group_id = g.group_id  
    WHERE g.name = N'MY_AG_NAME;  
    ```  
  
     <span data-ttu-id="e5bb9-209">가용성 그룹 수신기 이름 또는 명시적인 노드 이름을 사용하여 보조 복제본을 찾을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-209">Either the availability group listener name or the explicit node name can be used to locate the secondary replica.</span></span> <span data-ttu-id="e5bb9-210">가용성 그룹 수신기 이름을 사용하는 경우 액세스가 모든 적합한 보조 복제본으로 전송됩니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-210">If the availability group listener name is used, access will be directed to any suitable secondary replica.</span></span>  
  
     <span data-ttu-id="e5bb9-211">`sp_addlinkedserver`보조 복제본에 액세스 하기 위해를 사용 하 여 연결 된 서버를 만들 때 *@datasrc* 가용성 그룹 수신기 이름 또는 명시적인 서버 이름에 매개 변수가 사용 되 고 *@provstr* 읽기 전용 의도를 지정 하는 데 매개 변수가 사용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-211">When `sp_addlinkedserver` is used to create a linked server to access the secondary, the *@datasrc* parameter is used for the availability group listener name or the explicit server name, and the *@provstr* parameter is used to specify read-only intent.</span></span>  
  
    ```  
    EXEC sp_addlinkedserver   
    @server = N'linked_svr',   
    @srvproduct=N'SqlServer',  
    @provider=N'SQLNCLI11',   
    @datasrc=N'AG_Listener_Name',   
    @provstr=N'ApplicationIntent=ReadOnly',   
    @catalog=N'MY_DB_NAME';  
    ```  
  
-   <span data-ttu-id="e5bb9-212">**CDC 변경 데이터에 대한 클라이언트 액세스 및 도메인 로그인**</span><span class="sxs-lookup"><span data-stu-id="e5bb9-212">**Client Access to CDC Change Data and Domain Logins**</span></span>  
  
     <span data-ttu-id="e5bb9-213">일반적으로 AlwaysOn 가용성 그룹의 멤버인 데이터베이스에 있는 데이터를 변경하기 위해서는 클라이언트 액세스에 대해 도메인 로그인을 사용해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-213">In general, you should use domain logins for client access to change data residing in databases that are members of AlwaysOn availability groups.</span></span> <span data-ttu-id="e5bb9-214">장애 조치(Failover) 후 데이터 변경을 위해 계속 액세스할 수 있도록 하려면 도메인 사용자에게 가용성 그룹 복제본을 지원하는 모든 호스트에 대한 액세스 권한이 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-214">To insure continued access to change data after failover, the domain user will need access privileges on all of the hosts supporting availability group replicas.</span></span> <span data-ttu-id="e5bb9-215">데이터베이스 사용자를 주 복제본의 데이터베이스에 추가하고 사용자를 도메인 로그인과 연결하면 데이터베이스 사용자가 보조 데이터베이스에 전파되고 지정된 도메인 로그인과 계속 연결된 상태로 유지됩니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-215">If a database user is added to a database in a primary replica, and the user is associated with a domain login, the database user is propagated to secondary databases and continues to be associated with the specified domain login.</span></span> <span data-ttu-id="e5bb9-216">새 데이터베이스 사용자를 SQL Server 인증 로그인과 연결하면 로그인 없이도 보조 데이터베이스에서 해당 사용자가 전파됩니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-216">If the new database user is associated with a SQL Server authentication login, the user at the secondary databases will be propagated without a login.</span></span> <span data-ttu-id="e5bb9-217">데이터베이스 사용자가 원래 정의된 주 복제본에서 연결된 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 인증 로그인을 사용하여 변경 데이터를 액세스할 수 있지만 이 노드는 액세스가 가능한 유일한 노드입니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-217">While the associated [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] authentication login could be used to access change data at the primary where the database user was originally defined, that node is the only one where access would be possible.</span></span> <span data-ttu-id="e5bb9-218">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 인증 로그인은 모든 보조 데이터베이스의 데이터에 액세스할 수 없으며 데이터베이스 사용자가 정의된 원래 데이터베이스가 아닌 다른 모든 새 주 데이터베이스의 데이터에 액세스할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-218">The [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] authentication login would not be able to access data from any secondary database, nor from any new primary databases other than the original database where the database user was defined.</span></span>  
  
###  <a name="change-tracking"></a><a name="CT"></a> <span data-ttu-id="e5bb9-219">변경 내용 추적</span><span class="sxs-lookup"><span data-stu-id="e5bb9-219">Change Tracking</span></span>  
 <span data-ttu-id="e5bb9-220">CT(변경 내용 추적)에 사용되는 데이터베이스는 AlwaysOn 가용성 그룹의 일부가 될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-220">A database enabled for change tracking (CT) can be part of an AlwaysOn availability group.</span></span> <span data-ttu-id="e5bb9-221">추가 구성은 필요하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-221">No additional configuration is needed.</span></span> <span data-ttu-id="e5bb9-222">변경 데이터에 액세스하기 위해 CDC TVF(테이블 반환 함수)를 사용하는 변경 추적 클라이언트 애플리케이션은 장애 조치(Failover) 후 주 복제본을 찾는 기능이 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-222">Change tracking client applications that use the CDC table-valued functions (TVFs) to access change data will need the ability to locate the primary replica after failover.</span></span> <span data-ttu-id="e5bb9-223">클라이언트 애플리케이션이 가용성 그룹 수신기 이름을 통해 연결할 경우 연결 요청이 항상 현재 주 복제본으로 올바르게 전송됩니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-223">If the client application connects through the availability group listener name, connection requests will always be appropriately directed to the current primary replica.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="e5bb9-224">변경 추적 데이터는 항상 주 복제본으로부터 가져와야 합니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-224">Change tracking data must always be obtained from the primary replica.</span></span> <span data-ttu-id="e5bb9-225">보조 복제본으로부터 변경 데이터에 액세스하려고 시도하면 다음과 같은 오류가 발생합니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-225">An attempt to access change data from a secondary replica will result in the following error:</span></span>  
>   
>  <span data-ttu-id="e5bb9-226">메시지 22117, 수준 16, 상태 1, 줄 1</span><span class="sxs-lookup"><span data-stu-id="e5bb9-226">Msg 22117, Level 16, State 1, Line1</span></span>  
>   
>  <span data-ttu-id="e5bb9-227">보조 가용성 복제본의 멤버인 데이터베이스(즉, 보조 데이터베이스)에서는 변경 내용 추적이 지원되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-227">For databases that are members of a secondary replica (that is, for secondary databases), change tracking is not supported.</span></span> <span data-ttu-id="e5bb9-228">주 복제본에서 데이터베이스에 대해 변경 내용 추적 쿼리를 실행하세요.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-228">Run change tracking queries on the databases in the primary replica.</span></span>  
  
##  <a name="prerequisites-restrictions-and-considerations-for-using-replication"></a><a name="Prereqs"></a> <span data-ttu-id="e5bb9-229">복제 사용을 위한 필수 구성 요소, 제한 사항 및 고려 사항</span><span class="sxs-lookup"><span data-stu-id="e5bb9-229">Prerequisites, Restrictions, and Considerations for Using Replication</span></span>  
 <span data-ttu-id="e5bb9-230">이 섹션에서는 필수 구성 요소, 제한 사항 및 권장 사항을 비롯하여 [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)]을 사용하여 복제를 배포할 때의 고려 사항에 대해 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-230">This section describes considerations for deploying replication with [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)], including prerequisites, restrictions, and recommendations.</span></span>  
  
### <a name="prerequisites"></a><span data-ttu-id="e5bb9-231">필수 구성 요소</span><span class="sxs-lookup"><span data-stu-id="e5bb9-231">Prerequisites</span></span>  
  
-   <span data-ttu-id="e5bb9-232">트랜잭션 복제를 사용할 때 게시 데이터베이스가 가용성 그룹에 있으면 게시자와 배포자 모두 최소한 [!INCLUDE[ssSQL11](../../../includes/sssql11-md.md)]를 실행해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-232">When using transactional replication and the publishing database is in an availability group both the publisher and the distributor must run at least [!INCLUDE[ssSQL11](../../../includes/sssql11-md.md)].</span></span> <span data-ttu-id="e5bb9-233">구독자는 낮은 수준의 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)]를 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-233">The subscriber can be using a lower level of [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)].</span></span>  
  
-   <span data-ttu-id="e5bb9-234">병합 복제를 사용할 때 게시 데이터베이스가 가용성 그룹에 있는 경우:</span><span class="sxs-lookup"><span data-stu-id="e5bb9-234">When using merge replication and the publishing database is in an availability group:</span></span>  
  
    -   <span data-ttu-id="e5bb9-235">밀어넣기 구독: 게시자와 배포자 모두 최소한 [!INCLUDE[ssSQL11](../../../includes/sssql11-md.md)]를 실행해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-235">Push subscription: Both the publisher and the distributor must run at least [!INCLUDE[ssSQL11](../../../includes/sssql11-md.md)].</span></span>  
  
    -   <span data-ttu-id="e5bb9-236">끌어오기 구독: 게시자, 배포자 및 구독자 데이터베이스는 최소한 [!INCLUDE[ssSQL11](../../../includes/sssql11-md.md)]에 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-236">Pull subscription: The publisher, distributor, and subscriber databases must be on at least [!INCLUDE[ssSQL11](../../../includes/sssql11-md.md)].</span></span> <span data-ttu-id="e5bb9-237">구독자의 병합 에이전트가 가용성 그룹이 보조 그룹으로 장애 조치(Failover)하는 방법을 이해해야 하기 때문입니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-237">This is because the merge agent on the subscriber must understand how an availability group can fail over to its secondary.</span></span>  
  
-   <span data-ttu-id="e5bb9-238">배포 데이터베이스는 가용성 그룹에 배치할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-238">Placing the distribution database on an availability group is not supported.</span></span>  
  
-   <span data-ttu-id="e5bb9-239">게시자 인스턴스는 AlwaysOn 가용성 그룹에 참여하는 데 필요한 모든 사전 요구 사항을 충족합니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-239">The Publisher instances satisfy all the prerequisites required to participate in an AlwaysOn availability group.</span></span> <span data-ttu-id="e5bb9-240">자세한 내용은 [AlwaysOn 가용성 그룹 &#40;SQL Server&#41;에 대 한 필수 조건, 제한 사항 및 권장 사항 ](prereqs-restrictions-recommendations-always-on-availability.md)을 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-240">For more information see [Prerequisites, Restrictions, and Recommendations for AlwaysOn Availability Groups &#40;SQL Server&#41;](prereqs-restrictions-recommendations-always-on-availability.md).</span></span>  
  
### <a name="restrictions"></a><span data-ttu-id="e5bb9-241">제한</span><span class="sxs-lookup"><span data-stu-id="e5bb9-241">Restrictions</span></span>  
 <span data-ttu-id="e5bb9-242">[!INCLUDE[ssHADR](../../../includes/sshadr-md.md)]에서 지원되는 복제 조합은 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-242">Supported combinations of replication on [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)]:</span></span>  
  
|||||  
|-|-|-|-|  
||<span data-ttu-id="e5bb9-243">**게시자**</span><span class="sxs-lookup"><span data-stu-id="e5bb9-243">**Publisher**</span></span>|<span data-ttu-id="e5bb9-244">**배포자** <sup>3</sup></span><span class="sxs-lookup"><span data-stu-id="e5bb9-244">**Distributor** <sup>3</sup></span></span>|<span data-ttu-id="e5bb9-245">**구독자**</span><span class="sxs-lookup"><span data-stu-id="e5bb9-245">**Subscriber**</span></span>|  
|<span data-ttu-id="e5bb9-246">**트랜잭션**</span><span class="sxs-lookup"><span data-stu-id="e5bb9-246">**Transactional**</span></span>|<span data-ttu-id="e5bb9-247">예<sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="e5bb9-247">Yes<sup>1</sup></span></span>|<span data-ttu-id="e5bb9-248">아니요</span><span class="sxs-lookup"><span data-stu-id="e5bb9-248">No</span></span>|<span data-ttu-id="e5bb9-249">예<sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="e5bb9-249">Yes<sup>2</sup></span></span>|  
|<span data-ttu-id="e5bb9-250">**P2P**</span><span class="sxs-lookup"><span data-stu-id="e5bb9-250">**P2P**</span></span>|<span data-ttu-id="e5bb9-251">예</span><span class="sxs-lookup"><span data-stu-id="e5bb9-251">No</span></span>|<span data-ttu-id="e5bb9-252">아니요</span><span class="sxs-lookup"><span data-stu-id="e5bb9-252">No</span></span>|<span data-ttu-id="e5bb9-253">예</span><span class="sxs-lookup"><span data-stu-id="e5bb9-253">No</span></span>|  
|<span data-ttu-id="e5bb9-254">**병합**</span><span class="sxs-lookup"><span data-stu-id="e5bb9-254">**Merge**</span></span>|<span data-ttu-id="e5bb9-255">예</span><span class="sxs-lookup"><span data-stu-id="e5bb9-255">Yes</span></span>|<span data-ttu-id="e5bb9-256">아니요</span><span class="sxs-lookup"><span data-stu-id="e5bb9-256">No</span></span>|<span data-ttu-id="e5bb9-257">예<sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="e5bb9-257">Yes<sup>2</sup></span></span>|  
|<span data-ttu-id="e5bb9-258">**스냅샷**</span><span class="sxs-lookup"><span data-stu-id="e5bb9-258">**Snapshot**</span></span>|<span data-ttu-id="e5bb9-259">예</span><span class="sxs-lookup"><span data-stu-id="e5bb9-259">Yes</span></span>|<span data-ttu-id="e5bb9-260">예</span><span class="sxs-lookup"><span data-stu-id="e5bb9-260">No</span></span>|<span data-ttu-id="e5bb9-261">예<sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="e5bb9-261">Yes<sup>2</sup></span></span>|  
  
 <span data-ttu-id="e5bb9-262"><sup>1</sup> 양방향 및 상호 트랜잭션 복제에 대 한 지원을 포함 하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-262"><sup>1</sup> Does not include support for bi-directional and reciprocal transactional replication.</span></span>  
  
 <span data-ttu-id="e5bb9-263"><sup>2</sup> 복제본 데이터베이스에 대 한 장애 조치 (Failover)는 수동 절차입니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-263"><sup>2</sup> Failover to the replica database is a manual procedure.</span></span> <span data-ttu-id="e5bb9-264">자동 장애 조치(Failover)는 제공되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-264">Automatic failover is not provided.</span></span>  
  
 <span data-ttu-id="e5bb9-265"><sup>3</sup> 배포자 데이터베이스는 또는 데이터베이스 미러링과 함께 사용할 수 없습니다 [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="e5bb9-265"><sup>3</sup> The Distributor database is not supported for use with [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] or database mirroring.</span></span>  
  
### <a name="considerations"></a><span data-ttu-id="e5bb9-266">고려 사항</span><span class="sxs-lookup"><span data-stu-id="e5bb9-266">Considerations</span></span>  
  
-   <span data-ttu-id="e5bb9-267">배포 데이터베이스는 [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] 또는 데이터베이스 미러링과 함께 사용할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-267">The distribution database is not supported for use with [!INCLUDE[ssHADR](../../../includes/sshadr-md.md)] or database mirroring.</span></span> <span data-ttu-id="e5bb9-268">복제 구성이 배포자가 구성되는 SQL Server 인스턴스에 연결되므로 배포 데이터베이스를 미러링하거나 복제할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-268">Replication configuration is coupled to the SQL Server instance where the Distributor is configured; therefore the distribution database cannot be mirrored or replicated.</span></span> <span data-ttu-id="e5bb9-269">배포자에 대해 고가용성을 제공하려면 SQL Server 장애 조치(Failover) 클러스터를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-269">To provide high availability for the Distributor, use a SQL Server failover cluster.</span></span> <span data-ttu-id="e5bb9-270">자세한 내용은 [Always On 장애 조치(failover) 클러스터 인스턴스(SQL Server)](../../../sql-server/failover-clusters/windows/always-on-failover-cluster-instances-sql-server.md)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-270">For more information, see [AlwaysOn Failover Cluster Instances (SQL Server)](../../../sql-server/failover-clusters/windows/always-on-failover-cluster-instances-sql-server.md).</span></span>  
  
-   <span data-ttu-id="e5bb9-271">보조 데이터베이스에 대한 구독자 장애 조치(Failover)는 지원되지만 상대적으로 복잡한 수동 절차입니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-271">Subscriber failover to a secondary database, while supported, is a relatively complex manual procedure.</span></span> <span data-ttu-id="e5bb9-272">절차는 미러링된 구독자 데이터베이스를 장애 조치하는 데 사용되는 방법과 동일합니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-272">The procedure is essentially identical to the method used to fail over a mirrored subscriber database.</span></span> <span data-ttu-id="e5bb9-273">가용성 그룹에 참여하려면 구독자가 [!INCLUDE[ssSQL11](../../../includes/sssql11-md.md)] 이상을 실행해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-273">Subscribers must be running [!INCLUDE[ssSQL11](../../../includes/sssql11-md.md)] or later to participate in an availability group.</span></span>  
  
-   <span data-ttu-id="e5bb9-274">로그인, 작업, 연결된 서버를 포함하여 데이터베이스 외부에 있는 메타데이터 및 개체는 보조 복제본에 전파되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-274">Metadata and objects that exist outside the database are not propagated to the secondary replicas, including logins, jobs, linked servers.</span></span> <span data-ttu-id="e5bb9-275">장애 조치(Failover) 후 새로운 주 데이터베이스에 메타데이터 및 개체가 필요한 경우 이를 수동으로 복사해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-275">If you require the metadata and objects at the new primary database after failover, you must copy them manually.</span></span> <span data-ttu-id="e5bb9-276">자세한 내용은 [가용성 그룹의 데이터베이스에 대한 로그인 및 작업 관리&#40;SQL Server&#41;](../../logins-and-jobs-for-availability-group-databases.md)라는 프로세스에서 서로 바꿀 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e5bb9-276">For more information, see [Management of Logins and Jobs for the Databases of an Availability Group &#40;SQL Server&#41;](../../logins-and-jobs-for-availability-group-databases.md).</span></span>  
  
##  <a name="related-tasks"></a><a name="RelatedTasks"></a> <span data-ttu-id="e5bb9-277">관련 작업</span><span class="sxs-lookup"><span data-stu-id="e5bb9-277">Related Tasks</span></span>  
 <span data-ttu-id="e5bb9-278">**복제**</span><span class="sxs-lookup"><span data-stu-id="e5bb9-278">**Replication**</span></span>  
  
-   [<span data-ttu-id="e5bb9-279">AlwaysOn 가용성 그룹에 대한 복제 구성(SQL Server)</span><span class="sxs-lookup"><span data-stu-id="e5bb9-279">Configure Replication for AlwaysOn Availability Groups (SQL Server)</span></span>](always-on-availability-groups-sql-server.md)  
  
-   [<span data-ttu-id="e5bb9-280">AlwaysOn 게시 데이터베이스를 유지 관리 하는 &#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="e5bb9-280">Maintaining an AlwaysOn Publication Database &#40;SQL Server&#41;</span></span>](maintaining-an-always-on-publication-database-sql-server.md)  
  
-   [<span data-ttu-id="e5bb9-281">복제 관리 FAQ</span><span class="sxs-lookup"><span data-stu-id="e5bb9-281">Replication Administration FAQ</span></span>](../../../relational-databases/replication/administration/frequently-asked-questions-for-replication-administrators.md)  
  
 <span data-ttu-id="e5bb9-282">**변경 데이터 캡처**</span><span class="sxs-lookup"><span data-stu-id="e5bb9-282">**Change data capture**</span></span>  
  
-   [<span data-ttu-id="e5bb9-283">변경 데이터 캡처 설정 및 해제&#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="e5bb9-283">Enable and Disable Change Data Capture &#40;SQL Server&#41;</span></span>](../../../relational-databases/track-changes/enable-and-disable-change-data-capture-sql-server.md)  
  
-   [<span data-ttu-id="e5bb9-284">변경 데이터 캡처 관리 및 모니터링&#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="e5bb9-284">Administer and Monitor Change Data Capture &#40;SQL Server&#41;</span></span>](../../../relational-databases/track-changes/administer-and-monitor-change-data-capture-sql-server.md)  
  
-   [<span data-ttu-id="e5bb9-285">변경 데이터 작업&#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="e5bb9-285">Work with Change Data &#40;SQL Server&#41;</span></span>](../../../relational-databases/track-changes/work-with-change-data-sql-server.md)  
  
 <span data-ttu-id="e5bb9-286">**Change tracking**</span><span class="sxs-lookup"><span data-stu-id="e5bb9-286">**Change tracking**</span></span>  
  
-   [<span data-ttu-id="e5bb9-287">변경 내용 추적 설정 및 해제&#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="e5bb9-287">Enable and Disable Change Tracking &#40;SQL Server&#41;</span></span>](../../../relational-databases/track-changes/enable-and-disable-change-tracking-sql-server.md)  
  
-   [<span data-ttu-id="e5bb9-288">변경 내용 추적 관리&#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="e5bb9-288">Manage Change Tracking &#40;SQL Server&#41;</span></span>](../../../relational-databases/track-changes/manage-change-tracking-sql-server.md)  
  
-   [<span data-ttu-id="e5bb9-289">변경 내용 추적 사용&#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="e5bb9-289">Work with Change Tracking &#40;SQL Server&#41;</span></span>](../../../relational-databases/track-changes/work-with-change-tracking-sql-server.md)  
  
## <a name="see-also"></a><span data-ttu-id="e5bb9-290">참고 항목</span><span class="sxs-lookup"><span data-stu-id="e5bb9-290">See Also</span></span>  
 <span data-ttu-id="e5bb9-291">[복제 구독자 및 AlwaysOn 가용성 그룹 &#40;SQL Server&#41;](replication-subscribers-and-always-on-availability-groups-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="e5bb9-291">[Replication Subscribers and AlwaysOn Availability Groups &#40;SQL Server&#41;](replication-subscribers-and-always-on-availability-groups-sql-server.md) </span></span>  
 <span data-ttu-id="e5bb9-292">[AlwaysOn 가용성 그룹 &#40;SQL Server에 대 한 필수 조건, 제한 사항 및 권장 사항&#41;](prereqs-restrictions-recommendations-always-on-availability.md) </span><span class="sxs-lookup"><span data-stu-id="e5bb9-292">[Prerequisites, Restrictions, and Recommendations for AlwaysOn Availability Groups &#40;SQL Server&#41;](prereqs-restrictions-recommendations-always-on-availability.md) </span></span>  
 <span data-ttu-id="e5bb9-293">[AlwaysOn 가용성 그룹 &#40;SQL Server 개요&#41;](overview-of-always-on-availability-groups-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="e5bb9-293">[Overview of AlwaysOn Availability Groups &#40;SQL Server&#41;](overview-of-always-on-availability-groups-sql-server.md) </span></span>  
 <span data-ttu-id="e5bb9-294">[AlwaysOn 가용성 그룹: 상호 운용성 (SQL Server)](always-on-availability-groups-interoperability-sql-server.md) [AlwaysOn 장애 조치 (Failover) 클러스터 인스턴스 (SQL Server)](../../../sql-server/failover-clusters/windows/always-on-failover-cluster-instances-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="e5bb9-294">[AlwaysOn Availability Groups: Interoperability (SQL Server)](always-on-availability-groups-interoperability-sql-server.md) [AlwaysOn Failover Cluster Instances (SQL Server)](../../../sql-server/failover-clusters/windows/always-on-failover-cluster-instances-sql-server.md) </span></span>  
 <span data-ttu-id="e5bb9-295">[변경 데이터 캡처 정보&#40;SQL Server&#41;](../../../relational-databases/track-changes/about-change-data-capture-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="e5bb9-295">[About Change Data Capture &#40;SQL Server&#41;](../../../relational-databases/track-changes/about-change-data-capture-sql-server.md) </span></span>  
 <span data-ttu-id="e5bb9-296">[변경 내용 추적 정보&#40;SQL Server&#41;](../../../relational-databases/track-changes/about-change-tracking-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="e5bb9-296">[About Change Tracking &#40;SQL Server&#41;](../../../relational-databases/track-changes/about-change-tracking-sql-server.md) </span></span>  
 <span data-ttu-id="e5bb9-297">[SQL Server 복제](../../../relational-databases/replication/sql-server-replication.md) </span><span class="sxs-lookup"><span data-stu-id="e5bb9-297">[SQL Server Replication](../../../relational-databases/replication/sql-server-replication.md) </span></span>  
 <span data-ttu-id="e5bb9-298">[데이터 변경 내용 추적&#40;SQL Server&#41;](../../../relational-databases/track-changes/track-data-changes-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="e5bb9-298">[Track Data Changes &#40;SQL Server&#41;](../../../relational-databases/track-changes/track-data-changes-sql-server.md) </span></span>  
 [<span data-ttu-id="e5bb9-299">sys.sp_cdc_add_job&#40;Transact-SQL&#41;</span><span class="sxs-lookup"><span data-stu-id="e5bb9-299">sys.sp_cdc_add_job &#40;Transact-SQL&#41;</span></span>](/sql/relational-databases/system-stored-procedures/sys-sp-cdc-add-job-transact-sql)  
  
  
