---
title: Azure에 대 한 관리 되는 백업 SQL Server 문제 해결 | Microsoft Docs
description: 이 문서에서는 Microsoft Azure 작업에 대 한 SQL Server Managed Backup 중에 발생할 수 있는 오류를 해결 하는 데 사용할 수 있는 작업 및 도구에 대해 설명 합니다.
ms.custom: ''
ms.date: 03/08/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: backup-restore
ms.topic: conceptual
ms.assetid: a34d35b0-48eb-4ed1-9f19-ea14754650da
author: mashamsft
ms.author: mathoma
ms.openlocfilehash: 9c7ed5dd25ed2b02445bfae5eb78ac03b2270552
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87732895"
---
# <a name="troubleshooting-sql-server-managed--backup-to-azure"></a><span data-ttu-id="01886-103">Azure에 SQL Server 관리 백업 문제 해결</span><span class="sxs-lookup"><span data-stu-id="01886-103">Troubleshooting SQL Server Managed  Backup to Azure</span></span>
  <span data-ttu-id="01886-104">이 항목에서는 [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] 작업 중 발생할 수 있는 오류를 해결하는 데 사용할 수 있는 태스크 및 도구에 대해 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="01886-104">This topic describes the tasks and tools you can use to troubleshoot errors that may occur during [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] operations.</span></span>  
  
## <a name="overview"></a><span data-ttu-id="01886-105">개요</span><span class="sxs-lookup"><span data-stu-id="01886-105">Overview</span></span>  
 [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)]<span data-ttu-id="01886-106">에는 검사 및 문제 해결 단계가 내장되어 있어 많은 내부 오류가 [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] 프로세스에 의해 자체 해결됩니다.</span><span class="sxs-lookup"><span data-stu-id="01886-106">has built in checks and troubleshooting, so in many cases internal failures are taken care of by [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] process itself.</span></span>  
  
 <span data-ttu-id="01886-107">이러한 경우 중 하나는 백업 파일을 삭제 하는 것입니다 .이 경우 로그 체인이 복구에 영향을 줄 [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] 수 있습니다.-로그 체인이 중단 되는 것을 확인 하 고 백업을 즉시 수행 하도록 예약 합니다.</span><span class="sxs-lookup"><span data-stu-id="01886-107">Example of one such case is a deletion of a backup file resulting in a break of the log chain affecting recoverability - [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] will identify the break in log chain and schedule a backup to be taken immediately.</span></span> <span data-ttu-id="01886-108">그러나 상태를 모니터링하여 수동 작업이 필요한 오류를 해결하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="01886-108">However we recommend that you monitor the status and address any errors that require manual intervention.</span></span>  
  
 [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)]<span data-ttu-id="01886-109">은 시스템 저장 프로시저, 시스템 뷰 및 확장 이벤트를 사용하여 이벤트 및 오류를 기록합니다.</span><span class="sxs-lookup"><span data-stu-id="01886-109">logs events and errors using system stored procedures, system views and extended events.</span></span> <span data-ttu-id="01886-110">시스템 뷰 및 저장 프로시저는 [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] 구성 정보, 예약된 백업의 백업 상태 및 확장 이벤트에서 검색한 오류를 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="01886-110">System views and stored procedures provide [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] configuration information, status of backup scheduled backups, and also the errors captured by Extended Events.</span></span> [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)]<span data-ttu-id="01886-111">은 확장 이벤트를 사용하여 문제 해결에 사용할 오류를 검색합니다.</span><span class="sxs-lookup"><span data-stu-id="01886-111">uses Extended Events to capture the errors to use for troubleshooting.</span></span> <span data-ttu-id="01886-112">이벤트 기록 외에도 SQL Server 스마트 관리 정책은 오류 및 문제 또는 알림을 제공하는 전자 메일 알림 작업에 사용되는 상태를 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="01886-112">In addition to logging events, SQL Server Smart Admin Policies provide a health status which is used by an email notification job to provide notification or errors and issues.</span></span> <span data-ttu-id="01886-113">자세한 내용은 [Azure에 대 한 관리 되는 백업 SQL Server 모니터링을](../relational-databases/backup-restore/sql-server-managed-backup-to-microsoft-azure.md)참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="01886-113">For more information see [Monitor SQL Server Managed Backup to Azure](../relational-databases/backup-restore/sql-server-managed-backup-to-microsoft-azure.md).</span></span>  
  
 [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)]<span data-ttu-id="01886-114">는 Azure storage에 수동으로 백업할 때 사용 되는 것과 동일한 로깅 (SQL Server URL에 백업)도 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="01886-114">also uses the same logging that is used when manually backing up to Azure storage (SQL Server Backup to URL).</span></span> <span data-ttu-id="01886-115">URL에 대 한 백업 관련 문제에 대 한 자세한 내용은 [url에 백업 SQL Server](../relational-databases/backup-restore/sql-server-backup-to-url-best-practices-and-troubleshooting.md) 에서 문제 해결 섹션을 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="01886-115">For more information on Backup to URL related issues, see the troubleshooting section in [SQL Server Backup to URL Best Practices and Troubleshooting](../relational-databases/backup-restore/sql-server-backup-to-url-best-practices-and-troubleshooting.md)</span></span>  
  
### <a name="general-troubleshooting-steps"></a><span data-ttu-id="01886-116">일반 문제 해결 단계</span><span class="sxs-lookup"><span data-stu-id="01886-116">General Troubleshooting Steps</span></span>  
  
1.  <span data-ttu-id="01886-117">오류 및 경고에 대한 전자 메일을 수신하도록 전자 메일 알림을 설정하십시오.</span><span class="sxs-lookup"><span data-stu-id="01886-117">Enable Email Notification to start to receive emails for error and warnings.</span></span>  
  
     <span data-ttu-id="01886-118">또는 주기적으로 `smart_admin.fn_get_health_status`를 실행하여 집계된 오류 및 개수를 확인할 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="01886-118">Alternatively, you can also periodically run `smart_admin.fn_get_health_status` to check the aggregated errors and counts.</span></span> <span data-ttu-id="01886-119">예를 들어 `number_of_invalid_credential_errors`는 스마트 백업에서 백업을 시도했지만 잘못된 자격 증명 오류가 발생한 횟수입니다.</span><span class="sxs-lookup"><span data-stu-id="01886-119">For example, `number_of_invalid_credential_errors` is the number of times smart backup attempted a backup but got invalid credential error.</span></span> <span data-ttu-id="01886-120">`Number_of_backup_loops` 및 `number_of_retention_loops`는 오류가 아니지만 백업 스레드와 보존 스레드가 데이터베이스 목록을 검색한 횟수를 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="01886-120">`Number_of_backup_loops` and `number_of_retention_loops` are not errors; but they indicate the number of times backup thread and retention thread scanned the list of databases.</span></span> <span data-ttu-id="01886-121">일반적으로 @begin_time 및를 @end_time 제공 하지 않으면 함수는 최근 30 분의 정보를 표시 하 고이 두 열에 대해 일반적으로 0이 아닌 값을 표시 합니다.</span><span class="sxs-lookup"><span data-stu-id="01886-121">Typically, when @begin_time and @end_time are not provided, the function is showing the information from last 30 minutes, then we should normally see non-zero values for these two columns.</span></span> <span data-ttu-id="01886-122">두 열의 값이 0이면 오버로드된 시스템이나 응답하지 않는 시스템을 의미합니다.</span><span class="sxs-lookup"><span data-stu-id="01886-122">If they are zero then it implies system overloaded or even system not responding.</span></span> <span data-ttu-id="01886-123">자세한 내용은이 항목의 뒷부분에 나오는 **시스템 문제 해결** 섹션을 참조 하십시오.</span><span class="sxs-lookup"><span data-stu-id="01886-123">For more information, see **Troubleshooting System Issues** section later in this topic.</span></span>  
  
2.  <span data-ttu-id="01886-124">오류 및 기타 관련 이벤트에 대한 자세한 내용을 보려면 확장 이벤트 로그를 검토하십시오.</span><span class="sxs-lookup"><span data-stu-id="01886-124">Review the Extended Event logs to learn more details on the errors and other associated events.</span></span>  
  
3.  <span data-ttu-id="01886-125">문제를 해결하려면 로그의 정보를 사용하십시오.</span><span class="sxs-lookup"><span data-stu-id="01886-125">Use the information in the logs to resolve the issue.</span></span>  <span data-ttu-id="01886-126">시스템 문제 또는 오류의 경우 서비스나 SQL Server 에이전트를 다시 시작해야 할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="01886-126">In case of a system issue or error, you may need to restart the service or SQL Server Agent.</span></span>  
  
### <a name="common-causes-of-errors"></a><span data-ttu-id="01886-127">오류의 일반적인 원인</span><span class="sxs-lookup"><span data-stu-id="01886-127">Common Causes of Errors</span></span>  
 <span data-ttu-id="01886-128">다음은 오류를 일으키는 일반적인 원인 목록입니다.</span><span class="sxs-lookup"><span data-stu-id="01886-128">Following is the list of common causes resulting in failures:</span></span>  
  
1.  <span data-ttu-id="01886-129">**SQL 자격 증명에 대 한 변경 내용:** 에서 사용 하는 자격 증명 이름이 [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] 변경 되거나 삭제 되는 경우에서 [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] 백업을 수행할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="01886-129">**Changes to SQL Credential:** If the name of the credential used by [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] is changed or if it is deleted, [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] will not be able to take backups.</span></span> <span data-ttu-id="01886-130">이 변경은 [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] 구성 설정에 적용되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="01886-130">The change should be applied to [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] configuration settings.</span></span>  
  
2.  <span data-ttu-id="01886-131">**저장소 액세스 키 값에 대 한 변경 내용:** Azure 계정에 대해 저장소 키 값이 변경 되었지만 SQL 자격 증명이 새 값으로 업데이트 되지 않으면는 [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] 저장소에 인증할 때 실패 하 고이 계정을 사용 하도록 구성 된 데이터베이스를 백업 하지 못합니다.</span><span class="sxs-lookup"><span data-stu-id="01886-131">**Changes to storage access key values:** If the storage key values are changed for the Azure account, but SQL Credential is not updated with the new values, [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] will fail when authenticating to the storage, and fails to backup databases configured to use this account.</span></span>  
  
3.  <span data-ttu-id="01886-132">**Azure Storage 계정에 대 한 변경 내용:** SQL 자격 증명을 변경 하지 않고 저장소 계정을 삭제 하거나 이름을 바꾸면 [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] 오류가 발생 하 고 백업이 수행 되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="01886-132">**Changes to Azure Storage Account:** Deleting or renaming storage account without corresponding changes to the SQL Credential will cause [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] to fail and no backups will be taken.</span></span> <span data-ttu-id="01886-133">스토리지 계정을 삭제한 경우에는 데이터베이스가 올바른 스토리지 계정 정보로 다시 구성되었는지 확인하십시오.</span><span class="sxs-lookup"><span data-stu-id="01886-133">If you delete a storage account, ensure that the databases are reconfigured with valid storage account information.</span></span> <span data-ttu-id="01886-134">스토리지 계정의 이름이 변경되거나 키 값이 변경되면 이러한 변경 사항이 [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)]에서 사용하는 SQL 자격 증명에도 반영되도록 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="01886-134">If a storage account is renamed or the key values are changed, ensure that these changes are reflected in the SQL Credential used by [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)].</span></span>  
  
4.  <span data-ttu-id="01886-135">**데이터베이스 속성에 대 한 변경 내용:** 복구 모델을 변경 하거나 이름을 변경 하면 백업이 실패할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="01886-135">**Changes to Database Properties:** Changes to recovery models or changing the name can cause backups to fail.</span></span>  
  
5.  <span data-ttu-id="01886-136">**복구 모델에 대 한 변경 내용:** 데이터베이스의 복구 모델이 전체 또는 대량 로그에서 단순으로 변경 되 면 백업이 중지 되 고에서 데이터베이스를 건너뜁니다 [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="01886-136">**Changes to Recovery Model:** If the recovery model of the database is changed to simple from full or bulk-logged, backups will stop, and the databases will be skipped by [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)].</span></span> <span data-ttu-id="01886-137">자세한 내용은 [Azure에 대 한 관리 되는 백업 SQL Server: 상호 운용성 및 공존 성](../../2014/database-engine/sql-server-managed-backup-to-windows-azure-interoperability-and-coexistence.md) 을 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="01886-137">For more information, see [SQL Server Managed Backup to Azure: Interoperability and Coexistence](../../2014/database-engine/sql-server-managed-backup-to-windows-azure-interoperability-and-coexistence.md)</span></span>  
  
### <a name="most-common-error-messages-and-solutions"></a><span data-ttu-id="01886-138">가장 일반적인 오류 메시지 및 해결 방법</span><span class="sxs-lookup"><span data-stu-id="01886-138">Most Common Error Messages and Solutions</span></span>  
  
1.  <span data-ttu-id="01886-139">**를 사용 하거나 구성할 때 발생 하는 오류 [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] :**</span><span class="sxs-lookup"><span data-stu-id="01886-139">**Errors when enabling or configuring [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)]:**</span></span>  
  
     <span data-ttu-id="01886-140">오류: "저장소 URL에 액세스 하지 못했습니다. 올바른 SQL 자격 증명 제공 ... ": SQL 자격 증명을 참조 하는 이와 유사한 오류가 표시 될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="01886-140">Error: " Failed to access the storage URL.... Provide a valid SQL Credential..." : You may see this and other similar errors referring to SQL Credentials.</span></span>  <span data-ttu-id="01886-141">이러한 경우에는 사용자가 제공한 SQL 자격 증명의 이름과 SQL 자격 증명에 저장 된 정보 (저장소 계정 이름 및 저장소 액세스 키)를 검토 하 고 해당 키가 최신이 고 올바른지 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="01886-141">In such cases, review the name of the SQL Credential you provided, and also the information stored in the SQL Credential - the storage account name, and the storage access key and make sure that they are current and valid.</span></span>  
  
     <span data-ttu-id="01886-142">오류: "... 데이터베이스를 구성할 수 없습니다 .... 시스템 데이터베이스 이기 때문에 ": [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] 시스템 데이터베이스에 대해를 사용 하도록 설정 하려고 하면이 오류가 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="01886-142">Error: "... cannot configure the database....because it is a system database": You will see this error if you try to enable [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] for a system database.</span></span>  [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)]<span data-ttu-id="01886-143">은 시스템 데이터베이스 백업을 지원하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="01886-143">does not support backups for system databases.</span></span>  <span data-ttu-id="01886-144">시스템 데이터베이스에 대한 백업을 구성하려면 유지 관리 계획 등 다른 SQL Server 백업 기술을 사용하십시오.</span><span class="sxs-lookup"><span data-stu-id="01886-144">To configure backup for a system database use other SQL Server Backup technologies such as maintenance plans.</span></span>  
  
     <span data-ttu-id="01886-145">오류: "... 보존 기간 제공 .... ": 이러한 값을 처음으로 구성할 때 데이터베이스 또는 인스턴스에 대 한 보존 기간을 지정 하지 않은 경우 보존 기간에 대 한 오류가 표시 될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="01886-145">Error:" ... Provide a retention period...." : You may see errors regarding the retention period if you either have not specified a retention period for the database or instance when you are configuring these values for the first time.</span></span> <span data-ttu-id="01886-146">1-30 이외의 값을 지정한 경우에도 오류가 발생할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="01886-146">You may also see an error if you provide a value other than a number between 1 and 30.</span></span> <span data-ttu-id="01886-147">보존 기간에 대해 허용된 값은 1-30의 숫자입니다.</span><span class="sxs-lookup"><span data-stu-id="01886-147">The allowed value for the retention period is a number between 1 and 30.</span></span>  
  
2.  <span data-ttu-id="01886-148">**전자 메일 알림 오류**</span><span class="sxs-lookup"><span data-stu-id="01886-148">**Email Notification Errors:**</span></span>  
  
     <span data-ttu-id="01886-149">오류: "데이터베이스 메일을 사용할 수 없습니다."-전자 메일 알림을 사용 하도록 설정 하는 경우이 오류가 표시 되지만 데이터베이스 메일 인스턴스에 구성 되어 있지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="01886-149">Error: "Database Mail is not enabled..." - You will see this error if you enable e-mail notifications, but Database Mail is not configured on the instance.</span></span> <span data-ttu-id="01886-150">[!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)]의 상태에 대한 알림을 수신하려면 인스턴스에서 데이터베이스 메일을 구성해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="01886-150">You must configure Database Mail on the instance to be able to receive notification of the health status of [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)].</span></span> <span data-ttu-id="01886-151">데이터베이스 메일을 사용 하도록 설정 하는 방법에 대 한 자세한 내용은 [데이터베이스 메일 구성](../relational-databases/database-mail/configure-database-mail.md)을 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="01886-151">For information about how to enable database mail, see [Configure Database Mail](../relational-databases/database-mail/configure-database-mail.md).</span></span> <span data-ttu-id="01886-152">또한 알림에 데이터베이스 메일을 사용하도록 SQL Server 에이전트를 설정해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="01886-152">You must also enable SQL Server Agent to use Database Mail for notifications.</span></span> <span data-ttu-id="01886-153">자세한 내용은 [시작 하기 전에](../relational-databases/database-mail/configure-sql-server-agent-mail-to-use-database-mail.md#BeforeYouBegin)를 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="01886-153">For more information, see [Before You Begin](../relational-databases/database-mail/configure-sql-server-agent-mail-to-use-database-mail.md#BeforeYouBegin).</span></span>  
  
     <span data-ttu-id="01886-154">다음은 전자 메일 알림과 관련하여 표시될 수 있는 오류 번호의 목록입니다.</span><span class="sxs-lookup"><span data-stu-id="01886-154">Following is a list of error numbers you might see that are associated with email notifications:</span></span>  
  
    -   <span data-ttu-id="01886-155">오류 번호: 45209</span><span class="sxs-lookup"><span data-stu-id="01886-155">ErrorNumber: 45209</span></span>  
  
    -   <span data-ttu-id="01886-156">오류 번호: 45210</span><span class="sxs-lookup"><span data-stu-id="01886-156">ErrorNumber: 45210</span></span>  
  
    -   <span data-ttu-id="01886-157">오류 번호: 45211</span><span class="sxs-lookup"><span data-stu-id="01886-157">ErrorNumber: 45211</span></span>  
  
3.  <span data-ttu-id="01886-158">**연결 오류:**</span><span class="sxs-lookup"><span data-stu-id="01886-158">**Connectivity Errors:**</span></span>  
  
    -   <span data-ttu-id="01886-159">**SQL 연결과 관련 된 오류:** 이러한 오류는 SQL Server 인스턴스에 연결 하는 데 문제가 있는 경우에 발생 합니다.</span><span class="sxs-lookup"><span data-stu-id="01886-159">**Errors Related to SQL Connectivity:** These errors happen when there are issues connecting to SQL Server instance.</span></span> <span data-ttu-id="01886-160">확장 이벤트는 관리 채널을 통해 이러한 유형의 오류를 노출합니다.</span><span class="sxs-lookup"><span data-stu-id="01886-160">The extended events expose these type of errors through the admin channel.</span></span> <span data-ttu-id="01886-161">다음은 이러한 유형의 연결 문제와 관련된 오류에 대해 표시될 수 있는 두 가지 확장 이벤트입니다.</span><span class="sxs-lookup"><span data-stu-id="01886-161">Following are the two extended events that you might see for errors related to this type of connectivity issues:</span></span>  
  
         <span data-ttu-id="01886-162">event_type = SqlError인 FileRetentionAdminXEvent.</span><span class="sxs-lookup"><span data-stu-id="01886-162">FileRetentionAdminXEvent with event_type = SqlError.</span></span> <span data-ttu-id="01886-163">이 오류에 대한 자세한 내용은 해당 이벤트의 error_code, error_message 및 stack_trace를 참조하십시오.</span><span class="sxs-lookup"><span data-stu-id="01886-163">For details of this error, look at the error_code, error_message and stack_trace of that event.</span></span> <span data-ttu-id="01886-164">Error_code SqlException의 오류 번호입니다.</span><span class="sxs-lookup"><span data-stu-id="01886-164">The error_code is the SqlException's error number.</span></span>  
  
         <span data-ttu-id="01886-165">다음 메시지/메시지 접두사가 포함된 SmartBackupAdminXevent:</span><span class="sxs-lookup"><span data-stu-id="01886-165">SmartBackupAdminXevent with the following messages/message prefixes:</span></span>  
  
         <span data-ttu-id="01886-166">*"인스턴스에 대 한 Azure 기본 설정에 대 한 SQL Server 관리 되는 백업을 구성 하는 동안 내부 오류가 발생 했습니다. 일시적인 오류일 수 있습니다. "*</span><span class="sxs-lookup"><span data-stu-id="01886-166">*"An internal error occurred while configuring SQL Server Managed Backup to Azure default settings for instance. Error might be transient."*</span></span>  
  
         <span data-ttu-id="01886-167">*"SQL Server에서 연결 문제가 발생 했을 수 있습니다. 현재 반복에서 데이터베이스를 건너뜁니다. "*</span><span class="sxs-lookup"><span data-stu-id="01886-167">*"Probably experiencing connectivity issues with SQL Server. Skipping database in the current iteration."*</span></span>  
  
         <span data-ttu-id="01886-168">*"로그 사용 정보를 쿼리하지 못했습니다. 일시적인 오류일 수 있습니다. 현재 반복에서 데이터베이스를 건너뜁니다. "*</span><span class="sxs-lookup"><span data-stu-id="01886-168">*"Querying log usage info failed. The failure might be transient. Skipping database in the current iteration."*</span></span>  
  
         <span data-ttu-id="01886-169">*"SSMBackup2WA agent metadata를 로드 하는 동안 SQL 예외가 발생 했습니다. 일시적인 오류일 수 있습니다. 작업을 다시 시도 합니다. "*</span><span class="sxs-lookup"><span data-stu-id="01886-169">*"SQL exception encountered while loading SSMBackup2WA agent metadata. The failure might be transient. Operation will be retried."*</span></span>  
  
         <span data-ttu-id="01886-170">*"SSMBackup2WA에서 SQL 예외가 발생 했습니다. "*</span><span class="sxs-lookup"><span data-stu-id="01886-170">*"SSMBackup2WA encountered SQL exception while ... "*</span></span>  
  
    -   <span data-ttu-id="01886-171">**저장소 계정 연결 오류:**</span><span class="sxs-lookup"><span data-stu-id="01886-171">**Errors Connecting to the storage account:**</span></span>  
  
         <span data-ttu-id="01886-172">event_type = XstoreError인 FileRetentionAdminXEvent에서 스토리지 예외가 보고됩니다.</span><span class="sxs-lookup"><span data-stu-id="01886-172">Storage exceptions are reported in FileRetentionAdminXEvent with event_type = XstoreError.</span></span> <span data-ttu-id="01886-173">이 오류에 대한 자세한 내용은 해당 이벤트의 error_message 및 stack_trace를 참조하십시오.</span><span class="sxs-lookup"><span data-stu-id="01886-173">For details of the error, look at the error_message and stack_trace of that event.</span></span>  
  
         <span data-ttu-id="01886-174">SQL Server 관리되는 백업이 URL에 대한 백업 기술을 기반으로 하므로 스토리지 연결과 관련된 오류는 두 기능에 모두 적용됩니다.</span><span class="sxs-lookup"><span data-stu-id="01886-174">Since SQL Server Managed Backup uses the underlying Backup to URL technology, the errors related to storage connectivity apply to both the features.</span></span> <span data-ttu-id="01886-175">문제 해결 단계에 대 한 자세한 내용은 [URL에 대 한 백업 모범 사례 및 문제 해결 문서의 SQL Server](../relational-databases/backup-restore/sql-server-backup-to-url-best-practices-and-troubleshooting.md) **문제 해결 섹션** 을 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="01886-175">For more information on troubleshooting steps, see **troubleshooting section** of the [SQL Server Backup to URL Best Practices and Troubleshooting](../relational-databases/backup-restore/sql-server-backup-to-url-best-practices-and-troubleshooting.md) article.</span></span>  
  
### <a name="troubleshooting-system-issues"></a><span data-ttu-id="01886-176">시스템 문제 해결</span><span class="sxs-lookup"><span data-stu-id="01886-176">Troubleshooting System Issues</span></span>  
 <span data-ttu-id="01886-177">시스템(SQL Server, SQL Server 에이전트)에 문제가 있는 몇 가지 시나리오와 해당 문제가 [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)]에 미치는 영향은 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="01886-177">Following are some scenarios when there is an issue with the system (SQL Server, SQL Server Agent) and its effects on [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)]:</span></span>  
  
-   <span data-ttu-id="01886-178">**Sqlservr.exe [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] 가 실행 될 때 응답을 중지 하거나 작동** 을 중지 합니다. SQL Server 작동이 중지 되 면 sql 에이전트가 정상적으로 종료 되 [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] 고, 중지 되며, 이벤트가 sql agent. out 파일에 기록 됩니다.</span><span class="sxs-lookup"><span data-stu-id="01886-178">**Sqlservr.exe stops responding or stops working when [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] is running:** If SQL Server stops working, SQL Agent will gracefully shut down, [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] also stops and the events are logged in SQL Agent.out file.</span></span>  
  
     <span data-ttu-id="01886-179">SQL Server가 응답하지 않는 경우 이벤트가 관리 채널에 기록됩니다.</span><span class="sxs-lookup"><span data-stu-id="01886-179">If SQL Server stops responding, events are logged in the admin channel.</span></span>  <span data-ttu-id="01886-180">이벤트 로그의 예:</span><span class="sxs-lookup"><span data-stu-id="01886-180">An example of the event log:</span></span>  
  
     <span data-ttu-id="01886-181">*Sql 오류 (엔진이 응답 하지 않거나 get sqlException: SqlException:* </span><span class="sxs-lookup"><span data-stu-id="01886-181">*Sql Error (engine not responding or get sqlException: SqlException:* </span></span>  
     <span data-ttu-id="01886-182">*오류 코드, 메시지 및 stacktrace는 다음과 같은 몇 가지 추가 정보와 함께 admin 채널 xevent에 표시 됩니다.* </span><span class="sxs-lookup"><span data-stu-id="01886-182">*error code, message and stacktrace will be displayed in an admin channel xevent, together with some extra information, such as :* </span></span>  
    <span data-ttu-id="01886-183">*"SQL Server에서 연결 문제가 발생 했을 수 있습니다. 현재 반복에서 데이터베이스를 건너뛰는 중 "*</span><span class="sxs-lookup"><span data-stu-id="01886-183">*"Probably experiencing connectivity issues with SQL Server. Skipping database in the current iteration"*</span></span>  
  
-   <span data-ttu-id="01886-184">**가 실행 중일 때 SQL 에이전트가 응답 하지 않거나 작동을 중지 합니다 [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] .**</span><span class="sxs-lookup"><span data-stu-id="01886-184">**SQL Agent stops responding or stops working when [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] is running:**</span></span>  
  
     <span data-ttu-id="01886-185">SQL 에이전트가 작동하지 않는 경우 [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)]도 중지되고 이벤트가 관리 채널에 기록됩니다.</span><span class="sxs-lookup"><span data-stu-id="01886-185">If SQL Agent stops working, [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] also stops and events are logged in the admin channel.</span></span> <span data-ttu-id="01886-186">이는 SQL Server가 응답하지 않는 시나리오와 유사합니다.</span><span class="sxs-lookup"><span data-stu-id="01886-186">This is similar to the scenarios when SQL Server stops responding.</span></span>  
  
     <span data-ttu-id="01886-187">SQL 에이전트가 응답하지 않는 경우 [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)]이 백업 작업을 계속할 수 없으며 이벤트가 관리 채널에 기록됩니다.</span><span class="sxs-lookup"><span data-stu-id="01886-187">If SQL Agent stops responding, [!INCLUDE[ss_smartbackup](../includes/ss-smartbackup-md.md)] will be unable to continue with backup operations, and events are logged in the admin channel.</span></span> <span data-ttu-id="01886-188">이벤트 로그의 예:</span><span class="sxs-lookup"><span data-stu-id="01886-188">An example of the event log:</span></span>  
  
     <span data-ttu-id="01886-189">*작업 중단: admin channel xevent를 참조 하세요.* </span><span class="sxs-lookup"><span data-stu-id="01886-189">*Job hangs: see admin channel xevents* </span></span>  
    <span data-ttu-id="01886-190">*"데이터베이스 백업에 대 한" + DBBackupInfoMsgMaxWaitTime + "시간 이상 SQL Server에서 진행 업데이트를 받지 못했습니다.   SSM 클라우드 백업이 계속 대기 합니다. "*</span><span class="sxs-lookup"><span data-stu-id="01886-190">*"A progress update hasn't been received from SQL Server in more than " + Constants.DBBackupInfoMsgMaxWaitTime  + " hours for database backup.   SSM Cloud Backup will continue to wait."*</span></span>  
  
 <span data-ttu-id="01886-191">전자 메일 알림을 사용하도록 설정한 경우 **백업 루프 수** 및 **보존 루프 수**가 포함된 알림을 받게 됩니다.</span><span class="sxs-lookup"><span data-stu-id="01886-191">If you have enabled email notification, you will receive a notification which includes **Number of Backup Loops** and **Number of Retention Loops**.</span></span> <span data-ttu-id="01886-192">이러한 두 열 중 하나나 둘 다에 대해 알림에서 반환되는 값이 0인 경우 시스템이 응답하지 않음을 나타낼 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="01886-192">If the value returned in the notification for one or both of these two columns is zero, it could be an indication that the system is not responding.</span></span>  
  
> [!WARNING]  
>  <span data-ttu-id="01886-193">보고서에 대한 결과를 생성하는 내부 프로세스에서는 엔진 진단 로그가 SQL 에이전트 오류 로그와 동일한 위치에 있는 것으로 가정합니다. 이 로그는 기본적으로 SQL Server 인스턴스의 오류 로그와 같은 폴더에 있습니다.</span><span class="sxs-lookup"><span data-stu-id="01886-193">The internal processes that generate the results for the report, assumes that the engine diagnostic logs are in the same location of SQL Agent error log, which by default is in the same folder as the error logs of the SQL Server instance.</span></span> <span data-ttu-id="01886-194">엔진 진단 로그가 SQL 에이전트 오류 로그 위치가 아닌 위치로 이동하는 경우 시스템에서 스마트 백업 진단 로그를 찾을 수 없으므로 전자 메일 알림의 보고서가 올바르지 않을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="01886-194">If the engine diagnostic logs are moved to a location other than SQL Agent error log location, the system is unable to find the smart backup diagnostic logs, and hence the report in the email notification may not be correct.</span></span> <span data-ttu-id="01886-195">예를 들어 백업 루프 수 및 보존 루프 수를 비롯한 모든 필드에 **0** 값이 보고될 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="01886-195">For example, you might see a value of **0** in all the fields reported including the Number of Backup Loops and Number of Retention Loops.</span></span> <span data-ttu-id="01886-196">진단 로그를 다른 위치로 이동하는 이 경우에 시스템이 응답하지 않는 것이 아니라 시스템에서 진단 로그를 찾지 못하는 것일 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="01886-196">In this case where the diagnostic logs are moved to a different location, it may not mean that the system is not responding, but that the system is unable to find the logs.</span></span> <span data-ttu-id="01886-197">먼저 진단 로그와 SQL 에이전트 오류 로그가 동일한 위치에 있는지 확인하십시오.</span><span class="sxs-lookup"><span data-stu-id="01886-197">Ensure that the location of the diagnostic logs and SQL Agent error logs are at the same location first.</span></span> <span data-ttu-id="01886-198">진단 로그의 현재 위치를 확인 하기 위해 [dm_os_server_diagnostics_log_configurations](/sql/relational-databases/system-dynamic-management-views/sys-dm-os-server-diagnostics-log-configurations)를 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="01886-198">To verify the current location of the diagnostic logs, you can use [sys.dm_os_server_diagnostics_log_configurations](/sql/relational-databases/system-dynamic-management-views/sys-dm-os-server-diagnostics-log-configurations).</span></span> <span data-ttu-id="01886-199">`path`열은 엔진 진단 로그의 현재 위치를 반환 합니다.</span><span class="sxs-lookup"><span data-stu-id="01886-199">The `path` column returns the current location of the engine diagnostic logs.</span></span>  <span data-ttu-id="01886-200">SQL 에이전트 오류 로그와 같은 폴더에 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="01886-200">It should be in the same folder as the SQL Agent error logs.</span></span> <span data-ttu-id="01886-201">`dbo.sp_get_sqlagent_properties` 저장 프로시저를 사용하여 SQL 에이전트 오류 로그 경로를 가져올 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="01886-201">You can get SQL Agent error log path using the `dbo.sp_get_sqlagent_properties` stored procedure.</span></span>  
  
 <span data-ttu-id="01886-202">오류의 세부 정보를 보려면 확장 이벤트 로그를 확인하십시오.</span><span class="sxs-lookup"><span data-stu-id="01886-202">Check the extended event logs to see details of the errors.</span></span> <span data-ttu-id="01886-203">오류를 수정하거나 SQL Server 에이전트를 다시 시작하여 상황을 해결하십시오.</span><span class="sxs-lookup"><span data-stu-id="01886-203">fix the errors, or restart SQL Server Agent to correct the situation.</span></span>  
  
  
