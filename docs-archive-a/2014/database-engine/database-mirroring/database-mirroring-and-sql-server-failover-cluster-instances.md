---
title: 데이터베이스 미러링 및 SQL Server 장애 조치(Failover) 클러스터 인스턴스 | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- failover clustering [SQL Server], database mirroring
- database mirroring [SQL Server], failover
- high-availability mode [SQL Server]
ms.assetid: f1dd6a79-698b-4e31-b923-6bfc3ea0b617
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 378f834b4482f44f6a84abf419f027b353c7771a
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87736759"
---
# <a name="database-mirroring-and-sql-server-failover-cluster-instances"></a><span data-ttu-id="02069-102">데이터베이스 미러링 및 SQL Server 장애 조치(Failover) 클러스터 인스턴스</span><span class="sxs-lookup"><span data-stu-id="02069-102">Database Mirroring and SQL Server Failover Cluster Instances</span></span>
  <span data-ttu-id="02069-103">장애 조치 클러스터는 리소스 그룹으로 알려진 MSCS( [!INCLUDE[msCoName](../../includes/msconame-md.md)] Cluster Service) 클러스터 그룹 내에 있는 하나 이상의 물리적 디스크 조합이며 클러스터의 참여 노드입니다.</span><span class="sxs-lookup"><span data-stu-id="02069-103">A failover cluster is a combination of one or more physical disks in a [!INCLUDE[msCoName](../../includes/msconame-md.md)] Cluster Service (MSCS) cluster group, known as a resource group, that are participating nodes of the cluster.</span></span> <span data-ttu-id="02069-104">리소스 그룹은 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]인스턴스를 호스팅하는 장애 조치 클러스터형 인스턴스로 구성됩니다.</span><span class="sxs-lookup"><span data-stu-id="02069-104">The resource group is configured as a failover clustered instance that hosts an instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="02069-105">[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 장애 조치 클러스터형 인스턴스는 네트워크에서 한 대의 컴퓨터처럼 보이지만 어떤 노드를 사용할 수 없게 되는 경우 노드 간 장애 조치 기능을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="02069-105">A [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] failover clustered instance appears on the network as if it were a single computer, but has functionality that provides failover from one node to another if one node becomes unavailable.</span></span> <span data-ttu-id="02069-106">자세한 내용은 [Always On 장애 조치(failover) 클러스터 인스턴스(SQL Server)](../../sql-server/failover-clusters/windows/always-on-failover-cluster-instances-sql-server.md)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="02069-106">For more information, see [AlwaysOn Failover Cluster Instances (SQL Server)](../../sql-server/failover-clusters/windows/always-on-failover-cluster-instances-sql-server.md).</span></span>  
  
 <span data-ttu-id="02069-107">장애 조치(failover) 클러스터는 단일 데이터베이스에 대해 고가용성 지원을 제공하는 데이터베이스 미러링과 달리 전체 [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 인스턴스에 대해 고가용성 지원을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="02069-107">Failover clusters provide high-availability support for an entire [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] instance, in contrast to database mirroring, which provides high-availability support for a single database.</span></span> <span data-ttu-id="02069-108">데이터베이스 미러링은 장애 조치 클러스터 간, 그리고 장애 조치 클러스터와 비클러스터형 호스트 간에 작동합니다.</span><span class="sxs-lookup"><span data-stu-id="02069-108">Database mirroring works between failover clusters and, also, between a failover cluster and a nonclustered host.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="02069-109">데이터베이스 미러링에 대한 소개는 [데이터베이스 미러링&#40;SQL Server&#41;](database-mirroring-sql-server.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="02069-109">For an introduction to database mirroring, see [Database Mirroring &#40;SQL Server&#41;](database-mirroring-sql-server.md).</span></span>  
  
## <a name="mirroring-and-clustering"></a><span data-ttu-id="02069-110">미러링 및 클러스터링</span><span class="sxs-lookup"><span data-stu-id="02069-110">Mirroring and Clustering</span></span>  
 <span data-ttu-id="02069-111">일반적으로 미러링을 클러스터링과 함께 사용할 때 주 서버와 미러 서버는 모두 클러스터에 있으며 주 서버는 클러스터의 장애 조치 클러스터형 인스턴스에서 실행되고 미러 서버는 다른 클러스터의 장애 조치 클러스터형 인스턴스에서 실행됩니다.</span><span class="sxs-lookup"><span data-stu-id="02069-111">Typically, when mirroring is used with clustering, the principal server and mirror server both reside on clusters, with the principal server running on the failover clustered instance of one cluster and the mirror server running on the failover clustered instance of a different cluster.</span></span> <span data-ttu-id="02069-112">그러나 한 파트너가 클러스터의 장애 조치 클러스터형 인스턴스에 있고 다른 파트너는 별도의 비클러스터형 컴퓨터에 있는 미러링 세션을 설정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="02069-112">You can establish a mirroring session in which one partner resides on the failover clustered instance of a cluster and the other partner resides on a separate, unclustered computer, however.</span></span>  
  
 <span data-ttu-id="02069-113">클러스터 장애 조치로 인해 일시적으로 주 서버를 사용할 수 없게 되면 클라이언트와 데이터베이스의 연결이 끊어집니다.</span><span class="sxs-lookup"><span data-stu-id="02069-113">If a cluster failover makes a principal server temporarily unavailable, client connections are disconnected from the database.</span></span> <span data-ttu-id="02069-114">클러스터 장애 조치(Failover)가 완료된 후 클라이언트는 [운영 모드](database-mirroring-operating-modes.md)에 따라 동일한 클러스터나 다른 클러스터의 주 서버 또는 비클러스터형 컴퓨터에 다시 연결됩니다.</span><span class="sxs-lookup"><span data-stu-id="02069-114">After the cluster failover completes, clients can reconnect to the principal server on the same cluster, or on a different cluster or an unclustered computer, depending on the [operating mode](database-mirroring-operating-modes.md).</span></span> <span data-ttu-id="02069-115">따라서 클러스터형 환경에서 데이터베이스 미러링을 구성하는 방법을 결정할 때 미러링에 사용할 운영 모드는 매우 중요합니다.</span><span class="sxs-lookup"><span data-stu-id="02069-115">Therefore, when deciding how to configure database mirroring in a clustered environment, the operating mode you use for mirroring is significant.</span></span>  
  
### <a name="high-safety-mode-session-with-automatic-failover"></a><span data-ttu-id="02069-116">자동 장애 조치 있는 보호 우선 모드 세션</span><span class="sxs-lookup"><span data-stu-id="02069-116">High-Safety mode Session with Automatic Failover</span></span>  
 <span data-ttu-id="02069-117">자동 장애 조치가 있는 보호 우선 모드에서 데이터베이스를 미러링하려면 파트너를 두 개의 클러스터로 구성하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="02069-117">If you intend to mirror a database in high-safety mode with automatic failover, a two-cluster configuration is recommended for the partners.</span></span> <span data-ttu-id="02069-118">이러한 구성은 가용성을 최대한 높여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="02069-118">This configuration provides maximum availability.</span></span> <span data-ttu-id="02069-119">미러링 모니터는 세 번째 클러스터나 비클러스터형 컴퓨터에 있을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="02069-119">The witness can reside either on a third cluster or on an unclustered computer.</span></span>  
  
 <span data-ttu-id="02069-120">현재의 주 서버가 실행되는 노드에 장애가 생기면 몇 초 안에 데이터베이스 자동 장애 조치가 시작되고 클러스터는 계속 다른 노드로 장애 조치를 합니다.</span><span class="sxs-lookup"><span data-stu-id="02069-120">If the node running the current principal server fails, automatic failover of the database begins within a few seconds, while the cluster is still failing over to another node.</span></span> <span data-ttu-id="02069-121">데이터베이스 미러링 세션은 다른 클러스터의 미러 서버 또는 비클러스터형 컴퓨터로 장애 조치되고 이전 미러 서버는 주 서버가 됩니다.</span><span class="sxs-lookup"><span data-stu-id="02069-121">The database mirroring session fails over to the mirror server on the other cluster or unclustered computer, and the former mirror server becomes the principal server.</span></span> <span data-ttu-id="02069-122">새로운 주 서버는 최대한 빨리 자체 데이터베이스 복사본을 롤포워드하여 온라인 상태의 주 데이터베이스가 됩니다.</span><span class="sxs-lookup"><span data-stu-id="02069-122">The new principal server rolls forward its copy of the database as quickly as possible and brings it online as the principal database.</span></span> <span data-ttu-id="02069-123">보통 몇 분 정도가 소요되는 클러스터 장애 조치가 끝나면 이전에 주 서버였던 장애 조치 클러스터형 인스턴스는 미러 서버가 됩니다.</span><span class="sxs-lookup"><span data-stu-id="02069-123">After the cluster failover completes, which typically takes several minutes, the failover clustered instance that was formerly the principal server becomes the mirror server.</span></span>  
  
 <span data-ttu-id="02069-124">다음 그림에서는 미러링 모니터 서버가 포함된 보호 우선 모드(자동 장애 조치 지원)로 실행되는 미러링 세션의 클러스터 간 자동 장애 조치를 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="02069-124">The following illustration shows an automatic failover between clusters in a mirroring session running in high-safety mode with a witness (which supports automatic failover).</span></span>  
  
 <span data-ttu-id="02069-125">![클러스터의 장애 조치(Failover)](../media/dbm-and-failover-clustering.gif "클러스터의 장애 조치(Failover)")</span><span class="sxs-lookup"><span data-stu-id="02069-125">![A failover on a cluster](../media/dbm-and-failover-clustering.gif "A failover on a cluster")</span></span>  
  
 <span data-ttu-id="02069-126">미러링 세션에서 3개의 서버 인스턴스는 3개의 고유 클러스터인 **Cluster_A**, **Cluster_B** 및 **Cluster_C**에 상주합니다.</span><span class="sxs-lookup"><span data-stu-id="02069-126">The three server instances in the mirroring session reside on three distinct clusters: **Cluster_A**, **Cluster_B**, and **Cluster_C**.</span></span> <span data-ttu-id="02069-127">각 클러스터에서 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 의 기본 인스턴스가 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 장애 조치 클러스터형 인스턴스로 실행됩니다.</span><span class="sxs-lookup"><span data-stu-id="02069-127">On each cluster, a default instance of [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] is running as a [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] failover clustered instance.</span></span> <span data-ttu-id="02069-128">미러링 세션이 시작되면 미러링 세션에서 **Cluster_A** 의 장애 조치(failover) 클러스터된 인스턴스가 주 서버로, **Cluster_B** 의 장애 조치(failover) 클러스터된 인스턴스는 미러 서버로, **Cluster_C** 의 장애 조치(failover) 클러스터된 인스턴스는 미러링 모니터 서버가 됩니다.</span><span class="sxs-lookup"><span data-stu-id="02069-128">When the mirroring session starts, the failover clustered instance on **Cluster_A** is the principal server, the failover clustered instance on **Cluster_B** is the mirror server, and the failover clustered instance on **Cluster_C** is the witness in the mirroring session.</span></span> <span data-ttu-id="02069-129">결국 **Cluster_A** 에 활성화되어 있는 노드에 장애가 발생하면 주 서버를 이용할 수 없게 됩니다.</span><span class="sxs-lookup"><span data-stu-id="02069-129">Eventually, the active node on **Cluster_A** fails, which causes the principal server to become unavailable.</span></span>  
  
 <span data-ttu-id="02069-130">클러스터가 장애 조치할 시간을 갖기 전에 미러 서버가 미러링 모니터 서버의 도움을 받아 주 서버의 손실을 감지합니다.</span><span class="sxs-lookup"><span data-stu-id="02069-130">Before the cluster has time to fail over, the loss of the principal server is detected by the mirror server, with the help of the witness.</span></span> <span data-ttu-id="02069-131">미러 서버는 가능한 한 빨리 해당 데이터베이스를 롤포워드하여 새로운 주 데이터베이스로 사용할 수 있도록 온라인 상태로 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="02069-131">The mirror server rolls forward its database and brings it online as the new principal database as quickly as possible.</span></span> <span data-ttu-id="02069-132">**Cluster_A** 가 장애 조치(failover)를 마치면 이전의 주 서버는 이제 미러 서버가 되고 해당 데이터베이스를 **Cluster_B**에 있는 현재의 주 데이터베이스와 동기화합니다.</span><span class="sxs-lookup"><span data-stu-id="02069-132">When **Cluster_A** finishes failing over, the former principal server is now the mirror server, and it synchronizes its database with the current principal database on **Cluster_B**.</span></span>  
  
### <a name="high-safety-mode-session-without-automatic-failover"></a><span data-ttu-id="02069-133">자동 장애 조치 없는 보호 우선 모드 세션</span><span class="sxs-lookup"><span data-stu-id="02069-133">High-Safety Mode Session Without Automatic Failover</span></span>  
 <span data-ttu-id="02069-134">자동 장애 조치가 없는 보호 우선 모드에서 데이터베이스를 미러링하는 경우 현재 주 서버를 실행하는 노드가 실패하면 클러스터의 다른 노드가 주 서버 역할을 합니다.</span><span class="sxs-lookup"><span data-stu-id="02069-134">If you are mirroring a database in high-safety mode without automatic failover, another node in the cluster will act as the principal server if the node running the current principal server fails.</span></span> <span data-ttu-id="02069-135">클러스터를 이용할 수 없을 때는 데이터베이스를 사용할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="02069-135">Note that while the cluster is unavailable, the database is unavailable.</span></span>  
  
### <a name="high-performance-mode-session"></a><span data-ttu-id="02069-136">성능 우선 모드 세션</span><span class="sxs-lookup"><span data-stu-id="02069-136">High-Performance Mode Session</span></span>  
 <span data-ttu-id="02069-137">성능 우선 모드에서 데이터베이스를 미러링할 때는 클러스터의 장애 조치 클러스터형 인스턴스에 주 서버를 배치하고 미러 서버는 원격 위치의 비클러스터형 서버에 배치하십시오.</span><span class="sxs-lookup"><span data-stu-id="02069-137">If you intend to mirror a database in high-performance mode, consider placing the principal server on the failover clustered instance of a cluster and placing the mirror server on an unclustered server in a remote location.</span></span> <span data-ttu-id="02069-138">클러스터가 다른 노드로 장애 조치되면 미러링 세션에서 장애 조치 클러스터형 인스턴스가 계속 주 서버로 작동합니다.</span><span class="sxs-lookup"><span data-stu-id="02069-138">If the cluster fails over to a different node, the failover clustered instance will continue as the principal server in the mirroring session.</span></span> <span data-ttu-id="02069-139">전체 클러스터에 문제가 있는 경우 미러 서버로 서비스를 강제할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="02069-139">If the entire cluster has problems, you can force service onto the mirror server.</span></span>  
  
 <span data-ttu-id="02069-140">**새 SQL Server 장애 조치 클러스터를 설정하려면**</span><span class="sxs-lookup"><span data-stu-id="02069-140">**To set up a new SQL Server failover cluster**</span></span>  
  
-   [<span data-ttu-id="02069-141">새 SQL Server 장애 조치(failover) 클러스터 만들기&#40;설치 프로그램&#41;</span><span class="sxs-lookup"><span data-stu-id="02069-141">Create a New SQL Server Failover Cluster &#40;Setup&#41;</span></span>](../../sql-server/failover-clusters/install/create-a-new-sql-server-failover-cluster-setup.md)  
  
 <span data-ttu-id="02069-142">**데이터베이스 미러링을 설정하려면**</span><span class="sxs-lookup"><span data-stu-id="02069-142">**To set up database mirroring**</span></span>  
  
-   [<span data-ttu-id="02069-143">데이터베이스 미러링 설정&#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="02069-143">Setting Up Database Mirroring &#40;SQL Server&#41;</span></span>](setting-up-database-mirroring-sql-server.md)  
  
-   [<span data-ttu-id="02069-144">Windows 인증을 사용하여 데이터베이스 미러링 세션 구성&#40;SQL Server Management Studio&#41;</span><span class="sxs-lookup"><span data-stu-id="02069-144">Establish a Database Mirroring Session Using Windows Authentication &#40;SQL Server Management Studio&#41;</span></span>](establish-database-mirroring-session-windows-authentication.md)  
  
## <a name="see-also"></a><span data-ttu-id="02069-145">참고 항목</span><span class="sxs-lookup"><span data-stu-id="02069-145">See Also</span></span>  
 <span data-ttu-id="02069-146">[데이터베이스 미러링&#40;SQL Server&#41;](database-mirroring-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="02069-146">[Database Mirroring &#40;SQL Server&#41;](database-mirroring-sql-server.md) </span></span>  
 <span data-ttu-id="02069-147">[데이터베이스 미러링 운영 모드](database-mirroring-operating-modes.md) </span><span class="sxs-lookup"><span data-stu-id="02069-147">[Database Mirroring Operating Modes](database-mirroring-operating-modes.md) </span></span>  
 [<span data-ttu-id="02069-148">AlwaysOn 장애 조치(failover) 클러스터 인스턴스(SQL Server)</span><span class="sxs-lookup"><span data-stu-id="02069-148">AlwaysOn Failover Cluster Instances (SQL Server)</span></span>](../../sql-server/failover-clusters/windows/always-on-failover-cluster-instances-sql-server.md) 
  
  
