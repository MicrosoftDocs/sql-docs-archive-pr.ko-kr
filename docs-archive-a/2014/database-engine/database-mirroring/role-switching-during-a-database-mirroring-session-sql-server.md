---
title: 데이터베이스 미러링 세션 중 역할 전환(SQL Server) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
helpviewer_keywords:
- role switching [SQL Server]
- mirroring partners [SQL Server]
- failover [SQL Server]
- failover partners [SQL Server]
- database mirroring [SQL Server], partners
- partners in database mirroring sessions [SQL Server]
- failover [SQL Server], database mirroring
- database mirroring [SQL Server], failover
ms.assetid: a782d60d-0373-4386-bd77-9ec192553700
author: MikeRayMSFT
ms.author: mikeray
ms.openlocfilehash: 5e16adbad2106d623279edf9d443eae3755c7be5
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87733068"
---
# <a name="role-switching-during-a-database-mirroring-session-sql-server"></a><span data-ttu-id="232d6-102">데이터베이스 미러링 세션 중 역할 전환(SQL Server)</span><span class="sxs-lookup"><span data-stu-id="232d6-102">Role Switching During a Database Mirroring Session (SQL Server)</span></span>
  <span data-ttu-id="232d6-103">데이터베이스 미러링 세션에서는 *역할 전환*프로세스를 통해 주 역할과 미러 역할을 서로 바꿀 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-103">Within the context of a database mirroring session, the principal and mirror roles are typically interchangeable in a process known as *role switching*.</span></span> <span data-ttu-id="232d6-104">역할 전환 시 미러 서버는 주 서버에 대한 *장애 조치(Failover) 파트너* 역할을 하며 주 역할을 넘겨 받아 해당 데이터베이스 복사본을 복원하고 새로운 주 데이터베이스로 사용할 수 있도록 온라인 상태로 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-104">In role switching, the mirror server acts as the *failover partner* for the principal server, taking over the principal role, recovering its copy of the database and bringing it online as the new principal database.</span></span> <span data-ttu-id="232d6-105">이전 주 서버는 가능할 경우 미러 서버 역할을 맡으며 이 서버의 데이터베이스는 새 미러 데이터베이스가 됩니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-105">The former principal server, when available, assumes the mirror role, and its database becomes the new mirror database.</span></span> <span data-ttu-id="232d6-106">여러 오류에 대한 응답이나 관리 용도로 역할이 전환될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-106">Potentially, the roles can switch back and forth either in response to multiple failures or for administrative purposes.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="232d6-107">이 항목에서는 사용자가 데이터베이스 미러링 운영 모드에 대해 잘 알고 있다고 가정합니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-107">This topic assumes that you are familiar with the database mirroring operating modes.</span></span> <span data-ttu-id="232d6-108">자세한 내용은 [Database Mirroring Operating Modes](database-mirroring-operating-modes.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="232d6-108">For more information, see [Database Mirroring Operating Modes](database-mirroring-operating-modes.md).</span></span>  
  
 <span data-ttu-id="232d6-109">다음 그림에서는 일련의 자동 또는 수동 장애 조치를 수행하는 동안 주 역할과 미러 역할을 전환하는 미러링 파트너 **Partner_A** 와 **Partner_B**를 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-109">The following illustration shows mirroring partners, **Partner_A** and **Partner_B**, switching the principal and mirror roles over a series of automatic or manual failovers.</span></span>  
  
 <span data-ttu-id="232d6-110">![역할을 두 번 전환하는 파트너](../media/dbm-roleswitching.gif "역할을 두 번 전환하는 파트너")</span><span class="sxs-lookup"><span data-stu-id="232d6-110">![Partners switching twice between roles](../media/dbm-roleswitching.gif "Partners switching twice between roles")</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="232d6-111">역할 전환 후 이전 주 데이터베이스에서 실행하던 작업을 새로운 주 데이터베이스에서 다시 만들어 실행해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-111">After a role switch, jobs that ran on the former principal database must be recreated on the new principal server to run there.</span></span> <span data-ttu-id="232d6-112">자세한 내용은 [역할 전환 후 로그인 및 작업 관리&#40;SQL Server&#41;](../../sql-server/failover-clusters/management-of-logins-and-jobs-after-role-switching-sql-server.md)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="232d6-112">For more information, see [Management of Logins and Jobs After Role Switching &#40;SQL Server&#41;](../../sql-server/failover-clusters/management-of-logins-and-jobs-after-role-switching-sql-server.md).</span></span>  
  
 <span data-ttu-id="232d6-113">역할 전환에는 자동 장애 조치(failover), 수동 장애 조치(failover) 및 강제 서비스(데이터 손실 가능)의 3가지 유형이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-113">Three types of role switching exist: automatic failover, manual failover, and forced service (with possible data loss).</span></span> <span data-ttu-id="232d6-114">각 유형에 대한 지원은 세션의 운영 모드에 따라 달라집니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-114">Support for each form depends on the operating mode of the session.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="232d6-115">이러한 운영 모드에 대한 자세한 내용은 [데이터베이스 미러링 운영 모드](database-mirroring-operating-modes.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="232d6-115">If you are unfamiliar with these operating modes, see [Database Mirroring Operating Modes](database-mirroring-operating-modes.md).</span></span>  
  
-   <span data-ttu-id="232d6-116">**수동 장애 조치**</span><span class="sxs-lookup"><span data-stu-id="232d6-116">**Manual failover**</span></span>  
  
     <span data-ttu-id="232d6-117">보안 우선 모드는 수동 장애 조치를 지원합니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-117">High-safety mode supports manual failover.</span></span> <span data-ttu-id="232d6-118">데이터베이스 소유자는 데이터베이스가 동기화될 때마다 수동 장애 조치를 시작할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-118">Whenever the database is synchronized, the database owner can initiate a manual failover.</span></span>  
  
     <span data-ttu-id="232d6-119">수동 장애 조치는 관리 목적으로 제공됩니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-119">Manual failover is provided for administrative purposes.</span></span> <span data-ttu-id="232d6-120">자세한 내용은 이 항목의 뒷부분에 나오는 [수동 장애 조치(failover)](#ManualFailover)를 참조하십시오.</span><span class="sxs-lookup"><span data-stu-id="232d6-120">For more information, see [Manual Failover](#ManualFailover), later in this topic.</span></span>  
  
-   <span data-ttu-id="232d6-121">**자동 장애 조치(Failover)**</span><span class="sxs-lookup"><span data-stu-id="232d6-121">**Automatic failover**</span></span>  
  
     <span data-ttu-id="232d6-122">미러링 모니터 서버가 있는 경우 보안 우선 모드에서 자동 장애 조치가 지원됩니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-122">In the presence of a witness, high-safety mode supports automatic failover.</span></span> <span data-ttu-id="232d6-123">자동 장애 조치는 미러링 모니터 서버와 미러 서버가 서로 연결되어 있고 데이터베이스가 이미 동기화된 경우 주 서버가 손실될 때에만 수행됩니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-123">Automatic failover occurs only on the loss of the principal server when the witness and mirror server are still connected to each other and the database is already synchronized.</span></span> <span data-ttu-id="232d6-124">자세한 내용은 이 항목의 뒷부분에 나오는 [자동 장애 조치(failover)](#AutomaticFailover)를 참조하십시오.</span><span class="sxs-lookup"><span data-stu-id="232d6-124">For more information, see [Automatic Failover](#AutomaticFailover), later in this topic.</span></span>  
  
-   <span data-ttu-id="232d6-125">**강제 서비스(데이터 손실 가능)**</span><span class="sxs-lookup"><span data-stu-id="232d6-125">**Forced service (with possible data loss)**</span></span>  
  
     <span data-ttu-id="232d6-126">강제 서비스는 미러링 모니터 서버가 설정되어 있지 않은 보안 우선 모드와 성능 우선 모드에서 지원됩니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-126">Forcing service is supported in high-safety mode when no witness is set and in high-performance mode.</span></span> <span data-ttu-id="232d6-127">주 서버를 손실한 경우 데이터베이스 소유자는 데이터베이스를 사용할 수 있도록 미러 서버에 서비스를 강제 적용할 수 있으며 이 경우 데이터가 손실될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-127">On the loss of the principal server, the database owner can make the database available by forcing service to the mirror server (with possible data loss).</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="232d6-128">성능 우선 모드에서는 WITNESS 속성을 OFF로 설정하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-128">We recommend that the WITNESS property be set to OFF in high-performance mode.</span></span> <span data-ttu-id="232d6-129">그렇지 않으면 데이터베이스를 온라인 상태로 만들려는 경우 미러 서버가 미러링 모니터에 연결해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-129">Otherwise, to bring the database online, the mirror server must connected to the witness.</span></span>  
  
     <span data-ttu-id="232d6-130">자세한 내용은 이 항목의 뒷부분에 나오는 [강제 서비스(데이터 손실 가능)](#ForcedService)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="232d6-130">For more information, see [Forced Service (with Possible Data Loss)](#ForcedService), later in this topic.</span></span>  
  
 <span data-ttu-id="232d6-131">다음 표에서는 각 운영 모드에서 지원되는 장애 조치 유형을 요약합니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-131">The following table summarizes which forms of failover are supported under each of the operating modes.</span></span>  
  
||<span data-ttu-id="232d6-132">고성능</span><span class="sxs-lookup"><span data-stu-id="232d6-132">High performance</span></span>|<span data-ttu-id="232d6-133">미러링 모니터 서버가 없는 보안 우선 모드</span><span class="sxs-lookup"><span data-stu-id="232d6-133">High-safety mode without a witness</span></span>|<span data-ttu-id="232d6-134">미러링 모니터 서버가 있는 보안 우선 모드</span><span class="sxs-lookup"><span data-stu-id="232d6-134">High-safety mode with a witness</span></span>|  
|-|----------------------|-----------------------------------------|--------------------------------------|  
|<span data-ttu-id="232d6-135">자동 장애 조치(automatic failover)</span><span class="sxs-lookup"><span data-stu-id="232d6-135">Automatic failover</span></span>|<span data-ttu-id="232d6-136">예</span><span class="sxs-lookup"><span data-stu-id="232d6-136">No</span></span>|<span data-ttu-id="232d6-137">아니요</span><span class="sxs-lookup"><span data-stu-id="232d6-137">No</span></span>|<span data-ttu-id="232d6-138">예</span><span class="sxs-lookup"><span data-stu-id="232d6-138">Yes</span></span>|  
|<span data-ttu-id="232d6-139">수동 장애 조치(failover)</span><span class="sxs-lookup"><span data-stu-id="232d6-139">Manual failover</span></span>|<span data-ttu-id="232d6-140">예</span><span class="sxs-lookup"><span data-stu-id="232d6-140">No</span></span>|<span data-ttu-id="232d6-141">예</span><span class="sxs-lookup"><span data-stu-id="232d6-141">Yes</span></span>|<span data-ttu-id="232d6-142">예</span><span class="sxs-lookup"><span data-stu-id="232d6-142">Yes</span></span>|  
|<span data-ttu-id="232d6-143">강제 서비스</span><span class="sxs-lookup"><span data-stu-id="232d6-143">Forced service</span></span>|<span data-ttu-id="232d6-144">예</span><span class="sxs-lookup"><span data-stu-id="232d6-144">Yes</span></span>|<span data-ttu-id="232d6-145">예</span><span class="sxs-lookup"><span data-stu-id="232d6-145">Yes</span></span>|<span data-ttu-id="232d6-146">예</span><span class="sxs-lookup"><span data-stu-id="232d6-146">No</span></span>|  
  
 <span data-ttu-id="232d6-147">역할 전환 후 모든 데이터베이스 사용자가 새로운 주 데이터베이스에 액세스할 수 있게 하려면 특정 메타데이터가 두 파트너에 모두 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-147">After a role switch, certain metadata must exist on both partners to ensure that all of the database users can access the new principal database.</span></span> <span data-ttu-id="232d6-148">또한 데이터베이스가 정기적인 일정에 따라 계속 백업되게 하려면 새로운 주 서버에서 백업 작업을 만들어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-148">In addition, backup jobs must be created on the new principal server, to ensure that the database continues to be backed up on its regular schedule.</span></span> <span data-ttu-id="232d6-149">자세한 내용은 [역할 전환 후 로그인 및 작업 관리&#40;SQL Server&#41;](../../sql-server/failover-clusters/management-of-logins-and-jobs-after-role-switching-sql-server.md)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="232d6-149">For more information, see [Management of Logins and Jobs After Role Switching &#40;SQL Server&#41;](../../sql-server/failover-clusters/management-of-logins-and-jobs-after-role-switching-sql-server.md).</span></span>  
  
 <span data-ttu-id="232d6-150">역할 전환 중에 데이터베이스 미러링의 서비스가 중단되는 시간은 역할 전환의 유형 및 원인에 따라 달라집니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-150">During a role switch, the amount of time that database mirroring will be out of service depends on the type of role switching and on the cause.</span></span> <span data-ttu-id="232d6-151">자세한 내용은 [역할 전환 중 서비스 중단 예측&#40;데이터베이스 미러링&#41;](estimate-the-interruption-of-service-during-role-switching-database-mirroring.md)프로세스를 통해 주 역할과 미러 역할을 서로 바꿀 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-151">For more information, see [Estimate the Interruption of Service During Role Switching &#40;Database Mirroring&#41;](estimate-the-interruption-of-service-during-role-switching-database-mirroring.md).</span></span>  
  
##  <a name="manual-failover"></a><a name="ManualFailover"></a> <span data-ttu-id="232d6-152">Manual Failover</span><span class="sxs-lookup"><span data-stu-id="232d6-152">Manual Failover</span></span>  
 <span data-ttu-id="232d6-153">수동 장애 조치(Failover)는 데이터베이스에서 클라이언트의 연결을 끊고 파트너의 역할을 반대로 바꿉니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-153">Manual failover disconnects the clients from the database and reverses the roles of the partners.</span></span> <span data-ttu-id="232d6-154">이러한 수동 장애 조치는 보호 우선 모드에서만 지원됩니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-154">Only high-safety mode supports manual failover.</span></span>  
  
  
###  <a name="maintaining-availability-during-upgrades"></a><a name="AvailabilityDuringUpgrades"></a> <span data-ttu-id="232d6-155">업그레이드 중에 가용성 유지</span><span class="sxs-lookup"><span data-stu-id="232d6-155">Maintaining Availability During Upgrades</span></span>  
 <span data-ttu-id="232d6-156">데이터베이스 관리자는 수동 장애 조치를 사용하여 가용성에 영향을 주지 않고 하드웨어 또는 소프트웨어를 업그레이드할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-156">The database administrator can use manual failover for upgrading hardware or software without sacrificing availability.</span></span> <span data-ttu-id="232d6-157">소프트웨어 업그레이드 시 데이터베이스 미러링을 사용하려면 미러 서버 및/또는 시스템에 이미 해당 업그레이드가 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-157">To use database mirroring for software upgrades, the mirror server and/or system must have already received the upgrades.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="232d6-158">데이터베이스 미러링에서 롤링 업그레이드를 수행할 수도 있지만 이 기능은 이후 변경 내용을 알 수 없으므로 보장되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-158">Database mirroring should be able to do a rolling upgrade, but this is not guaranteed, because future changes are unknown.</span></span> <span data-ttu-id="232d6-159">자세한 내용은 [Minimize Downtime for Mirrored Databases When Upgrading Server Instances](upgrading-mirrored-instances.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="232d6-159">For more information, see [Minimize Downtime for Mirrored Databases When Upgrading Server Instances](upgrading-mirrored-instances.md).</span></span>  
  
 <span data-ttu-id="232d6-160">다음 그림에서는 데이터베이스 서버 인스턴스를 업그레이드하는 동안 데이터베이스 가용성을 유지하기 위해 수동 장애 조치를 사용하는 예를 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-160">The following figure illustrates an instance of using manual failover to maintain database availability while you upgrade a database server instance.</span></span> <span data-ttu-id="232d6-161">업그레이드가 완료되면 관리자는 필요에 따라 원래 서버 인스턴스로 장애 조치를 수행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-161">When the upgrade is completed, an administrator may optionally fail over back to the original server instance.</span></span> <span data-ttu-id="232d6-162">이는 관리자가 미러링 세션을 중지하고 미러 서버를 다른 곳에서 사용하려는 경우에 유용합니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-162">This is useful when the administrator wants to stop the mirroring session and use the mirror server elsewhere.</span></span> <span data-ttu-id="232d6-163">이러한 방법으로 일련의 데이터베이스 서버 인스턴스를 업데이트할 때 단일 서버 인스턴스를 반복적으로 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-163">In this way, a single server instance can be used repeatedly when updating a series of database server instances.</span></span>  
  
 <span data-ttu-id="232d6-164">![계획된 수동 장애 조치(Failover)](../media/dbm-failovmanuplanned.gif "계획된 수동 장애 조치(Failover)")</span><span class="sxs-lookup"><span data-stu-id="232d6-164">![Planned manual failover](../media/dbm-failovmanuplanned.gif "Planned manual failover")</span></span>  
  
###  <a name="conditions-required-for-a-manual-failover"></a><a name="ConditionsForManualFo"></a> <span data-ttu-id="232d6-165">수동 장애 조치에 필요한 조건</span><span class="sxs-lookup"><span data-stu-id="232d6-165">Conditions Required for a Manual Failover</span></span>  
 <span data-ttu-id="232d6-166">수동 장애 조치를 수행하려면 트랜잭션 보안이 FULL(보호 우선 모드)로 설정되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-166">Manual failover requires transaction safety to be set to FULL (that is, high-safety mode).</span></span> <span data-ttu-id="232d6-167">파트너가 연결되어 있으며 데이터베이스가 이미 동기화된 경우 수동 장애 조치가 지원됩니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-167">When the partners are connected and the database is already synchronized, manual failover is supported.</span></span>  
  
###  <a name="how-manual-failover-works"></a><a name="HowManualFoWorks"></a> <span data-ttu-id="232d6-168">수동 장애 조치 작동 방법</span><span class="sxs-lookup"><span data-stu-id="232d6-168">How Manual Failover Works</span></span>  
 <span data-ttu-id="232d6-169">수동 장애 조치의 동작 순서는 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-169">Manual failover initiates the following sequence of actions:</span></span>  
  
1.  <span data-ttu-id="232d6-170">주 서버는 주 데이터베이스에서 클라이언트의 연결을 끊고 비상 로그를 미러 서버로 보낸 다음 미러 역할로 전환하기 위해 미러링 상태를 SYNCHRONIZING으로 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-170">The principal server disconnects clients from the principal database, sends the tail of the log to the mirror server, and, in preparation for switching to the mirror role, sets the mirroring state to SYNCHRONIZING.</span></span>  
  
2.  <span data-ttu-id="232d6-171">미러 서버는 주 서버에서 받은 마지막 로그 레코드의 LSN(로그 시퀀스 번호)을 장애 조치 LSN으로 기록합니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-171">The mirror server records the log sequence number (LSN) of the last log record received from the principal as the failover LSN.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="232d6-172">이 LSN을 보려면 [sys.database_mirroring&#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-database-mirroring-transact-sql)에서 **mirroring_failover_lsn** 열을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-172">To view this LSN, select the **mirroring_failover_lsn** column from [sys.database_mirroring &#40;Transact-SQL&#41;](/sql/relational-databases/system-catalog-views/sys-database-mirroring-transact-sql).</span></span>  
  
3.  <span data-ttu-id="232d6-173">Redo Queue에서 대기 중인 로그가 있으면 미러 서버가 미러 데이터베이스의 롤포워드를 마칩니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-173">If any log is waiting in the redo queue, the mirror server finishes rolling forward the mirror database.</span></span> <span data-ttu-id="232d6-174">소요 시간은 시스템 속도, 최근 작업 및 Redo Queue에 있는 로그 양에 따라 달라집니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-174">The amount of time required depends on the speed of the system, the recent workload, and the amount of log in the redo queue.</span></span> <span data-ttu-id="232d6-175">동기 운영 모드의 경우 Redo Queue의 크기를 제한하여 장애 조치 시간을 조정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-175">For a synchronous operating mode, the failover time can be regulated by limiting the size of the redo queue.</span></span> <span data-ttu-id="232d6-176">그러나 이 경우 미러 서버에서 동기화 상태를 계속 유지해야 하므로 주 서버의 속도가 느려질 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-176">However, this can cause the principal server to slow down to allow the mirror server to keep up.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="232d6-177">Redo Queue의 현재 크기를 확인하려면 데이터베이스 미러링 성능 개체의 **Redo Queue** 성능 카운터를 사용합니다. 자세한 내용은 [데이터베이스 미러링 모니터링&#40;SQL Server&#41;](database-mirroring-sql-server.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="232d6-177">To learn the current size of the redo queue, use the **Redo Queue** performance counter in the database mirroring performance object (for more information, see [Monitoring Database Mirroring &#40;SQL Server&#41;](database-mirroring-sql-server.md)).</span></span>  
  
4.  <span data-ttu-id="232d6-178">미러 서버는 새 주 서버가 되고 이전 주 서버는 새 미러 서버가 됩니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-178">The mirror server becomes the new principal server, and the former principal server becomes the new mirror server.</span></span>  
  
5.  <span data-ttu-id="232d6-179">새 주 서버는 커밋되지 않은 모든 트랜잭션을 롤백하고 해당 데이터베이스의 복사본을 주 데이터베이스로 사용할 수 있도록 온라인 상태로 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-179">The new principal server rolls back any uncommitted transactions and brings its copy of the database online as the principal database.</span></span>  
  
6.  <span data-ttu-id="232d6-180">이전 주 서버가 미러 역할을 맡아 이전 주 데이터베이스가 미러 데이터베이스가 됩니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-180">The former principal takes on the mirror role, and the former principal database becomes the mirror database.</span></span> <span data-ttu-id="232d6-181">새 미러 서버는 신속하게 새 미러 데이터베이스를 새 주 데이터베이스와 다시 동기화합니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-181">The new mirror server quickly resynchronizes the new mirror database with the new principal database.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="232d6-182">새 미러 서버에서 데이터베이스를 다시 동기화하면 장애 조치가 다시 가능해지지만 역방향으로 진행됩니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-182">As soon as the new mirror server has resynchronized the databases, failover is again possible, but in the reverse direction.</span></span>  
  
 <span data-ttu-id="232d6-183">장애 조치 후 클라이언트는 현재의 주 데이터베이스에 다시 연결해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-183">After failover, clients must reconnect to the current principal database.</span></span> <span data-ttu-id="232d6-184">자세한 내용은 [데이터베이스 미러링 세션에 클라이언트 연결&#40;SQL Server&#41;](connect-clients-to-a-database-mirroring-session-sql-server.md)프로세스를 통해 주 역할과 미러 역할을 서로 바꿀 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-184">For more information, see [Connect Clients to a Database Mirroring Session &#40;SQL Server&#41;](connect-clients-to-a-database-mirroring-session-sql-server.md).</span></span>  
  
 <span data-ttu-id="232d6-185">**수동 장애 조치를 시작하려면**</span><span class="sxs-lookup"><span data-stu-id="232d6-185">**To initiate manual failover**</span></span>  
  
-   [<span data-ttu-id="232d6-186">데이터베이스 미러링 세션 수동 장애 조치(failover)&#40;SQL Server Management Studio&#41;</span><span class="sxs-lookup"><span data-stu-id="232d6-186">Manually Fail Over a Database Mirroring Session &#40;SQL Server Management Studio&#41;</span></span>](manually-fail-over-a-database-mirroring-session-sql-server-management-studio.md)  
  
-   <span data-ttu-id="232d6-187">[데이터베이스 미러링 세션 수동 장애 조치(failover)&#40;Transact-SQL&#41;](manually-fail-over-a-database-mirroring-session-transact-sql.md).</span><span class="sxs-lookup"><span data-stu-id="232d6-187">[Manually Fail Over a Database Mirroring Session &#40;Transact-SQL&#41;](manually-fail-over-a-database-mirroring-session-transact-sql.md).</span></span>  
  
##  <a name="automatic-failover"></a><a name="AutomaticFailover"></a> <span data-ttu-id="232d6-188">Automatic Failover</span><span class="sxs-lookup"><span data-stu-id="232d6-188">Automatic Failover</span></span>  
 <span data-ttu-id="232d6-189">자동 장애 조치(failover)는 미러링 모니터 서버에서 보호 우선 모드(*자동 장애 조치(failover)를 지원하는 보호 우선 모드*)로 실행되는 데이터베이스 미러링 세션에서만 지원됩니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-189">Automatic failover is supported only in database mirroring sessions running with a witness in high-safety mode (*high-safety mode with automatic failover*).</span></span> <span data-ttu-id="232d6-190">자동 장애 조치를 지원하는 보호 우선 모드에서 데이터베이스가 동기화된 후 주 데이터베이스를 사용할 수 없게 되면 자동 장애 조치가 수행됩니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-190">In high-safety mode with automatic failover, once the database is synchronized, if the principal database becomes unavailable, an automatic failover occurs.</span></span> <span data-ttu-id="232d6-191">자동 장애 조치가 수행되면 미러 서버가 주 서버의 역할을 맡고 해당 데이터베이스의 복사본이 주 데이터베이스로 온라인 상태가 됩니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-191">An automatic failover causes the mirror server to take over the role of principal server and bring its copy of the database online as the principal database.</span></span> <span data-ttu-id="232d6-192">데이터베이스가 동기화되어야 한다는 점에서 주 데이터베이스에서 커밋된 모든 트랜잭션이 미러 데이터베이스에서도 커밋되기 때문에 장애 조치 중에 데이터 손실이 방지됩니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-192">Requiring that the database be synchronized prevents data loss during failover, because every transaction committed on the principal database is also committed on the mirror database.</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="232d6-193">자동 장애 조치로 안정성을 개선하려면 미러 데이터베이스와 주 데이터베이스가 서로 다른 컴퓨터에 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-193">For automatic failover to improve reliability, the mirror and principal databases must reside on different computers.</span></span>  
  
  
  
###  <a name="conditions-required-for-an-automatic-failover"></a><a name="ConditionsForAutoFo"></a> <span data-ttu-id="232d6-194">자동 장애 조치(Failover)에 필요한 상태</span><span class="sxs-lookup"><span data-stu-id="232d6-194">Conditions Required for an Automatic Failover</span></span>  
 <span data-ttu-id="232d6-195">자동 장애 조치(Failover)에는 다음 조건이 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-195">Automatic failover requires the following conditions:</span></span>  
  
-   <span data-ttu-id="232d6-196">데이터베이스 미러링 세션이 보호 우선 모드로 실행되고 있어야 하고 미러링 모니터 서버가 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-196">The database mirroring session must be running in high-safety mode and must possess a witness.</span></span> <span data-ttu-id="232d6-197">자세한 내용은 [Database Mirroring Operating Modes](database-mirroring-operating-modes.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="232d6-197">For more information, see [Database Mirroring Operating Modes](database-mirroring-operating-modes.md).</span></span>  
  
-   <span data-ttu-id="232d6-198">미러 데이터베이스가 이미 동기화된 상태여야 합니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-198">The mirror database must already be synchronized.</span></span> <span data-ttu-id="232d6-199">이는 미러 서버로 보낸 모든 로그가 디스크에 기록되었음을 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-199">This guarantees that all of the log sent to the mirror server has been written to disk.</span></span>  
  
-   <span data-ttu-id="232d6-200">데이터베이스 미러링 구성의 나머지 부분과 주 서버 간의 통신이 끊어졌지만 미러 서버와 미러링 모니터 서버는 쿼럼을 유지합니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-200">The principal server has lost communication with the rest of the database mirroring configuration, while the mirror and witness retain quorum.</span></span> <span data-ttu-id="232d6-201">그러나 모든 서버 인스턴스의 통신이 끊어지고 나중에 미러링 모니터 서버와 미러 서버에서 통신을 회복한 경우에는 자동 장애 조치가 수행되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-201">If all server instances lose communication, however, and the witness and the mirror server later regain communication, automatic failover does not occur.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="232d6-202">자세한 내용은 [쿼럼: 미러링 모니터 서버가 데이터베이스 가용성에 미치는 영향&#40;데이터베이스 미러링&#41;](quorum-how-a-witness-affects-database-availability-database-mirroring.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="232d6-202">For more information, see [Quorum: How a Witness Affects Database Availability &#40;Database Mirroring&#41;](quorum-how-a-witness-affects-database-availability-database-mirroring.md).</span></span>  
  
-   <span data-ttu-id="232d6-203">미러 서버에서 주 서버가 손실된 것을 감지했습니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-203">The mirror server has detected the loss of the principal server.</span></span>  
  
     <span data-ttu-id="232d6-204">미러 서버에서 주 서버의 오류를 감지하는 방법은 하드 오류인지 또는 소프트 오류인지에 따라 달라집니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-204">How the mirror server detects a failure of the principal server depends on whether it is a hard or soft failure.</span></span> <span data-ttu-id="232d6-205">자세한 내용은 [Possible Failures During Database Mirroring](possible-failures-during-database-mirroring.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="232d6-205">For more information, see [Possible Failures During Database Mirroring](possible-failures-during-database-mirroring.md).</span></span>  
  
###  <a name="how-automatic-failover-works"></a><a name="HowAutoFoWorks"></a> <span data-ttu-id="232d6-206">자동 장애 조치 작동 방법</span><span class="sxs-lookup"><span data-stu-id="232d6-206">How Automatic Failover Works</span></span>  
 <span data-ttu-id="232d6-207">위의 조건 하에서 자동 장애 조치는 다음과 같은 일련의 동작을 시작합니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-207">Under the preceding conditions, automatic failover initiates the following sequence of actions:</span></span>  
  
1.  <span data-ttu-id="232d6-208">주 서버가 계속 실행되고 있으면 주 데이터베이스의 상태를 DISCONNECTED로 변경하고 주 데이터베이스로부터 모든 클라이언트의 연결을 끊습니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-208">If the principal server is still running, it changes the state of the principal database to DISCONNECTED and disconnects all clients from the principal database.</span></span>  
  
2.  <span data-ttu-id="232d6-209">미러링 모니터 서버와 미러 서버가 주 서버를 사용할 수 없다고 등록합니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-209">The witness and mirror servers register that the principal server is unavailable.</span></span>  
  
3.  <span data-ttu-id="232d6-210">Redo Queue에서 대기 중인 로그가 있으면 미러 서버가 미러 데이터베이스의 롤포워드를 마칩니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-210">If any log is waiting in the redo queue, the mirror server finishes rolling forward the mirror database.</span></span>  
  
    > [!NOTE]  
    >  <span data-ttu-id="232d6-211">로그를 적용하는 데 필요한 시간은 시스템 속도, 최근 작업 및 Redo Queue에 있는 로그 양에 따라 달라집니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-211">The amount of time required to apply the log depends on the speed of the system, the recent work load, and the amount of log in the redo queue.</span></span>  
  
4.  <span data-ttu-id="232d6-212">이전의 미러 데이터베이스는 새로운 주 데이터베이스로 사용할 수 있도록 온라인 상태로 변경되고 복구 작업은 가능한 빨리 커밋되지 않은 모든 트랜잭션을 롤백하여 정리합니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-212">The former mirror database moves online as the new principal database, and recovery cleans up all uncommitted transactions by rolling them back as quickly as possible.</span></span> <span data-ttu-id="232d6-213">이러한 트랜잭션은 잠금에 의해 격리됩니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-213">Locks isolate those transactions.</span></span>  
  
5.  <span data-ttu-id="232d6-214">이전의 주 서버는 세션에 다시 참가할 때 해당 장애 조치 파트너가 이제 주 역할을 소유함을 인식합니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-214">When the former principal server rejoins the session, it recognizes that its failover partner now owns the principal role.</span></span> <span data-ttu-id="232d6-215">이전의 주 서버는 데이터베이스를 미러 데이터베이스로 만들어 미러 역할을 수행하게 됩니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-215">The former principal server takes on the role of mirror, making its database the mirror database.</span></span> <span data-ttu-id="232d6-216">새 미러 서버는 가능한 빨리 새 미러 데이터베이스를 주 데이터베이스와 동기화합니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-216">The new mirror server synchronizes the new mirror database with the principal database as quickly as possible.</span></span> <span data-ttu-id="232d6-217">새 미러 서버에서 데이터베이스를 다시 동기화하면 장애 조치가 다시 가능해지지만 역방향으로 진행됩니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-217">As soon as the new mirror server has resynchronized the databases, failover is again possible, but in the reverse direction.</span></span>  
  
 <span data-ttu-id="232d6-218">다음 그림에서는 자동 장애 조치의 단일 인스턴스를 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-218">The following illustration shows a single instance of automatic failover.</span></span>  
  
 <span data-ttu-id="232d6-219">![자동 장애 조치(Failover)](../media/dbm-failovauto1round.gif "자동 장애 조치(automatic failover)")</span><span class="sxs-lookup"><span data-stu-id="232d6-219">![Automatic failover](../media/dbm-failovauto1round.gif "Automatic failover")</span></span>  
  
 <span data-ttu-id="232d6-220">처음에는 세션에 전체 쿼럼이 있으며 세 서버가 모두 연결되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-220">Initially, all three servers are connected (the session has full quorum).</span></span> <span data-ttu-id="232d6-221">**Partner_A** 는 주 서버이고 **Partner_B** 는 미러 서버입니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-221">**Partner_A** is the principal server and **Partner_B** is the mirror server.</span></span> <span data-ttu-id="232d6-222">먼저**Partner_A** (또는 **Partner_A**의 주 데이터베이스)를 사용할 수 없게 됩니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-222">**Partner_A** (or the principal database on **Partner_A**) becomes unavailable.</span></span> <span data-ttu-id="232d6-223">미러링 모니터 서버와 **Partner_B** 에서 주 서버를 더 이상 사용할 수 없다는 것을 인식하고 세션이 쿼럼을 유지합니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-223">The witness and **Partner_B** both recognize that the principal is no longer available the session retains quorum.</span></span> <span data-ttu-id="232d6-224">**Partner_B** 가 주 서버가 되고 해당 데이터베이스 복사본을 새로운 주 데이터베이스로 사용할 수 있도록 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-224">**Partner_B** becomes the principal server and makes its copy of the database available as the new principal database.</span></span> <span data-ttu-id="232d6-225">마지막으로 **Partner_A** 가 세션에 다시 연결되고 **Partner_B** 가 주 역할을 담당하고 있음을 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-225">Eventually, **Partner_A** reconnects to the session and discovers that **Partner_B** now owns the principal role.</span></span> <span data-ttu-id="232d6-226">그런 다음**Partner_A** 는 미러 역할을 수행합니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-226">**Partner_A** then takes on the mirror role.</span></span>  
  
 <span data-ttu-id="232d6-227">장애 조치 후 클라이언트는 현재의 주 데이터베이스에 다시 연결해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-227">After failover, clients must reconnect to the current principal database.</span></span> <span data-ttu-id="232d6-228">자세한 내용은 [데이터베이스 미러링 세션에 클라이언트 연결&#40;SQL Server&#41;](connect-clients-to-a-database-mirroring-session-sql-server.md)프로세스를 통해 주 역할과 미러 역할을 서로 바꿀 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-228">For more information, see [Connect Clients to a Database Mirroring Session &#40;SQL Server&#41;](connect-clients-to-a-database-mirroring-session-sql-server.md).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="232d6-229">[!INCLUDE[msCoName](../../includes/msconame-md.md)] DTC(Distributed Transaction Coordinator)를 사용하여 트랜잭션을 준비했지만 장애 조치가 발생했을 때 커밋되지 않은 트랜잭션은 데이터베이스에 장애 조치를 취한 다음 중단된 것으로 간주됩니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-229">Transactions that have been prepared using the [!INCLUDE[msCoName](../../includes/msconame-md.md)] Distributed Transaction Coordinator but are still not committed when a failover occurs, are considered aborted after the database has failed over.</span></span>  
  
###  <a name="to-disable-automatic-failover-sql-server-management-studio"></a><a name="DisableAutoSSMS"></a> <span data-ttu-id="232d6-230">자동 장애 조치(failover)를 해제하려면(SQL Server Management Studio)</span><span class="sxs-lookup"><span data-stu-id="232d6-230">To Disable Automatic Failover (SQL Server Management Studio)</span></span>  
 <span data-ttu-id="232d6-231">**데이터베이스 속성 미러링** 페이지를 열고 다음 옵션 중 하나를 선택하여 운영 모드를 변경합니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-231">Open the **Database PropertiesMirroring** page, and change the operating mode by selecting one of the following options:</span></span>  
  
-   <span data-ttu-id="232d6-232">**자동 장애 조치(Failover)가 없는 보호 우선(동기)**</span><span class="sxs-lookup"><span data-stu-id="232d6-232">**High safety without automatic failover (synchronous)**</span></span>  
  
     <span data-ttu-id="232d6-233">이 모드에서 데이터베이스는 계속 동기화되지만 수동으로 장애 조치를 수행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-233">In this mode, the database continues to be synchronized, and manual failover remains possible.</span></span>  
  
-   <span data-ttu-id="232d6-234">**성능 우선(비동기)**</span><span class="sxs-lookup"><span data-stu-id="232d6-234">**High performance (asynchronous)**</span></span>  
  
     <span data-ttu-id="232d6-235">이 모드에서는 미러 데이터베이스가 주 데이터베이스보다 지연될 수 있으며 수동 장애 조치를 수행할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-235">In this mode, the mirror database might lag somewhat behind the principal database, and manual failover is no longer possible.</span></span>  
  
### <a name="to-disable-automatic-failover-using-transact-sql"></a><span data-ttu-id="232d6-236">자동 장애 조치를 해제하려면(Transact-SQL 사용)</span><span class="sxs-lookup"><span data-stu-id="232d6-236">To Disable Automatic Failover (Using Transact-SQL)</span></span>  
 <span data-ttu-id="232d6-237">데이터베이스 미러링 세션의 특정 시점에서 데이터베이스 소유자는 미러링 모니터를 해제하여 자동 장애 조치를 해제할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-237">At any point in a database mirroring session, the database owner can disable automatic failover by turning off the witness.</span></span>  
  
 <span data-ttu-id="232d6-238">**미러링 모니터 해제**</span><span class="sxs-lookup"><span data-stu-id="232d6-238">**To turn off the witness**</span></span>  
  
-   [<span data-ttu-id="232d6-239">데이터베이스 미러링 세션에서 미러링 모니터 서버 제거&#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="232d6-239">Remove the Witness from a Database Mirroring Session &#40;SQL Server&#41;</span></span>](remove-the-witness-from-a-database-mirroring-session-sql-server.md)  
  
    > [!NOTE]  
    >  <span data-ttu-id="232d6-240">전체 트랜잭션 보안은 유지하고 미러링 모니터를 해제하면 세션이 자동 장애 조치를 지원하지 않는 보호 우선 모드가 됩니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-240">Turning off the witness while retaining full transaction safety puts the session into high-safety mode without automatic failover.</span></span>  
  
##  <a name="forced-service-with-possible-data-loss"></a><a name="ForcedService"></a> <span data-ttu-id="232d6-241">Forced Service (with Possible Data Loss)</span><span class="sxs-lookup"><span data-stu-id="232d6-241">Forced Service (with Possible Data Loss)</span></span>  
 <span data-ttu-id="232d6-242">데이터베이스 미러링은 미러 서버를 웜 대기 서버로 사용할 수 있는 강제 서비스(데이터 손실 가능)를 재해 복구 방법으로 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-242">Database mirroring provides forcing service (with possible data loss) as a disaster recovery method to allow you to use a mirror server as a warm standby server.</span></span> <span data-ttu-id="232d6-243">미러링 세션에서 주 서버가 미러 서버와 연결이 끊긴 경우에만 서비스를 강제 적용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-243">Forcing service is possible only if the principal server is disconnected from the mirror server in a mirroring session.</span></span> <span data-ttu-id="232d6-244">서비스를 강제 적용하면 데이터가 손실될 수 있으므로 반드시 필요한 경우에만 주의해서 사용해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-244">Because forcing service risks possible data loss, it should be used cautiously and sparingly.</span></span>  
  
 <span data-ttu-id="232d6-245">강제 서비스 지원은 세션의 운영 모드와 상태에 따라 다음과 같이 달라집니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-245">Support for forced service depends on the operating mode and the state of the session, as follows:</span></span>  
  
-   <span data-ttu-id="232d6-246">일반적으로 성능 우선 모드에서는 주 서버의 연결이 끊어질 때마다 강제 서비스 적용을 지원합니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-246">Typically, high-performance mode supports forcing service whenever the principal server is disconnected.</span></span> <span data-ttu-id="232d6-247">그러나 필요한 것은 아니지만 성능 우선 모드 세션에 미러링 모니터 서버가 있을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-247">However, though unnecessary, a witness can exist for a high-performance mode session.</span></span> <span data-ttu-id="232d6-248">이 경우 서비스를 강제 적용하려면 미리 서버와 미러링 모니터 서버가 서로 연결되어 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-248">In this case, forcing service requires that the mirror server and witness are connected to each other.</span></span>  
  
-   <span data-ttu-id="232d6-249">자동 장애 조치(Failover) 없는 보호 우선 모드에서는 주 서버의 연결이 끊어질 때마다 강제 서비스 적용을 지원합니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-249">High-safety mode without automatic failover supports forcing service whenever the principal server is disconnected.</span></span>  
  
-   <span data-ttu-id="232d6-250">자동 장애 조치 있는 보호 우선 모드에서는 미러 서버가 마지막으로 주 서버에 연결되었을 때 미러 데이터베이스를 롤백하지 않은 경우 미러 서버와 미러링 모니터 서버가 서로 연결되어 있고 모두 주 서버에 연결되어 있지 않을 때마다 강제 서비스 적용을 지원합니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-250">High-safety mode with automatic failover supports forcing service whenever the mirror server and witness are connected to each other and neither is connected to the principal server (as long as the mirror server was not in the process of rolling back the mirror database when it was last connected to the principal).</span></span>  
  
 <span data-ttu-id="232d6-251">데이터 손실을 감수하더라도 즉시 데이터베이스 서비스를 복원해야 하는 경우에만 서비스를 강제 적용하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-251">We recommend forcing service only if you must restore service to the database immediately and are willing to risk losing data.</span></span> <span data-ttu-id="232d6-252">서비스를 강제 적용할 경우 미러링이 재개될 때 데이터베이스를 다시 동기화하기가 쉽다는 점을 제외하고 미러링을 제거하는 것과 같은 효과가 있으며 데이터가 손실될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-252">The effect of forcing service is similar to removing mirroring, except that forcing service facilitates resynchronizing the databases when mirroring is resumed, at the risk of possible data loss.</span></span> <span data-ttu-id="232d6-253">서비스를 강제 적용하면 주 역할을 미러 데이터베이스로 원활하게 전환하는 작업이 시작됩니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-253">Forcing service initiates a smooth transition of the principal role to the mirror database.</span></span> <span data-ttu-id="232d6-254">미러 서버는 주 서버의 역할을 맡으며 클라이언트에 즉시 데이터베이스 복사본을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-254">The mirror server assumes the role of principal server and immediately serves its copy of the database to clients.</span></span> <span data-ttu-id="232d6-255">새로운 주 데이터베이스는 미러 없이 노출된 상태로 실행됩니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-255">The new principal database runs without a mirror (that is, it runs exposed).</span></span>  
  
> [!IMPORTANT]  
>  <span data-ttu-id="232d6-256">주 서버가 단순히 데이터베이스 미러링 세션과 연결이 끊어졌지만 여전히 실행되고 있으면 일부 클라이언트가 계속해서 원래 주 데이터베이스에 액세스할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-256">If the principal server was merely disconnected from the database mirroring session and is still running, some clients might continue to access the original principal database.</span></span> <span data-ttu-id="232d6-257">서비스를 강제 적용하기 전에 클라이언트가 원래 주 서버에 액세스하지 않도록 하는 것이 중요합니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-257">Before you force service, it is important to prevent clients from accessing the original principal server.</span></span> <span data-ttu-id="232d6-258">그렇지 않으면 서비스가 강제 적용된 후 원래 주 데이터베이스와 현재 주 데이터베이스가 서로 독립적으로 업데이트될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-258">Otherwise, after service is forced, the original principal database and the current principal database could be updated independently of the other.</span></span>  
  
  
  
###  <a name="typical-case-of-forced-service"></a><a name="TypicalCaseFS"></a> <span data-ttu-id="232d6-259">강제 서비스의 일반적인 사례</span><span class="sxs-lookup"><span data-stu-id="232d6-259">Typical Case of Forced Service</span></span>  
 <span data-ttu-id="232d6-260">다음 그림에서는 강제 서비스(데이터 손실 가능)의 일반적인 사례를 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-260">The following figure illustrates a typical case of forced service (with possible data loss).</span></span>  
  
 <span data-ttu-id="232d6-261">![데이터가 손실될 수 있는 강제 서비스](../media/dbm-forced-service.gif "데이터가 손실될 수 있는 강제 서비스")</span><span class="sxs-lookup"><span data-stu-id="232d6-261">![Forcing service with possible data loss](../media/dbm-forced-service.gif "Forcing service with possible data loss")</span></span>  
  
 <span data-ttu-id="232d6-262">그림에서 원래 주 서버 **Partner_A**가 미러 서버 **Partner_B**에서 사용할 수 없게 되어 미러 데이터베이스의 연결이 끊깁니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-262">In the figure, the original principal server, **Partner_A**, becomes unavailable to the mirror server, **Partner_B**, causing the mirror database to be disconnected.</span></span> <span data-ttu-id="232d6-263">클라이언트에서 **Partner_A** 를 사용할 수 없는지 확인한 후 데이터베이스 관리자가 **Partner_B**에 서비스를 강제로 적용하며, 이 경우 데이터가 손실될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-263">After ensuring that **Partner_A** is not available to clients, the database administrator forces service, with possible data loss, on **Partner_B**.</span></span> <span data-ttu-id="232d6-264">**Partner_B** 가 주 서버가 되고 데이터베이스가 *노출된 상태* (즉, 미러되지 않은 상태)로 실행됩니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-264">**Partner_B** becomes the principal server and runs with the database *exposed* (that is, unmirrored).</span></span> <span data-ttu-id="232d6-265">이때 클라이언트는 **Partner_B**에 다시 연결할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-265">At this point, clients can reconnect to **Partner_B**.</span></span>  
  
 <span data-ttu-id="232d6-266">**Partner_A** 를 사용할 수 있게 되면 새로운 주 서버에 다시 연결하여 세션에 다시 참여하고 미러 역할을 담당합니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-266">When **Partner_A** becomes available, it reconnects to the new principal server, rejoining the session and assuming the mirror role.</span></span> <span data-ttu-id="232d6-267">미러링 세션이 새 미러 데이터베이스를 동기화하지 않고 즉시 일시 중단됩니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-267">The mirroring session is suspended immediately, without having synchronized the new mirror database.</span></span> <span data-ttu-id="232d6-268">세션이 일시 중단되면 데이터베이스 관리자가 세션을 재개할지 또는 극단적인 경우 미러링을 제거하고 이전 주 데이터베이스에서 데이터를 복원할지 결정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-268">Suspending the session allows the database administrator to decide whether to resume the session or, in extreme cases, remove mirroring and attempt to salvage data from the former principal database.</span></span> <span data-ttu-id="232d6-269">여기서는 데이터베이스 관리자가 미러링을 재개하도록 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-269">In this case, the database administrator chooses to resume mirroring.</span></span> <span data-ttu-id="232d6-270">이때 **Partner_A** 는 미러 서버의 역할을 맡고 이전 주 데이터베이스를 성공적으로 동기화된 마지막 트랜잭션 시점까지 롤백합니다. 서비스가 강제 적용되기 전에 미러 서버의 디스크에 기록되지 않은 커밋된 트랜잭션은 손실됩니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-270">At that point, **Partner_A** takes over the role of mirror server and rolls back the former principal database to the point in time of the last successfully synchronized transaction; if any committed transactions were not written to disk on the mirror server before service was forced, they are lost.</span></span> <span data-ttu-id="232d6-271">그런 다음**Partner_A** 는 이전 미러 서버가 새로운 주 서버가 된 이후의 변경 내용을 새로운 주 데이터베이스에 적용하여 새 미러 데이터베이스를 롤포워드합니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-271">**Partner_A** then rolls forward the new mirror database by applying any changes made on the new principal database since the former mirror server became the new principal server.</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="232d6-272">성능 우선 모드에서는 미러링 모니터 서버가 필요하지 않지만 미러링 모니터 서버가 구성된 경우 현재 미러 서버에 연결되어 있어야만 서비스를 강제 적용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-272">Although high-performance mode does not require a witness, if one is configured, forcing service is possible only if the witness is currently connected to the mirror server.</span></span>  
  
###  <a name="risks-of-forcing-service"></a><a name="FSrisks"></a> <span data-ttu-id="232d6-273">서비스 강제 적용 시의 위험</span><span class="sxs-lookup"><span data-stu-id="232d6-273">Risks of Forcing Service</span></span>  
 <span data-ttu-id="232d6-274">서비스를 강제 적용하면 데이터가 손실될 수 있음을 이해하는 것이 중요합니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-274">It is essential to understand that forcing service can cause data loss.</span></span> <span data-ttu-id="232d6-275">데이터 손실은 미러 서버가 주 서버와 통신할 수 없어 두 데이터베이스의 동기화를 보장할 수 없기 때문에 발생합니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-275">Data loss is possible because the mirror server cannot communicate with the principal server and, therefore, cannot guarantee that the two databases are synchronized.</span></span> <span data-ttu-id="232d6-276">서비스를 강제 적용하면 새 복구 분기가 시작됩니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-276">Forcing service starts a new recovery fork.</span></span> <span data-ttu-id="232d6-277">원래 주 데이터베이스와 미러 데이터베이스가 서로 다른 복구 분기에 있으므로 이제 각 데이터베이스에는 다른 데이터베이스에 없는 데이터가 포함됩니다. 원래 주 데이터베이스에는 Send Queue에서 이전의 미러 데이터베이스로 아직 전송되지 않은 변경 내용(보내지 않은 로그)이 포함되고 이전의 미러 데이터베이스에는 서비스가 강제 적용된 후 발생한 변경 내용이 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-277">Because the original principal database and mirror database are on different recovery forks, each database now contains data that the other database does not: the original principal database contains whatever changes were not yet sent from its send queue to the former mirror database (the unsent log); the former mirror database contains whatever changes occur after service was forced.</span></span>  
  
 <span data-ttu-id="232d6-278">주 서버가 실패하여 서비스가 강제 적용된 경우 발생 가능한 데이터 손실은 실패 전에 미러 서버로 보내지 않은 트랜잭션 로그가 있는지 여부에 따라 달라집니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-278">If service is forced because the principal server has failed, potential data loss is depends on whether any transaction logs were not sent to the mirror server before the failure.</span></span> <span data-ttu-id="232d6-279">보호 우선 모드에서는 미러 데이터베이스가 동기화될 때까지만 보내지 않은 로그가 있을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-279">Under high-safety mode, this is possible only until the mirror database becomes synchronized.</span></span> <span data-ttu-id="232d6-280">성능 우선 모드에서는 보내지 않은 로그가 항상 누적되어 있을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-280">Under the high-performance mode, accumulated unsent log is always a possibility.</span></span>  
  
 <span data-ttu-id="232d6-281">강제 서비스 적용의 의미는 부분적으로 세션에 미러링 모니터 서버가 있는지 여부에 따라 달라집니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-281">The implications of forcing service depend partly on whether the session has a witness:</span></span>  
  
-   <span data-ttu-id="232d6-282">미러링 모니터 서버가 없을 경우 네트워크 연결이 끊기는 등의 이유로 파트너의 연결이 끊어지면 서비스를 강제 적용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-282">In the absence of a witness, service can be forced if the partners become disconnected, for example, because their network connection is broken.</span></span> <span data-ttu-id="232d6-283">원래 주 서버가 여전히 실행되고 있으면 두 파트너가 모두 주 역할을 소유합니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-283">If the original principal server is still running, both partners own the principal role.</span></span> <span data-ttu-id="232d6-284">새로운 주 서버에 연결하는 클라이언트는 현재 버전의 데이터베이스에 액세스하고 원래 주 서버에 연결하는 클라이언트는 원래 주 데이터베이스에 액세스합니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-284">Clients connecting to the new principal server will access the current version of the database, while clients connecting to the original principal server will access the original principal database.</span></span> <span data-ttu-id="232d6-285">이 경우 데이터 손실 가능성이 커집니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-285">This situation increases the potential for data loss.</span></span> <span data-ttu-id="232d6-286">파트너가 다시 연결할 수 있으면 원래 주 서버는 미러 역할을 맡고 미러링이 일시 중단되기 전에 데이터베이스 상태를 "복구 중"으로 변경합니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-286">If the partners are allowed to reconnect, the original principal server assumes the mirror role and changes the status of its database to "recovering," before mirroring is suspended.</span></span> <span data-ttu-id="232d6-287">세션이 재개되면 가장 최근에 연결이 끊어질 때 해당 로그가 Send Queue에 있었던 원래 주 데이터베이스의 트랜잭션이 손실됩니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-287">If the session is resumed, transactions on the original principal database whose log was in the send queue as of the most recent disconnection are lost.</span></span> <span data-ttu-id="232d6-288">서비스가 강제 적용된 후에 발생한 모든 트랜잭션도 손실됩니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-288">In addition, any the transactions that occurred after service was forced are also lost.</span></span>  
  
-   <span data-ttu-id="232d6-289">미러링 모니터 서버가 있을 경우 미러 서버가 주 서버 및 미러링 모니터 서버와 모두 연결이 끊어지면 주 서버가 노출된 상태로 실행됩니다. 단, 주 서버와 미러링 모니터 서버는 서로 연결되어 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-289">In the presence of a witness, if the mirror server is disconnected from both the principal server and the witness, as long as the latter two remain connected to each other, the principal runs exposed.</span></span> <span data-ttu-id="232d6-290">그런 다음 주 서버가 미러링 모니터 서버와 연결이 끊어지면 데이터베이스 제공을 중지합니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-290">If the principal server then becomes disconnected from the witness, it stops serving the database.</span></span> <span data-ttu-id="232d6-291">이후에 미러 서버가 미러링 모니터 서버에 다시 연결하면 서비스를 강제 적용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-291">Thereafter, if the mirror server reconnects to the witness, forcing service becomes possible.</span></span> <span data-ttu-id="232d6-292">서비스가 강제 적용된 경우 원래 주 서버가 다시 연결하면 원래 주 서버가 노출된 상태로 실행되는 동안 수행된 모든 변경 내용이 손실됩니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-292">If service is forced, all the changes made while the original principal server was running exposed will be lost if the original principal server reconnects.</span></span>  
  
 <span data-ttu-id="232d6-293">자세한 내용은 이 항목의 뒷부분에 나오는 [잠재적 데이터 손실 관리](#ManageDataLoss)를 참조하십시오.</span><span class="sxs-lookup"><span data-stu-id="232d6-293">For more information, see [Managing the Potential Data Loss](#ManageDataLoss), later in this topic.</span></span>  
  
###  <a name="managing-the-potential-data-loss"></a><a name="ManageDataLoss"></a> <span data-ttu-id="232d6-294">잠재적 데이터 손실 관리</span><span class="sxs-lookup"><span data-stu-id="232d6-294">Managing the Potential Data Loss</span></span>  
 <span data-ttu-id="232d6-295">서비스가 강제 적용된 후 이전 주 서버를 사용할 수 있게 되면 데이터베이스가 손상되지 않았다고 가정할 경우 잠재적 데이터 손실을 관리할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-295">After service is forced, once the former principal server is available, assuming that its database is undamaged, you can attempt to manage the potential data loss.</span></span> <span data-ttu-id="232d6-296">잠재적 데이터 손실을 관리하는 데 사용 가능한 방법은 원래 주 서버가 파트너에 다시 연결하여 미러링 세션에 다시 참여했는지 여부에 따라 달라집니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-296">The available approach for managing potential data loss depends on whether the original principal server has reconnected to its partner and rejoined the mirroring session.</span></span> <span data-ttu-id="232d6-297">원래 주 서버가 새로운 주 인스턴스에 액세스할 수 있다고 가정하면 자동으로 투명하게 다시 연결할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-297">Assuming that the original principal server can access the new principal instance, reconnecting occurs automatically and transparently.</span></span>  
  
#### <a name="the-original-principal-server-has-reconnected"></a><span data-ttu-id="232d6-298">원래 주 서버가 다시 연결된 경우</span><span class="sxs-lookup"><span data-stu-id="232d6-298">The Original Principal Server Has Reconnected</span></span>  
 <span data-ttu-id="232d6-299">일반적으로 실패 후에 원래 주 서버가 다시 시작되면 신속하게 해당 파트너에 다시 연결합니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-299">Typically, after a failure, when the original principal server restarts it quickly reconnects to its partner.</span></span> <span data-ttu-id="232d6-300">다시 연결할 때 원래 주 서버는 미러 서버가 됩니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-300">On reconnecting, the original principal server becomes the mirror server.</span></span> <span data-ttu-id="232d6-301">해당 데이터베이스는 미러 데이터베이스가 되고 세션이 일시 중단되기 전에 복구 상태가 됩니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-301">Its database becomes the mirror database and enters the recovering state before the session is suspended.</span></span> <span data-ttu-id="232d6-302">미러링을 재개하지 않으면 미러 데이터베이스는 롤백되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-302">The mirror database will not be not rolled back unless you resume mirroring.</span></span>  
  
 <span data-ttu-id="232d6-303">그러나 복구 중인 데이터베이스에 액세스할 수 없으므로 데이터베이스를 검사하여 미러링을 재개할 때 손실될 데이터를 평가할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-303">However, the recovering database is inaccessible; therefore, you cannot inspect it to evaluate what data would be lost if you were to resume mirroring.</span></span> <span data-ttu-id="232d6-304">따라서 데이터 손실을 감수할지 여부에 따라 미러링을 재개할지 또는 제거할지 결정합니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-304">Therefore, the decision on whether to resume or remove mirroring depends on whether you are willing to accept any data loss at all.</span></span>  
  
-   <span data-ttu-id="232d6-305">데이터 손실이 허용되지 않는 경우 미러링을 제거하여 데이터를 복원해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-305">If losing any data would be unacceptable, you should remove mirroring to salvage them.</span></span>  
  
     <span data-ttu-id="232d6-306">미러링을 제거하면 데이터베이스 관리자가 원래 주 데이터베이스를 복구하여 손실되었을 데이터를 복구할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-306">Removing mirroring would allow the database administrator to recover the original principal database and attempt to recover the data that would have been lost.</span></span> <span data-ttu-id="232d6-307">그러나 이전 미러 데이터베이스가 온라인 상태가 되면 이전 파트너가 동일한 이름으로 다른 데이터베이스를 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-307">However, when the former mirror database comes online, the former partners will be serving divergent databases with the same name.</span></span> <span data-ttu-id="232d6-308">데이터베이스 관리자는 데이터베이스 중 하나를 클라이언트에서 액세스할 수 없도록 만들어 데이터베이스가 더 이상 달라지지 않도록 하고 클라이언트 장애 조치 문제를 방지해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-308">The database administrator needs to make one of the databases inaccessible to clients to avoid further divergence of the database and to prevent client-failover issues.</span></span>  
  
-   <span data-ttu-id="232d6-309">데이터 손실이 허용되는 경우 미러링을 재개할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-309">If losing any data would be acceptable, you can resume mirroring.</span></span>  
  
     <span data-ttu-id="232d6-310">미러링을 재개하면 데이터베이스 동기화의 첫 번째 단계로 새 미러 데이터베이스가 롤백됩니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-310">Resuming mirroring causes the new mirror database to be rolled back as the first step in synchronizing the database.</span></span> <span data-ttu-id="232d6-311">실패 시 Send Queue에서 대기 중인 로그 레코드가 있으면 커밋된 경우에도 해당 트랜잭션이 손실됩니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-311">If any log records were waiting in the send queue at the time of failure, the corresponding transactions are lost, even if they were committed.</span></span>  
  
#### <a name="the-original-principal-server-has-not-reconnected"></a><span data-ttu-id="232d6-312">원래 주 서버가 다시 연결되지 않은 경우</span><span class="sxs-lookup"><span data-stu-id="232d6-312">The Original Principal Server Has Not Reconnected</span></span>  
 <span data-ttu-id="232d6-313">원래 주 서버가 네트워크를 통해 새로운 주 서버에 다시 연결하지 않도록 일시적으로 차단할 수 있는 경우 원래 주 데이터베이스를 검사하여 미러링을 재개하면 손실될 데이터를 평가할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-313">If you can temporarily prevent the original principal server from reconnecting over the network to the new principal server, you can inspect the original principal database to evaluate what data would be lost if mirroring were resumed.</span></span>  
  
-   <span data-ttu-id="232d6-314">잠재적 데이터 손실이 허용되는 경우</span><span class="sxs-lookup"><span data-stu-id="232d6-314">If the potential data loss is acceptable</span></span>  
  
     <span data-ttu-id="232d6-315">원래 주 서버가 해당 파트너에 다시 연결할 수 있도록 합니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-315">Allow the original principal server to reconnect to its partner.</span></span> <span data-ttu-id="232d6-316">다시 연결하면 미러링이 일시 중단됩니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-316">Reconnecting causes mirroring to be suspended.</span></span> <span data-ttu-id="232d6-317">미러링을 계속하려면 세션을 재개하면 됩니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-317">To proceed with mirroring, simply resume the session.</span></span> <span data-ttu-id="232d6-318">이전 주 서버가 미러 역할을 맡습니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-318">The former principal server assumes the mirror role.</span></span> <span data-ttu-id="232d6-319">새 미러 서버는 원래 복구 분기를 삭제하므로 이전 미러 서버로 보내거나 받지 않은 모든 트랜잭션이 손실됩니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-319">The new mirror server drops the original recovery fork, losing any transactions that were never sent to or received by the former mirror server.</span></span>  
  
-   <span data-ttu-id="232d6-320">데이터 손실이 허용되지 않는 경우</span><span class="sxs-lookup"><span data-stu-id="232d6-320">If the data loss is unacceptable</span></span>  
  
     <span data-ttu-id="232d6-321">세션을 재개할 때 손실되는 중요한 데이터가 원래 주 데이터베이스에 포함되어 있으면 미러링을 제거하여 원래 주 서버의 데이터를 유지할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-321">If the original principal database contains critical data that would be lost if you resumed the session, you can preserve the data on the original principal server by removing mirroring.</span></span> <span data-ttu-id="232d6-322">이때 주 서버의 비상 로그를 백업하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-322">We recommend that you attempt to back up the tail of the principal's log at this point.</span></span> <span data-ttu-id="232d6-323">그러면 원래 주 데이터베이스에서 유지하려는 데이터를 내보낸 후 현재 주 데이터베이스로 가져와서 현재 주 데이터베이스(이전 미러 데이터베이스)를 업데이트할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-323">Then, you can update the current principal (the former mirror database) by exporting the data you want to salvage from the original principal database and importing it into the current principal database.</span></span> <span data-ttu-id="232d6-324">업데이트된 데이터베이스의 전체 데이터베이스 백업을 가능한 한 빨리 수행하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-324">We recommend taking a full database backup of the updated database as quickly as possible.</span></span>  
  
     <span data-ttu-id="232d6-325">업데이트된 데이터베이스를 초기 주 데이터베이스로 사용하여 미러링을 다시 설정하려면 이 백업과 하나 이상의 후속 로그 백업을 사용하여 새 미러 데이터베이스를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-325">To re-establish mirroring with the updated database as the initial principal database, use this backup (and least one subsequent log backup) to create a new mirror database.</span></span> <span data-ttu-id="232d6-326">미러링이 제거된 후에 수행된 모든 로그 백업을 적용해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-326">Every log backup taken after mirroring was removed must be applied.</span></span> <span data-ttu-id="232d6-327">따라서 새 미러링 세션이 시작될 때까지 주 데이터베이스의 추가 로그 백업을 지연하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="232d6-327">Therefore, we recommend delaying additional log backups of the principal database until the new mirroring session starts.</span></span>  
  
###  <a name="related-tasks-for-managing-a-forced-failover"></a><a name="RelatedTasksForFS"></a> <span data-ttu-id="232d6-328">강제 장애 조치(Failover) 관리를 위한 관련 태스크</span><span class="sxs-lookup"><span data-stu-id="232d6-328">Related Tasks For Managing a Forced Failover</span></span>  
 <span data-ttu-id="232d6-329">**서비스를 강제로 수행하려면**</span><span class="sxs-lookup"><span data-stu-id="232d6-329">**To force service**</span></span>  
  
-   <span data-ttu-id="232d6-330">[데이터베이스 미러링 세션에 서비스 강제 수행&#40;Transact-SQL&#41;](force-service-in-a-database-mirroring-session-transact-sql.md)</span><span class="sxs-lookup"><span data-stu-id="232d6-330">[Force Service in a Database Mirroring Session &#40;Transact-SQL&#41;](force-service-in-a-database-mirroring-session-transact-sql.md).</span></span>  
  
 <span data-ttu-id="232d6-331">**데이터베이스 미러링을 재개하려면**</span><span class="sxs-lookup"><span data-stu-id="232d6-331">**To resume database mirroring**</span></span>  
  
-   [<span data-ttu-id="232d6-332">데이터베이스 미러링 세션 일시 중지 또는 재개&#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="232d6-332">Pause or Resume a Database Mirroring Session &#40;SQL Server&#41;</span></span>](pause-or-resume-a-database-mirroring-session-sql-server.md)  
  
 <span data-ttu-id="232d6-333">**새 미러 데이터베이스를 만들려면**</span><span class="sxs-lookup"><span data-stu-id="232d6-333">**To create a new mirror database**</span></span>  
  
 [<span data-ttu-id="232d6-334">미러 데이터베이스의 미러링 준비&#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="232d6-334">Prepare a Mirror Database for Mirroring &#40;SQL Server&#41;</span></span>](prepare-a-mirror-database-for-mirroring-sql-server.md)  
  
 <span data-ttu-id="232d6-335">**데이터베이스 미러링을 시작하려면**</span><span class="sxs-lookup"><span data-stu-id="232d6-335">**To start up database mirroring**</span></span>  
  
-   [<span data-ttu-id="232d6-336">데이터베이스 미러링 설정&#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="232d6-336">Setting Up Database Mirroring &#40;SQL Server&#41;</span></span>](setting-up-database-mirroring-sql-server.md)  
  
-   [<span data-ttu-id="232d6-337">Windows 인증을 사용하여 데이터베이스 미러링 세션 구성&#40;SQL Server Management Studio&#41;</span><span class="sxs-lookup"><span data-stu-id="232d6-337">Establish a Database Mirroring Session Using Windows Authentication &#40;SQL Server Management Studio&#41;</span></span>](establish-database-mirroring-session-windows-authentication.md)  
  
## <a name="see-also"></a><span data-ttu-id="232d6-338">참고 항목</span><span class="sxs-lookup"><span data-stu-id="232d6-338">See Also</span></span>  
 <span data-ttu-id="232d6-339">[역할 전환 중 서비스 중단 예측&#40;데이터베이스 미러링&#41;](estimate-the-interruption-of-service-during-role-switching-database-mirroring.md) </span><span class="sxs-lookup"><span data-stu-id="232d6-339">[Estimate the Interruption of Service During Role Switching &#40;Database Mirroring&#41;](estimate-the-interruption-of-service-during-role-switching-database-mirroring.md) </span></span>  
 <span data-ttu-id="232d6-340">[데이터베이스 미러링 중에 발생 가능한 오류](possible-failures-during-database-mirroring.md) </span><span class="sxs-lookup"><span data-stu-id="232d6-340">[Possible Failures During Database Mirroring](possible-failures-during-database-mirroring.md) </span></span>  
 <span data-ttu-id="232d6-341">[데이터베이스 미러링 세션에 클라이언트 연결&#40;SQL Server&#41;](connect-clients-to-a-database-mirroring-session-sql-server.md) </span><span class="sxs-lookup"><span data-stu-id="232d6-341">[Connect Clients to a Database Mirroring Session &#40;SQL Server&#41;](connect-clients-to-a-database-mirroring-session-sql-server.md) </span></span>  
 <span data-ttu-id="232d6-342">[데이터베이스 미러링 모니터 서버](database-mirroring-witness.md) </span><span class="sxs-lookup"><span data-stu-id="232d6-342">[Database Mirroring Witness](database-mirroring-witness.md) </span></span>  
 <span data-ttu-id="232d6-343">[전체 데이터베이스 복원&#40;전체 복구 모델&#41;](../../relational-databases/backup-restore/complete-database-restores-full-recovery-model.md) </span><span class="sxs-lookup"><span data-stu-id="232d6-343">[Complete Database Restores &#40;Full Recovery Model&#41;](../../relational-databases/backup-restore/complete-database-restores-full-recovery-model.md) </span></span>  
 <span data-ttu-id="232d6-344">[데이터베이스 미러링 운영 모드](database-mirroring-operating-modes.md) </span><span class="sxs-lookup"><span data-stu-id="232d6-344">[Database Mirroring Operating Modes](database-mirroring-operating-modes.md) </span></span>  
 [<span data-ttu-id="232d6-345">미러링 상태&#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="232d6-345">Mirroring States &#40;SQL Server&#41;</span></span>](mirroring-states-sql-server.md)  
  
  
