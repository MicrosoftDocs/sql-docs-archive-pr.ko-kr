---
title: Kerberos 제한 위임에 대 한 Analysis Services 구성 | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
ms.assetid: 6d751477-6bf1-48b4-8833-5a631bbe7650
author: minewiskan
ms.author: owend
ms.openlocfilehash: 03b852acb4868cd384ef34948c6aff70541638a0
ms.sourcegitcommit: ad4d92dce894592a259721a1571b1d8736abacdb
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 08/04/2020
ms.locfileid: "87731224"
---
# <a name="configure-analysis-services-for-kerberos-constrained-delegation"></a><span data-ttu-id="ad77d-102">Kerberos 제한된 위임에 대해 Analysis Services 구성</span><span class="sxs-lookup"><span data-stu-id="ad77d-102">Configure Analysis Services for Kerberos constrained delegation</span></span>
  <span data-ttu-id="ad77d-103">Kerberos 인증에 대해 Analysis Services를 구성하는 경우 데이터를 쿼리할 때 Analysis Services에서 사용자 ID를 가장하도록 하거나 Analysis Services에서 하위 서비스에 사용자 ID를 위임하도록 하는 데 관심을 갖고 있을 가능성이 높습니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-103">When configuring Analysis Services for Kerberos authentication, you are most likely interested in achieving one or both of the following outcomes: having Analysis Services impersonate a user identity when querying data; or having Analysis Services delegate a user identity to a down-level service.</span></span> <span data-ttu-id="ad77d-104">각 시나리오에는 약간 다른 구성 요구 사항이 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-104">Each scenario calls for slightly different configuration requirements.</span></span> <span data-ttu-id="ad77d-105">두 시나리오에 공통적으로 필요한 것은 구성이 제대로 수행되었는지 확인하는 작업입니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-105">Both scenarios require verification to ensure configuration was done properly.</span></span>  
  
> [!TIP]  
>  <span data-ttu-id="ad77d-106">**[!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]용 [!INCLUDE[msCoName](../../includes/msconame-md.md)] Kerberos 구성 관리자**는 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]과의 Kerberos 관련 연결 문제를 해결하는 진단 도구입니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-106">**[!INCLUDE[msCoName](../../includes/msconame-md.md)] Kerberos Configuration Manager for [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]** is a diagnostic tool that helps troubleshoot Kerberos related connectivity issues with [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)].</span></span> <span data-ttu-id="ad77d-107">자세한 내용은 [SQL Server용 Microsoft Kerberos 구성 관리자](https://www.microsoft.com/download/details.aspx?id=39046)를 참조하십시오.</span><span class="sxs-lookup"><span data-stu-id="ad77d-107">For more information, see [Microsoft Kerberos Configuration Manager for SQL Server](https://www.microsoft.com/download/details.aspx?id=39046).</span></span>  
  
 <span data-ttu-id="ad77d-108">이 항목에는 다음과 같은 섹션이 포함되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-108">This topic contains the following sections:</span></span>  
  
-   [<span data-ttu-id="ad77d-109">Analysis  Services에서 사용자 ID를 가장할 수 있도록 허용</span><span class="sxs-lookup"><span data-stu-id="ad77d-109">Allow Analysis Services to impersonate a user identity</span></span>](#bkmk_impersonate)  
  
-   [<span data-ttu-id="ad77d-110">트러스트된 위임에 대해 Analysis  Services  구성</span><span class="sxs-lookup"><span data-stu-id="ad77d-110">Configure Analysis Services for trusted delegation</span></span>](#bkmk_delegate)  
  
-   [<span data-ttu-id="ad77d-111">가장된 ID  또는 위임된 ID에 대한 테스트</span><span class="sxs-lookup"><span data-stu-id="ad77d-111">Test for impersonated or delegated identity</span></span>](#bkmk_test)  
  
> [!NOTE]  
>  <span data-ttu-id="ad77d-112">위임은 Analysis  Services에 대한 연결이 단일 홉이거나 솔루션에서 SharePoint  Secure  Store  Service  또는 Reporting  Services가 제공하는 저장된 자격 증명을 사용하는 경우 필요하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-112">Delegation is not required if the connection to Analysis Services is a single hop, or your solution uses stored credentials provided by SharePoint Secure Store Service or Reporting Services.</span></span> <span data-ttu-id="ad77d-113">모든 연결이 Excel에서 Analysis Services 데이터베이스로의 직접 연결이거나 저장된 자격 증명을 기반으로 하는 경우, 제한된 위임을 구성할 필요 없이 Kerberos(또는 NTLM)를 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-113">If all connections are direct connections from Excel to an Analysis Services database, or based on stored credentials, you can use Kerberos (or NTLM) without having to configure constrained delegation.</span></span>  
>   
>  <span data-ttu-id="ad77d-114">사용자 id가 여러 컴퓨터 연결을 통해 이동 해야 하는 경우 ("이중 홉")에는 Kerberos 제한 위임이 필요 합니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-114">Kerberos constrained delegation is required if the user identity has to flow over multiple computer connections (known as "double-hop").</span></span> <span data-ttu-id="ad77d-115">Analysis  Services  데이터 액세스가 사용자 ID를 조건으로 하고 연결 요청이 위임하는 서비스에서 발생한 경우 다음 섹션의 검사 목록을 사용하여 Analysis  Services에서 원래 호출자를 가장할 수 있는지 확인하십시오.</span><span class="sxs-lookup"><span data-stu-id="ad77d-115">When Analysis Services data access is contingent upon user identity, and the connection request is from a delegating service, use the checklist in the next section to ensure that Analysis Services is able to impersonate the original caller.</span></span> <span data-ttu-id="ad77d-116">Analysis  Services  인증 흐름에 대한 자세한 내용은 [Microsoft  BI  인증 및 ID  위임](https://go.microsoft.com/fwlink/?LinkID=286576)을 참조하십시오.</span><span class="sxs-lookup"><span data-stu-id="ad77d-116">For more information about Analysis Services authentication flows, see [Microsoft BI Authentication and Identity Delegation](https://go.microsoft.com/fwlink/?LinkID=286576).</span></span>  
>   
>  <span data-ttu-id="ad77d-117">보안을 극대화하려면 비제한 위임보다 제한된 위임을 적용하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-117">As a security best practice, Microsoft always recommends constrained delegation over unconstrained delegation.</span></span> <span data-ttu-id="ad77d-118">제한된 위임을 통해 분명하게 정의된 서비스와 반대로, 비제한 위임은 서비스 ID가 *모든* 다운스트림 컴퓨터, 서비스 또는 애플리케이션에서 다른 사용자를 가장할 수 있기 때문에 중대한 보안 위험이 됩니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-118">Unconstrained delegation is a major security risk because it allows the service identity to impersonate another user on *any* downstream computer, service, or application (as opposed to just those services explicitly defined via constrained delegation).</span></span>  
  
##  <a name="allow-analysis-services-to-impersonate-a-user-identity"></a><a name="bkmk_impersonate"></a><span data-ttu-id="ad77d-119">Analysis Services에서 사용자 id를 가장할 수 있도록 허용</span><span class="sxs-lookup"><span data-stu-id="ad77d-119">Allow Analysis Services to impersonate a user identity</span></span>  
 <span data-ttu-id="ad77d-120">Reporting  Services,  IIS  또는 SharePoint와 같은 상위 서비스가 Analysis  Services에서 사용자 ID를 가장할 수 있도록 허용하려면 해당 서비스에 대한 Kerberos  제한 위임을 구성해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-120">To allow up-level services such as Reporting Services, IIS, or SharePoint to impersonate a user identity on Analysis Services, you must configure Kerberos constrained delegation for those services.</span></span> <span data-ttu-id="ad77d-121">이 시나리오에서 Analysis  Services는 위임하는 서비스에서 제공하는 ID를 사용하여 현재 사용자를 가장하고 사용자 ID의 역할 멤버 자격을 기반으로 결과를 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-121">In this scenario, Analysis Services impersonates the current user using the identity provided by the delegating service, returning results based on role membership of that user identity.</span></span>  
  
|<span data-ttu-id="ad77d-122">Task</span><span class="sxs-lookup"><span data-stu-id="ad77d-122">Task</span></span>|<span data-ttu-id="ad77d-123">설명</span><span class="sxs-lookup"><span data-stu-id="ad77d-123">Description</span></span>|  
|----------|-----------------|  
|<span data-ttu-id="ad77d-124">1단계: 계정이 위임에 적합한지 확인</span><span class="sxs-lookup"><span data-stu-id="ad77d-124">Step 1: Verify that accounts are suitable for delegation</span></span>|<span data-ttu-id="ad77d-125">서비스를 실행하는 데 사용되는 계정이 Active  Directory에서 올바른 속성을 갖고 있는지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-125">Ensure that the accounts used to run the services have the correct properties in Active Directory.</span></span> <span data-ttu-id="ad77d-126">Active  Directory의 서비스 계정은 중요한 계정으로 표시되지 않거나 위임 시나리오에서 특정하게 제외되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-126">Service accounts in Active Directory must not be marked as sensitive accounts, or specifically excluded from delegation scenarios.</span></span> <span data-ttu-id="ad77d-127">자세한 내용은 [사용자 계정 이해](https://go.microsoft.com/fwlink/?LinkId=235818)를 참조하십시오.</span><span class="sxs-lookup"><span data-stu-id="ad77d-127">For more information, see [Understanding User Accounts](https://go.microsoft.com/fwlink/?LinkId=235818).</span></span><br /><br /> <span data-ttu-id="ad77d-128">중요 일반적으로 모든 계정 및 서버는 동일한 Active Directory 도메인 또는 동일한 포리스트의 트러스트 된 도메인에 속해야 합니다. \*\* \* \* \* \* \*\*</span><span class="sxs-lookup"><span data-stu-id="ad77d-128">**\*\* Important \*\*** Generally, all accounts and servers must belong to the same Active Directory domain or to trusted domains in the same forest.</span></span> <span data-ttu-id="ad77d-129">그러나 Windows Server 2012에서는 도메인 경계를 넘어 위임을 지원하므로 도메인 기능 수준이 Windows Server 2012인 경우 도메인 경계를 넘어 Kerberos 제한 위임을 구성할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-129">However, because Windows Server 2012 supports delegation across domain boundaries, you can configure Kerberos constrained delegation across a domain boundary if the domain functional level is Windows Server 2012.</span></span> <span data-ttu-id="ad77d-130">또는 HTTP 액세스를 위해 Analysis Services를 구성하고 클라이언트 연결에서 IIS 인증 방법을 사용할 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-130">Another alternative is to configure Analysis Services for HTTP access and use IIS authentication methods on the client connection.</span></span> <span data-ttu-id="ad77d-131">자세한 내용은 [IIS&#40;인터넷 정보 서비스&#41; 8.0에서 Analysis Services에 대한 HTTP 액세스 구성](configure-http-access-to-analysis-services-on-iis-8-0.md)을 참조하십시오.</span><span class="sxs-lookup"><span data-stu-id="ad77d-131">For more information, see [Configure HTTP Access to Analysis Services on Internet Information Services &#40;IIS&#41; 8.0](configure-http-access-to-analysis-services-on-iis-8-0.md).</span></span>|  
|<span data-ttu-id="ad77d-132">2단계: SPN  등록</span><span class="sxs-lookup"><span data-stu-id="ad77d-132">Step 2: Register the SPN</span></span>|<span data-ttu-id="ad77d-133">제한된 위임을 설정하기 전에 Analysis  Services  인스턴스에 대한 SPN(서비스 사용자 이름)을 등록해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-133">Before setting up constrained delegation, you must register a Service Principle Name (SPN) for the Analysis Services instance.</span></span> <span data-ttu-id="ad77d-134">중간 계층 서비스에 대한 Kerberos  제한 위임을 구성할 때 Analysis  Services  SPN이 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-134">You will need the Analysis Services SPN when configuring Kerberos constrained delegation for middle tier services.</span></span> <span data-ttu-id="ad77d-135">방법을 보려면 [SPN registration for an Analysis Services instance](spn-registration-for-an-analysis-services-instance.md) 을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="ad77d-135">See [SPN registration for an Analysis Services instance](spn-registration-for-an-analysis-services-instance.md) for instructions.</span></span><br /><br /> <span data-ttu-id="ad77d-136">SPN(서비스 사용자 이름)은 Kerberos  인증에 대해 구성된 도메인의 서비스에 대한 고유 ID를 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-136">A Service Principle Name (SPN) specifies the unique identity of a service in a domain configured for Kerberos authentication.</span></span> <span data-ttu-id="ad77d-137">통합 보안을 사용하는 클라이언트 연결은 일반적으로 SPN을 SSPI  인증의 일부로 요청합니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-137">Client connections using integrated security often request an SPN as part of SSPI authentication.</span></span> <span data-ttu-id="ad77d-138">요청은 Active  Directory  DC(도메인 컨트롤러)로 전달되고 KDC는 클라이언트가 제공하는 SPN이 Active  Directory의 SPN  등록과 일치하는 경우 티켓을 부여합니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-138">The request is forwarded to an Active Directory Domain Controller (DC), with the KDC granting a ticket if the SPN presented by the client has a matching SPN registration in Active Directory.</span></span>|  
|<span data-ttu-id="ad77d-139">3단계: 제한된 위임 구성</span><span class="sxs-lookup"><span data-stu-id="ad77d-139">Step 3: Configure constrained delegation</span></span>|<span data-ttu-id="ad77d-140">사용하려는 계정의 유효성을 검사하고 해당 계정에 대한 SPN을 등록한 후에는 IIS,  Reporting  Services  또는 SharePoint  웹 서비스와 같은 상위 서비스를 제한된 위임에 대해 구성하고 Analysis  Services  SPN을 위임이 허용되는 특정 서비스로 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-140">After validating the accounts you want to use and registering SPNs for those accounts, your next step is to configure up-level services, such as IIS, Reporting Services, or SharePoint web services for constrained delegation, specifying the Analysis Services SPN as the specific service for which delegation is allowed.</span></span><br /><br /> <span data-ttu-id="ad77d-141">SharePoint  모드의 Reporting  Services  또는 Excel  Services와 같이 SharePoint에서 실행되는 서비스는 Analysis  Services  다차원 또는 표 형식 데이터를 소비하는 통합 문서와 보고서를 호스팅하는 경우가 많습니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-141">Services that run in SharePoint, such as Excel Services or Reporting Services in SharePoint mode, often host workbooks and reports that consume Analysis Services multidimensional or tabular data.</span></span> <span data-ttu-id="ad77d-142">이러한 서비스에 대한 제한된 위임 구성은 일반적인 구성 태스크이며 Excel  Services에서 데이터 새로 고침을 지원하는 데 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-142">Configuring constrained delegation for these services is a common configuration task, and necessary for supporting data refresh from Excel Services.</span></span> <span data-ttu-id="ad77d-143">다음 링크에서는 SharePoint  서비스는 물론,  Analysis  Services  데이터에 대한 다운스트림 데이터 연결을 요청할 가능성이 있는 다른 서비스에 대한 지침을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-143">The following links provide instructions for SharePoint services, as well as other services likely to present a downstream data connection request for Analysis Services data:</span></span><br /><br /> <span data-ttu-id="ad77d-144">[Excel Services용 ID 위임(SharePoint Server 2010)](https://go.microsoft.com/fwlink/?LinkId=299826) 또는 [SharePoint Server 2010에서 Kerberos 인증에 대해 Excel Services를 구성하는 방법](https://support.microsoft.com/kb/2466519)</span><span class="sxs-lookup"><span data-stu-id="ad77d-144">[Identity delegation for Excel Services (SharePoint Server 2010)](https://go.microsoft.com/fwlink/?LinkId=299826) or [How to configure Excel Services in SharePoint Server 2010 for Kerberos authentication](https://support.microsoft.com/kb/2466519)</span></span><br /><br /> [<span data-ttu-id="ad77d-145">PerformancePoint  Services용 ID  위임(SharePoint  Server  2010)</span><span class="sxs-lookup"><span data-stu-id="ad77d-145">Identity delegation for PerformancePoint Services (SharePoint Server 2010)</span></span>](https://go.microsoft.com/fwlink/?LinkId=299827)<br /><br /> [<span data-ttu-id="ad77d-146">SQL  Server  Reporting  Services용 ID  위임(SharePoint  Server  2010)</span><span class="sxs-lookup"><span data-stu-id="ad77d-146">Identity delegation for SQL Server Reporting Services (SharePoint Server 2010)</span></span>](https://go.microsoft.com/fwlink/?LinkId=299828)<br /><br /> <span data-ttu-id="ad77d-147">IIS 7.0에 대한 자세한 내용은 [Windows 인증 구성(IIS 7.0)](https://technet.microsoft.com/library/cc754628\(v=ws.10\).aspx) 또는 [Kerberos 인증을 사용하도록 SQL Server 2008 Analysis Services 및 SQL Server 2005 Analysis Services를 구성하는 방법](https://support.microsoft.com/kb/917409)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="ad77d-147">For IIS 7.0 see [Configure Windows Authentication (IIS 7.0)](https://technet.microsoft.com/library/cc754628\(v=ws.10\).aspx) or [How to configure SQL Server 2008 Analysis Services and SQL Server 2005 Analysis Services to use Kerberos authentication](https://support.microsoft.com/kb/917409).</span></span>|  
|<span data-ttu-id="ad77d-148">4단계: 연결 테스트</span><span class="sxs-lookup"><span data-stu-id="ad77d-148">Step 4: Test connections</span></span>|<span data-ttu-id="ad77d-149">테스트할 때 서로 다른 ID로 원격 컴퓨터에서 연결하고 업무용 사용자와 동일한 애플리케이션을 사용하여 Analysis Services를 쿼리하십시오.</span><span class="sxs-lookup"><span data-stu-id="ad77d-149">When testing, connect from remote computers, under different identities, and query Analysis Services using the same applications as business users.</span></span> <span data-ttu-id="ad77d-150">SQL Server Profiler를 사용하여 연결을 모니터링할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-150">You can use SQL Server Profiler to monitor the connection.</span></span> <span data-ttu-id="ad77d-151">요청에 대한 사용자 ID가 표시되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-151">You should see the user identity on the request.</span></span> <span data-ttu-id="ad77d-152">자세한 내용은 이 섹션의 [가장된 ID  또는 위임된 ID에 대한 테스트](#bkmk_test) 를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="ad77d-152">For more information, see [Test for impersonated or delegated identity](#bkmk_test) in this section.</span></span>|  
  
##  <a name="configure-analysis-services-for-trusted-delegation"></a><a name="bkmk_delegate"></a><span data-ttu-id="ad77d-153">트러스트 된 위임에 대 한 Analysis Services 구성</span><span class="sxs-lookup"><span data-stu-id="ad77d-153">Configure Analysis Services for trusted delegation</span></span>  
 <span data-ttu-id="ad77d-154">Kerberos  제한 위임에 대해 Analysis  Services를 구성하면 Analysis  Services에서 관계형 데이터베이스 엔진과 같은 하위 서비스에 대해 클라이언트 ID를 가장할 수 있으므로 클라이언트가 직접 연결된 것처럼 데이터를 쿼리할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-154">Configuring Analysis Services for Kerberos constrained delegation allows the service to impersonate a client identity on a down-level service, such as the relational database engine, so that data can be queried as if the client was connected directly.</span></span>  
  
 <span data-ttu-id="ad77d-155">Analysis  Services에 대한 위임 시나리오는 `DirectQuery` 모드에 대해 구성된 테이블 형식 모델로 제한됩니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-155">Delegation scenarios for Analysis Services are limited to tabular models configured for `DirectQuery` mode.</span></span> <span data-ttu-id="ad77d-156">Analysis  Services에서 다른 서비스로 위임된 자격 증명을 전달할 수 있는 시나리오는 이 경우뿐입니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-156">This is the only scenario in which Analysis Services can pass delegated credentials to another service.</span></span> <span data-ttu-id="ad77d-157">이전 섹션에서 언급한 SharePoint 시나리오처럼, 다른 모든 시나리오에서 Analysis Services는 위임 체인의 수신측에 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-157">In all other scenarios, such as SharePoint scenarios mentioned in the previous section, Analysis Services is on the receiving end of the delegation chain.</span></span> <span data-ttu-id="ad77d-158">DirectQuery에 대한 자세한 내용은 [DirectQuery 모드&#40;SSAS 테이블 형식&#41;](../tabular-models/directquery-mode-ssas-tabular.md)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="ad77d-158">For more information about DirectQuery, see [DirectQuery Mode &#40;SSAS Tabular&#41;](../tabular-models/directquery-mode-ssas-tabular.md).</span></span>  
  
> [!NOTE]  
>  <span data-ttu-id="ad77d-159">ROLAP 스토리지, 처리 작업 또는 원격 파티션에 대한 액세스는 제한된 위임이 필요하다고 잘못 생각하는 경우가 흔하지만</span><span class="sxs-lookup"><span data-stu-id="ad77d-159">A common misconception is that ROLAP storage, processing operations, or access to remote partitions somehow introduce requirements for constrained delegation.</span></span> <span data-ttu-id="ad77d-160">그렇지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-160">This is not the case.</span></span> <span data-ttu-id="ad77d-161">이러한 작업은 모두 서비스 계정(처리 계정)에서 직접 실행됩니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-161">All of these operations are executed directly by the service account (also referred to as the processing account), on its own behalf.</span></span> <span data-ttu-id="ad77d-162">이러한 작업에 대한 권한을 서비스 계정으로 직접 제공하는 경우(예: 서비스에서 데이터를 처리할 수 있도록 관계형 데이터베이스의 granting db_datareader 권한 부여), Analysis Services에서 이러한 작업에 대해 위임이 필요하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-162">Delegation is not required for these operations in Analysis Services, given that permissions for such operations are granted directly to the service account (for example, granting db_datareader permissions on the relational database so that the service can process data).</span></span> <span data-ttu-id="ad77d-163">서버 작업 및 사용 권한에 대한 자세한 내용은 [서비스 계정 구성&#40;Analysis Services&#41;](configure-service-accounts-analysis-services.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="ad77d-163">For more information about server operations and permissions, see [Configure Service Accounts &#40;Analysis Services&#41;](configure-service-accounts-analysis-services.md).</span></span>  
  
 <span data-ttu-id="ad77d-164">이 섹션에서는 트러스트된 위임에 대해 Analysis  Services를 설정하는 방법에 대해 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-164">This section explains how to set up Analysis Services for trusted delegation.</span></span> <span data-ttu-id="ad77d-165">이 작업을 완료한 후 테이블 형식 솔루션에서 사용되는 DirectQuery 모드를 지원하여, Analysis Services는 위임된 자격 증명을 SQL Server로 전달할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-165">After you complete this task, Analysis Services will be able to pass delegated credentials to SQL Server, in support of DirectQuery mode used in Tabular solutions.</span></span>  
  
 <span data-ttu-id="ad77d-166">시작하기 전에</span><span class="sxs-lookup"><span data-stu-id="ad77d-166">Before you start:</span></span>  
  
-   <span data-ttu-id="ad77d-167">Analysis  Services가 시작되었는지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-167">Verify that Analysis Services is started.</span></span>  
  
-   <span data-ttu-id="ad77d-168">Analysis  Services에 대해 등록된 SPN이 올바른지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-168">Verify the SPN registered for Analysis Services is valid.</span></span> <span data-ttu-id="ad77d-169">자세한 내용은 [SPN registration for an Analysis Services instance](spn-registration-for-an-analysis-services-instance.md)을 참조하십시오.</span><span class="sxs-lookup"><span data-stu-id="ad77d-169">For instructions, see [SPN registration for an Analysis Services instance](spn-registration-for-an-analysis-services-instance.md)</span></span>  
  
 <span data-ttu-id="ad77d-170">두 전제 조건이 충족되었으면 다음 단계를 계속 수행합니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-170">When both prerequisites are satisfied, continue with the following steps.</span></span> <span data-ttu-id="ad77d-171">제한된 위임을 설정하려면 도메인 관리자여야 합니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-171">Note that you must be a domain administrator to set up constrained delegation.</span></span>  
  
1.  <span data-ttu-id="ad77d-172">Active  Directory  사용자 및 컴퓨터에서 Analysis  Services가 실행되는 서비스 계정을 찾습니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-172">In Active Directory Users and Computers, find the service account under which Analysis Services runs.</span></span> <span data-ttu-id="ad77d-173">서비스 계정을 마우스 오른쪽 단추로 클릭하고 **속성**을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-173">Right-click the service account and choose **Properties**.</span></span>  
  
     <span data-ttu-id="ad77d-174">설명을 위해 다음 스크린샷에서는 OlapSvc와 SQLSvc를 사용하여 Analysis  Services와 SQL  Server를 각각 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-174">For illustrative purposes, the following screenshots use OlapSvc and SQLSvc to represent Analysis Services and SQL Server, respectively.</span></span>  
  
     <span data-ttu-id="ad77d-175">OlapSvc는 SQLSvc로의 제한된 위임에 대해 구성될 계정입니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-175">OlapSvc is the account that will be configured for constrained delegation to SQLSvc.</span></span> <span data-ttu-id="ad77d-176">이 작업을 완료하면 OlapSvc가 서비스 티켓의 위임된 자격 증명을 SQLSvc로 전달할 수 있는 권한을 갖게 되며 데이터를 요청할 때 원래 호출자를 가장합니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-176">When you complete this task, OlapSvc will have permission to pass delegated credentials on a service ticket to SQLSvc, impersonating the original caller when requesting data.</span></span>  
  
2.  <span data-ttu-id="ad77d-177">위임 탭에서 **지정한 서비스에 대한 위임용으로만 이 사용자 트러스트**를 선택하고 **Kerberos만 사용**을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-177">On the Delegation tab, select **Trust this user for delegation to specified services only**, followed by **Use Kerberos only**.</span></span> <span data-ttu-id="ad77d-178">**추가** 를 클릭하여 Analysis  Services에서 자격 증명을 위임할 수 있는 서비스를 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-178">Click **Add** to specify which service Analysis Services is permitted to delegate credentials.</span></span>  
  
     <span data-ttu-id="ad77d-179">위임 탭은 사용자 계정(OlapSvc)이 서비스(Analysis  Services)에 할당되고 서비스에 대한 SPN이 등록된 경우에만 나타납니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-179">Delegation tab appears only when the user account (OlapSvc) is assigned to a service (Analysis Services), and the service has an SPN registered for it.</span></span> <span data-ttu-id="ad77d-180">SPN을 등록하려면 서비스가 실행 중이어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-180">SPN registration requires that the service is running.</span></span>  
  
     <span data-ttu-id="ad77d-181">![SSAS_Kerberos_1_AccountProperties](../media/ssas-kerberos-1-accountproperties.gif "SSAS_Kerberos_1_AccountProperties")</span><span class="sxs-lookup"><span data-stu-id="ad77d-181">![SSAS_Kerberos_1_AccountProperties](../media/ssas-kerberos-1-accountproperties.gif "SSAS_Kerberos_1_AccountProperties")</span></span>  
  
3.  <span data-ttu-id="ad77d-182">서비스 추가 페이지에서 **사용자 또는 컴퓨터**를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-182">On the Add Services page, click **Users or Computers**.</span></span>  
  
     <span data-ttu-id="ad77d-183">![SSAS_Kerberos_2_](../media/ssas-kerberos-2.gif "SSAS_Kerberos_2_")</span><span class="sxs-lookup"><span data-stu-id="ad77d-183">![SSAS_Kerberos_2_](../media/ssas-kerberos-2.gif "SSAS_Kerberos_2_")</span></span>  
  
4.  <span data-ttu-id="ad77d-184">사용자 또는 컴퓨터 선택 페이지에서 Analysis  Services  테이블 형식 model 데이터베이스에 데이터를 제공하는 SQL  Server  인스턴스를 실행하는 데 사용되는 계정을 입력합니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-184">On the Select Users or Computer page, enter the account used to run the SQL Server instance providing data to Analysis Services tabular model databases.</span></span> <span data-ttu-id="ad77d-185">**확인** 을 클릭하여 서비스 계정을 적용합니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-185">Click **OK** to accept the service account.</span></span>  
  
     <span data-ttu-id="ad77d-186">원하는 계정을 선택할 수 없는 경우 SQL  Server가 실행 중이고 해당 계정에 대한 SPN이 등록되어 있는지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-186">If you cannot select the account you want, verify that SQL Server is running and has an SPN registered for that account.</span></span> <span data-ttu-id="ad77d-187">데이터베이스 엔진의 SPN에 대한 자세한 내용은 [Register a Service Principal Name for Kerberos Connections](../../database-engine/configure-windows/register-a-service-principal-name-for-kerberos-connections.md)을 참조하십시오.</span><span class="sxs-lookup"><span data-stu-id="ad77d-187">For more information about SPNs for the database engine, see [Register a Service Principal Name for Kerberos Connections](../../database-engine/configure-windows/register-a-service-principal-name-for-kerberos-connections.md).</span></span>  
  
     <span data-ttu-id="ad77d-188">![SSAS_Kerberos_3_SelectUsers](../media/ssas-kerberos-3-selectusers.gif "SSAS_Kerberos_3_SelectUsers")</span><span class="sxs-lookup"><span data-stu-id="ad77d-188">![SSAS_Kerberos_3_SelectUsers](../media/ssas-kerberos-3-selectusers.gif "SSAS_Kerberos_3_SelectUsers")</span></span>  
  
5.  <span data-ttu-id="ad77d-189">이제 SQL  Server  인스턴스가 서비스 추가에 나타납니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-189">The SQL Server instance should now appear in Add Services.</span></span> <span data-ttu-id="ad77d-190">해당 계정을 사용하는 모든 서비스도 목록에 나타납니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-190">Any service also using that account will also appear in the list.</span></span> <span data-ttu-id="ad77d-191">사용할 SQL  Server  인스턴스를 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-191">Choose the SQL Server instance you want to use.</span></span> <span data-ttu-id="ad77d-192">**확인** 을 클릭하여 인스턴스를 적용합니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-192">Click **OK** to accept the instance.</span></span>  
  
     <span data-ttu-id="ad77d-193">![SSAS_Kerberos_4_](../media/ssas-kerberos-4.gif "SSAS_Kerberos_4_")</span><span class="sxs-lookup"><span data-stu-id="ad77d-193">![SSAS_Kerberos_4_](../media/ssas-kerberos-4.gif "SSAS_Kerberos_4_")</span></span>  
  
6.  <span data-ttu-id="ad77d-194">이제 Analysis  Services  서비스 계정의 속성 페이지는 다음 스크린샷과 유사합니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-194">The properties page of the Analysis Services service account should now look similar to the following screenshot.</span></span> <span data-ttu-id="ad77d-195">**확인**을 클릭하여 변경 내용을 저장합니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-195">Click **OK** to save your changes.</span></span>  
  
     <span data-ttu-id="ad77d-196">![SSAS_Kerberos_5_Finished](../media/ssas-kerberos-5-finished.gif "SSAS_Kerberos_5_Finished")</span><span class="sxs-lookup"><span data-stu-id="ad77d-196">![SSAS_Kerberos_5_Finished](../media/ssas-kerberos-5-finished.gif "SSAS_Kerberos_5_Finished")</span></span>  
  
7.  <span data-ttu-id="ad77d-197">다른 ID로 원격 클라이언트 컴퓨터에서 연결하여 성공적인 위임에 대해 테스트하고 테이블 형식 모델을 쿼리합니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-197">Test for successful delegation by connecting from a remote client computer, under a different identity, and query the tabular model.</span></span> <span data-ttu-id="ad77d-198">SQL  Server  Profiler에서 요청에 대한 사용자 ID가 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-198">You should see the user identity on the request in SQL Server Profiler.</span></span>  
  
##  <a name="test-for-impersonated-or-delegated-identity"></a><a name="bkmk_test"></a><span data-ttu-id="ad77d-199">가장 된 id 또는 위임 된 id 테스트</span><span class="sxs-lookup"><span data-stu-id="ad77d-199">Test for impersonated or delegated identity</span></span>  
 <span data-ttu-id="ad77d-200">SQL  Server  Profiler를 사용하여 데이터를 쿼리하는 사용자의 ID를 모니터링할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-200">Use SQL Server Profiler to monitor the identity of the user who is querying data.</span></span>  
  
1.  <span data-ttu-id="ad77d-201">Analysis Services 인스턴스에서 **SQL Server Profiler** 를 시작한 다음 새 추적을 시작합니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-201">Start **SQL Server Profiler** on the Analysis Services instance and then start a new trace.</span></span>  
  
2.  <span data-ttu-id="ad77d-202">이벤트 선택에서 `Audit Login` 및 `Audit Logout`이 보안 감사 섹션에서 선택되었는지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-202">In Events Selection, verify that `Audit Login` and `Audit Logout` are checked in the Security Audit section.</span></span>  
  
3.  <span data-ttu-id="ad77d-203">원격 클라이언트 컴퓨터에서 애플리케이션 서비스(예: SharePoint 또는 Reporting Services)를 통해 Analysis Services에 연결합니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-203">Connect to Analysis Services via an application service (such as SharePoint or Reporting Services) from a remote client computer.</span></span> <span data-ttu-id="ad77d-204">Audit Login 이벤트는 Analysis Services에 연결하는 사용자의 ID를 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-204">The Audit Login event will show the identity of the user connecting to Analysis Services.</span></span>  
  
 <span data-ttu-id="ad77d-205">철저하게 테스트하려면 네트워크에서 Kerberos  요청 및 응답을 캡처할 수 있는 네트워크 모니터링 도구를 사용해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-205">Thorough testing will require the use of network monitoring tools that can capture Kerberos requests and responses on the network.</span></span> <span data-ttu-id="ad77d-206">Kerberos에 대해 필터링된 네트워크 모니터 유틸리티(netmon.exe)가 이 작업에 사용될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-206">The Network Monitor utility (netmon.exe), filtered for Kerberos, can be used for this task.</span></span> <span data-ttu-id="ad77d-207">Netmon 3.4 및 기타 도구를 사용하여 Kerberos 인증을 테스트하는 방법에 대한 자세한 내용은 [Kerberos 인증 구성: 핵심 구성(SharePoint Server 2010)](https://technet.microsoft.com/library/gg502602\(v=office.14\).aspx)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="ad77d-207">For more information about using Netmon 3.4 and other tools for testing Kerberos authentication, see [Configuring Kerberos authentication: Core configuration (SharePoint Server 2010)](https://technet.microsoft.com/library/gg502602\(v=office.14\).aspx).</span></span>  
  
 <span data-ttu-id="ad77d-208">그리고 Active Directory 개체 속성 대화 상자에서 위임 탭의 각 옵션에 대한 자세한 설명은 [Active Directory에서 가장 많이 혼동하는 대화 상자](https://www.itprotoday.com/active-directory/most-confusing-dialog-box-active-directory) (영문)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="ad77d-208">Additionally, see [The Most Confusing Dialog Box in Active Directory](https://www.itprotoday.com/active-directory/most-confusing-dialog-box-active-directory) for a thorough description of each option in the Delegation tab of the Active Directory object's property dialog box.</span></span> <span data-ttu-id="ad77d-209">이 문서에는 LDP를 사용하여 테스트하고 테스트 결과를 해석하는 방법도 설명되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ad77d-209">This article also explains how to use LDP to test and interpret test results.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="ad77d-210">참고 항목</span><span class="sxs-lookup"><span data-stu-id="ad77d-210">See Also</span></span>  
 <span data-ttu-id="ad77d-211">[Microsoft BI 인증 및 Id 위임](https://go.microsoft.com/fwlink/?LinkID=286576) </span><span class="sxs-lookup"><span data-stu-id="ad77d-211">[Microsoft BI Authentication and Identity Delegation](https://go.microsoft.com/fwlink/?LinkID=286576) </span></span>  
 <span data-ttu-id="ad77d-212">[Kerberos를 사용한 상호 인증](https://go.microsoft.com/fwlink/?LinkId=299283) </span><span class="sxs-lookup"><span data-stu-id="ad77d-212">[Mutual Authentication Using Kerberos](https://go.microsoft.com/fwlink/?LinkId=299283) </span></span>  
 <span data-ttu-id="ad77d-213">[Analysis Services에 연결](connect-to-analysis-services.md) </span><span class="sxs-lookup"><span data-stu-id="ad77d-213">[Connect to Analysis Services](connect-to-analysis-services.md) </span></span>  
 <span data-ttu-id="ad77d-214">[Analysis Services 인스턴스에 대 한 SPN 등록](spn-registration-for-an-analysis-services-instance.md) </span><span class="sxs-lookup"><span data-stu-id="ad77d-214">[SPN registration for an Analysis Services instance](spn-registration-for-an-analysis-services-instance.md) </span></span>  
 [<span data-ttu-id="ad77d-215">연결 문자열 속성&#40;Analysis Services&#41;</span><span class="sxs-lookup"><span data-stu-id="ad77d-215">Connection String Properties &#40;Analysis Services&#41;</span></span>](connection-string-properties-analysis-services.md)  
  
  
